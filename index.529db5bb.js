!function(e,r,t,o,n){var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s="function"==typeof a[o]&&a[o],i=s.cache||{},c="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function d(r,t){if(!i[r]){if(!e[r]){var n="function"==typeof a[o]&&a[o];if(!t&&n)return n(r,!0);if(s)return s(r,!0);if(c&&"string"==typeof r)return c(r);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}u.resolve=function(t){var o=e[r][1][t];return null!=o?o:t},u.cache={};var p=i[r]=new d.Module(r);e[r][0].call(p.exports,u,p,p.exports,this)}return i[r].exports;function u(e){var r=u.resolve(e);return!1===r?{}:d(r)}}d.isParcelRequire=!0,d.Module=function(e){this.id=e,this.bundle=d,this.exports={}},d.modules=e,d.cache=i,d.parent=s,d.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]},Object.defineProperty(d,"root",{get:function(){return a[o]}}),a[o]=d;for(var l=0;l<r.length;l++)d(r[l]);if(t){var p=d(t);"object"==typeof exports&&"undefined"!=typeof module?module.exports=p:"function"==typeof define&&define.amd&&define((function(){return p}))}}({"2JcSZ":[function(e,r,t){e("88d83a0b35995bd1").register(JSON.parse('{"in46u":"index.529db5bb.js","h8BSG":"background1.7394573d.mp3","h9c4J":"ambient.dfa63f75.mp3","3RPKG":"Book_Flip-001.33d47f53.mp3","hVU0N":"Book_Flip-002.dca39666.mp3","8LCc0":"Book_Flip-003.4bc4545c.mp3","1Usm5":"Book_Flip-004.fd57b616.mp3","dHxQj":"Card_Flip_01.84539318.mp3","bJRM9":"Card_Flip_02.814259bc.mp3","e8Owl":"Card_Flip_03.f042141b.mp3","8QL2q":"Card_Flip_Timed_01.051cebe4.mp3","4Lahy":"Card_Flip_Timed_02.a8a740cf.mp3","eGXdE":"Cards_Flip_Extra.02d2a384.mp3","ixjqv":"Cards_Exit-001.a725870b.mp3","5n4Sl":"Cards_Exit-002.29b46a78.mp3","ek2S3":"Card_Placement_01.8c45f45f.mp3","i47Iw":"Card_Placement_02.a830de1d.mp3","78wPR":"Card_Placement_03.afc94b70.mp3","fK5Xr":"Card_Placement_04.75644a5d.mp3","45evC":"Monster Damage.c8ea0f08.mp3","l01Qe":"Victory Sound.fa18f6ea.mp3","dJgsx":"UI_Menu_Select.d2079754.mp3","h7UC0":"UI_Menu_Navigation-001.6c0d4e9b.mp3","3q6QH":"UI_Menu_Navigation-002.f1f63ddd.mp3","afyPI":"UI_Menu_Navigation-003.28fff371.mp3","eNCxC":"index.c2be314b.css"}'))},{"88d83a0b35995bd1":"fyJL2"}],fyJL2:[function(e,r,t){"use strict";var o={};r.exports.register=function(e){for(var r=Object.keys(e),t=0;t<r.length;t++)o[r[t]]=e[r[t]]},r.exports.resolve=function(e){var r=o[e];if(null==r)throw new Error("Could not resolve bundle with id "+e);return r}},{}],"4zTVb":[function(e,r,t){var o=e("solid-js/web"),n=e("components/table/create"),a=e("components/table/table_controller"),s=e("components/book/create"),i=e("components/card_slot/create"),c=e("components/card/create"),d=e("components/page/create"),l=e("data/initial"),p=e("rules/interaction_manager"),u=e("components/drag/create"),f=e("rules/game_manager"),m=e("components/deck/create"),g=e("components/status/create"),y=e("components/encounter/battle/create"),h=e("rules/games"),b=e("solid-js"),v=e("model/domain"),C=e("components/navigation_target"),_=e("base/unreachable_error"),T=e("components/encounter/event/create"),k=e("components/encounter/create"),x=e("ui/speaker/rendering_speaker"),w=e("ui/speaker/speech_synthesis_word_splitter"),F=e("ui/speaker/delay_word_splitter"),D=e("ui/speaker/polite_speaker"),j=e("ui/sounds/sound_manager"),S=e("base/delay");window.onload=function(){const e=new(0,j.SoundManager),r=new(0,w.SpeechSynthesisWordSplitter)(window.speechSynthesis,new(0,F.DelayWordSplitter)),t=new(0,x.RenderingSpeaker)(r),M=new(0,D.PoliteSpeaker)(t),B=document.getElementById("app"),A=l.initialGame,P=(0,c.createCardManager)(A,e),I=async r=>{switch(r.type){case C.NavigationTargetType.ToC:return A.playerHand.forEach((e=>{e.targetCard=void 0,e.playedCards=[]})),A.book.cardSlots=[],await $.setView(a.View.TopDown),G.showSpread(v.bookSpreadTableOfContentsDescriptor.create({type:v.BookSpreadType.TableOfContents,unlockedChapters:1}),!0);case C.NavigationTargetType.Chapter:return e.playBackgroundTrack(j.BackgroundTrack.Music),await $.setView(a.View.Tilted),Y.maybeCreatePlayer(),Y.createChapter(r.chapterIndex),Y.nextPage(void 0,void 0);case C.NavigationTargetType.Death:return e.playBackgroundTrack(j.BackgroundTrack.Ambient),await G.showSpread(v.bookSpreadDeathDescriptor.create({type:v.BookSpreadType.Death})),$.setView(a.View.TopDown);default:throw new(0,_.UnreachableError)(r)}},E=(0,d.createPageManager)((r=>{e.playEffect(j.SoundEffect.UISelect),I(r)}),(()=>e.playEffect(j.SoundEffect.UINavigate)),A),R=(0,i.createCardSlotManager)(P.FactoryComponent,(()=>X),A),{Component:L}=(0,i.createCardSlots)(R.FactoryComponent),H=(0,g.createStatusOverlay)(),{Component:U,controller:G}=(0,s.createBook)({pageComponentManager:E,book:A.book,soundManager:e}),{Component:O,controller:$}=(0,n.createTable)(),N=(0,y.createEncounterBattleManger)(),V=(0,T.createEncounterEventManger)(),z=(0,k.createEncounter)(N,V),Y=new(0,f.GameManager)(M,e,A,I,$,G,P,R,N,V),X=new(0,p.InteractionManager)(A,Y,P,R);window.addEventListener("pointermove",(e=>{X.dragging&&(X.lastMousePosition=[e.clientX,e.clientY])})),window.addEventListener("mousemove",(e=>{const r=2*(e.clientX-window.innerWidth/2)/window.innerWidth,t=2*(e.clientY-window.innerHeight/2)/window.innerHeight;$.look(Math.pow(r,3)/2,Math.pow(t,3)/2)}));const{Component:W}=(0,m.createDeck)((()=>A.playerCharacter?.deck),P.FactoryComponent);function q(){return(0,o.createComponent)(L,{get model(){return A.playerHand}})}function Q(){return(0,o.memo)((()=>{const e=(0,o.memo)((()=>!!A.book.spread));return()=>e()&&(0,o.createComponent)(L,{get model(){return A.book.cardSlots}})})())}const{Component:J}=(0,u.createDragOverlay)(X,P.FactoryComponent);function Z(){const e=(0,b.createMemo)((()=>(0,h.gameEncounterBattle)(A)||(0,h.gameEncounterEvent)(A)));return(0,o.createComponent)(U,{get children(){return(0,o.memo)((()=>!!e()))()&&(0,o.createComponent)(z,{get model(){return e()}})}})}function K(){return(0,o.memo)((()=>{const e=(0,o.memo)((()=>!!A.playerCharacter));return()=>e()&&(0,o.createComponent)(H,{get playerCharacter(){return A.playerCharacter},speaker:t})})())}(0,o.render)((()=>(0,o.createComponent)(J,{get children(){return(0,o.createComponent)(O,{Book:Z,Hand:q,Deck:W,SpreadOverlay:Q,StatusOverlay:K})}})),B),Promise.all([e.init(),(0,S.delay)(1e3)]).catch((e=>console.error(e))).then((()=>{I({type:C.NavigationTargetType.ToC})}))}},{"solid-js/web":"33rlw","components/table/create":"axFgj","components/table/table_controller":"5G5V6","components/book/create":"dTDP6","components/card_slot/create":"189zH","components/card/create":"9KqLK","components/page/create":"eFnBZ","data/initial":"dG5uB","rules/interaction_manager":"3lVrH","components/drag/create":"4CbJY","rules/game_manager":"bPP2R","components/deck/create":"1ZOwu","components/status/create":"lXiSb","components/encounter/battle/create":"h8cfH","rules/games":"3tjca","solid-js":"5rsr6","model/domain":"hG1oc","components/navigation_target":"5PTDl","base/unreachable_error":"eQLwm","components/encounter/event/create":"6nTV1","components/encounter/create":"f4J0Y","ui/speaker/rendering_speaker":"14Eqm","ui/speaker/speech_synthesis_word_splitter":"i62HP","ui/speaker/delay_word_splitter":"6sNch","ui/speaker/polite_speaker":"9fV2F","ui/sounds/sound_manager":"iITyB","base/delay":"hGewO"}],"33rlw":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"ErrorBoundary",(()=>n.ErrorBoundary)),o.export(t,"For",(()=>n.For)),o.export(t,"Index",(()=>n.Index)),o.export(t,"Match",(()=>n.Match)),o.export(t,"Show",(()=>n.Show)),o.export(t,"Suspense",(()=>n.Suspense)),o.export(t,"SuspenseList",(()=>n.SuspenseList)),o.export(t,"Switch",(()=>n.Switch)),o.export(t,"createComponent",(()=>n.createComponent)),o.export(t,"effect",(()=>n.createRenderEffect)),o.export(t,"getOwner",(()=>n.getOwner)),o.export(t,"memo",(()=>n.createMemo)),o.export(t,"mergeProps",(()=>n.mergeProps)),o.export(t,"untrack",(()=>n.untrack)),o.export(t,"Aliases",(()=>i)),o.export(t,"Assets",(()=>Y)),o.export(t,"ChildProperties",(()=>s)),o.export(t,"DOMElements",(()=>f)),o.export(t,"DelegatedEvents",(()=>l)),o.export(t,"Dynamic",(()=>ue)),o.export(t,"Hydration",(()=>z)),o.export(t,"HydrationScript",(()=>Y)),o.export(t,"NoHydration",(()=>V)),o.export(t,"Portal",(()=>pe)),o.export(t,"Properties",(()=>a)),o.export(t,"SVGElements",(()=>p)),o.export(t,"SVGNamespace",(()=>u)),o.export(t,"addEventListener",(()=>T)),o.export(t,"assign",(()=>M)),o.export(t,"classList",(()=>k)),o.export(t,"className",(()=>_)),o.export(t,"clearDelegatedEvents",(()=>b)),o.export(t,"delegateEvents",(()=>h)),o.export(t,"dynamicProperty",(()=>F)),o.export(t,"escape",(()=>ne)),o.export(t,"generateHydrationScript",(()=>Y)),o.export(t,"getAssets",(()=>Y)),o.export(t,"getHydrationKey",(()=>N)),o.export(t,"getNextElement",(()=>B)),o.export(t,"getNextMarker",(()=>P)),o.export(t,"getNextMatch",(()=>A)),o.export(t,"getPropAlias",(()=>d)),o.export(t,"hydrate",(()=>le)),o.export(t,"innerHTML",(()=>D)),o.export(t,"insert",(()=>S)),o.export(t,"isDev",(()=>ie)),o.export(t,"isServer",(()=>se)),o.export(t,"render",(()=>g)),o.export(t,"renderToStream",(()=>Q)),o.export(t,"renderToString",(()=>W)),o.export(t,"renderToStringAsync",(()=>q)),o.export(t,"resolveSSRNode",(()=>oe)),o.export(t,"runHydrationEvents",(()=>I)),o.export(t,"setAttribute",(()=>v)),o.export(t,"setAttributeNS",(()=>C)),o.export(t,"spread",(()=>w)),o.export(t,"ssr",(()=>J)),o.export(t,"ssrAttribute",(()=>re)),o.export(t,"ssrClassList",(()=>K)),o.export(t,"ssrElement",(()=>Z)),o.export(t,"ssrHydrationKey",(()=>te)),o.export(t,"ssrSpread",(()=>ae)),o.export(t,"ssrStyle",(()=>ee)),o.export(t,"style",(()=>x)),o.export(t,"template",(()=>y)),o.export(t,"use",(()=>j)),o.export(t,"useAssets",(()=>Y));var n=e("solid-js");const a=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline","allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"]),s=new Set(["innerHTML","textContent","innerText","children"]),i=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),c=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function d(e,r){const t=c[e];return"object"==typeof t?t[r]?t.$:void 0:t}const l=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),p=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),u={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},f=new Set(["html","base","head","link","meta","style","title","body","address","article","aside","footer","header","main","nav","section","body","blockquote","dd","div","dl","dt","figcaption","figure","hr","li","ol","p","pre","ul","a","abbr","b","bdi","bdo","br","cite","code","data","dfn","em","i","kbd","mark","q","rp","rt","ruby","s","samp","small","span","strong","sub","sup","time","u","var","wbr","area","audio","img","map","track","video","embed","iframe","object","param","picture","portal","source","svg","math","canvas","noscript","script","del","ins","caption","col","colgroup","table","tbody","td","tfoot","th","thead","tr","button","datalist","fieldset","form","input","label","legend","meter","optgroup","option","output","progress","select","textarea","details","dialog","menu","summary","details","slot","template","acronym","applet","basefont","bgsound","big","blink","center","content","dir","font","frame","frameset","hgroup","image","keygen","marquee","menuitem","nobr","noembed","noframes","plaintext","rb","rtc","shadow","spacer","strike","tt","xmp","a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","bgsound","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","head","header","hgroup","hr","html","i","iframe","image","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","nobr","noembed","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","plaintext","portal","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr","xmp","input"]);const m="_$DX_DELEGATE";function g(e,r,t,o={}){let a;return(0,n.createRoot)((o=>{a=o,r===document?e():S(r,e(),r.firstChild?null:void 0,t)}),o.owner),()=>{a(),r.textContent=""}}function y(e,r,t){let o;const a=()=>{const r=document.createElement("template");return r.innerHTML=e,t?r.content.firstChild.firstChild:r.content.firstChild},s=r?()=>(o||(o=a())).cloneNode(!0):()=>(0,n.untrack)((()=>document.importNode(o||(o=a()),!0)));return s.cloneNode=s,s}function h(e,r=window.document){const t=r[m]||(r[m]=new Set);for(let o=0,n=e.length;o<n;o++){const n=e[o];t.has(n)||(t.add(n),r.addEventListener(n,L))}}function b(e=window.document){if(e[m]){for(let r of e[m].keys())e.removeEventListener(r,L);delete e[m]}}function v(e,r,t){null==t?e.removeAttribute(r):e.setAttribute(r,t)}function C(e,r,t,o){null==o?e.removeAttributeNS(r,t):e.setAttributeNS(r,t,o)}function _(e,r){null==r?e.removeAttribute("class"):e.className=r}function T(e,r,t,o){if(o)Array.isArray(t)?(e[`$$${r}`]=t[0],e[`$$${r}Data`]=t[1]):e[`$$${r}`]=t;else if(Array.isArray(t)){const o=t[0];e.addEventListener(r,t[0]=r=>o.call(e,t[1],r))}else e.addEventListener(r,t)}function k(e,r,t={}){const o=Object.keys(r||{}),n=Object.keys(t);let a,s;for(a=0,s=n.length;a<s;a++){const o=n[a];o&&"undefined"!==o&&!r[o]&&(E(e,o,!1),delete t[o])}for(a=0,s=o.length;a<s;a++){const n=o[a],s=!!r[n];n&&"undefined"!==n&&t[n]!==s&&s&&(E(e,n,!0),t[n]=s)}return t}function x(e,r,t){if(!r)return t?v(e,"style"):r;const o=e.style;if("string"==typeof r)return o.cssText=r;let n,a;for(a in"string"==typeof t&&(o.cssText=t=void 0),t||(t={}),r||(r={}),t)null==r[a]&&o.removeProperty(a),delete t[a];for(a in r)n=r[a],n!==t[a]&&(o.setProperty(a,n),t[a]=n);return t}function w(e,r={},t,o){const a={};return o||(0,n.createRenderEffect)((()=>a.children=H(e,r.children,a.children))),(0,n.createRenderEffect)((()=>r.ref&&r.ref(e))),(0,n.createRenderEffect)((()=>M(e,r,t,!0,a,!0))),a}function F(e,r){const t=e[r];return Object.defineProperty(e,r,{get:()=>t(),enumerable:!0}),e}function D(e,r){!n.sharedConfig.context&&(e.innerHTML=r)}function j(e,r,t){return(0,n.untrack)((()=>e(r,t)))}function S(e,r,t,o){if(void 0===t||o||(o=[]),"function"!=typeof r)return H(e,r,o,t);(0,n.createRenderEffect)((o=>H(e,r(),o,t)),o)}function M(e,r,t,o,n={},a=!1){r||(r={});for(const o in n)if(!(o in r)){if("children"===o)continue;n[o]=R(e,o,null,n[o],t,a)}for(const s in r){if("children"===s){o||H(e,r.children);continue}const i=r[s];n[s]=R(e,s,i,n[s],t,a)}}function B(e){let r,t;if(!n.sharedConfig.context||!(r=n.sharedConfig.registry.get(t=N()))){if(n.sharedConfig.context&&console.warn("Unable to find DOM nodes for hydration key:",t),!e)throw new Error("Unrecoverable Hydration Mismatch. No template for key: "+t);return e()}return n.sharedConfig.completed&&n.sharedConfig.completed.add(r),n.sharedConfig.registry.delete(t),r}function A(e,r){for(;e&&e.localName!==r;)e=e.nextSibling;return e}function P(e){let r=e,t=0,o=[];if(n.sharedConfig.context)for(;r;){if(8===r.nodeType){const e=r.nodeValue;if("#"===e)t++;else if("/"===e){if(0===t)return[r,o];t--}}o.push(r),r=r.nextSibling}return[r,o]}function I(){n.sharedConfig.events&&!n.sharedConfig.events.queued&&(queueMicrotask((()=>{const{completed:e,events:r}=n.sharedConfig;for(r.queued=!1;r.length;){const[t,o]=r[0];if(!e.has(t))return;L(o),r.shift()}})),n.sharedConfig.events.queued=!0)}function E(e,r,t){const o=r.trim().split(/\s+/);for(let r=0,n=o.length;r<n;r++)e.classList.toggle(o[r],t)}function R(e,r,t,o,n,c){let p,f,m,g,y;if("style"===r)return x(e,t,o);if("classList"===r)return k(e,t,o);if(t===o)return o;if("ref"===r)c||t(e);else if("on:"===r.slice(0,3)){const n=r.slice(3);o&&e.removeEventListener(n,o),t&&e.addEventListener(n,t)}else if("oncapture:"===r.slice(0,10)){const n=r.slice(10);o&&e.removeEventListener(n,o,!0),t&&e.addEventListener(n,t,!0)}else if("on"===r.slice(0,2)){const n=r.slice(2).toLowerCase(),a=l.has(n);if(!a&&o){const r=Array.isArray(o)?o[0]:o;e.removeEventListener(n,r)}(a||t)&&(T(e,n,t,a),a&&h([n]))}else if("attr:"===r.slice(0,5))v(e,r.slice(5),t);else if((y="prop:"===r.slice(0,5))||(m=s.has(r))||!n&&((g=d(r,e.tagName))||(f=a.has(r)))||(p=e.nodeName.includes("-")))y&&(r=r.slice(5),f=!0),"class"===r||"className"===r?_(e,t):!p||f||m?e[g||r]=t:e[(b=r,b.toLowerCase().replace(/-([a-z])/g,((e,r)=>r.toUpperCase())))]=t;else{const o=n&&r.indexOf(":")>-1&&u[r.split(":")[0]];o?C(e,o,r,t):v(e,i[r]||r,t)}var b;return t}function L(e){const r=`$$${e.type}`;let t=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==t&&Object.defineProperty(e,"target",{configurable:!0,value:t}),Object.defineProperty(e,"currentTarget",{configurable:!0,get:()=>t||document}),n.sharedConfig.registry&&!n.sharedConfig.done&&(n.sharedConfig.done=_$HY.done=!0);t;){const o=t[r];if(o&&!t.disabled){const n=t[`${r}Data`];if(void 0!==n?o.call(t,n,e):o.call(t,e),e.cancelBubble)return}t=t._$host||t.parentNode||t.host}}function H(e,r,t,o,a){if(n.sharedConfig.context){!t&&(t=[...e.childNodes]);let r=[];for(let e=0;e<t.length;e++){const o=t[e];8===o.nodeType&&"!$"===o.data.slice(0,2)?o.remove():r.push(o)}t=r}for(;"function"==typeof t;)t=t();if(r===t)return t;const s=typeof r,i=void 0!==o;if(e=i&&t[0]&&t[0].parentNode||e,"string"===s||"number"===s){if(n.sharedConfig.context)return t;if("number"===s&&(r=r.toString()),i){let n=t[0];n&&3===n.nodeType?n.data=r:n=document.createTextNode(r),t=O(e,t,o,n)}else t=""!==t&&"string"==typeof t?e.firstChild.data=r:e.textContent=r}else if(null==r||"boolean"===s){if(n.sharedConfig.context)return t;t=O(e,t,o)}else{if("function"===s)return(0,n.createRenderEffect)((()=>{let n=r();for(;"function"==typeof n;)n=n();t=H(e,n,t,o)})),()=>t;if(Array.isArray(r)){const s=[],c=t&&Array.isArray(t);if(U(s,r,t,a))return(0,n.createRenderEffect)((()=>t=H(e,s,t,o,!0))),()=>t;if(n.sharedConfig.context){if(!s.length)return t;for(let e=0;e<s.length;e++)if(s[e].parentNode)return t=s}if(0===s.length){if(t=O(e,t,o),i)return t}else c?0===t.length?G(e,s,o):function(e,r,t){let o=t.length,n=r.length,a=o,s=0,i=0,c=r[n-1].nextSibling,d=null;for(;s<n||i<a;)if(r[s]!==t[i]){for(;r[n-1]===t[a-1];)n--,a--;if(n===s){const r=a<o?i?t[i-1].nextSibling:t[a-i]:c;for(;i<a;)e.insertBefore(t[i++],r)}else if(a===i)for(;s<n;)d&&d.has(r[s])||r[s].remove(),s++;else if(r[s]===t[a-1]&&t[i]===r[n-1]){const o=r[--n].nextSibling;e.insertBefore(t[i++],r[s++].nextSibling),e.insertBefore(t[--a],o),r[n]=t[a]}else{if(!d){d=new Map;let e=i;for(;e<a;)d.set(t[e],e++)}const o=d.get(r[s]);if(null!=o)if(i<o&&o<a){let c,l=s,p=1;for(;++l<n&&l<a&&null!=(c=d.get(r[l]))&&c===o+p;)p++;if(p>o-i){const n=r[s];for(;i<o;)e.insertBefore(t[i++],n)}else e.replaceChild(t[i++],r[s++])}else s++;else r[s++].remove()}}else s++,i++}(e,t,s):(t&&O(e),G(e,s));t=s}else if(r instanceof Node){if(n.sharedConfig.context&&r.parentNode)return t=i?[r]:r;if(Array.isArray(t)){if(i)return t=O(e,t,o,r);O(e,t,null,r)}else null!=t&&""!==t&&e.firstChild?e.replaceChild(r,e.firstChild):e.appendChild(r);t=r}else console.warn("Unrecognized value. Skipped inserting",r)}return t}function U(e,r,t,o){let n=!1;for(let a=0,s=r.length;a<s;a++){let s=r[a],i=t&&t[a];if(s instanceof Node)e.push(s);else if(null==s||!0===s||!1===s);else if(Array.isArray(s))n=U(e,s,i)||n;else if("function"==typeof s)if(o){for(;"function"==typeof s;)s=s();n=U(e,Array.isArray(s)?s:[s],Array.isArray(i)?i:[i])||n}else e.push(s),n=!0;else{const r=String(s);i&&3===i.nodeType?(i.data=r,e.push(i)):e.push(document.createTextNode(r))}}return n}function G(e,r,t=null){for(let o=0,n=r.length;o<n;o++)e.insertBefore(r[o],t)}function O(e,r,t,o){if(void 0===t)return e.textContent="";const n=o||document.createTextNode("");if(r.length){let o=!1;for(let a=r.length-1;a>=0;a--){const s=r[a];if(n!==s){const r=s.parentNode===e;o||a?r&&s.remove():r?e.replaceChild(n,s):e.insertBefore(n,t)}else o=!0}}else e.insertBefore(n,t);return[n]}function $(e,r){const t=e.querySelectorAll("*[data-hk]");for(let e=0;e<t.length;e++){const o=t[e],a=o.getAttribute("data-hk");r&&!a.startsWith(r)||n.sharedConfig.registry.has(a)||n.sharedConfig.registry.set(a,o)}}function N(){const e=n.sharedConfig.context;return`${e.id}${e.count++}`}function V(e){return n.sharedConfig.context?void 0:e.children}function z(e){return e.children}function Y(){}function X(e){const r=new Error(`${e.name} is not supported in the browser, returning undefined`);console.error(r)}function W(e,r){X(W)}function q(e,r){X(q)}function Q(e,r){X(Q)}function J(e,...r){}function Z(e,r,t,o){}function K(e){}function ee(e){}function re(e,r){}function te(){}function oe(e){}function ne(e){}function ae(e,r,t){}const se=!1,ie=!1,ce="http://www.w3.org/2000/svg";function de(e,r=!1){return r?document.createElementNS(ce,e):document.createElement(e)}const le=(...e)=>((0,n.enableHydration)(),function(e,r,t={}){n.sharedConfig.completed=globalThis._$HY.completed,n.sharedConfig.events=globalThis._$HY.events,n.sharedConfig.load=globalThis._$HY.load,n.sharedConfig.gather=e=>$(r,e),n.sharedConfig.registry=new Map,n.sharedConfig.context={id:t.renderId||"",count:0},$(r,t.renderId);const o=g(e,r,[...r.childNodes],t);return n.sharedConfig.context=null,o}(...e));function pe(e){const{useShadow:r}=e,t=document.createTextNode(""),o=(0,n.getOwner)();let a,s=!!n.sharedConfig.context;return(0,n.createEffect)((()=>{s&&((0,n.getOwner)().user=s=!1),a||(a=(0,n.runWithOwner)(o,(()=>e.children)));const i=e.mount||document.body;if(i instanceof HTMLHeadElement){const[e,r]=(0,n.createSignal)(!1),t=()=>r(!0);(0,n.createRoot)((r=>S(i,(()=>e()?r():a),null))),(0,n.onCleanup)(t)}else{const o=de(e.isSVG?"g":"div",e.isSVG),s=r&&o.attachShadow?o.attachShadow({mode:"open"}):o;Object.defineProperty(o,"_$host",{get:()=>t.parentNode,configurable:!0}),S(s,a),i.appendChild(o),e.ref&&e.ref(o),(0,n.onCleanup)((()=>i.removeChild(o)))}}),void 0,{render:!s}),t}function ue(e){const[r,t]=(0,n.splitProps)(e,["component"]),o=(0,n.createMemo)((()=>r.component));return(0,n.createMemo)((()=>{const e=o();switch(typeof e){case"function":return Object.assign(e,{[n.$DEVCOMP]:!0}),(0,n.untrack)((()=>e(t)));case"string":const r=p.has(e),o=n.sharedConfig.context?B():de(e,r);return w(o,t,r),o}}))}},{"solid-js":"5rsr6","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"5rsr6":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"$DEVCOMP",(()=>x)),o.export(t,"$PROXY",(()=>T)),o.export(t,"$TRACK",(()=>k)),o.export(t,"DEV",(()=>ur)),o.export(t,"ErrorBoundary",(()=>ir)),o.export(t,"For",(()=>er)),o.export(t,"Index",(()=>rr)),o.export(t,"Match",(()=>nr)),o.export(t,"Show",(()=>tr)),o.export(t,"Suspense",(()=>pr)),o.export(t,"SuspenseList",(()=>lr)),o.export(t,"Switch",(()=>or)),o.export(t,"batch",(()=>Z)),o.export(t,"cancelCallback",(()=>h)),o.export(t,"catchError",(()=>oe)),o.export(t,"children",(()=>fe)),o.export(t,"createComponent",(()=>Ve)),o.export(t,"createComputed",(()=>V)),o.export(t,"createContext",(()=>pe)),o.export(t,"createDeferred",(()=>Q)),o.export(t,"createEffect",(()=>Y)),o.export(t,"createMemo",(()=>W)),o.export(t,"createReaction",(()=>X)),o.export(t,"createRenderEffect",(()=>z)),o.export(t,"createResource",(()=>q)),o.export(t,"createRoot",(()=>$)),o.export(t,"createSelector",(()=>J)),o.export(t,"createSignal",(()=>N)),o.export(t,"createUniqueId",(()=>Ze)),o.export(t,"enableExternalSource",(()=>ye)),o.export(t,"enableHydration",(()=>Ne)),o.export(t,"enableScheduling",(()=>ce)),o.export(t,"equalFn",(()=>_)),o.export(t,"from",(()=>Le)),o.export(t,"getListener",(()=>ae)),o.export(t,"getOwner",(()=>se)),o.export(t,"indexArray",(()=>Oe)),o.export(t,"lazy",(()=>Qe)),o.export(t,"mapArray",(()=>Ge)),o.export(t,"mergeProps",(()=>We)),o.export(t,"observable",(()=>Re)),o.export(t,"on",(()=>ee)),o.export(t,"onCleanup",(()=>te)),o.export(t,"onError",(()=>ne)),o.export(t,"onMount",(()=>re)),o.export(t,"requestCallback",(()=>y)),o.export(t,"resetErrorBoundaries",(()=>sr)),o.export(t,"runWithOwner",(()=>ie)),o.export(t,"sharedConfig",(()=>v)),o.export(t,"splitProps",(()=>qe)),o.export(t,"startTransition",(()=>de)),o.export(t,"untrack",(()=>K)),o.export(t,"useContext",(()=>ue)),o.export(t,"useTransition",(()=>le));let n=1,a=!1,s=!1,i=[],c=null,d=null,l=5,p=0,u=300,f=null,m=null;const g=1073741823;function y(e,r){f||function(){const e=new MessageChannel,r=e.port2;if(f=()=>r.postMessage(null),e.port1.onmessage=()=>{if(null!==m){const e=performance.now();p=e+l;const t=!0;try{m(t,e)?r.postMessage(null):m=null}catch(e){throw r.postMessage(null),e}}},navigator&&navigator.scheduling&&navigator.scheduling.isInputPending){const e=navigator.scheduling;d=()=>{const r=performance.now();return r>=p&&(!!e.isInputPending()||r>=u)}}else d=()=>performance.now()>=p}();let t=performance.now(),o=g;r&&r.timeout&&(o=r.timeout);const c={id:n++,fn:e,startTime:t,expirationTime:t+o};return function(e,r){e.splice(function(){let t=0,o=e.length-1;for(;t<=o;){const n=o+t>>1,a=r.expirationTime-e[n].expirationTime;if(a>0)t=n+1;else{if(!(a<0))return n;o=n-1}}return t}(),0,r)}(i,c),a||s||(a=!0,m=b,f()),c}function h(e){e.fn=null}function b(e,r){a=!1,s=!0;try{return function(e,r){let t=r;c=i[0]||null;for(;null!==c&&(!(c.expirationTime>t)||e&&!d());){const e=c.fn;if(null!==e){c.fn=null;e(c.expirationTime<=t),t=performance.now(),c===i[0]&&i.shift()}else i.shift();c=i[0]||null}return null!==c}(e,r)}finally{c=null,s=!1}}const v={context:void 0,registry:void 0};function C(e){v.context=e}const _=(e,r)=>e===r,T=Symbol("solid-proxy"),k=Symbol("solid-track"),x=Symbol("solid-dev-component"),w={equals:_};let F=null,D=xe;const j=1,S=2,M={owned:null,cleanups:null,context:null,owner:null},B={};var A=null;let P=null,I=null,E=null,R=null,L=null,H=null,U=0;const[G,O]=N(!1);function $(e,r){const t=R,o=A,n=0===e.length,a=n?M:{owned:null,cleanups:null,context:null,owner:void 0===r?o:r},s=n?e:()=>e((()=>K((()=>je(a)))));A=a,R=null;try{return ke(s,!0)}finally{R=t,A=o}}function N(e,r){const t={value:e,observers:null,observerSlots:null,comparator:(r=r?Object.assign({},w,r):w).equals||void 0};return[he.bind(t),e=>("function"==typeof e&&(e=P&&P.running&&P.sources.has(t)?e(t.tValue):e(t.value)),be(t,e))]}function V(e,r,t){const o=_e(e,r,!0,j);I&&P&&P.running?L.push(o):ve(o)}function z(e,r,t){const o=_e(e,r,!1,j);I&&P&&P.running?L.push(o):ve(o)}function Y(e,r,t){D=we;const o=_e(e,r,!1,j),n=me&&Pe(A,me.id);n&&(o.suspense=n),t&&t.render||(o.user=!0),H?H.push(o):ve(o)}function X(e,r){let t;const o=_e((()=>{t?t():K(e),t=void 0}),void 0,!1,0),n=me&&Pe(A,me.id);return n&&(o.suspense=n),o.user=!0,e=>{t=e,ve(o)}}function W(e,r,t){t=t?Object.assign({},w,t):w;const o=_e(e,r,!0,0);return o.observers=null,o.observerSlots=null,o.comparator=t.equals||void 0,I&&P&&P.running?(o.tState=j,L.push(o)):ve(o),he.bind(o)}function q(e,r,t){let o,n,a;2===arguments.length&&"object"==typeof r||1===arguments.length?(o=!0,n=e,a=r||{}):(o=e,n=r,a=t||{});let s=null,i=B,c=null,d=!1,l=!1,p="initialValue"in a,u="function"==typeof o&&W(o);const f=new Set,[m,g]=(a.storage||N)(a.initialValue),[y,h]=N(void 0),[b,C]=N(void 0,{equals:!1}),[_,T]=N(p?"ready":"unresolved");if(v.context){let e;c=`${v.context.id}${v.context.count++}`,"initial"===a.ssrLoadFrom?i=a.initialValue:v.load&&(e=v.load(c))&&(i=e[0])}function k(e,r,t,o){return s===e&&(s=null,p=!0,e!==i&&r!==i||!a.onHydrated||queueMicrotask((()=>a.onHydrated(o,{value:r}))),i=B,P&&e&&d?(P.promises.delete(e),d=!1,ke((()=>{P.running=!0,x(r,t)}),!1)):x(r,t)),r}function x(e,r){ke((()=>{void 0===r&&g((()=>e)),T(void 0!==r?"errored":"ready"),h(r);for(const e of f.keys())e.decrement();f.clear()}),!1)}function w(){const e=me&&Pe(A,me.id),r=m(),t=y();if(void 0!==t&&!s)throw t;return R&&!R.user&&e&&V((()=>{b(),s&&(e.resolved&&P&&d?P.promises.add(s):f.has(e)||(e.increment(),f.add(e)))})),r}function F(e=!0){if(!1!==e&&l)return;l=!1;const r=u?u():o;if(d=P&&P.running,null==r||!1===r)return void k(s,K(m));P&&s&&P.promises.delete(s);const t=i!==B?i:K((()=>n(r,{value:m(),refetching:e})));return"object"==typeof t&&t&&"then"in t?(s=t,l=!0,queueMicrotask((()=>l=!1)),ke((()=>{T(p?"refreshing":"pending"),C()}),!1),t.then((e=>k(t,e,void 0,r)),(e=>k(t,void 0,Me(e),r)))):(k(s,t,void 0,r),t)}return Object.defineProperties(w,{state:{get:()=>_()},error:{get:()=>y()},loading:{get(){const e=_();return"pending"===e||"refreshing"===e}},latest:{get(){if(!p)return w();const e=y();if(e&&!s)throw e;return m()}}}),u?V((()=>F(!1))):F(!1),[w,{refetch:F,mutate:g}]}function Q(e,r){let t,o=r?r.timeoutMs:void 0;const n=_e((()=>(t&&t.fn||(t=y((()=>s((()=>n.value))),void 0!==o?{timeout:o}:void 0)),e())),void 0,!0),[a,s]=N(n.value,r);return ve(n),s((()=>n.value)),a}function J(e,r=_,t){const o=new Map,n=_e((t=>{const n=e();for(const[e,a]of o.entries())if(r(e,n)!==r(e,t))for(const e of a.values())e.state=j,e.pure?L.push(e):H.push(e);return n}),void 0,!0,j);return ve(n),e=>{const t=R;if(t){let r;(r=o.get(e))?r.add(t):o.set(e,r=new Set([t])),te((()=>{r.delete(t),!r.size&&o.delete(e)}))}return r(e,P&&P.running&&P.sources.has(n)?n.tValue:n.value)}}function Z(e){return ke(e,!1)}function K(e){if(null===R)return e();const r=R;R=null;try{return e()}finally{R=r}}function ee(e,r,t){const o=Array.isArray(e);let n,a=t&&t.defer;return t=>{let s;if(o){s=Array(e.length);for(let r=0;r<e.length;r++)s[r]=e[r]()}else s=e();if(a)return void(a=!1);const i=K((()=>r(s,n,t)));return n=s,i}}function re(e){Y((()=>K(e)))}function te(e){return null===A||(null===A.cleanups?A.cleanups=[e]:A.cleanups.push(e)),e}function oe(e,r){F||(F=Symbol("error")),(A=_e(void 0,void 0,!0)).context={[F]:[r]},P&&P.running&&P.sources.add(A);try{return e()}catch(e){Ae(e)}finally{A=A.owner}}function ne(e){F||(F=Symbol("error")),null===A||(null===A.context?A.context={[F]:[e]}:A.context[F]?A.context[F].push(e):A.context[F]=[e])}function ae(){return R}function se(){return A}function ie(e,r){const t=A,o=R;A=e,R=null;try{return ke(r,!0)}catch(e){Ae(e)}finally{A=t,R=o}}function ce(e=y){I=e}function de(e){if(P&&P.running)return e(),P.done;const r=R,t=A;return Promise.resolve().then((()=>{let o;return R=r,A=t,(I||me)&&(o=P||(P={sources:new Set,effects:[],promises:new Set,disposed:new Set,queue:new Set,running:!0}),o.done||(o.done=new Promise((e=>o.resolve=e))),o.running=!0),ke(e,!1),R=A=null,o?o.done:void 0}))}function le(){return[G,de]}function pe(e,r){const t=Symbol("context");return{id:t,Provider:Ee(t),defaultValue:e}}function ue(e){let r;return void 0!==(r=Pe(A,e.id))?r:e.defaultValue}function fe(e){const r=W(e),t=W((()=>Ie(r())));return t.toArray=()=>{const e=t();return Array.isArray(e)?e:null!=e?[e]:[]},t}let me;function ge(){return me||(me=pe({}))}function ye(e){if(E){const r=E;E=(t,o)=>{const n=r(t,o),a=e((e=>n.track(e)),o);return{track:e=>a.track(e),dispose(){a.dispose(),n.dispose()}}}}else E=e}function he(){const e=P&&P.running;if(this.sources&&(e?this.tState:this.state))if((e?this.tState:this.state)===j)ve(this);else{const e=L;L=null,ke((()=>Fe(this)),!1),L=e}if(R){const e=this.observers?this.observers.length:0;R.sources?(R.sources.push(this),R.sourceSlots.push(e)):(R.sources=[this],R.sourceSlots=[e]),this.observers?(this.observers.push(R),this.observerSlots.push(R.sources.length-1)):(this.observers=[R],this.observerSlots=[R.sources.length-1])}return e&&P.sources.has(this)?this.tValue:this.value}function be(e,r,t){let o=P&&P.running&&P.sources.has(e)?e.tValue:e.value;if(!e.comparator||!e.comparator(o,r)){if(P){const o=P.running;(o||!t&&P.sources.has(e))&&(P.sources.add(e),e.tValue=r),o||(e.value=r)}else e.value=r;e.observers&&e.observers.length&&ke((()=>{for(let r=0;r<e.observers.length;r+=1){const t=e.observers[r],o=P&&P.running;o&&P.disposed.has(t)||((o?t.tState:t.state)||(t.pure?L.push(t):H.push(t),t.observers&&De(t)),o?t.tState=j:t.state=j)}if(L.length>1e6)throw L=[],new Error}),!1)}return r}function ve(e){if(!e.fn)return;je(e);const r=A,t=R,o=U;R=A=e,Ce(e,P&&P.running&&P.sources.has(e)?e.tValue:e.value,o),P&&!P.running&&P.sources.has(e)&&queueMicrotask((()=>{ke((()=>{P&&(P.running=!0),R=A=e,Ce(e,e.tValue,o),R=A=null}),!1)})),R=t,A=r}function Ce(e,r,t){let o;try{o=e.fn(r)}catch(r){return e.pure&&(P&&P.running?(e.tState=j,e.tOwned&&e.tOwned.forEach(je),e.tOwned=void 0):(e.state=j,e.owned&&e.owned.forEach(je),e.owned=null)),e.updatedAt=t+1,Ae(r)}(!e.updatedAt||e.updatedAt<=t)&&(null!=e.updatedAt&&"observers"in e?be(e,o,!0):P&&P.running&&e.pure?(P.sources.add(e),e.tValue=o):e.value=o,e.updatedAt=t)}function _e(e,r,t,o=j,n){const a={fn:e,state:o,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:r,owner:A,context:null,pure:t};if(P&&P.running&&(a.state=0,a.tState=o),null===A||A!==M&&(P&&P.running&&A.pure?A.tOwned?A.tOwned.push(a):A.tOwned=[a]:A.owned?A.owned.push(a):A.owned=[a]),E){const[e,r]=N(void 0,{equals:!1}),t=E(a.fn,r);te((()=>t.dispose()));const o=()=>de(r).then((()=>n.dispose())),n=E(a.fn,o);a.fn=r=>(e(),P&&P.running?n.track(r):t.track(r))}return a}function Te(e){const r=P&&P.running;if(0===(r?e.tState:e.state))return;if((r?e.tState:e.state)===S)return Fe(e);if(e.suspense&&K(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<U);){if(r&&P.disposed.has(e))return;(r?e.tState:e.state)&&t.push(e)}for(let o=t.length-1;o>=0;o--){if(e=t[o],r){let r=e,n=t[o+1];for(;(r=r.owner)&&r!==n;)if(P.disposed.has(r))return}if((r?e.tState:e.state)===j)ve(e);else if((r?e.tState:e.state)===S){const r=L;L=null,ke((()=>Fe(e,t[0])),!1),L=r}}}function ke(e,r){if(L)return e();let t=!1;r||(L=[]),H?t=!0:H=[],U++;try{const r=e();return function(e){L&&(I&&P&&P.running?function(e){for(let r=0;r<e.length;r++){const t=e[r],o=P.queue;o.has(t)||(o.add(t),I((()=>{o.delete(t),ke((()=>{P.running=!0,Te(t)}),!1),P&&(P.running=!1)})))}}(L):xe(L),L=null);if(e)return;let r;if(P)if(P.promises.size||P.queue.size){if(P.running)return P.running=!1,P.effects.push.apply(P.effects,H),H=null,void O(!0)}else{const e=P.sources,t=P.disposed;H.push.apply(H,P.effects),r=P.resolve;for(const e of H)"tState"in e&&(e.state=e.tState),delete e.tState;P=null,ke((()=>{for(const e of t)je(e);for(const r of e){if(r.value=r.tValue,r.owned)for(let e=0,t=r.owned.length;e<t;e++)je(r.owned[e]);r.tOwned&&(r.owned=r.tOwned),delete r.tValue,delete r.tOwned,r.tState=0}O(!1)}),!1)}const t=H;H=null,t.length&&ke((()=>D(t)),!1);r&&r()}(t),r}catch(e){t||(H=null),L=null,Ae(e)}}function xe(e){for(let r=0;r<e.length;r++)Te(e[r])}function we(e){let r,t=0;for(r=0;r<e.length;r++){const o=e[r];o.user?e[t++]=o:Te(o)}for(v.context&&C(),r=0;r<t;r++)Te(e[r])}function Fe(e,r){const t=P&&P.running;t?e.tState=0:e.state=0;for(let o=0;o<e.sources.length;o+=1){const n=e.sources[o];if(n.sources){const e=t?n.tState:n.state;e===j?n!==r&&(!n.updatedAt||n.updatedAt<U)&&Te(n):e===S&&Fe(n,r)}}}function De(e){const r=P&&P.running;for(let t=0;t<e.observers.length;t+=1){const o=e.observers[t];(r?o.tState:o.state)||(r?o.tState=S:o.state=S,o.pure?L.push(o):H.push(o),o.observers&&De(o))}}function je(e){let r;if(e.sources)for(;e.sources.length;){const r=e.sources.pop(),t=e.sourceSlots.pop(),o=r.observers;if(o&&o.length){const e=o.pop(),n=r.observerSlots.pop();t<o.length&&(e.sourceSlots[n]=t,o[t]=e,r.observerSlots[t]=n)}}if(P&&P.running&&e.pure){if(e.tOwned){for(r=e.tOwned.length-1;r>=0;r--)je(e.tOwned[r]);delete e.tOwned}Se(e,!0)}else if(e.owned){for(r=e.owned.length-1;r>=0;r--)je(e.owned[r]);e.owned=null}if(e.cleanups){for(r=e.cleanups.length-1;r>=0;r--)e.cleanups[r]();e.cleanups=null}P&&P.running?e.tState=0:e.state=0,e.context=null}function Se(e,r){if(r||(e.tState=0,P.disposed.add(e)),e.owned)for(let r=0;r<e.owned.length;r++)Se(e.owned[r])}function Me(e){return e instanceof Error?e:new Error("string"==typeof e?e:"Unknown error",{cause:e})}function Be(e,r){for(const t of e)t(r)}function Ae(e){const r=F&&Pe(A,F);if(!r)throw e;const t=Me(e);H?H.push({fn(){Be(r,t)},state:j}):Be(r,t)}function Pe(e,r){return e?e.context&&void 0!==e.context[r]?e.context[r]:Pe(e.owner,r):void 0}function Ie(e){if("function"==typeof e&&!e.length)return Ie(e());if(Array.isArray(e)){const r=[];for(let t=0;t<e.length;t++){const o=Ie(e[t]);Array.isArray(o)?r.push.apply(r,o):r.push(o)}return r}return e}function Ee(e,r){return function(r){let t;return z((()=>t=K((()=>(A.context={[e]:r.value},fe((()=>r.children)))))),void 0),t}}function Re(e){return{subscribe(r){if(!(r instanceof Object)||null==r)throw new TypeError("Expected the observer to be an object.");const t="function"==typeof r?r:r.next&&r.next.bind(r);if(!t)return{unsubscribe(){}};const o=$((r=>(Y((()=>{const r=e();K((()=>t(r)))})),r)));return se()&&te(o),{unsubscribe(){o()}}},[Symbol.observable||"@@observable"](){return this}}}function Le(e){const[r,t]=N(void 0,{equals:!1});if("subscribe"in e){const r=e.subscribe((e=>t((()=>e))));te((()=>"unsubscribe"in r?r.unsubscribe():r()))}else{te(e(t))}return r}const He=Symbol("fallback");function Ue(e){for(let r=0;r<e.length;r++)e[r]()}function Ge(e,r,t={}){let o=[],n=[],a=[],s=0,i=r.length>1?[]:null;return te((()=>Ue(a))),()=>{let c,d,l=e()||[];return l[k],K((()=>{let e,r,u,f,m,g,y,h,b,v=l.length;if(0===v)0!==s&&(Ue(a),a=[],o=[],n=[],s=0,i&&(i=[])),t.fallback&&(o=[He],n[0]=$((e=>(a[0]=e,t.fallback()))),s=1);else if(0===s){for(n=new Array(v),d=0;d<v;d++)o[d]=l[d],n[d]=$(p);s=v}else{for(u=new Array(v),f=new Array(v),i&&(m=new Array(v)),g=0,y=Math.min(s,v);g<y&&o[g]===l[g];g++);for(y=s-1,h=v-1;y>=g&&h>=g&&o[y]===l[h];y--,h--)u[h]=n[y],f[h]=a[y],i&&(m[h]=i[y]);for(e=new Map,r=new Array(h+1),d=h;d>=g;d--)b=l[d],c=e.get(b),r[d]=void 0===c?-1:c,e.set(b,d);for(c=g;c<=y;c++)b=o[c],d=e.get(b),void 0!==d&&-1!==d?(u[d]=n[c],f[d]=a[c],i&&(m[d]=i[c]),d=r[d],e.set(b,d)):a[c]();for(d=g;d<v;d++)d in u?(n[d]=u[d],a[d]=f[d],i&&(i[d]=m[d],i[d](d))):n[d]=$(p);n=n.slice(0,s=v),o=l.slice(0)}return n}));function p(e){if(a[d]=e,i){const[e,t]=N(d);return i[d]=t,r(l[d],e)}return r(l[d])}}}function Oe(e,r,t={}){let o,n=[],a=[],s=[],i=[],c=0;return te((()=>Ue(s))),()=>{const d=e()||[];return d[k],K((()=>{if(0===d.length)return 0!==c&&(Ue(s),s=[],n=[],a=[],c=0,i=[]),t.fallback&&(n=[He],a[0]=$((e=>(s[0]=e,t.fallback()))),c=1),a;for(n[0]===He&&(s[0](),s=[],n=[],a=[],c=0),o=0;o<d.length;o++)o<n.length&&n[o]!==d[o]?i[o]((()=>d[o])):o>=n.length&&(a[o]=$(l));for(;o<n.length;o++)s[o]();return c=i.length=s.length=d.length,n=d.slice(0),a=a.slice(0,c)}));function l(e){s[o]=e;const[t,n]=N(d[o]);return i[o]=n,r(t,o)}}}let $e=!1;function Ne(){$e=!0}function Ve(e,r){if($e&&v.context){const t=v.context;C({...v.context,id:`${v.context.id}${v.context.count++}-`,count:0});const o=K((()=>e(r||{})));return C(t),o}return K((()=>e(r||{})))}function ze(){return!0}const Ye={get:(e,r,t)=>r===T?t:e.get(r),has:(e,r)=>r===T||e.has(r),set:ze,deleteProperty:ze,getOwnPropertyDescriptor:(e,r)=>({configurable:!0,enumerable:!0,get:()=>e.get(r),set:ze,deleteProperty:ze}),ownKeys:e=>e.keys()};function Xe(e){return(e="function"==typeof e?e():e)?e:{}}function We(...e){let r=!1;for(let t=0;t<e.length;t++){const o=e[t];r=r||!!o&&T in o,e[t]="function"==typeof o?(r=!0,W(o)):o}if(r)return new Proxy({get(r){for(let t=e.length-1;t>=0;t--){const o=Xe(e[t])[r];if(void 0!==o)return o}},has(r){for(let t=e.length-1;t>=0;t--)if(r in Xe(e[t]))return!0;return!1},keys(){const r=[];for(let t=0;t<e.length;t++)r.push(...Object.keys(Xe(e[t])));return[...new Set(r)]}},Ye);const t={};for(let r=e.length-1;r>=0;r--)if(e[r]){const o=Object.getOwnPropertyDescriptors(e[r]);for(const r in o)r in t||Object.defineProperty(t,r,{enumerable:!0,get(){for(let t=e.length-1;t>=0;t--){const o=(e[t]||{})[r];if(void 0!==o)return o}}})}return t}function qe(e,...r){const t=new Set(r.flat());if(T in e){const o=r.map((r=>new Proxy({get:t=>r.includes(t)?e[t]:void 0,has:t=>r.includes(t)&&t in e,keys:()=>r.filter((r=>r in e))},Ye)));return o.push(new Proxy({get:r=>t.has(r)?void 0:e[r],has:r=>!t.has(r)&&r in e,keys:()=>Object.keys(e).filter((e=>!t.has(e)))},Ye)),o}const o=Object.getOwnPropertyDescriptors(e);return r.push(Object.keys(o).filter((e=>!t.has(e)))),r.map((r=>{const t={};for(let n=0;n<r.length;n++){const a=r[n];a in e&&Object.defineProperty(t,a,o[a]?o[a]:{get:()=>e[a],set:()=>!0,enumerable:!0})}return t}))}function Qe(e){let r,t;const o=o=>{const n=v.context;if(n){const[o,a]=N();(t||(t=e())).then((e=>{C(n),a((()=>e.default)),C()})),r=o}else if(!r){const[o]=q((()=>(t||(t=e())).then((e=>e.default))));r=o}let a;return W((()=>(a=r())&&K((()=>{if(!n)return a(o);const e=v.context;C(n);const r=a(o);return C(e),r}))))};return o.preload=()=>t||((t=e()).then((e=>r=()=>e.default)),t),o}let Je=0;function Ze(){const e=v.context;return e?`${e.id}${e.count++}`:"cl-"+Je++}const Ke=e=>`Stale read from <${e}>.`;function er(e){const r="fallback"in e&&{fallback:()=>e.fallback};return W(Ge((()=>e.each),e.children,r||void 0))}function rr(e){const r="fallback"in e&&{fallback:()=>e.fallback};return W(Oe((()=>e.each),e.children,r||void 0))}function tr(e){const r=e.keyed,t=W((()=>e.when),void 0,{equals:(e,t)=>r?e===t:!e==!t});return W((()=>{const o=t();if(o){const n=e.children;return"function"==typeof n&&n.length>0?K((()=>n(r?o:()=>{if(!K(t))throw Ke("Show");return e.when}))):n}return e.fallback}),void 0,void 0)}function or(e){let r=!1;const t=fe((()=>e.children)),o=W((()=>{let e=t();Array.isArray(e)||(e=[e]);for(let t=0;t<e.length;t++){const o=e[t].when;if(o)return r=!!e[t].keyed,[t,o,e[t]]}return[-1]}),void 0,{equals:(e,t)=>e[0]===t[0]&&(r?e[1]===t[1]:!e[1]==!t[1])&&e[2]===t[2]});return W((()=>{const[t,n,a]=o();if(t<0)return e.fallback;const s=a.children;return"function"==typeof s&&s.length>0?K((()=>s(r?n:()=>{if(K(o)[0]!==t)throw Ke("Match");return a.when}))):s}),void 0,void 0)}function nr(e){return e}let ar;function sr(){ar&&[...ar].forEach((e=>e()))}function ir(e){let r,t;v.context&&v.load&&(t=v.load(v.context.id+v.context.count))&&(r=t[0]);const[o,n]=N(r,void 0);return ar||(ar=new Set),ar.add(n),te((()=>ar.delete(n))),W((()=>{let r;if(r=o()){const t=e.fallback;return"function"==typeof t&&t.length?K((()=>t(r,(()=>n())))):t}return oe((()=>e.children),n)}),void 0,void 0)}const cr=(e,r)=>e.showContent===r.showContent&&e.showFallback===r.showFallback,dr=pe();function lr(e){let r,[t,o]=N((()=>({inFallback:!1})));const n=ue(dr),[a,s]=N([]);n&&(r=n.register(W((()=>t()().inFallback))));const i=W((t=>{const o=e.revealOrder,n=e.tail,{showContent:s=!0,showFallback:i=!0}=r?r():{},c=a(),d="backwards"===o;if("together"===o){const e=c.every((e=>!e())),r=c.map((()=>({showContent:e&&s,showFallback:i})));return r.inFallback=!e,r}let l=!1,p=t.inFallback;const u=[];for(let e=0,r=c.length;e<r;e++){const t=d?r-e-1:e,o=c[t]();if(l||o){const e=!l;e&&(p=!0),u[t]={showContent:e,showFallback:!(n&&(!e||"collapsed"!==n))&&i},l=!0}else u[t]={showContent:s,showFallback:i}}return l||(p=!1),u.inFallback=p,u}),{inFallback:!1});return o((()=>i)),Ve(dr.Provider,{value:{register:e=>{let r;return s((t=>(r=t.length,[...t,e]))),W((()=>i()[r]),void 0,{equals:cr})}},get children(){return e.children}})}function pr(e){let r,t,o,n,a,s=0;const[i,c]=N(!1),d=ge(),l={increment:()=>{1==++s&&c(!0)},decrement:()=>{0==--s&&c(!1)},inFallback:i,effects:[],resolved:!1},p=se();if(v.context&&v.load){const e=v.context.id+v.context.count;let r=v.load(e);if(r&&(o=r[0])&&"$$f"!==o){"object"==typeof o&&"then"in o||(o=Promise.resolve(o));const[r,s]=N(void 0,{equals:!1});n=r,o.then((r=>{if(r||v.done)return r&&(a=r),s();v.gather(e),C(t),s(),C()}))}}const u=ue(dr);let f;return u&&(r=u.register(l.inFallback)),te((()=>f&&f())),Ve(d.Provider,{value:l,get children(){return W((()=>{if(a)throw a;if(t=v.context,n)return n(),n=void 0;t&&"$$f"===o&&C();const s=W((()=>e.children));return W((n=>{const a=l.inFallback(),{showContent:i=!0,showFallback:c=!0}=r?r():{};return(!a||o&&"$$f"!==o)&&i?(l.resolved=!0,f&&f(),f=t=o=void 0,d=l.effects,H.push.apply(H,d),d.length=0,s()):c?f?n:$((r=>(f=r,t&&(C({id:t.id+"f",count:0}),t=void 0),e.fallback)),p):void 0;var d}))}))}})}const ur=void 0},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],k3151:[function(e,r,t){t.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},t.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},t.exportAll=function(e,r){return Object.keys(e).forEach((function(t){"default"===t||"__esModule"===t||r.hasOwnProperty(t)||Object.defineProperty(r,t,{enumerable:!0,get:function(){return e[t]}})})),r},t.export=function(e,r,t){Object.defineProperty(e,r,{enumerable:!0,get:t})}},{}],axFgj:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"createTable",(()=>c));var n=e("solid-js/web"),a=(e("solid-js"),e("./table")),s=e("./table_controller"),i=e("ui/animation/animation_manager");function c(){const e=s.tableUIDescriptor.create({view:s.View.TopDownBookCentered,lookDx:0,lookDy:0}),r=new(0,i.AnimationManager);return{Component:function(t){return(0,n.createComponent)(a.TableComponent,{get Book(){return t.Book},get Hand(){return t.Hand},get Deck(){return t.Deck},get SpreadOverlay(){return t.SpreadOverlay},get StatusOverlay(){return t.StatusOverlay},get view(){return e.view},get lookDx(){return e.lookDx},get lookDy(){return e.lookDy},animations:r})},controller:new(0,s.TableController)(e,r)}}},{"solid-js/web":"33rlw","solid-js":"5rsr6","./table":"gDBtG","./table_controller":"5G5V6","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","ui/animation/animation_manager":"fbyYW"}],gDBtG:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"TableComponent",(()=>l));var n=e("solid-js/web"),a=e("solid-js"),s=e("./table.module.scss"),i=o.interopDefault(s),c=e("./table_controller");const d=(0,n.template)("<div><div><div><div></div><div></div><div></div><div></div></div></div><div>");function l(e){const[r,t]=(0,a.createSignal)();return(()=>{const o=d(),a=o.firstChild,s=a.firstChild,l=s.firstChild,p=l.nextSibling,u=p.nextSibling,f=u.nextSibling,m=a.nextSibling;return(0,n.use)(t,s),(0,n.addEventListener)(s,"transitionend",e.animations.createTransitionEndEventListener(r,(()=>e.view))),(0,n.insert)(l,(0,n.createComponent)(e.Book,{})),(0,n.insert)(p,(0,n.createComponent)(e.SpreadOverlay,{})),(0,n.insert)(u,(0,n.createComponent)(e.Deck,{})),(0,n.insert)(f,(0,n.createComponent)(e.Hand,{})),(0,n.insert)(m,(0,n.createComponent)(e.StatusOverlay,{})),(0,n.effect)((r=>{const t=i.default.container,d={[i.default.room]:!0},g=e.view===c.View.Tilted?{transform:`translate(${-20*e.lookDx}vmin, ${20*-e.lookDy}vmin) rotateX(${-e.lookDy/2}rad)`}:void 0,y={[i.default.table]:!0,[i.default.tilted]:e.view===c.View.Tilted,[i.default.topDown]:e.view===c.View.TopDown,[i.default.topDownBookCentered]:e.view===c.View.TopDownBookCentered},h=i.default.book,b=i.default["spread-overlay"],v=i.default.deck,C=i.default.hand,_=i.default["status-overlay"];return t!==r._v$&&(0,n.className)(o,r._v$=t),r._v$2=(0,n.classList)(a,d,r._v$2),r._v$3=(0,n.style)(a,g,r._v$3),r._v$4=(0,n.classList)(s,y,r._v$4),h!==r._v$5&&(0,n.className)(l,r._v$5=h),b!==r._v$6&&(0,n.className)(p,r._v$6=b),v!==r._v$7&&(0,n.className)(u,r._v$7=v),C!==r._v$8&&(0,n.className)(f,r._v$8=C),_!==r._v$9&&(0,n.className)(m,r._v$9=_),r}),{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0,_v$9:void 0}),o})()}},{"solid-js/web":"33rlw","./table.module.scss":"4ZLm7","./table_controller":"5G5V6","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","solid-js":"5rsr6"}],"4ZLm7":[function(e,r,t){r.exports.cardWidth="9",r.exports.cardHeight="12",r.exports.pageWidth="50",r.exports.pageHeight="70",r.exports.tableWidth="200",r.exports.tableHeight="200",r.exports.bookWidth="50",r.exports.bookHeight="70",r.exports.bookTop="10",r.exports.handSlotTop="20",r.exports.handSlotWidth="80",r.exports.handSlotHeight="12",r.exports.deckTop="10",r.exports.overlayZ="30",r.exports.container="container_e3e899",r.exports.room="room_e3e899",r.exports.table="table_e3e899",r.exports.topDown="topDown_e3e899",r.exports.topDownBookCentered="topDownBookCentered_e3e899",r.exports.tilted="tilted_e3e899",r.exports.book="book_e3e899",r.exports.hand="hand_e3e899",r.exports.deck="deck_e3e899",r.exports["spread-overlay"]="spread-overlay_e3e899",r.exports["drag-overlay"]="drag-overlay_e3e899",r.exports["status-overlay"]="status-overlay_e3e899"},{}],"5G5V6":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"View",(()=>v)),o.export(t,"tableUIDescriptor",(()=>_)),o.export(t,"TableController",(()=>T));var n=e("model/descriptor/literals"),a=e("model/descriptor/record"),s=e("./table.module.scss"),i=o.interopDefault(s),c=e("solid-js");const d=parseInt(i.default.bookTop),l=parseInt(i.default.bookWidth),p=parseInt(i.default.bookHeight),u=parseInt(i.default.tableWidth),f=parseInt(i.default.deckTop),m=parseInt(i.default.handSlotTop),g=parseInt(i.default.handSlotWidth),y=parseInt(i.default.cardWidth),h=parseInt(i.default.cardHeight),b=parseInt(i.default.overlayZ);let v;!function(e){e[e.TopDown=0]="TopDown",e[e.TopDownBookCentered=1]="TopDownBookCentered",e[e.Tilted=2]="Tilted"}(v||(v={}));const C=new(0,n.LiteralTypeDescriptor),_=(0,a.activeRecordDescriptor)({view:C,lookDx:n.numberDescriptor,lookDy:n.numberDescriptor});class T{constructor(e,r){this.tableUI=e,this.animations=r}async setView(e){if(this.tableUI.view!==e)return this.tableUI.view=e,this.animations.waitForAnimation(e)}async look(e,r){(0,c.batch)((()=>{this.tableUI.lookDx=e,this.tableUI.lookDy=r}))}getPlayerCardSlotTablePosition(e){return[(u-g)/2+(e+.5)*g/6-y/2,d+p+m,0]}getBookCardSlotTablePosition(e){return[(u-l)/2+(e+.5)*l/3-y/2,d+p+h/2,b]}getPlayerDeckTablePosition(){return[(u-g)/2-10,d+p+f,0]}}},{"model/descriptor/literals":"6SgZZ","model/descriptor/record":"9b5Fs","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","./table.module.scss":"4ZLm7","solid-js":"5rsr6"}],"6SgZZ":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"LiteralTypeDescriptor",(()=>n)),o.export(t,"numberDescriptor",(()=>a)),o.export(t,"stringDescriptor",(()=>s)),o.export(t,"booleanDescriptor",(()=>i)),o.export(t,"componentDescriptor",(()=>c));class n{constructor(){}create(e){return e}snapshot(e){return e}freeze(e){return e}}const a=new n,s=new n,i=new n,c=new n},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"9b5Fs":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"valueRecordDescriptor",(()=>s)),o.export(t,"activeRecordDescriptor",(()=>d));var n=e("solid-js");class a{constructor(e){this.attributeTypes=e}create(e){const r={};for(let t in this.attributeTypes){const o=this.attributeTypes[t],n=e[t],a=o.create(n);r[t]=a}return r}snapshot(e){const r={};for(let t in this.attributeTypes){const o=this.attributeTypes[t],n=e[t],a=o.snapshot(n);r[t]=a}return r}freeze(e){const r={};for(let t in this.attributeTypes){const o=this.attributeTypes[t],n=e[t],a=o.freeze(n);r[t]=a}return Object.freeze(r)}}function s(e){return new a(e)}class i{constructor(){}get(e,r){return e[r]?.[0]?.()}set(e,r,t){const o=e[r]?.[1];return o?.(t),null!=o}}class c{constructor(e){this.attributeTypes=e}create(e){const r={};for(let t in this.attributeTypes){const o=this.attributeTypes[t],a=e[t],s=o.create(a);r[t]=(0,n.createSignal)(s)}return new Proxy(r,new i)}snapshot(e){const r={};for(let t in this.attributeTypes){const o=this.attributeTypes[t],n=e[t],a=o.snapshot(n);r[t]=a}return r}freeze(e){const r={};for(let t in this.attributeTypes){const o=this.attributeTypes[t],n=e[t],a=o.snapshot(n);r[t]=a}return Object.freeze(r)}}function d(e){return new c(e)}},{"solid-js":"5rsr6","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],fbyYW:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"AnimationCanceledError",(()=>s)),o.export(t,"AnimationManager",(()=>i));var n=e("../../base/delay"),a=e("../../base/flattened_promise");class s extends Error{}class i{animations=new Map;constructor(){}waitForAnimation(e,r=700){this.maybeCancelAnimation(e);const t=(0,a.createFlattenedPromise)();return this.animations.set(e,t),Promise.race([t.promise,(0,n.delay)(r)])}maybeCancelAnimation(e){const r=this.animations.get(e);r&&(r.reject(new s),this.animations.delete(e))}maybeCompleteAnimation(e){const r=this.animations.get(e);r&&(r.resolve(),this.animations.delete(e))}createAnimationEndEventListener(e,r){return t=>{const[o,n]=r();null!=t.target&&e()===t.target&&t.animationName===n&&this.maybeCompleteAnimation(o)}}createTransitionEndEventListener(e,r){return t=>{null!=t.target&&e()===t.target&&this.maybeCompleteAnimation(r())}}}},{"../../base/delay":"hGewO","../../base/flattened_promise":"9HvUW","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],hGewO:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"delay",(()=>a));var n=e("./flattened_promise");function a(e){const{promise:r,resolve:t}=(0,n.createFlattenedPromise)();return setTimeout(t,e),r}},{"./flattened_promise":"9HvUW","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"9HvUW":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");function n(){let e,r;return{promise:new Promise(((t,o)=>{e=t,r=o})),resolve:r=>e(r),reject:e=>r(e)}}o.defineInteropFlag(t),o.export(t,"createFlattenedPromise",(()=>n))},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],dTDP6:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"createBook",(()=>l));var n=e("solid-js/web"),a=e("./book"),s=e("./book_controller"),i=e("ui/animation/animation_manager"),c=e("./cover/chrononomicon"),d=e("components/page/page_controller");function l({pageComponentManager:e,book:r,soundManager:t}){function o(r){if(null!=r)return[(0,n.createComponent)(e.FactoryComponent,{model:r,get side(){return d.PageSide.Left}}),(0,n.createComponent)(e.FactoryComponent,{model:r,get side(){return d.PageSide.Right}})]}const l=new(0,i.AnimationManager),p=s.bookUIDescriptor.create({previousSpread:void 0,turnLeftToRight:!0,turnPastMidway:!1});return{Component:e=>(0,n.createComponent)(a.BookComponent,{animations:l,get previousPages(){return o(p.previousSpread)},get currentPages(){return o(r.spread)},get turnLeftToRight(){return p.turnLeftToRight},get turnPastMidway(){return p.turnPastMidway},Cover:c.ChrononomiconCoverComponent,get children(){return e.children}}),controller:new(0,s.BookController)(r,p,l,e,t)}}},{"solid-js/web":"33rlw","./book":"cxBFn","./book_controller":"ifMWd","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","ui/animation/animation_manager":"fbyYW","./cover/chrononomicon":"kHbFE","components/page/page_controller":"iOtej"}],cxBFn:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"BookComponent",(()=>f));var n=e("solid-js/web"),a=e("solid-js"),s=e("./book.module.scss"),i=o.interopDefault(s);const c=(0,n.template)("<div>"),d=(0,n.template)("<div><div></div><div></div><div></div><div></div><div>"),l=(0,n.template)("<div><div><div>");function p(e){return(()=>{const r=c();return(0,n.insert)(r,(()=>e.children)),(0,n.effect)((t=>(0,n.classList)(r,{[i.default.page]:!0,[i.default.flipped]:e.flipped},t))),r})()}function u(e){return(()=>{const r=d(),t=r.firstChild,o=t.nextSibling,a=o.nextSibling,s=a.nextSibling,c=s.nextSibling;return(0,n.insert)(s,(0,n.createComponent)(p,{get flipped(){return e.flipped},get children(){return e.topPage}})),(0,n.insert)(c,(0,n.createComponent)(p,{get flipped(){return e.flipped},get children(){return e.bottomPage}})),(0,n.effect)((e=>{const d=i.default["book-half"],l=i.default["book-half-front"],p=i.default["book-half-right"],u=i.default["book-half-left"],f=i.default["book-half-top"],m=i.default["book-half-bottom"];return d!==e._v$&&(0,n.className)(r,e._v$=d),l!==e._v$2&&(0,n.className)(t,e._v$2=l),p!==e._v$3&&(0,n.className)(o,e._v$3=p),u!==e._v$4&&(0,n.className)(a,e._v$4=u),f!==e._v$5&&(0,n.className)(s,e._v$5=f),m!==e._v$6&&(0,n.className)(c,e._v$6=m),e}),{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0}),r})()}function f(e){const[r,t]=(0,a.createSignal)(),o=(0,a.createMemo)((()=>e.previousPages&&e.turnLeftToRight?e.previousPages:e.currentPages)),s=(0,a.createMemo)((()=>e.previousPages&&!e.turnLeftToRight?e.previousPages:e.currentPages)),[d,f]=(0,a.createSignal)(),m=e.animations.createAnimationEndEventListener(d,(()=>e.turnLeftToRight?e.turnPastMidway?["turn",i.default.ltrdown]:["midway",i.default.ltrup]:e.turnPastMidway?["turn",i.default.rtldown]:["midway",i.default.rtlup]));return(()=>{const a=l(),d=a.firstChild,g=d.firstChild;return(0,n.insert)(d,(0,n.createComponent)(u,{get topPage(){return o()?.[1]},flipped:!1}),g),(0,n.insert)(d,(()=>{const r=(0,n.memo)((()=>!(!e.previousPages||!e.currentPages)));return()=>r()&&(()=>{const r=l(),t=r.firstChild,a=t.firstChild;return(0,n.addEventListener)(t,"animationend",m),(0,n.use)(f,t),(0,n.insert)(a,(0,n.createComponent)(p,{get flipped(){return e.turnLeftToRight&&!e.turnPastMidway||!e.turnLeftToRight&&e.turnPastMidway},get children(){return(0,n.memo)((()=>!!(e.turnLeftToRight&&!e.turnPastMidway||!e.turnLeftToRight&&e.turnPastMidway)))()?o()?.[0]:s()?.[1]}})),(0,n.effect)((o=>{const s={[i.default["turn-page"]]:!0},c={[i.default["turn-page-rotate"]]:!0,[i.default.ltr]:e.turnLeftToRight,[i.default.rtl]:!e.turnLeftToRight,[i.default.down]:e.turnPastMidway,[i.default.up]:!e.turnPastMidway},d={[i.default["turn-page-flip"]]:!0,[i.default.ltr]:e.turnLeftToRight,[i.default.rtl]:!e.turnLeftToRight,[i.default.down]:e.turnPastMidway,[i.default.up]:!e.turnPastMidway};return o._v$10=(0,n.classList)(r,s,o._v$10),o._v$11=(0,n.classList)(t,c,o._v$11),o._v$12=(0,n.classList)(a,d,o._v$12),o}),{_v$10:void 0,_v$11:void 0,_v$12:void 0}),r})()})(),g),(0,n.use)(t,g),(0,n.addEventListener)(g,"transitionend",e.animations.createTransitionEndEventListener(r,(()=>"open"))),(0,n.insert)(g,(0,n.createComponent)(u,{get topPage(){return(0,n.createComponent)(e.Cover,{})},get bottomPage(){return s()?.[0]},flipped:!0})),(0,n.insert)(d,(()=>{const r=(0,n.memo)((()=>!!e.children));return()=>r()&&(()=>{const r=c();return(0,n.insert)(r,(()=>e.children)),(0,n.effect)((()=>(0,n.className)(r,i.default.spread))),r})()})(),null),(0,n.effect)((r=>{const t=i.default.container,o=i.default.book,s={[i.default.spine]:!0,[i.default.open]:null!=e.currentPages};return t!==r._v$7&&(0,n.className)(a,r._v$7=t),o!==r._v$8&&(0,n.className)(d,r._v$8=o),r._v$9=(0,n.classList)(g,s,r._v$9),r}),{_v$7:void 0,_v$8:void 0,_v$9:void 0}),a})()}},{"solid-js/web":"33rlw","solid-js":"5rsr6","./book.module.scss":"fSYuE","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],fSYuE:[function(e,r,t){r.exports.cardWidth="9",r.exports.cardHeight="12",r.exports.pageWidth="50",r.exports.pageHeight="70",r.exports.container="container_a81f2a",r.exports.book="book_a81f2a",r.exports.spread="spread_a81f2a",r.exports.page="page_a81f2a",r.exports.flipped="flipped_a81f2a",r.exports.spine="spine_a81f2a",r.exports.open="open_a81f2a",r.exports["book-half-bottom"]="book-half-bottom_a81f2a",r.exports["book-half"]="book-half_a81f2a",r.exports["book-half-top"]="book-half-top_a81f2a",r.exports["book-half-front"]="book-half-front_a81f2a",r.exports["book-half-left"]="book-half-left_a81f2a",r.exports["book-half-right"]="book-half-right_a81f2a",r.exports["turn-page"]="turn-page_a81f2a",r.exports["turn-page-flip"]="turn-page-flip_a81f2a",r.exports.rtl="rtl_a81f2a",r.exports.down="down_a81f2a",r.exports.ltr="ltr_a81f2a",r.exports.up="up_a81f2a",r.exports["turn-page-rotate"]="turn-page-rotate_a81f2a",r.exports.ltrup="ltrup_a81f2a",r.exports.ltrdown="ltrdown_a81f2a",r.exports.rtlup="rtlup_a81f2a",r.exports.rtldown="rtldown_a81f2a"},{}],ifMWd:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"bookUIDescriptor",(()=>p)),o.export(t,"BookController",(()=>u));var n=e("base/delay"),a=e("model/descriptor/literals"),s=e("model/descriptor/option"),i=e("model/descriptor/record"),c=e("model/domain"),d=e("solid-js"),l=e("ui/sounds/sound_manager");const p=(0,i.activeRecordDescriptor)({previousSpread:(0,s.optionalDescriptor)(c.bookSpreadDescriptor),turnLeftToRight:a.booleanDescriptor,turnPastMidway:a.booleanDescriptor});class u{constructor(e,r,t,o,n){this.book=e,this.bookUI=r,this.animations=t,this.pageComponentManager=o,this.soundManager=n}async showSpread(e,r=!1){if(e!=this.book.spread){this.soundManager.playEffect(l.SoundEffect.BookFlip);const t=null==this.book.spread,o=this.book.spread;null!=o&&await(this.pageComponentManager.lookupController(o)?.popdown()),(0,d.batch)((()=>{this.bookUI.previousSpread=this.book.spread,this.bookUI.turnLeftToRight=r,this.bookUI.turnPastMidway=!1,this.book.spread=e})),t?await this.animations.waitForAnimation("open"):(await this.animations.waitForAnimation("midway"),this.bookUI.turnPastMidway=!0,await this.animations.waitForAnimation("turn"),this.bookUI.previousSpread=void 0),await(0,n.delay)(0),await(0,d.batch)((async()=>{null!=e&&await(this.pageComponentManager.lookupController(e)?.popup())}))}}}},{"model/descriptor/literals":"6SgZZ","model/descriptor/option":"c8pK3","model/descriptor/record":"9b5Fs","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","model/domain":"hG1oc","solid-js":"5rsr6","base/delay":"hGewO","ui/sounds/sound_manager":"iITyB"}],c8pK3:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"optionalDescriptor",(()=>a));class n{constructor(e){this.mandatoryTypeDescriptor=e}create(e){return null!=e?this.mandatoryTypeDescriptor.create(e):void 0}snapshot(e){return null!=e?this.mandatoryTypeDescriptor.snapshot(e):void 0}freeze(e){return null!=e?this.mandatoryTypeDescriptor.freeze(e):void 0}}function a(e){return new n(e)}},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],hG1oc:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"SymbolType",(()=>d)),o.export(t,"EffectDirection",(()=>l)),o.export(t,"CardBackgroundType",(()=>p)),o.export(t,"CardForegroundType",(()=>u)),o.export(t,"CardFaceType",(()=>f)),o.export(t,"ChoiceType",(()=>m)),o.export(t,"EncounterType",(()=>g)),o.export(t,"MonsterType",(()=>y)),o.export(t,"EventType",(()=>h)),o.export(t,"RecycleTarget",(()=>b)),o.export(t,"cardDescriptor",(()=>v)),o.export(t,"cardSlotDescriptor",(()=>C)),o.export(t,"BookSpreadType",(()=>_)),o.export(t,"bookSpreadTableOfContentsDescriptor",(()=>T)),o.export(t,"bookSpreadDeathDescriptor",(()=>k)),o.export(t,"deckDescriptor",(()=>x)),o.export(t,"entityDescriptor",(()=>w)),o.export(t,"encounterBattleDescriptor",(()=>F)),o.export(t,"encounterEventDescriptor",(()=>D)),o.export(t,"encounterDescriptor",(()=>j)),o.export(t,"bookSpreadRoomDescriptor",(()=>S)),o.export(t,"bookSpreadDescriptor",(()=>M)),o.export(t,"ChapterType",(()=>B)),o.export(t,"chapterDescriptor",(()=>A)),o.export(t,"bookDescriptor",(()=>P)),o.export(t,"gameDescriptor",(()=>I));var n=e("./descriptor/list"),a=e("./descriptor/literals"),s=e("./descriptor/option"),i=e("./descriptor/record"),c=e("./descriptor/union");let d,l,p,u,f,m,g,y,h,b;!function(e){e[e.Force=1]="Force",e[e.Finesse=2]="Finesse",e[e.Mind=3]="Mind",e[e.Magic=4]="Magic",e[e.Perception=5]="Perception",e[e.Damage=6]="Damage",e[e.Youth=7]="Youth",e[e.Age=8]="Age",e[e.Draw=9]="Draw",e[e.Healing=10]="Healing",e[e.Poison=11]="Poison",e[e.GainCards=12]="GainCards",e[e.LoseCards=13]="LoseCards",e[e.GainMaxHealth=14]="GainMaxHealth",e[e.LoseMaxHealth=15]="LoseMaxHealth",e[e.DoubleCard=16]="DoubleCard",e[e.Duplicate=17]="Duplicate"}(d||(d={})),function(e){e[e.Up=1]="Up",e[e.Down=2]="Down",e[e.Omni=3]="Omni"}(l||(l={})),function(e){e[e.Crosshatched=1]="Crosshatched",e[e.Clear=2]="Clear",e[e.Door=3]="Door",e[e.ForestPath=4]="ForestPath",e[e.DarkenedForestPath=5]="DarkenedForestPath",e[e.Passageway=6]="Passageway"}(p||(p={})),function(e){e[e.Rat=1]="Rat",e[e.Troll=2]="Troll",e[e.Snail=3]="Snail",e[e.Rooster=4]="Rooster",e[e.Trap=5]="Trap",e[e.Fountain=6]="Fountain",e[e.MagicTree=7]="MagicTree",e[e.Mushroom=8]="Mushroom",e[e.Shrine=9]="Shrine",e[e.Treasure=10]="Treasure",e[e.Dummy=11]="Dummy"}(u||(u={})),function(e){e[e.Resource=1]="Resource",e[e.ResourceBack=2]="ResourceBack",e[e.Choice=3]="Choice",e[e.ChoiceBack=4]="ChoiceBack"}(f||(f={})),function(e){e[e.NextTurn=1]="NextTurn",e[e.NextPage=2]="NextPage",e[e.NextChapter=3]="NextChapter",e[e.ToC=4]="ToC"}(m||(m={})),function(e){e[e.Battle=1]="Battle",e[e.Event=2]="Event"}(g||(g={})),function(e){e[e.BigRat=1]="BigRat",e[e.Snail=2]="Snail",e[e.Troll=3]="Troll",e[e.Rooster=4]="Rooster",e[e.Dummy=5]="Dummy"}(y||(y={})),function(e){e[e.Fountain=1]="Fountain",e[e.MagicTree=2]="MagicTree",e[e.Mushroom=3]="Mushroom",e[e.Shrine=4]="Shrine",e[e.Treasure=5]="Treasure",e[e.Shop=6]="Shop"}(h||(h={})),function(e){e[e.Destroy=1]="Destroy",e[e.Draw=2]="Draw",e[e.Discard=3]="Discard"}(b||(b={}));const v=(0,i.activeRecordDescriptor)({faces:new(0,a.LiteralTypeDescriptor),recycleTarget:new(0,a.LiteralTypeDescriptor),recyclePosition:(0,s.optionalDescriptor)(a.numberDescriptor),visibleFaceIndex:a.numberDescriptor}),C=(0,i.activeRecordDescriptor)({targetCard:(0,s.optionalDescriptor)(v),playedCards:(0,n.listDescriptor)(v)});let _;!function(e){e[e.TableOfContents=1]="TableOfContents",e[e.Room=2]="Room",e[e.Death=3]="Death"}(_||(_={}));const T=(0,i.activeRecordDescriptor)({type:new(0,a.LiteralTypeDescriptor),unlockedChapters:a.numberDescriptor}),k=(0,i.activeRecordDescriptor)({type:new(0,a.LiteralTypeDescriptor)}),x=(0,n.listDescriptor)(v),w=(0,i.activeRecordDescriptor)({health:a.numberDescriptor,maxHealth:a.numberDescriptor,deck:x,age:a.numberDescriptor}),F=(0,i.activeRecordDescriptor)({type:new(0,a.LiteralTypeDescriptor),monster:w,monsterType:new(0,a.LiteralTypeDescriptor)}),D=(0,i.activeRecordDescriptor)({type:new(0,a.LiteralTypeDescriptor),eventType:new(0,a.LiteralTypeDescriptor),deck:x}),j=(0,c.discriminatingUnionDescriptor)({1:F,2:D},(e=>e.type),(e=>e.type)),S=(0,i.activeRecordDescriptor)({type:new(0,a.LiteralTypeDescriptor),encounter:(0,s.optionalDescriptor)(j)}),M=(0,c.discriminatingUnionDescriptor)({1:T,2:S,3:k},(e=>e.type),(e=>e.type));let B;!function(e){e[e.Tutorial=0]="Tutorial",e[e.Prelude=1]="Prelude",e[e.Shop=2]="Shop",e[e.Forest=3]="Forest",e[e.Ruins=4]="Ruins",e[e.Tower=5]="Tower"}(B||(B={}));const A=(0,i.activeRecordDescriptor)({type:new(0,a.LiteralTypeDescriptor),deck:x,pagesRemaining:a.numberDescriptor,finalCard:v}),P=(0,i.activeRecordDescriptor)({spread:(0,s.optionalDescriptor)(M),chapter:A,cardSlots:(0,n.listDescriptor)(C)}),I=(0,i.activeRecordDescriptor)({book:P,playerCharacter:(0,s.optionalDescriptor)(w),playerHand:(0,n.listDescriptor)(C)})},{"./descriptor/list":"lvxQr","./descriptor/literals":"6SgZZ","./descriptor/option":"c8pK3","./descriptor/record":"9b5Fs","./descriptor/union":"ivSrf","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],lvxQr:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"listDescriptor",(()=>a));class n{constructor(e){this.elementTypeDescriptor=e}create(e){return e.map((e=>this.elementTypeDescriptor.create(e)))}snapshot(e){return e.map((e=>this.elementTypeDescriptor.snapshot(e)))}freeze(e){return Object.freeze(e.map((e=>this.elementTypeDescriptor.freeze(e))))}}function a(e){return new n(e)}},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],ivSrf:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"discriminatingUnionDescriptor",(()=>a));class n{constructor(e,r,t){this.cases=e,this.discriminatorState=r,this.discriminatorMutable=t}create(e){const r=this.discriminatorState(e);return this.cases[r].create(e)}snapshot(e){const r=this.discriminatorMutable(e);return this.cases[r].snapshot(e)}freeze(e){const r=this.discriminatorState(e);return this.cases[r].freeze(e)}}function a(e,r,t){return new n(e,r,t)}},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],iITyB:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"BackgroundTrack",(()=>ee)),o.export(t,"SoundEffect",(()=>re)),o.export(t,"SoundManager",(()=>oe));var n=e("howler"),a=e("./res/background1.mp3"),s=o.interopDefault(a),i=e("./res/ambient.mp3"),c=o.interopDefault(i),d=e("./res/Book_Flip-001.mp3"),l=o.interopDefault(d),p=e("./res/Book_Flip-002.mp3"),u=o.interopDefault(p),f=e("./res/Book_Flip-003.mp3"),m=o.interopDefault(f),g=e("./res/Book_Flip-004.mp3"),y=o.interopDefault(g),h=e("./res/Card_Flip_01.mp3"),b=o.interopDefault(h),v=e("./res/Card_Flip_02.mp3"),C=o.interopDefault(v),_=e("./res/Card_Flip_03.mp3"),T=o.interopDefault(_),k=e("./res/Card_Flip_Timed_01.mp3"),x=o.interopDefault(k),w=e("./res/Card_Flip_Timed_02.mp3"),F=o.interopDefault(w),D=e("./res/Cards_Flip_Extra.mp3"),j=o.interopDefault(D),S=e("./res/Cards_Exit-001.mp3"),M=o.interopDefault(S),B=e("./res/Cards_Exit-002.mp3"),A=o.interopDefault(B),P=e("./res/Card_Placement_01.mp3"),I=o.interopDefault(P),E=e("./res/Card_Placement_02.mp3"),R=o.interopDefault(E),L=e("./res/Card_Placement_03.mp3"),H=o.interopDefault(L),U=e("./res/Card_Placement_04.mp3"),G=o.interopDefault(U),O=e("./res/Monster Damage.mp3"),$=o.interopDefault(O),N=e("./res/Victory Sound.mp3"),V=o.interopDefault(N),z=e("./res/UI_Menu_Select.mp3"),Y=o.interopDefault(z),X=e("./res/UI_Menu_Navigation-001.mp3"),W=o.interopDefault(X),q=e("./res/UI_Menu_Navigation-002.mp3"),Q=o.interopDefault(q),J=e("./res/UI_Menu_Navigation-003.mp3"),Z=o.interopDefault(J),K=e("base/delay");let ee,re;!function(e){e[e.None=1]="None",e[e.Ambient=2]="Ambient",e[e.Music=3]="Music"}(ee||(ee={})),function(e){e[e.CardFlip=1]="CardFlip",e[e.CardPlacement=2]="CardPlacement",e[e.CardExit=3]="CardExit",e[e.BookFlip=4]="BookFlip",e[e.MonsterDamage=5]="MonsterDamage",e[e.Victory=6]="Victory",e[e.UISelect=7]="UISelect",e[e.UINavigate=8]="UINavigate"}(re||(re={}));const te=.7;class oe{constructor(){this.backgroundTracks=new Map([[3,new(0,n.Howl)({src:s.default,loop:!0,volume:te})],[2,new(0,n.Howl)({src:c.default,loop:!0,volume:te})]]),this.soundEffects=new Map([[4,ae([l.default,u.default,m.default,y.default],.5)],[1,ae([b.default,C.default,T.default,x.default,F.default,j.default],.2)],[2,ae([I.default,R.default,H.default,G.default],.2)],[3,ae([M.default,A.default],.2)],[5,ae([$.default],1)],[6,ae([V.default],1)],[7,ae([Y.default],1)],[8,ae([W.default,Q.default,Z.default],.4)]])}async init(){await Promise.all([...this.backgroundTracks.values(),...[...this.soundEffects.values()].flat()].map(ne))}async playBackgroundTrack(e,r=1e3){const t=this.backgroundTracks.get(e);t!==this.background&&(null!=this.background&&(this.background.fade(te,0,1e3),await(0,K.delay)(r),this.background.pause()),this.background=t,null!=this.background&&(this.background.fade(0,te,r),this.background.play()))}playEffect(e){const r=this.soundEffects.get(e);if(null!=r){if(!r.some((e=>e.playing()))){r[Math.floor(Math.random()*r.length)].play()}}}pause(){this.background?.pause()}resume(){this.background?.play()}}function ne(e){return new Promise(((r,t)=>{if("loaded"===e.state())return r();e.on("load",r),e.on("loaderror",t)}))}function ae(e,r=.2){return e.map((e=>new(0,n.Howl)({src:e,volume:r})))}},{howler:"6L2Ft","./res/background1.mp3":"3b77f","./res/ambient.mp3":"j9AS5","./res/Book_Flip-001.mp3":"bzJWU","./res/Book_Flip-002.mp3":"hfaAd","./res/Book_Flip-003.mp3":"j7MGQ","./res/Book_Flip-004.mp3":"dBBkF","./res/Card_Flip_01.mp3":"8HZOD","./res/Card_Flip_02.mp3":"lYu9d","./res/Card_Flip_03.mp3":"1yve4","./res/Card_Flip_Timed_01.mp3":"duG9f","./res/Card_Flip_Timed_02.mp3":"alsna","./res/Cards_Flip_Extra.mp3":"iUHH4","./res/Cards_Exit-001.mp3":"gbfzg","./res/Cards_Exit-002.mp3":"fz7gB","./res/Card_Placement_01.mp3":"d6oQb","./res/Card_Placement_02.mp3":"klI9d","./res/Card_Placement_03.mp3":"7tt3x","./res/Card_Placement_04.mp3":"78pYK","./res/Monster Damage.mp3":"fBxCl","./res/Victory Sound.mp3":"l6LLV","./res/UI_Menu_Select.mp3":"hRpfj","./res/UI_Menu_Navigation-001.mp3":"2naLj","./res/UI_Menu_Navigation-002.mp3":"8Ibtj","./res/UI_Menu_Navigation-003.mp3":"7MnJ1","base/delay":"hGewO","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"6L2Ft":[function(e,r,t){var o=arguments[3];
/*!
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */!function(){"use strict";var e=function(){this.init()};e.prototype={init:function(){var e=this||r;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var t=this||r;if(e=parseFloat(e),t.ctx||p(),void 0!==e&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,r.ctx.currentTime);for(var o=0;o<t._howls.length;o++)if(!t._howls[o]._webAudio)for(var n=t._howls[o]._getSoundIds(),a=0;a<n.length;a++){var s=t._howls[o]._soundById(n[a]);s&&s._node&&(s._node.volume=s._volume*e)}return t}return t._volume},mute:function(e){var t=this||r;t.ctx||p(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,r.ctx.currentTime);for(var o=0;o<t._howls.length;o++)if(!t._howls[o]._webAudio)for(var n=t._howls[o]._getSoundIds(),a=0;a<n.length;a++){var s=t._howls[o]._soundById(n[a]);s&&s._node&&(s._node.muted=!!e||s._muted)}return t},stop:function(){for(var e=this||r,t=0;t<e._howls.length;t++)e._howls[t].stop();return e},unload:function(){for(var e=this||r,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,p()),e},codecs:function(e){return(this||r)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||r;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(e._canPlayEvent="canplay")}catch(r){e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch(e){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||r,t=null;try{t="undefined"!=typeof Audio?new Audio:null}catch(r){return e}if(!t||"function"!=typeof t.canPlayType)return e;var o=t.canPlayType("audio/mpeg;").replace(/^no$/,""),n=e._navigator?e._navigator.userAgent:"",a=n.match(/OPR\/([0-6].)/g),s=a&&parseInt(a[0].split("/")[1],10)<33,i=-1!==n.indexOf("Safari")&&-1===n.indexOf("Chrome"),c=n.match(/Version\/(.*?) /),d=i&&c&&parseInt(c[1],10)<15;return e._codecs={mp3:!(s||!o&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!o,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(t.canPlayType('audio/wav; codecs="1"')||t.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(t.canPlayType("audio/x-m4b;")||t.canPlayType("audio/m4b;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(d||!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(d||!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||r;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1,e.autoUnlock=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var t=function(r){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var o=new Audio;o._unlocked=!0,e._releaseHtml5Audio(o)}catch(r){e.noAudio=!0;break}for(var n=0;n<e._howls.length;n++)if(!e._howls[n]._webAudio)for(var a=e._howls[n]._getSoundIds(),s=0;s<a.length;s++){var i=e._howls[n]._soundById(a[s]);i&&i._node&&!i._node._unlocked&&(i._node._unlocked=!0,i._node.load())}e._autoResume();var c=e.ctx.createBufferSource();c.buffer=e._scratchBuffer,c.connect(e.ctx.destination),void 0===c.start?c.noteOn(0):c.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),c.onended=function(){c.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",t,!0),document.removeEventListener("touchend",t,!0),document.removeEventListener("click",t,!0),document.removeEventListener("keydown",t,!0);for(var r=0;r<e._howls.length;r++)e._howls[r]._emit("unlock")}};return document.addEventListener("touchstart",t,!0),document.addEventListener("touchend",t,!0),document.addEventListener("click",t,!0),document.addEventListener("keydown",t,!0),e}},_obtainHtml5Audio:function(){var e=this||r;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var t=(new Audio).play();return t&&"undefined"!=typeof Promise&&(t instanceof Promise||"function"==typeof t.then)&&t.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(e){var t=this||r;return e._unlocked&&t._html5AudioPool.push(e),t},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&r.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var o=0;o<e._howls[t]._sounds.length;o++)if(!e._howls[t]._sounds[o]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout((function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var r=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(r,r)}}),3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&r.usingWebAudio)return"running"===e.state&&"interrupted"!==e.ctx.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state||"running"===e.state&&"interrupted"===e.ctx.state?(e.ctx.resume().then((function(){e.state="running";for(var r=0;r<e._howls.length;r++)e._howls[r]._emit("resume")})),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var r=new e,n=function(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")};n.prototype={init:function(e){var t=this;return r.ctx||p(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload&&"metadata"!==e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:!(!e.xhr||!e.xhr.withCredentials)&&e.xhr.withCredentials},t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=r.usingWebAudio&&!t._html5,void 0!==r.ctx&&r.ctx&&r.autoUnlock&&r._unlockAudio(),r._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&"none"!==t._preload&&t.load(),t},load:function(){var e=this,t=null;if(r.noAudio)e._emit("loaderror",null,"No audio support.");else{"string"==typeof e._src&&(e._src=[e._src]);for(var o=0;o<e._src.length;o++){var n,s;if(e._format&&e._format[o])n=e._format[o];else{if("string"!=typeof(s=e._src[o])){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(n=/^data:audio\/([^;,]+);/i.exec(s))||(n=/\.([^.]+)$/.exec(s.split("?",1)[0])),n&&(n=n[1].toLowerCase())}if(n||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),n&&r.codecs(n)){t=e._src[o];break}}if(t)return e._src=t,e._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new a(e),e._webAudio&&i(e),e;e._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,t){var o=this,n=null;if("number"==typeof e)n=e,e=null;else{if("string"==typeof e&&"loaded"===o._state&&!o._sprite[e])return null;if(void 0===e&&(e="__default",!o._playLock)){for(var a=0,s=0;s<o._sounds.length;s++)o._sounds[s]._paused&&!o._sounds[s]._ended&&(a++,n=o._sounds[s]._id);1===a?e=null:n=null}}var i=n?o._soundById(n):o._inactiveSound();if(!i)return null;if(n&&!e&&(e=i._sprite||"__default"),"loaded"!==o._state){i._sprite=e,i._ended=!1;var c=i._id;return o._queue.push({event:"play",action:function(){o.play(c)}}),c}if(n&&!i._paused)return t||o._loadQueue("play"),i._id;o._webAudio&&r._autoResume();var d=Math.max(0,i._seek>0?i._seek:o._sprite[e][0]/1e3),l=Math.max(0,(o._sprite[e][0]+o._sprite[e][1])/1e3-d),p=1e3*l/Math.abs(i._rate),u=o._sprite[e][0]/1e3,f=(o._sprite[e][0]+o._sprite[e][1])/1e3;i._sprite=e,i._ended=!1;var m=function(){i._paused=!1,i._seek=d,i._start=u,i._stop=f,i._loop=!(!i._loop&&!o._sprite[e][2])};if(!(d>=f)){var g=i._node;if(o._webAudio){var y=function(){o._playLock=!1,m(),o._refreshBuffer(i);var e=i._muted||o._muted?0:i._volume;g.gain.setValueAtTime(e,r.ctx.currentTime),i._playStart=r.ctx.currentTime,void 0===g.bufferSource.start?i._loop?g.bufferSource.noteGrainOn(0,d,86400):g.bufferSource.noteGrainOn(0,d,l):i._loop?g.bufferSource.start(0,d,86400):g.bufferSource.start(0,d,l),p!==1/0&&(o._endTimers[i._id]=setTimeout(o._ended.bind(o,i),p)),t||setTimeout((function(){o._emit("play",i._id),o._loadQueue()}),0)};"running"===r.state&&"interrupted"!==r.ctx.state?y():(o._playLock=!0,o.once("resume",y),o._clearTimer(i._id))}else{var h=function(){g.currentTime=d,g.muted=i._muted||o._muted||r._muted||g.muted,g.volume=i._volume*r.volume(),g.playbackRate=i._rate;try{var n=g.play();if(n&&"undefined"!=typeof Promise&&(n instanceof Promise||"function"==typeof n.then)?(o._playLock=!0,m(),n.then((function(){o._playLock=!1,g._unlocked=!0,t?o._loadQueue():o._emit("play",i._id)})).catch((function(){o._playLock=!1,o._emit("playerror",i._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),i._ended=!0,i._paused=!0}))):t||(o._playLock=!1,m(),o._emit("play",i._id)),g.playbackRate=i._rate,g.paused)return void o._emit("playerror",i._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||i._loop?o._endTimers[i._id]=setTimeout(o._ended.bind(o,i),p):(o._endTimers[i._id]=function(){o._ended(i),g.removeEventListener("ended",o._endTimers[i._id],!1)},g.addEventListener("ended",o._endTimers[i._id],!1))}catch(e){o._emit("playerror",i._id,e)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===g.src&&(g.src=o._src,g.load());var b=window&&window.ejecta||!g.readyState&&r._navigator.isCocoonJS;if(g.readyState>=3||b)h();else{o._playLock=!0,o._state="loading";var v=function(){o._state="loaded",h(),g.removeEventListener(r._canPlayEvent,v,!1)};g.addEventListener(r._canPlayEvent,v,!1),o._clearTimer(i._id)}}return i._id}o._ended(i)},pause:function(e){var r=this;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"pause",action:function(){r.pause(e)}}),r;for(var t=r._getSoundIds(e),o=0;o<t.length;o++){r._clearTimer(t[o]);var n=r._soundById(t[o]);if(n&&!n._paused&&(n._seek=r.seek(t[o]),n._rateSeek=0,n._paused=!0,r._stopFade(t[o]),n._node))if(r._webAudio){if(!n._node.bufferSource)continue;void 0===n._node.bufferSource.stop?n._node.bufferSource.noteOff(0):n._node.bufferSource.stop(0),r._cleanBuffer(n._node)}else isNaN(n._node.duration)&&n._node.duration!==1/0||n._node.pause();arguments[1]||r._emit("pause",n?n._id:null)}return r},stop:function(e,r){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"stop",action:function(){t.stop(e)}}),t;for(var o=t._getSoundIds(e),n=0;n<o.length;n++){t._clearTimer(o[n]);var a=t._soundById(o[n]);a&&(a._seek=a._start||0,a._rateSeek=0,a._paused=!0,a._ended=!0,t._stopFade(o[n]),a._node&&(t._webAudio?a._node.bufferSource&&(void 0===a._node.bufferSource.stop?a._node.bufferSource.noteOff(0):a._node.bufferSource.stop(0),t._cleanBuffer(a._node)):isNaN(a._node.duration)&&a._node.duration!==1/0||(a._node.currentTime=a._start||0,a._node.pause(),a._node.duration===1/0&&t._clearSound(a._node))),r||t._emit("stop",a._id))}return t},mute:function(e,t){var o=this;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"mute",action:function(){o.mute(e,t)}}),o;if(void 0===t){if("boolean"!=typeof e)return o._muted;o._muted=e}for(var n=o._getSoundIds(t),a=0;a<n.length;a++){var s=o._soundById(n[a]);s&&(s._muted=e,s._interval&&o._stopFade(s._id),o._webAudio&&s._node?s._node.gain.setValueAtTime(e?0:s._volume,r.ctx.currentTime):s._node&&(s._node.muted=!!r._muted||e),o._emit("mute",s._id))}return o},volume:function(){var e,t,o,n=this,a=arguments;if(0===a.length)return n._volume;if(1===a.length||2===a.length&&void 0===a[1]?n._getSoundIds().indexOf(a[0])>=0?t=parseInt(a[0],10):e=parseFloat(a[0]):a.length>=2&&(e=parseFloat(a[0]),t=parseInt(a[1],10)),!(void 0!==e&&e>=0&&e<=1))return(o=t?n._soundById(t):n._sounds[0])?o._volume:0;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"volume",action:function(){n.volume.apply(n,a)}}),n;void 0===t&&(n._volume=e),t=n._getSoundIds(t);for(var s=0;s<t.length;s++)(o=n._soundById(t[s]))&&(o._volume=e,a[2]||n._stopFade(t[s]),n._webAudio&&o._node&&!o._muted?o._node.gain.setValueAtTime(e,r.ctx.currentTime):o._node&&!o._muted&&(o._node.volume=e*r.volume()),n._emit("volume",o._id));return n},fade:function(e,t,o,n){var a=this;if("loaded"!==a._state||a._playLock)return a._queue.push({event:"fade",action:function(){a.fade(e,t,o,n)}}),a;e=Math.min(Math.max(0,parseFloat(e)),1),t=Math.min(Math.max(0,parseFloat(t)),1),o=parseFloat(o),a.volume(e,n);for(var s=a._getSoundIds(n),i=0;i<s.length;i++){var c=a._soundById(s[i]);if(c){if(n||a._stopFade(s[i]),a._webAudio&&!c._muted){var d=r.ctx.currentTime,l=d+o/1e3;c._volume=e,c._node.gain.setValueAtTime(e,d),c._node.gain.linearRampToValueAtTime(t,l)}a._startFadeInterval(c,e,t,o,s[i],void 0===n)}}return a},_startFadeInterval:function(e,r,t,o,n,a){var s=this,i=r,c=t-r,d=Math.abs(c/.01),l=Math.max(4,d>0?o/d:o),p=Date.now();e._fadeTo=t,e._interval=setInterval((function(){var n=(Date.now()-p)/o;p=Date.now(),i+=c*n,i=Math.round(100*i)/100,i=c<0?Math.max(t,i):Math.min(t,i),s._webAudio?e._volume=i:s.volume(i,e._id,!0),a&&(s._volume=i),(t<r&&i<=t||t>r&&i>=t)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,s.volume(t,e._id),s._emit("fade",e._id))}),l)},_stopFade:function(e){var t=this,o=t._soundById(e);return o&&o._interval&&(t._webAudio&&o._node.gain.cancelScheduledValues(r.ctx.currentTime),clearInterval(o._interval),o._interval=null,t.volume(o._fadeTo,e),o._fadeTo=null,t._emit("fade",e)),t},loop:function(){var e,r,t,o=this,n=arguments;if(0===n.length)return o._loop;if(1===n.length){if("boolean"!=typeof n[0])return!!(t=o._soundById(parseInt(n[0],10)))&&t._loop;e=n[0],o._loop=e}else 2===n.length&&(e=n[0],r=parseInt(n[1],10));for(var a=o._getSoundIds(r),s=0;s<a.length;s++)(t=o._soundById(a[s]))&&(t._loop=e,o._webAudio&&t._node&&t._node.bufferSource&&(t._node.bufferSource.loop=e,e&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop,o.playing(a[s])&&(o.pause(a[s],!0),o.play(a[s],!0)))));return o},rate:function(){var e,t,o,n=this,a=arguments;if(0===a.length)t=n._sounds[0]._id;else if(1===a.length){n._getSoundIds().indexOf(a[0])>=0?t=parseInt(a[0],10):e=parseFloat(a[0])}else 2===a.length&&(e=parseFloat(a[0]),t=parseInt(a[1],10));if("number"!=typeof e)return(o=n._soundById(t))?o._rate:n._rate;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"rate",action:function(){n.rate.apply(n,a)}}),n;void 0===t&&(n._rate=e),t=n._getSoundIds(t);for(var s=0;s<t.length;s++)if(o=n._soundById(t[s])){n.playing(t[s])&&(o._rateSeek=n.seek(t[s]),o._playStart=n._webAudio?r.ctx.currentTime:o._playStart),o._rate=e,n._webAudio&&o._node&&o._node.bufferSource?o._node.bufferSource.playbackRate.setValueAtTime(e,r.ctx.currentTime):o._node&&(o._node.playbackRate=e);var i=n.seek(t[s]),c=1e3*((n._sprite[o._sprite][0]+n._sprite[o._sprite][1])/1e3-i)/Math.abs(o._rate);!n._endTimers[t[s]]&&o._paused||(n._clearTimer(t[s]),n._endTimers[t[s]]=setTimeout(n._ended.bind(n,o),c)),n._emit("rate",o._id)}return n},seek:function(){var e,t,o=this,n=arguments;if(0===n.length)o._sounds.length&&(t=o._sounds[0]._id);else if(1===n.length){o._getSoundIds().indexOf(n[0])>=0?t=parseInt(n[0],10):o._sounds.length&&(t=o._sounds[0]._id,e=parseFloat(n[0]))}else 2===n.length&&(e=parseFloat(n[0]),t=parseInt(n[1],10));if(void 0===t)return 0;if("number"==typeof e&&("loaded"!==o._state||o._playLock))return o._queue.push({event:"seek",action:function(){o.seek.apply(o,n)}}),o;var a=o._soundById(t);if(a){if(!("number"==typeof e&&e>=0)){if(o._webAudio){var s=o.playing(t)?r.ctx.currentTime-a._playStart:0,i=a._rateSeek?a._rateSeek-a._seek:0;return a._seek+(i+s*Math.abs(a._rate))}return a._node.currentTime}var c=o.playing(t);c&&o.pause(t,!0),a._seek=e,a._ended=!1,o._clearTimer(t),o._webAudio||!a._node||isNaN(a._node.duration)||(a._node.currentTime=e);var d=function(){c&&o.play(t,!0),o._emit("seek",t)};if(c&&!o._webAudio){var l=function(){o._playLock?setTimeout(l,0):d()};setTimeout(l,0)}else d()}return o},playing:function(e){var r=this;if("number"==typeof e){var t=r._soundById(e);return!!t&&!t._paused}for(var o=0;o<r._sounds.length;o++)if(!r._sounds[o]._paused)return!0;return!1},duration:function(e){var r=this,t=r._duration,o=r._soundById(e);return o&&(t=r._sprite[o._sprite][1]/1e3),t},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,o=0;o<t.length;o++)t[o]._paused||e.stop(t[o]._id),e._webAudio||(e._clearSound(t[o]._node),t[o]._node.removeEventListener("error",t[o]._errorFn,!1),t[o]._node.removeEventListener(r._canPlayEvent,t[o]._loadFn,!1),t[o]._node.removeEventListener("ended",t[o]._endFn,!1),r._releaseHtml5Audio(t[o]._node)),delete t[o]._node,e._clearTimer(t[o]._id);var n=r._howls.indexOf(e);n>=0&&r._howls.splice(n,1);var a=!0;for(o=0;o<r._howls.length;o++)if(r._howls[o]._src===e._src||e._src.indexOf(r._howls[o]._src)>=0){a=!1;break}return s&&a&&delete s[e._src],r.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,r,t,o){var n=this["_on"+e];return"function"==typeof r&&n.push(o?{id:t,fn:r,once:o}:{id:t,fn:r}),this},off:function(e,r,t){var o=this,n=o["_on"+e],a=0;if("number"==typeof r&&(t=r,r=null),r||t)for(a=0;a<n.length;a++){var s=t===n[a].id;if(r===n[a].fn&&s||!r&&s){n.splice(a,1);break}}else if(e)o["_on"+e]=[];else{var i=Object.keys(o);for(a=0;a<i.length;a++)0===i[a].indexOf("_on")&&Array.isArray(o[i[a]])&&(o[i[a]]=[])}return o},once:function(e,r,t){return this.on(e,r,t,1),this},_emit:function(e,r,t){for(var o=this,n=o["_on"+e],a=n.length-1;a>=0;a--)n[a].id&&n[a].id!==r&&"load"!==e||(setTimeout(function(e){e.call(this,r,t)}.bind(o,n[a].fn),0),n[a].once&&o.off(e,n[a].fn,n[a].id));return o._loadQueue(e),o},_loadQueue:function(e){var r=this;if(r._queue.length>0){var t=r._queue[0];t.event===e&&(r._queue.shift(),r._loadQueue()),e||t.action()}return r},_ended:function(e){var t=this,o=e._sprite;if(!t._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(t._ended.bind(t,e),100),t;var n=!(!e._loop&&!t._sprite[o][2]);if(t._emit("end",e._id),!t._webAudio&&n&&t.stop(e._id,!0).play(e._id),t._webAudio&&n){t._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=r.ctx.currentTime;var a=1e3*(e._stop-e._start)/Math.abs(e._rate);t._endTimers[e._id]=setTimeout(t._ended.bind(t,e),a)}return t._webAudio&&!n&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,t._clearTimer(e._id),t._cleanBuffer(e._node),r._autoSuspend()),t._webAudio||n||t.stop(e._id,!0),t},_clearTimer:function(e){var r=this;if(r._endTimers[e]){if("function"!=typeof r._endTimers[e])clearTimeout(r._endTimers[e]);else{var t=r._soundById(e);t&&t._node&&t._node.removeEventListener("ended",r._endTimers[e],!1)}delete r._endTimers[e]}return r},_soundById:function(e){for(var r=this,t=0;t<r._sounds.length;t++)if(e===r._sounds[t]._id)return r._sounds[t];return null},_inactiveSound:function(){var e=this;e._drain();for(var r=0;r<e._sounds.length;r++)if(e._sounds[r]._ended)return e._sounds[r].reset();return new a(e)},_drain:function(){var e=this,r=e._pool,t=0,o=0;if(!(e._sounds.length<r)){for(o=0;o<e._sounds.length;o++)e._sounds[o]._ended&&t++;for(o=e._sounds.length-1;o>=0;o--){if(t<=r)return;e._sounds[o]._ended&&(e._webAudio&&e._sounds[o]._node&&e._sounds[o]._node.disconnect(0),e._sounds.splice(o,1),t--)}}},_getSoundIds:function(e){if(void 0===e){for(var r=[],t=0;t<this._sounds.length;t++)r.push(this._sounds[t]._id);return r}return[e]},_refreshBuffer:function(e){return e._node.bufferSource=r.ctx.createBufferSource(),e._node.bufferSource.buffer=s[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,r.ctx.currentTime),this},_cleanBuffer:function(e){var t=r._navigator&&r._navigator.vendor.indexOf("Apple")>=0;if(r._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),t))try{e.bufferSource.buffer=r._scratchBuffer}catch(e){}return e.bufferSource=null,this},_clearSound:function(e){/MSIE |Trident\//.test(r._navigator&&r._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var a=function(e){this._parent=e,this.init()};a.prototype={init:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++r._counter,t._sounds.push(e),e.create(),e},create:function(){var e=this,t=e._parent,o=r._muted||e._muted||e._parent._muted?0:e._volume;return t._webAudio?(e._node=void 0===r.ctx.createGain?r.ctx.createGainNode():r.ctx.createGain(),e._node.gain.setValueAtTime(o,r.ctx.currentTime),e._node.paused=!0,e._node.connect(r.masterGain)):r.noAudio||(e._node=r._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(r._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=t._src,e._node.preload=!0===t._preload?"auto":t._preload,e._node.volume=o*r.volume(),e._node.load()),e},reset:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++r._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,t=e._parent;t._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),e._node.removeEventListener(r._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,r=e._parent;r._duration===1/0&&(r._duration=Math.ceil(10*e._node.duration)/10,r._sprite.__default[1]===1/0&&(r._sprite.__default[1]=1e3*r._duration),r._ended(e)),e._node.removeEventListener("ended",e._endFn,!1)}};var s={},i=function(e){var r=e._src;if(s[r])return e._duration=s[r].duration,void l(e);if(/^data:[^;]+;base64,/.test(r)){for(var t=atob(r.split(",")[1]),o=new Uint8Array(t.length),n=0;n<t.length;++n)o[n]=t.charCodeAt(n);d(o.buffer,e)}else{var a=new XMLHttpRequest;a.open(e._xhr.method,r,!0),a.withCredentials=e._xhr.withCredentials,a.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach((function(r){a.setRequestHeader(r,e._xhr.headers[r])})),a.onload=function(){var r=(a.status+"")[0];"0"===r||"2"===r||"3"===r?d(a.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+a.status+".")},a.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete s[r],e.load())},c(a)}},c=function(e){try{e.send()}catch(r){e.onerror()}},d=function(e,t){var o=function(){t._emit("loaderror",null,"Decoding audio data failed.")},n=function(e){e&&t._sounds.length>0?(s[t._src]=e,l(t,e)):o()};"undefined"!=typeof Promise&&1===r.ctx.decodeAudioData.length?r.ctx.decodeAudioData(e).then(n).catch(o):r.ctx.decodeAudioData(e,n,o)},l=function(e,r){r&&!e._duration&&(e._duration=r.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},p=function(){if(r.usingWebAudio){try{"undefined"!=typeof AudioContext?r.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?r.ctx=new webkitAudioContext:r.usingWebAudio=!1}catch(e){r.usingWebAudio=!1}r.ctx||(r.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(r._navigator&&r._navigator.platform),t=r._navigator&&r._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),o=t?parseInt(t[1],10):null;if(e&&o&&o<9){var n=/safari/.test(r._navigator&&r._navigator.userAgent.toLowerCase());r._navigator&&!n&&(r.usingWebAudio=!1)}r.usingWebAudio&&(r.masterGain=void 0===r.ctx.createGain?r.ctx.createGainNode():r.ctx.createGain(),r.masterGain.gain.setValueAtTime(r._muted?0:r._volume,r.ctx.currentTime),r.masterGain.connect(r.ctx.destination)),r._setup()}};"function"==typeof define&&define.amd&&define([],(function(){return{Howler:r,Howl:n}})),t.Howler=r,t.Howl=n,void 0!==o?(o.HowlerGlobal=e,o.Howler=r,o.Howl=n,o.Sound=a):"undefined"!=typeof window&&(window.HowlerGlobal=e,window.Howler=r,window.Howl=n,window.Sound=a)}(),
/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
function(){"use strict";var e;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){var r=this;if(!r.ctx||!r.ctx.listener)return r;for(var t=r._howls.length-1;t>=0;t--)r._howls[t].stereo(e);return r},HowlerGlobal.prototype.pos=function(e,r,t){var o=this;return o.ctx&&o.ctx.listener?(r="number"!=typeof r?o._pos[1]:r,t="number"!=typeof t?o._pos[2]:t,"number"!=typeof e?o._pos:(o._pos=[e,r,t],void 0!==o.ctx.listener.positionX?(o.ctx.listener.positionX.setTargetAtTime(o._pos[0],Howler.ctx.currentTime,.1),o.ctx.listener.positionY.setTargetAtTime(o._pos[1],Howler.ctx.currentTime,.1),o.ctx.listener.positionZ.setTargetAtTime(o._pos[2],Howler.ctx.currentTime,.1)):o.ctx.listener.setPosition(o._pos[0],o._pos[1],o._pos[2]),o)):o},HowlerGlobal.prototype.orientation=function(e,r,t,o,n,a){var s=this;if(!s.ctx||!s.ctx.listener)return s;var i=s._orientation;return r="number"!=typeof r?i[1]:r,t="number"!=typeof t?i[2]:t,o="number"!=typeof o?i[3]:o,n="number"!=typeof n?i[4]:n,a="number"!=typeof a?i[5]:a,"number"!=typeof e?i:(s._orientation=[e,r,t,o,n,a],void 0!==s.ctx.listener.forwardX?(s.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1),s.ctx.listener.forwardY.setTargetAtTime(r,Howler.ctx.currentTime,.1),s.ctx.listener.forwardZ.setTargetAtTime(t,Howler.ctx.currentTime,.1),s.ctx.listener.upX.setTargetAtTime(o,Howler.ctx.currentTime,.1),s.ctx.listener.upY.setTargetAtTime(n,Howler.ctx.currentTime,.1),s.ctx.listener.upZ.setTargetAtTime(a,Howler.ctx.currentTime,.1)):s.ctx.listener.setOrientation(e,r,t,o,n,a),s)},Howl.prototype.init=(e=Howl.prototype.init,function(r){var t=this;return t._orientation=r.orientation||[1,0,0],t._stereo=r.stereo||null,t._pos=r.pos||null,t._pannerAttr={coneInnerAngle:void 0!==r.coneInnerAngle?r.coneInnerAngle:360,coneOuterAngle:void 0!==r.coneOuterAngle?r.coneOuterAngle:360,coneOuterGain:void 0!==r.coneOuterGain?r.coneOuterGain:0,distanceModel:void 0!==r.distanceModel?r.distanceModel:"inverse",maxDistance:void 0!==r.maxDistance?r.maxDistance:1e4,panningModel:void 0!==r.panningModel?r.panningModel:"HRTF",refDistance:void 0!==r.refDistance?r.refDistance:1,rolloffFactor:void 0!==r.rolloffFactor?r.rolloffFactor:1},t._onstereo=r.onstereo?[{fn:r.onstereo}]:[],t._onpos=r.onpos?[{fn:r.onpos}]:[],t._onorientation=r.onorientation?[{fn:r.onorientation}]:[],e.call(this,r)}),Howl.prototype.stereo=function(e,t){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"stereo",action:function(){o.stereo(e,t)}}),o;var n=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===t){if("number"!=typeof e)return o._stereo;o._stereo=e,o._pos=[e,0,0]}for(var a=o._getSoundIds(t),s=0;s<a.length;s++){var i=o._soundById(a[s]);if(i){if("number"!=typeof e)return i._stereo;i._stereo=e,i._pos=[e,0,0],i._node&&(i._pannerAttr.panningModel="equalpower",i._panner&&i._panner.pan||r(i,n),"spatial"===n?void 0!==i._panner.positionX?(i._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),i._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),i._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):i._panner.setPosition(e,0,0):i._panner.pan.setValueAtTime(e,Howler.ctx.currentTime)),o._emit("stereo",i._id)}}return o},Howl.prototype.pos=function(e,t,o,n){var a=this;if(!a._webAudio)return a;if("loaded"!==a._state)return a._queue.push({event:"pos",action:function(){a.pos(e,t,o,n)}}),a;if(t="number"!=typeof t?0:t,o="number"!=typeof o?-.5:o,void 0===n){if("number"!=typeof e)return a._pos;a._pos=[e,t,o]}for(var s=a._getSoundIds(n),i=0;i<s.length;i++){var c=a._soundById(s[i]);if(c){if("number"!=typeof e)return c._pos;c._pos=[e,t,o],c._node&&(c._panner&&!c._panner.pan||r(c,"spatial"),void 0!==c._panner.positionX?(c._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),c._panner.positionY.setValueAtTime(t,Howler.ctx.currentTime),c._panner.positionZ.setValueAtTime(o,Howler.ctx.currentTime)):c._panner.setPosition(e,t,o)),a._emit("pos",c._id)}}return a},Howl.prototype.orientation=function(e,t,o,n){var a=this;if(!a._webAudio)return a;if("loaded"!==a._state)return a._queue.push({event:"orientation",action:function(){a.orientation(e,t,o,n)}}),a;if(t="number"!=typeof t?a._orientation[1]:t,o="number"!=typeof o?a._orientation[2]:o,void 0===n){if("number"!=typeof e)return a._orientation;a._orientation=[e,t,o]}for(var s=a._getSoundIds(n),i=0;i<s.length;i++){var c=a._soundById(s[i]);if(c){if("number"!=typeof e)return c._orientation;c._orientation=[e,t,o],c._node&&(c._panner||(c._pos||(c._pos=a._pos||[0,0,-.5]),r(c,"spatial")),void 0!==c._panner.orientationX?(c._panner.orientationX.setValueAtTime(e,Howler.ctx.currentTime),c._panner.orientationY.setValueAtTime(t,Howler.ctx.currentTime),c._panner.orientationZ.setValueAtTime(o,Howler.ctx.currentTime)):c._panner.setOrientation(e,t,o)),a._emit("orientation",c._id)}}return a},Howl.prototype.pannerAttr=function(){var e,t,o,n=this,a=arguments;if(!n._webAudio)return n;if(0===a.length)return n._pannerAttr;if(1===a.length){if("object"!=typeof a[0])return(o=n._soundById(parseInt(a[0],10)))?o._pannerAttr:n._pannerAttr;e=a[0],void 0===t&&(e.pannerAttr||(e.pannerAttr={coneInnerAngle:e.coneInnerAngle,coneOuterAngle:e.coneOuterAngle,coneOuterGain:e.coneOuterGain,distanceModel:e.distanceModel,maxDistance:e.maxDistance,refDistance:e.refDistance,rolloffFactor:e.rolloffFactor,panningModel:e.panningModel}),n._pannerAttr={coneInnerAngle:void 0!==e.pannerAttr.coneInnerAngle?e.pannerAttr.coneInnerAngle:n._coneInnerAngle,coneOuterAngle:void 0!==e.pannerAttr.coneOuterAngle?e.pannerAttr.coneOuterAngle:n._coneOuterAngle,coneOuterGain:void 0!==e.pannerAttr.coneOuterGain?e.pannerAttr.coneOuterGain:n._coneOuterGain,distanceModel:void 0!==e.pannerAttr.distanceModel?e.pannerAttr.distanceModel:n._distanceModel,maxDistance:void 0!==e.pannerAttr.maxDistance?e.pannerAttr.maxDistance:n._maxDistance,refDistance:void 0!==e.pannerAttr.refDistance?e.pannerAttr.refDistance:n._refDistance,rolloffFactor:void 0!==e.pannerAttr.rolloffFactor?e.pannerAttr.rolloffFactor:n._rolloffFactor,panningModel:void 0!==e.pannerAttr.panningModel?e.pannerAttr.panningModel:n._panningModel})}else 2===a.length&&(e=a[0],t=parseInt(a[1],10));for(var s=n._getSoundIds(t),i=0;i<s.length;i++)if(o=n._soundById(s[i])){var c=o._pannerAttr;c={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:c.coneInnerAngle,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:c.coneOuterAngle,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:c.coneOuterGain,distanceModel:void 0!==e.distanceModel?e.distanceModel:c.distanceModel,maxDistance:void 0!==e.maxDistance?e.maxDistance:c.maxDistance,refDistance:void 0!==e.refDistance?e.refDistance:c.refDistance,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:c.rolloffFactor,panningModel:void 0!==e.panningModel?e.panningModel:c.panningModel};var d=o._panner;d?(d.coneInnerAngle=c.coneInnerAngle,d.coneOuterAngle=c.coneOuterAngle,d.coneOuterGain=c.coneOuterGain,d.distanceModel=c.distanceModel,d.maxDistance=c.maxDistance,d.refDistance=c.refDistance,d.rolloffFactor=c.rolloffFactor,d.panningModel=c.panningModel):(o._pos||(o._pos=n._pos||[0,0,-.5]),r(o,"spatial"))}return n},Sound.prototype.init=function(e){return function(){var r=this,t=r._parent;r._orientation=t._orientation,r._stereo=t._stereo,r._pos=t._pos,r._pannerAttr=t._pannerAttr,e.call(this),r._stereo?t.stereo(r._stereo):r._pos&&t.pos(r._pos[0],r._pos[1],r._pos[2],r._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var r=this,t=r._parent;return r._orientation=t._orientation,r._stereo=t._stereo,r._pos=t._pos,r._pannerAttr=t._pannerAttr,r._stereo?t.stereo(r._stereo):r._pos?t.pos(r._pos[0],r._pos[1],r._pos[2],r._id):r._panner&&(r._panner.disconnect(0),r._panner=void 0,t._refreshBuffer(r)),e.call(this)}}(Sound.prototype.reset);var r=function(e,r){"spatial"===(r=r||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,void 0!==e._panner.positionX?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),void 0!==e._panner.orientationX?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}()},{}],"3b77f":[function(e,r,t){r.exports=e("f3ff749d78e0474c").getBundleURL("in46u")+e("f1c67ea950d0f839").resolve("h8BSG")},{f3ff749d78e0474c:"c7Tr5",f1c67ea950d0f839:"fyJL2"}],c7Tr5:[function(e,r,t){"use strict";var o={};function n(e){return(""+e).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}t.getBundleURL=function(e){var r=o[e];return r||(r=function(){try{throw new Error}catch(r){var e=(""+r.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/[^)\n]+/g);if(e)return n(e[2])}return"/"}(),o[e]=r),r},t.getBaseURL=n,t.getOrigin=function(e){var r=(""+e).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/[^/]+/);if(!r)throw new Error("Origin not found");return r[0]}},{}],j9AS5:[function(e,r,t){r.exports=e("b899fa251bdf207").getBundleURL("in46u")+e("1a05ceb711444f77").resolve("h9c4J")},{b899fa251bdf207:"c7Tr5","1a05ceb711444f77":"fyJL2"}],bzJWU:[function(e,r,t){r.exports=e("5c91e18acd1e37af").getBundleURL("in46u")+e("8830925b852f8252").resolve("3RPKG")},{"5c91e18acd1e37af":"c7Tr5","8830925b852f8252":"fyJL2"}],hfaAd:[function(e,r,t){r.exports=e("979cb2ce489df22b").getBundleURL("in46u")+e("23bd4863366f79be").resolve("hVU0N")},{"979cb2ce489df22b":"c7Tr5","23bd4863366f79be":"fyJL2"}],j7MGQ:[function(e,r,t){r.exports=e("fb9b31c8ab721680").getBundleURL("in46u")+e("3a68e87d3a8bc029").resolve("8LCc0")},{fb9b31c8ab721680:"c7Tr5","3a68e87d3a8bc029":"fyJL2"}],dBBkF:[function(e,r,t){r.exports=e("9e942e91f6e1140a").getBundleURL("in46u")+e("1c718460c9fc1c8c").resolve("1Usm5")},{"9e942e91f6e1140a":"c7Tr5","1c718460c9fc1c8c":"fyJL2"}],"8HZOD":[function(e,r,t){r.exports=e("a639fc4a6c58661e").getBundleURL("in46u")+e("ba908a6a75250e23").resolve("dHxQj")},{a639fc4a6c58661e:"c7Tr5",ba908a6a75250e23:"fyJL2"}],lYu9d:[function(e,r,t){r.exports=e("30df67ff5f9918c8").getBundleURL("in46u")+e("a24258604e3f438e").resolve("bJRM9")},{"30df67ff5f9918c8":"c7Tr5",a24258604e3f438e:"fyJL2"}],"1yve4":[function(e,r,t){r.exports=e("2d3f309e7d429c64").getBundleURL("in46u")+e("d641e0cb8f54a36f").resolve("e8Owl")},{"2d3f309e7d429c64":"c7Tr5",d641e0cb8f54a36f:"fyJL2"}],duG9f:[function(e,r,t){r.exports=e("7487a585edab4a18").getBundleURL("in46u")+e("2b9887d52697bc85").resolve("8QL2q")},{"7487a585edab4a18":"c7Tr5","2b9887d52697bc85":"fyJL2"}],alsna:[function(e,r,t){r.exports=e("a4ff12e8fa55846").getBundleURL("in46u")+e("44f07cbb8d3effb7").resolve("4Lahy")},{a4ff12e8fa55846:"c7Tr5","44f07cbb8d3effb7":"fyJL2"}],iUHH4:[function(e,r,t){r.exports=e("c504257d6ac1df4e").getBundleURL("in46u")+e("49e080803fdd0598").resolve("eGXdE")},{c504257d6ac1df4e:"c7Tr5","49e080803fdd0598":"fyJL2"}],gbfzg:[function(e,r,t){r.exports=e("94532ce0e470bfa2").getBundleURL("in46u")+e("e9f8c6cb44b1b9dd").resolve("ixjqv")},{"94532ce0e470bfa2":"c7Tr5",e9f8c6cb44b1b9dd:"fyJL2"}],fz7gB:[function(e,r,t){r.exports=e("1651ece0fdf70d2e").getBundleURL("in46u")+e("9d060790154fc94b").resolve("5n4Sl")},{"1651ece0fdf70d2e":"c7Tr5","9d060790154fc94b":"fyJL2"}],d6oQb:[function(e,r,t){r.exports=e("51103b91732b0193").getBundleURL("in46u")+e("38ecc8962fc630ce").resolve("ek2S3")},{"51103b91732b0193":"c7Tr5","38ecc8962fc630ce":"fyJL2"}],klI9d:[function(e,r,t){r.exports=e("363b72cd5afaa9bb").getBundleURL("in46u")+e("c8ad43682d092bd").resolve("i47Iw")},{"363b72cd5afaa9bb":"c7Tr5",c8ad43682d092bd:"fyJL2"}],"7tt3x":[function(e,r,t){r.exports=e("caf21b0bb33b551c").getBundleURL("in46u")+e("de8b69cf543fded8").resolve("78wPR")},{caf21b0bb33b551c:"c7Tr5",de8b69cf543fded8:"fyJL2"}],"78pYK":[function(e,r,t){r.exports=e("e419e26f0fd4d15e").getBundleURL("in46u")+e("1f4c9ed54948bf10").resolve("fK5Xr")},{e419e26f0fd4d15e:"c7Tr5","1f4c9ed54948bf10":"fyJL2"}],fBxCl:[function(e,r,t){r.exports=e("d707f05eb0121a25").getBundleURL("in46u")+e("fc22a42968fd1e42").resolve("45evC")},{d707f05eb0121a25:"c7Tr5",fc22a42968fd1e42:"fyJL2"}],l6LLV:[function(e,r,t){r.exports=e("16c83c95890b5fb6").getBundleURL("in46u")+e("bd0b6b7fa79a0363").resolve("l01Qe")},{"16c83c95890b5fb6":"c7Tr5",bd0b6b7fa79a0363:"fyJL2"}],hRpfj:[function(e,r,t){r.exports=e("4792004e44d05bc1").getBundleURL("in46u")+e("3265f610c78a9057").resolve("dJgsx")},{"4792004e44d05bc1":"c7Tr5","3265f610c78a9057":"fyJL2"}],"2naLj":[function(e,r,t){r.exports=e("b7c1cc27aeca8efa").getBundleURL("in46u")+e("ec4f9d5e055bfd4c").resolve("h7UC0")},{b7c1cc27aeca8efa:"c7Tr5",ec4f9d5e055bfd4c:"fyJL2"}],"8Ibtj":[function(e,r,t){r.exports=e("556b7590ad8184d6").getBundleURL("in46u")+e("19594295de6594c1").resolve("3q6QH")},{"556b7590ad8184d6":"c7Tr5","19594295de6594c1":"fyJL2"}],"7MnJ1":[function(e,r,t){r.exports=e("b9a7c7da5098b8b3").getBundleURL("in46u")+e("8106254490e22033").resolve("afyPI")},{b9a7c7da5098b8b3:"c7Tr5","8106254490e22033":"fyJL2"}],kHbFE:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"ChrononomiconCoverComponent",(()=>c));var n=e("solid-js/web"),a=e("./chrononomicon.module.scss"),s=o.interopDefault(a);const i=(0,n.template)("<div><h1>Chrononomicon");function c(){return(()=>{const e=i();return(0,n.effect)((()=>(0,n.className)(e,s.default.container))),e})()}},{"solid-js/web":"33rlw","./chrononomicon.module.scss":"8pJj9","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"8pJj9":[function(e,r,t){r.exports.container="_0XkbGq_container"},{}],iOtej:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");let n;o.defineInteropFlag(t),o.export(t,"PageSide",(()=>n)),o.export(t,"EmptyPageController",(()=>a)),function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"}(n||(n={}));class a{async popup(){}async popdown(){}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"189zH":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"createCardSlots",(()=>l)),o.export(t,"createCardSlotManager",(()=>p));var n=e("solid-js/web"),a=e("./card_slot"),s=e("./card_slots"),i=e("solid-js"),c=e("components/component_manager"),d=e("./card_slot_controller");function l(e){return{Component:r=>(0,n.createComponent)(s.CardSlotsComponent,{CardSlotComponent:e,get cardSlots(){return r.model}})}}function p(e,r,t){return new(0,c.ComponentManager)((function(o){const s=d.cardSlotUIDescriptor.create({targetCardHidden:!1,forceUnrotate:!1});function c(e,t){r().startDrag(o,e,t)}function l(){r().drop(o)}function p(){r().click(o)}return{controller:new(0,d.CardSlotController)(s),Component:function(){return(0,n.createComponent)(a.CardSlotComponent,{get targetCard(){return(0,n.memo)((()=>!(!o.targetCard||s.targetCardHidden)))()&&(0,n.createComponent)(e,{get model(){return o.targetCard}})},get targetInteraction(){return r().allowedInteraction(o)},onDragStart:c,onDrop:l,onClick:p,get bordered(){return t.playerHand.indexOf(o)>=0},get used(){return null==o.targetCard&&o.playedCards.length>0},get forceUnrotate(){return s.forceUnrotate},get children(){return(0,n.createComponent)(i.For,{get each(){return o.playedCards},children:r=>(0,n.createComponent)(e,{model:r})})}})}}}))}},{"solid-js/web":"33rlw","./card_slot":"ltYid","./card_slots":"8TIQ2","solid-js":"5rsr6","components/component_manager":"e6kRp","./card_slot_controller":"lGuHg","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],ltYid:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"CardSlotComponent",(()=>u));var n=e("solid-js/web"),a=e("rules/interaction_manager"),s=e("./card_slot.module.scss"),i=o.interopDefault(s),c=e("solid-js");const d=(0,n.template)("<div><div></div><div>"),l=(0,n.template)("<div>"),p=Object.freeze({[a.Interaction.None]:i.default.none,[a.Interaction.Drag]:i.default.draggable,[a.Interaction.Activate]:i.default.clickable,[a.Interaction.Disabled]:i.default.immovable,[a.Interaction.NoDrop]:i.default["no-drop"],[a.Interaction.Drop]:i.default.drop,[a.Interaction.Dragging]:i.default.dragging,[a.Interaction.LongPress]:i.default["long-press"]});function u(e){return(()=>{const r=d(),t=r.firstChild,o=t.nextSibling;return(0,n.addEventListener)(r,"pointerup",e.onDrop,!0),(0,n.addEventListener)(t,"click",e.onClick,!0),t.$$pointerdown=r=>e.onDragStart(r.pageX,r.pageY),(0,n.insert)(t,(()=>e.targetCard)),(0,n.insert)(o,(0,n.createComponent)(c.For,{get each(){return(0,c.children)((()=>e.children)).toArray()},children:r=>(()=>{const t=l();return(0,n.insert)(t,r),(0,n.effect)((r=>(0,n.classList)(t,{[i.default["played-card"]]:!0,[i.default.used]:e.used},r))),t})()})),(0,n.effect)((a=>{const s=i.default.container,c={[i.default["target-card"]]:!0,[p[e.targetInteraction]]:!0,[i.default.bordered]:e.bordered},d={[i.default["played-cards"]]:!0,[i.default.used]:e.used,[i.default.unrotate]:e.forceUnrotate};return s!==a._v$&&(0,n.className)(r,a._v$=s),a._v$2=(0,n.classList)(t,c,a._v$2),a._v$3=(0,n.classList)(o,d,a._v$3),a}),{_v$:void 0,_v$2:void 0,_v$3:void 0}),r})()}(0,n.delegateEvents)(["pointerup","pointerdown","click"])},{"solid-js/web":"33rlw","./card_slot.module.scss":"8mse4","solid-js":"5rsr6","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","rules/interaction_manager":"3lVrH"}],"8mse4":[function(e,r,t){r.exports.cardWidth="9",r.exports.cardHeight="12",r.exports.pageWidth="50",r.exports.pageHeight="70",r.exports.container="container_b7e78d",r.exports["target-card"]="target-card_b7e78d",r.exports.bordered="bordered_b7e78d",r.exports.none="none_b7e78d",r.exports.draggable="draggable_b7e78d",r.exports.dragging="dragging_b7e78d",r.exports.clickable="clickable_b7e78d",r.exports.immovable="immovable_b7e78d",r.exports["no-drop"]="no-drop_b7e78d",r.exports.drop="drop_b7e78d",r.exports["long-press"]="long-press_b7e78d",r.exports["long-pressing"]="long-pressing_b7e78d",r.exports["played-cards"]="played-cards_b7e78d",r.exports.used="used_b7e78d",r.exports.unrotate="unrotate_b7e78d",r.exports["played-card"]="played-card_b7e78d"},{}],"3lVrH":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"Interaction",(()=>p)),o.export(t,"InteractionManager",(()=>f));var n=e("base/unreachable_error"),a=e("model/domain"),s=e("solid-js"),i=e("./cards"),c=e("base/delay"),d=e("model/descriptor/record"),l=e("model/descriptor/literals");let p;!function(e){e[e.None=1]="None",e[e.Activate=2]="Activate",e[e.Drag=3]="Drag",e[e.Dragging=4]="Dragging",e[e.Drop=5]="Drop",e[e.NoDrop=6]="NoDrop",e[e.LongPress=7]="LongPress",e[e.Disabled=8]="Disabled"}(p||(p={}));const u=(0,d.activeRecordDescriptor)({dragging:l.booleanDescriptor,dragged:new(0,l.LiteralTypeDescriptor),mousePosition:new(0,l.LiteralTypeDescriptor),longPress:new(0,l.LiteralTypeDescriptor)});class f{constructor(e,r,t,o){this.game=e,this.gameManager=r,this.cardManager=t,this.cardSlotManager=o,this.ui=u.create({dragged:void 0,dragging:!1,longPress:void 0,mousePosition:void 0}),this.lastAnimation=Promise.resolve()}get dragging(){return this.ui.dragging}set dragging(e){this.ui.dragging=e}get lastMousePosition(){return this.ui.mousePosition}set lastMousePosition(e){this.ui.mousePosition=e}get draggedCard(){return this.ui.dragged?.[0]}allowedInteraction(e){const r=this.ui.dragged,t=e?.targetCard;if(null!=r&&null!=e){const[o,n]=r;return e==n?4:null!=t&&e.playedCards.length<3?5:6}if(null==t)return 1;const o=(0,i.cardFace)(t,!!this.cardManager.lookupController(t)?.isPeeking());if(this.game.book.cardSlots.indexOf(e)>=0)return 2;switch(o.type){case a.CardFaceType.Choice:case a.CardFaceType.ChoiceBack:return 2;case a.CardFaceType.Resource:return 3;case a.CardFaceType.ResourceBack:return 7;default:throw new(0,n.UnreachableError)(o)}}click(e){return this.politelyAnimate((async()=>this.gameManager.chooseTargetCard(e)))}startDrag(e,r,t){return this.politelyAnimate((async()=>{const o=this.allowedInteraction(e),n=e.targetCard;if(null!=n){const a=this.cardManager.lookupController(n);3===o?(0,s.batch)((()=>{this.cardSlotManager.lookupController(e)?.setTargetCardHidden(!0),this.ui.dragged=[n,e],this.ui.mousePosition=[r,t],this.ui.dragging=!0,a?.setWarning(!0)})):7===o&&null==this.ui.longPress&&(await(a?.flipTemporarily(!0)),this.ui.longPress=e)}}))}clearDrag(){return this.ui.dragging=!1,this.politelyAnimate((async()=>{const e=this.ui.dragged;if(e){const[r,t]=e;(0,s.batch)((()=>{t.targetCard=r,this.cardSlotManager.lookupController(t)?.setTargetCardHidden(!1),this.cardManager.lookupController(r)?.setWarning(!1),this.ui.dragged=void 0}))}const r=this.ui.longPress;if(r){const e=r;if(this.ui.longPress=void 0,e.targetCard){const r=this.cardManager.lookupController(e.targetCard);await(r?.flipTemporarily(!1))}}}))}drop(e){return this.politelyAnimate((async()=>{const r=this.ui.dragged;if(r){const[t,o]=r,n=this.allowedInteraction(e);if(o!=e&&5==n){const r=await this.gameManager.applyCardEffects(o);(0,s.batch)((()=>{e.playedCards=[...e.playedCards,t],o.targetCard=void 0,this.ui.dragged=void 0})),await this.gameManager.normalizeBoard(),await r()}else(0,s.batch)((()=>{o.targetCard=t,this.ui.dragged=void 0}));this.cardSlotManager.lookupController(o)?.setTargetCardHidden(!1),this.cardManager.lookupController(t)?.setWarning(!1)}}))}politelyAnimate(e){return this.lastAnimation=this.lastAnimation.catch((e=>console.warn(e))).then(e).then((()=>(0,c.delay)(0))),this.lastAnimation}}},{"base/unreachable_error":"eQLwm","model/domain":"hG1oc","solid-js":"5rsr6","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","./cards":"kFtME","base/delay":"hGewO","model/descriptor/record":"9b5Fs","model/descriptor/literals":"6SgZZ"}],eQLwm:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"UnreachableError",(()=>n));class n extends Error{constructor(e){super(),this.value=e}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],kFtME:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"cardFace",(()=>c)),o.export(t,"calculateCardEffects",(()=>d)),o.export(t,"cardSlotForCard",(()=>l)),o.export(t,"calculateCardEffectUsages",(()=>p)),o.export(t,"calculateTargetCardEffectUsages",(()=>u)),o.export(t,"sortCardsByRecycling",(()=>f));var n=e("model/domain"),a=e("./games"),s=e("base/unreachable_error"),i=e("base/arrays");function c(e,r){const t=e.faces;return t[(e.visibleFaceIndex+(r?1:0))%t.length]}function d(e){switch(e.type){case n.CardFaceType.Resource:case n.CardFaceType.Choice:return{cost:e.cost,benefit:e.benefit};case n.CardFaceType.ResourceBack:case n.CardFaceType.ChoiceBack:return{cost:e.cost,benefit:[]};default:throw new(0,s.UnreachableError)(e)}}function l(e,r){return(0,a.allCardSlots)(e).find((e=>e.targetCard===r||e.playedCards.some((e=>e===r))))}function p(e,r,t){const o=c(r,!!t?.lookupController(r)?.isPeeking()),n=l(e,r),a=n?.targetCard;if(null==n||null==a){const{cost:e,benefit:r}=d(o);return{cost:e.map((e=>({effect:e,used:null!=n}))),benefit:r.map((e=>({effect:e,used:null!=n})))}}if(r===a)return u(o,n,t);{const e=c(a,!!t?.lookupController(a)?.isPeeking()),{cost:o}=d(e),s=o.reduce(((e,r)=>{const t=e.get(r)||0;return e.set(r,t+1),e}),new Map);for(const e of n.playedCards){const t=c(e,!1),{cost:o,benefit:n}=d(t),a=n.map((e=>{const r=s.get(e)||0;return s.set(e,r-1),{effect:e,used:r>0}}));if(e===r){return{cost:o.map((e=>({effect:e,used:!0}))),benefit:a}}}}return{cost:[],benefit:[]}}function u(e,r,t){const o=function(e,r){return e.playedCards.reduce(((e,t)=>{const o=c(t,!!r?.lookupController(t)?.isPeeking());return o.type===n.CardFaceType.Resource?o.benefit.reduce(((e,r)=>{const t=e.get(r)||0;return e.set(r,t+1),e}),e):e}),new Map)}(r,t),{cost:a,benefit:s}=d(e);return{cost:a.map((e=>{const r=o.get(e)||0;return o.set(e,r-1),{effect:e,used:r>0}}))||[],benefit:s.map((e=>({effect:e,used:!1})))}}function f(e){return[...(0,i.arrayRandomize)(e)].sort(((e,r)=>(r.recyclePosition||9)-(e.recyclePosition||9)))}},{"model/domain":"hG1oc","./games":"3tjca","base/unreachable_error":"eQLwm","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","base/arrays":"c63XN"}],"3tjca":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"allCardSlots",(()=>a)),o.export(t,"pageCardSlots",(()=>s)),o.export(t,"pageDeck",(()=>i)),o.export(t,"playerDeck",(()=>c)),o.export(t,"gameEncounterBattle",(()=>d)),o.export(t,"gameEncounterEvent",(()=>l));var n=e("model/domain");function a(e){return[...e.playerHand,...s(e)]}function s(e){return e.book.cardSlots}function i(e){const r=e.book.spread;if(r?.type===n.BookSpreadType.Room){const e=r.encounter;if(e?.type===n.EncounterType.Battle){const r=e.monster;return[()=>r.deck,e=>r.deck=e,!0]}if(e?.type===n.EncounterType.Event)return[()=>e.deck,r=>e.deck=r,!0]}return[()=>e.book.chapter.deck,r=>e.book.chapter.deck=r,!1]}function c(e){const r=e.playerCharacter;return r&&[()=>r.deck,e=>r.deck=e]}function d(e){const r=e.book.spread;if(r?.type===n.BookSpreadType.Room&&r.encounter?.type===n.EncounterType.Battle)return r.encounter}function l(e){const r=e.book.spread;if(r?.type===n.BookSpreadType.Room&&r.encounter?.type===n.EncounterType.Event)return r.encounter}},{"model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],c63XN:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");function n(e){const r=[...e];for(let e=0;e<r.length;e++){const[t]=r.splice(e,1);r.splice(Math.floor(Math.random()*e),0,t)}return r}o.defineInteropFlag(t),o.export(t,"arrayRandomize",(()=>n))},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"8TIQ2":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"CardSlotsComponent",(()=>d));var n=e("solid-js/web"),a=e("solid-js"),s=e("./card_slots.module.scss"),i=o.interopDefault(s);const c=(0,n.template)("<div>");function d(e){return(()=>{const r=c();return(0,n.insert)(r,(0,n.createComponent)(a.For,{get each(){return e.cardSlots},children:r=>(0,n.createComponent)(e.CardSlotComponent,{model:r})})),(0,n.effect)((()=>(0,n.className)(r,i.default.container))),r})()}},{"solid-js/web":"33rlw","solid-js":"5rsr6","./card_slots.module.scss":"h3qy5","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],h3qy5:[function(e,r,t){r.exports.container="_3Mq8RG_container"},{}],e6kRp:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"ComponentManager",(()=>a));var n=e("solid-js/web");e("solid-js");class a{constructor(e){this.factory=e,this.cache=new WeakMap,this.FactoryComponent=e=>{const r=this.lookupOrCreateComponent(e.model);return(0,n.createComponent)(r,e)}}lookupOrCreate(e){let r=this.cache.get(e);return null==r&&(r=this.factory(e),this.cache.set(e,r)),r}lookupOrCreateComponent(e){return this.lookupOrCreate(e).Component}lookupController(e){return this.cache.get(e)?.controller}}},{"solid-js/web":"33rlw","solid-js":"5rsr6","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],lGuHg:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"cardSlotUIDescriptor",(()=>a)),o.export(t,"CardSlotController",(()=>s));var n=e("model/descriptor/literals");const a=(0,e("model/descriptor/record").activeRecordDescriptor)({targetCardHidden:n.booleanDescriptor,forceUnrotate:n.booleanDescriptor});class s{constructor(e){this.cardSlotUI=e}setTargetCardHidden(e){this.cardSlotUI.targetCardHidden=e}setForceUnrotate(e){this.cardSlotUI.forceUnrotate=e}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151","model/descriptor/literals":"6SgZZ","model/descriptor/record":"9b5Fs"}],"9KqLK":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"createCardManager",(()=>u));var n=e("solid-js/web"),a=e("./card_controller"),s=e("ui/animation/animation_manager"),i=e("./card"),c=e("./face/card_face"),d=e("components/component_manager"),l=e("solid-js"),p=e("rules/cards");function u(e,r){const t=new(0,d.ComponentManager)((function(o){const d=new(0,s.AnimationManager),u=a.cardUIDescriptor.create({flipState:a.FlipState.Flat,peeking:!1,warning:!1,offset:void 0,elevated:!1});return{Component:function(){const r=(0,l.createMemo)((()=>(0,p.calculateCardEffectUsages)(e,o,t)));return(0,n.createComponent)(i.CardComponent,{get flipState(){return u.flipState},get elevated(){return u.peeking||u.flipState===a.FlipState.FlippingUpToVertical||u.elevated},animations:d,get offset(){return u.offset},get children(){return(0,n.createComponent)(c.CardFaceComponent,{get face(){return(0,p.cardFace)(o,u.peeking)},get cost(){return r().cost},get benefit(){return r().benefit},get warning(){return u.warning},get choice(){return e.book.cardSlots.some((e=>e.targetCard===o))},get recyclePosition(){return o.recyclePosition}})}})},controller:new(0,a.CardController)(o,u,d,r)}}));return t}},{"solid-js/web":"33rlw","./card_controller":"eIxqM","./card":"b6tpg","components/component_manager":"e6kRp","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","ui/animation/animation_manager":"fbyYW","./face/card_face":"5xOaY","solid-js":"5rsr6","rules/cards":"kFtME"}],eIxqM:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"FlipState",(()=>d)),o.export(t,"Offset",(()=>l)),o.export(t,"Easing",(()=>p)),o.export(t,"cardUIDescriptor",(()=>u)),o.export(t,"CardController",(()=>f));var n=e("model/descriptor/literals"),a=e("model/descriptor/record"),s=e("model/descriptor/option"),i=e("base/delay"),c=e("ui/sounds/sound_manager");let d;!function(e){e[e.Flat=1]="Flat",e[e.FlippingUpToVertical=2]="FlippingUpToVertical",e[e.FlippingDownFromVertical=3]="FlippingDownFromVertical"}(d||(d={}));const l=-1;let p;!function(e){e[e.Instant=1]="Instant",e[e.Gentle=2]="Gentle",e[e.Violent=3]="Violent"}(p||(p={}));const u=(0,a.activeRecordDescriptor)({flipState:new(0,n.LiteralTypeDescriptor),peeking:n.booleanDescriptor,warning:n.booleanDescriptor,offset:(0,s.optionalDescriptor)(new(0,n.LiteralTypeDescriptor)),elevated:n.booleanDescriptor});class f{constructor(e,r,t,o){this.card=e,this.cardUI=r,this.animations=t,this.soundManager=o}async flip(){await this.internalFlip((()=>{this.card.visibleFaceIndex=(this.card.visibleFaceIndex+1)%this.card.faces.length}))}async flipTemporarily(e){await this.internalFlip((()=>{this.cardUI.peeking=e}))}async flipUpToVertical(){this.cardUI.flipState=2,await this.animations.waitForAnimation(2)}async flipDownFromVertical(){this.cardUI.flipState=3,await this.animations.waitForAnimation(3),this.cardUI.flipState=1}async moveTo(e,r,t,o){this.cardUI.offset={dx:e,dy:r,dz:t,easing:o},await this.animations.waitForAnimation(l),this.cardUI.offset=void 0}async moveFrom(e,r,t,o,n){this.cardUI.offset={dx:e,dy:r,dz:t,easing:1,additionalTransform:n},await(0,i.delay)(0),this.cardUI.offset={dx:"0",dy:"0",dz:"0",easing:o},await this.animations.waitForAnimation(l),this.cardUI.offset=void 0}setElevated(e){this.cardUI.elevated=e}setWarning(e){this.cardUI.warning=e}isPeeking(){return this.cardUI.peeking}async internalFlip(e){this.soundManager.playEffect(c.SoundEffect.CardFlip),await this.flipUpToVertical(),e(),await this.flipDownFromVertical()}}},{"model/descriptor/literals":"6SgZZ","model/descriptor/record":"9b5Fs","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","model/descriptor/option":"c8pK3","base/delay":"hGewO","ui/sounds/sound_manager":"iITyB"}],b6tpg:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"CardComponent",(()=>l));var n=e("solid-js/web"),a=e("./card_controller"),s=e("./card.module.scss"),i=o.interopDefault(s),c=e("solid-js");const d=(0,n.template)("<div><div><div><div></div></div>");function l(e){const[r,t]=(0,c.createSignal)(),[o,s]=(0,c.createSignal)();return(()=>{const c=d(),l=c.firstChild,p=l.firstChild,u=p.firstChild;return(0,n.use)(t,l),(0,n.addEventListener)(l,"transitionend",e.animations.createTransitionEndEventListener(r,(()=>a.Offset))),(0,n.use)(s,p),(0,n.addEventListener)(p,"transitionend",e.animations.createTransitionEndEventListener(o,(()=>e.flipState))),(0,n.insert)(u,(()=>e.children)),(0,n.effect)((r=>{const t={[i.default.card]:!0,[i.default.elevated]:e.elevated},o={[i.default.translate]:!0,[i.default.instant]:e.offset?.easing===a.Easing.Instant,[i.default.gentle]:e.offset?.easing===a.Easing.Gentle,[i.default.violent]:e.offset?.easing===a.Easing.Violent},s=e.offset&&{transform:`translate3d(${e.offset.dx}, ${e.offset.dy}, ${e.offset.dz}) ${e.offset.additionalTransform??""}`},d={[i.default.rotate]:!0,[i.default.flat]:e.flipState===a.FlipState.Flat,[i.default.flippingUpToVertical]:e.flipState===a.FlipState.FlippingUpToVertical,[i.default.flippingDownFromVertical]:e.flipState===a.FlipState.FlippingDownFromVertical},f={[i.default.scale]:!0,[i.default.flat]:e.flipState===a.FlipState.Flat,[i.default.flippingUpToVertical]:e.flipState===a.FlipState.FlippingUpToVertical,[i.default.flippingDownFromVertical]:e.flipState===a.FlipState.FlippingDownFromVertical};return r._v$=(0,n.classList)(c,t,r._v$),r._v$2=(0,n.classList)(l,o,r._v$2),r._v$3=(0,n.style)(l,s,r._v$3),r._v$4=(0,n.classList)(p,d,r._v$4),r._v$5=(0,n.classList)(u,f,r._v$5),r}),{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),c})()}},{"solid-js/web":"33rlw","./card_controller":"eIxqM","./card.module.scss":"4a8XN","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","solid-js":"5rsr6"}],"4a8XN":[function(e,r,t){r.exports.cardWidth="9",r.exports.cardHeight="12",r.exports.pageWidth="50",r.exports.pageHeight="70",r.exports.card="card_aeb7e9",r.exports.elevated="elevated_aeb7e9",r.exports.rotate="rotate_aeb7e9",r.exports.translate="translate_aeb7e9",r.exports.instant="instant_aeb7e9",r.exports.gentle="gentle_aeb7e9",r.exports.violent="violent_aeb7e9",r.exports.flippingUpToVertical="flippingUpToVertical_aeb7e9",r.exports.flippingDownFromVertical="flippingDownFromVertical_aeb7e9",r.exports.scale="scale_aeb7e9",r.exports.flat="flat_aeb7e9"},{}],"5xOaY":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"CardFaceComponent",(()=>g));var n=e("solid-js/web"),a=e("model/domain"),s=e("./card_face.module.scss"),i=o.interopDefault(s),c=e("components/effect/effect_strip"),d=e("./card_face_description"),l=e("./card_face_name"),p=e("components/symbol/symbol");const u=(0,n.template)("<div><div>"),f=(0,n.template)("<div>"),m=(0,n.template)('<div><svg viewBox="0 0 200 100"><g><path d="M 10 70 A 120 120 0 0 1 180 70"></path><path d="M 180 50 L 180 70 L 160 70">');function g(e){return(()=>{const r=u(),t=r.firstChild;return(0,n.insert)(r,(()=>{const r=(0,n.memo)((()=>null!=e.face.symbol));return()=>r()&&(()=>{const r=f();return(0,n.insert)(r,(0,n.createComponent)(p.SymbolComponent,{get type(){return e.face.symbol},fill:"transparent",stroke:"white"})),(0,n.effect)((()=>(0,n.className)(r,i.default.symbol))),r})()})(),t),(0,n.insert)(t,(()=>{const r=(0,n.memo)((()=>!(e.face.type!==a.CardFaceType.ChoiceBack&&e.face.type!==a.CardFaceType.ResourceBack)));return()=>r()?(0,n.createComponent)(y,{}):(0,n.createComponent)(c.EffectStripComponent,{get usages(){return e.benefit},warnUnused:!1})})(),null),(0,n.insert)(t,(0,n.createComponent)(d.CardFaceDescriptionComponent,{get children(){return(0,n.createComponent)(l.CardFaceNameComponent,{get name(){return e.face.name}})}}),null),(0,n.insert)(t,(0,n.createComponent)(c.EffectStripComponent,{get usages(){return e.cost},get warnUnused(){return e.warning}}),null),(0,n.insert)(t,(()=>{const r=(0,n.memo)((()=>!(e.face.type!==a.CardFaceType.Resource||null==e.recyclePosition)));return()=>r()&&(()=>{const r=f();return(0,n.insert)(r,(()=>e.recyclePosition)),(0,n.effect)((()=>(0,n.className)(r,i.default["recycle-position"]))),r})()})(),null),(0,n.effect)((o=>{const s={[i.default.container]:!0,[i.default.choice]:e.choice,[i.default.background]:!0,[i.default.clear]:e.face.background===a.CardBackgroundType.Clear,[i.default.crosshatched]:e.face.background===a.CardBackgroundType.Crosshatched,[i.default.door]:e.face.background===a.CardBackgroundType.Door,[i.default.passageway]:e.face.background===a.CardBackgroundType.Passageway,[i.default.forest]:e.face.background===a.CardBackgroundType.ForestPath,[i.default.darkened]:e.face.background===a.CardBackgroundType.DarkenedForestPath,[i.default.finesse]:e.face.symbol===a.SymbolType.Finesse,[i.default.force]:e.face.symbol===a.SymbolType.Force,[i.default.mind]:e.face.symbol===a.SymbolType.Mind,[i.default.magic]:e.face.symbol===a.SymbolType.Magic},c={[i.default["card-face"]]:!0,[i.default.foreground]:null!=e.face.foreground,[i.default.rat]:e.face.foreground===a.CardForegroundType.Rat,[i.default.trap]:e.face.foreground===a.CardForegroundType.Trap,[i.default.fountain]:e.face.foreground===a.CardForegroundType.Fountain,[i.default.tree]:e.face.foreground===a.CardForegroundType.MagicTree,[i.default.snail]:e.face.foreground===a.CardForegroundType.Snail,[i.default.troll]:e.face.foreground===a.CardForegroundType.Troll,[i.default.rooster]:e.face.foreground===a.CardForegroundType.Rooster,[i.default.mushroom]:e.face.foreground===a.CardForegroundType.Mushroom};return o._v$=(0,n.classList)(r,s,o._v$),o._v$2=(0,n.classList)(t,c,o._v$2),o}),{_v$:void 0,_v$2:void 0}),r})()}function y(){return(()=>{const e=m();return(0,n.effect)((()=>(0,n.className)(e,i.default.flip))),e})()}},{"solid-js/web":"33rlw","model/domain":"hG1oc","./card_face.module.scss":"bQPIH","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","components/effect/effect_strip":"1m2OI","./card_face_description":"bkyoU","./card_face_name":"dK3cb","components/symbol/symbol":"aPcWM"}],bQPIH:[function(e,r,t){r.exports.cardWidth="9",r.exports.cardHeight="12",r.exports.pageWidth="50",r.exports.pageHeight="70",r.exports.container="container_82efa0",r.exports.background="background_82efa0",r.exports.clear="clear_82efa0",r.exports.mind="mind_82efa0",r.exports.force="force_82efa0",r.exports.finesse="finesse_82efa0",r.exports.magic="magic_82efa0",r.exports.door="door_82efa0",r.exports.crosshatched="crosshatched_82efa0",r.exports.passageway="passageway_82efa0",r.exports.forest="forest_82efa0",r.exports.darkened="darkened_82efa0",r.exports.choice="choice_82efa0",r.exports.choiceBorderFlash="choiceBorderFlash_82efa0",r.exports.symbol="symbol_82efa0",r.exports["card-face"]="card-face_82efa0",r.exports.foreground="foreground_82efa0",r.exports.rat="rat_82efa0",r.exports.trap="trap_82efa0",r.exports.fountain="fountain_82efa0",r.exports.tree="tree_82efa0",r.exports.rooster="rooster_82efa0",r.exports.troll="troll_82efa0",r.exports.snail="snail_82efa0",r.exports.mushroom="mushroom_82efa0",r.exports.flip="flip_82efa0",r.exports["recycle-position"]="recycle-position_82efa0"},{}],"1m2OI":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"EffectStripComponent",(()=>l));var n=e("solid-js/web"),a=e("./effect_strip.module.scss"),s=o.interopDefault(a),i=e("solid-js"),c=e("./effect");const d=(0,n.template)("<div>");function l(e){return(()=>{const r=d();return(0,n.insert)(r,(0,n.createComponent)(i.For,{get each(){return e.usages},children:r=>(0,n.createComponent)(c.EffectComponent,{get effect(){return r.effect},get used(){return r.used},get warning(){return e.warnUnused}})})),(0,n.effect)((()=>(0,n.className)(r,s.default.container))),r})()}},{"solid-js/web":"33rlw","./effect_strip.module.scss":"zVSDH","solid-js":"5rsr6","./effect":"kG2gB","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],zVSDH:[function(e,r,t){r.exports.container="_2tXgXa_container"},{}],kG2gB:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"EffectComponent",(()=>p));var n=e("solid-js/web"),a=e("model/domain"),s=e("./effect.module.scss"),i=o.interopDefault(s),c=e("components/symbol/symbol");const d=(0,n.template)("<div>"),l={[a.SymbolType.Force]:i.default.fillForce,[a.SymbolType.Finesse]:i.default.fillFinesse,[a.SymbolType.Mind]:i.default.fillMind,[a.SymbolType.Magic]:i.default.fillMagic,[a.SymbolType.Damage]:i.default.fillDamage,[a.SymbolType.Youth]:i.default.fillYouth,[a.SymbolType.Age]:i.default.fillAge,[a.SymbolType.Perception]:i.default.fillPerception,[a.SymbolType.Draw]:i.default.fill,[a.SymbolType.Poison]:i.default.fill,[a.SymbolType.Healing]:i.default.fill,[a.SymbolType.GainCards]:i.default.fill,[a.SymbolType.LoseCards]:i.default.fill,[a.SymbolType.GainMaxHealth]:i.default.fill,[a.SymbolType.LoseMaxHealth]:i.default.fill,[a.SymbolType.DoubleCard]:i.default.fill,[a.SymbolType.Duplicate]:i.default.fill};function p(e){return(()=>{const r=d();return(0,n.insert)(r,(0,n.createComponent)(c.SymbolComponent,{get type(){return e.effect.symbol},get fill(){return e.used?i.default.fillUsed:l[e.effect.symbol]},get stroke(){return i.default.stroke}})),(0,n.effect)((t=>(0,n.classList)(r,{[i.default.container]:!0,[i.default.down]:e.effect.direction===a.EffectDirection.Down,[i.default.unused]:!e.used,[i.default.warning]:e.warning},t))),r})()}},{"solid-js/web":"33rlw","model/domain":"hG1oc","./effect.module.scss":"oHKiE","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","components/symbol/symbol":"aPcWM"}],oHKiE:[function(e,r,t){r.exports.stroke="#FFF",r.exports.fill="#000",r.exports.fillUsed="transparent",r.exports.fillForce="#AA3",r.exports.fillFinesse="#4A4",r.exports.fillDamage="#A44",r.exports.fillMind="#55A",r.exports.fillMagic="#3AA",r.exports.fillPerception="#777",r.exports.fillYouth="#999",r.exports.fillAge="#A44",r.exports.container="container_c50889",r.exports.down="down_c50889",r.exports.unused="unused_c50889",r.exports.warning="warning_c50889",r.exports.warningAnimation="warningAnimation_c50889"},{}],aPcWM:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"SymbolForceComponent",(()=>g)),o.export(t,"SymbolFinesseComponent",(()=>y)),o.export(t,"SymbolMindComponent",(()=>h)),o.export(t,"SymbolDamageComponent",(()=>b)),o.export(t,"SymbolMagicComponent",(()=>v)),o.export(t,"SymbolDrawComponent",(()=>C)),o.export(t,"SymbolPerceptionComponent",(()=>_)),o.export(t,"SymbolYouthComponent",(()=>T)),o.export(t,"SymbolAgeComponent",(()=>k)),o.export(t,"SymbolComponent",(()=>w));var n=e("solid-js/web"),a=e("model/domain"),s=e("./damage.svg"),i=e("./finesse.svg"),c=e("./force.svg"),d=e("./mind.svg"),l=e("./symbol.svg"),p=e("./magic.svg"),u=e("./draw.svg"),f=e("./perception.svg"),m=e("./youth.svg");function g(e){return(0,n.createComponent)(l.SymbolSVGComponent,{get fill(){return e.fill},get stroke(){return e.stroke},get children(){return(0,n.createComponent)(c.SymbolForceSVGComponent,{})}})}function y(e){return(0,n.createComponent)(l.SymbolSVGComponent,{get fill(){return e.fill},get stroke(){return e.stroke},get children(){return(0,n.createComponent)(i.SymbolFinesseSVGComponent,{})}})}function h(e){return(0,n.createComponent)(l.SymbolSVGComponent,{get fill(){return e.fill},get stroke(){return e.stroke},get children(){return(0,n.createComponent)(d.SymbolMindSVGComponent,{})}})}function b(e){return(0,n.createComponent)(l.SymbolSVGComponent,{get fill(){return e.fill},get stroke(){return e.stroke},get children(){return(0,n.createComponent)(s.SymbolDamageSVGComponent,{})}})}function v(e){return(0,n.createComponent)(l.SymbolSVGComponent,{get fill(){return e.fill},get stroke(){return e.stroke},get children(){return(0,n.createComponent)(p.SymbolMagicSVGComponent,{})}})}function C(e){return(0,n.createComponent)(l.SymbolSVGComponent,{get fill(){return e.fill},get stroke(){return e.stroke},get children(){return(0,n.createComponent)(u.SymbolDrawSVGComponent,{})}})}function _(e){return(0,n.createComponent)(l.SymbolSVGComponent,{get fill(){return e.fill},get stroke(){return e.stroke},get children(){return(0,n.createComponent)(f.SymbolPerceptionSVGComponent,{})}})}function T(e){return(0,n.createComponent)(l.SymbolSVGComponent,{get fill(){return e.fill},get stroke(){return e.stroke},get children(){return(0,n.createComponent)(m.SymbolYouthSVGComponent,{})}})}function k(e){return(0,n.createComponent)(l.SymbolSVGComponent,{get fill(){return e.fill},get stroke(){return e.stroke},get children(){return(0,n.createComponent)(m.SymbolYouthSVGComponent,{})}})}const x={[a.SymbolType.Force]:g,[a.SymbolType.Finesse]:y,[a.SymbolType.Mind]:h,[a.SymbolType.Magic]:v,[a.SymbolType.Damage]:b,[a.SymbolType.Youth]:T,[a.SymbolType.Age]:k,[a.SymbolType.Perception]:_,[a.SymbolType.Draw]:C,[a.SymbolType.Poison]:()=>"☠",[a.SymbolType.Healing]:()=>"♥",[a.SymbolType.GainCards]:void 0,[a.SymbolType.LoseCards]:void 0,[a.SymbolType.GainMaxHealth]:()=>"+♡",[a.SymbolType.LoseMaxHealth]:()=>"-♡",[a.SymbolType.DoubleCard]:void 0,[a.SymbolType.Duplicate]:void 0};function w(e){return(0,n.createComponent)(n.Dynamic,(0,n.mergeProps)({get component(){return x[e.type]}},e))}},{"solid-js/web":"33rlw","model/domain":"hG1oc","./damage.svg":"iZ5qp","./finesse.svg":"dGLAn","./force.svg":"4Wvsh","./mind.svg":"4ppJ0","./symbol.svg":"fW3Xh","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","./magic.svg":"89HFx","./draw.svg":"bctBR","./perception.svg":"g3XMM","./youth.svg":"5JvBh"}],iZ5qp:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"SymbolDamageSVGComponent",(()=>a));const n=(0,e("solid-js/web").template)('<svg><g><path d="M 50 10 L 90 50 L 90 90 L 10 90 L 10 50 z"></path><path d="M 50 80 L 50 30"></path><path d="M 40 70 L 60 70"></svg>',!1,!0);function a(){return n()}},{"solid-js/web":"33rlw","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],dGLAn:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"SymbolFinesseSVGComponent",(()=>c));var n=e("solid-js/web"),a=e("./finesse.svg.module.scss"),s=o.interopDefault(a);const i=(0,n.template)("<svg><rect></svg>",!1,!0);function c(){return(()=>{const e=i();return(0,n.effect)((()=>(0,n.setAttribute)(e,"class",s.default.rect))),e})()}},{"solid-js/web":"33rlw","./finesse.svg.module.scss":"73tFt","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"73tFt":[function(e,r,t){r.exports.rect="CzXirq_rect"},{}],"4Wvsh":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"SymbolForceSVGComponent",(()=>c));var n=e("solid-js/web"),a=e("./force.svg.module.scss"),s=o.interopDefault(a);const i=(0,n.template)("<svg><rect></svg>",!1,!0);function c(){return(()=>{const e=i();return(0,n.effect)((()=>(0,n.setAttribute)(e,"class",s.default.rect))),e})()}},{"solid-js/web":"33rlw","./force.svg.module.scss":"97GJR","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"97GJR":[function(e,r,t){r.exports.flip="aq9fEa_flip",r.exports.rect="aq9fEa_rect",r.exports.svg="aq9fEa_svg"},{}],"4ppJ0":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"SymbolMindSVGComponent",(()=>c));var n=e("solid-js/web"),a=e("./mind.svg.module.scss"),s=o.interopDefault(a);const i=(0,n.template)("<svg><circle></svg>",!1,!0);function c(){return(()=>{const e=i();return(0,n.effect)((()=>(0,n.setAttribute)(e,"class",s.default.circle))),e})()}},{"solid-js/web":"33rlw","./mind.svg.module.scss":"dkxMB","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],dkxMB:[function(e,r,t){r.exports.circle="PcV7xa_circle"},{}],fW3Xh:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"SymbolSVGComponent",(()=>c));var n=e("solid-js/web"),a=e("./symbol.svg.module.scss"),s=o.interopDefault(a);const i=(0,n.template)('<svg viewBox="0 0 100 100"><g>');function c(e){return(()=>{const r=i(),t=r.firstChild;return(0,n.insert)(t,(()=>e.children)),(0,n.effect)((o=>{const a=s.default.svg,i=e.fill,c=e.stroke,d={[s.default.flip]:e.flip};return a!==o._v$&&(0,n.setAttribute)(r,"class",o._v$=a),i!==o._v$2&&(null!=(o._v$2=i)?r.style.setProperty("fill",i):r.style.removeProperty("fill")),c!==o._v$3&&(null!=(o._v$3=c)?r.style.setProperty("stroke",c):r.style.removeProperty("stroke")),o._v$4=(0,n.classList)(t,d,o._v$4),o}),{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),r})()}},{"solid-js/web":"33rlw","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","./symbol.svg.module.scss":"1VSQI"}],"1VSQI":[function(e,r,t){r.exports.flip="XkKC7a_flip",r.exports.svg="XkKC7a_svg"},{}],"89HFx":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"SymbolMagicSVGComponent",(()=>a));const n=(0,e("solid-js/web").template)('<svg><g><path d="M 50 10 L 90 70 L 10 70 z"></path><path d="M 50 90 L 90 30 L 10 30 z"></svg>',!1,!0);function a(){return n()}},{"solid-js/web":"33rlw","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],bctBR:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"SymbolDrawSVGComponent",(()=>c));var n=e("solid-js/web"),a=e("./draw.svg.module.scss"),s=o.interopDefault(a);const i=(0,n.template)('<svg><g><rect></rect><path d="M 30 60 L 50 40 L 70 60"></svg>',!1,!0);function c(){return(()=>{const e=i(),r=e.firstChild;return(0,n.effect)((()=>(0,n.setAttribute)(r,"class",s.default.rect))),e})()}},{"solid-js/web":"33rlw","./draw.svg.module.scss":"7Yj7E","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"7Yj7E":[function(e,r,t){r.exports.rect="U8OH9W_rect",r.exports.svg="U8OH9W_svg",r.exports.flip="U8OH9W_flip"},{}],g3XMM:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"SymbolPerceptionSVGComponent",(()=>a));const n=(0,e("solid-js/web").template)('<svg><g><path fill-rule="evenodd" d="M 10 50 A 45 45 0 0 1 90 50 A 45 45 0 0 1 10 50 z\n               M 38 50 A 12 12 0 1 0 62 50 A 12 12 0 0 0 38 50z"></svg>',!1,!0);function a(){return n()}},{"solid-js/web":"33rlw","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"5JvBh":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"SymbolYouthSVGComponent",(()=>a));const n=(0,e("solid-js/web").template)('<svg><g><path d="M 20 10 L 80 10 L 80 20 L 20 80 L 20 90 L 80 90 L 80 80 L 20 20 z"></svg>',!1,!0);function a(){return n()}},{"solid-js/web":"33rlw","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],bkyoU:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"CardFaceDescriptionComponent",(()=>c));var n=e("solid-js/web"),a=e("./card_face_description.module.scss"),s=o.interopDefault(a);const i=(0,n.template)("<div>");function c(e){return(()=>{const r=i();return(0,n.insert)(r,(()=>e.children)),(0,n.effect)((()=>(0,n.className)(r,s.default.container))),r})()}},{"solid-js/web":"33rlw","./card_face_description.module.scss":"2Pyfx","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"2Pyfx":[function(e,r,t){r.exports.container="zuHU4G_container"},{}],dK3cb:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"CardFaceNameComponent",(()=>c));var n=e("solid-js/web"),a=e("./card_face_name.module.scss"),s=o.interopDefault(a);const i=(0,n.template)("<div>");function c(e){return(()=>{const r=i();return(0,n.insert)(r,(()=>e.name)),(0,n.effect)((()=>(0,n.className)(r,s.default.container))),r})()}},{"solid-js/web":"33rlw","./card_face_name.module.scss":"djlle","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],djlle:[function(e,r,t){r.exports.cardWidth="9",r.exports.cardHeight="12",r.exports.pageWidth="50",r.exports.pageHeight="70",r.exports.container="container_f9fb00"},{}],eFnBZ:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"createPageManager",(()=>l));var n=e("model/domain"),a=e("components/component_manager"),s=e("./toc/create"),i=e("base/unreachable_error"),c=e("./room/create"),d=e("./death/create");function l(e,r,t){return new(0,a.ComponentManager)((function(o){switch(o.type){case n.BookSpreadType.TableOfContents:return(0,s.createToCPage)(o,e,r);case n.BookSpreadType.Room:return(0,c.createRoomPage)(o,t);case n.BookSpreadType.Death:return(0,d.createDeathPage)(o,e,r);default:throw new(0,i.UnreachableError)(o)}}))}},{"components/component_manager":"e6kRp","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","model/domain":"hG1oc","./toc/create":"9VxMK","base/unreachable_error":"eQLwm","./room/create":"ekSO7","./death/create":"ebtqy"}],"9VxMK":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"createToCPage",(()=>i));var n=e("solid-js/web"),a=e("../page_controller"),s=e("./toc_page");function i(e,r,t){return{controller:new(0,a.EmptyPageController),Component:function(o){return(0,n.createComponent)(s.ToCPageComponent,{navigation:r,onFocusUIElement:t,get side(){return o.side},spread:e})}}}},{"solid-js/web":"33rlw","../page_controller":"iOtej","./toc_page":"dkznI","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],dkznI:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"ToCPageComponent",(()=>g));var n=e("solid-js/web"),a=e("../page_controller"),s=e("../blank/page_blank"),i=e("./page_toc.module.scss"),c=o.interopDefault(i),d=e("components/navigation_target");const l=(0,n.template)('<li><a href="#">'),p=(0,n.template)("<div><h2>Table of Contents</h2><ol><li>&nbsp;");function u(e){return(()=>{const r=l(),t=r.firstChild;return t.$$mouseover=()=>e.onFocusUIElement(e.targetChapter),t.addEventListener("focus",(()=>e.onFocusUIElement(e.targetChapter))),t.$$click=()=>e.navigation({type:d.NavigationTargetType.Chapter,chapterIndex:e.targetChapter}),(0,n.insert)(t,(()=>e.name)),(0,n.effect)((t=>(0,n.classList)(r,{[c.default.disabled]:e.spread.unlockedChapters<e.targetChapter},t))),r})()}function f(e){return(()=>{const r=p(),t=r.firstChild.nextSibling,o=t.firstChild;return(0,n.insert)(t,(0,n.createComponent)(u,(0,n.mergeProps)({targetChapter:0,name:"Tutorial"},e)),o),(0,n.insert)(t,(0,n.createComponent)(u,(0,n.mergeProps)({targetChapter:1,name:"Prologue"},e)),null),(0,n.insert)(t,(0,n.createComponent)(u,(0,n.mergeProps)({targetChapter:3,name:"The Road"},e)),null),(0,n.insert)(t,(0,n.createComponent)(u,(0,n.mergeProps)({targetChapter:4,name:"The Ruins"},e)),null),(0,n.insert)(t,(0,n.createComponent)(u,(0,n.mergeProps)({targetChapter:5,name:"The Tower"},e)),null),(0,n.effect)((()=>(0,n.className)(r,c.default.toc))),r})()}const m={[a.PageSide.Left]:s.PageBlankComponent,[a.PageSide.Right]:function(e){return(0,n.createComponent)(f,{get side(){return e.side},get spread(){return e.spread},get navigation(){return e.navigation},get onFocusUIElement(){return e.onFocusUIElement}})}};function g(e){return(0,n.createComponent)(n.Dynamic,{get component(){return m[e.side]},get side(){return e.side},get spread(){return e.spread},get navigation(){return e.navigation},get onFocusUIElement(){return e.onFocusUIElement}})}(0,n.delegateEvents)(["click","mouseover"])},{"solid-js/web":"33rlw","../page_controller":"iOtej","../blank/page_blank":"olBz5","./page_toc.module.scss":"581bA","components/navigation_target":"5PTDl","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],olBz5:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");function n(){return null}o.defineInteropFlag(t),o.export(t,"PageBlankComponent",(()=>n))},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"581bA":[function(e,r,t){r.exports.disabled="RD4rca_disabled",r.exports.toc="RD4rca_toc"},{}],"5PTDl":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");let n;o.defineInteropFlag(t),o.export(t,"NavigationTargetType",(()=>n)),function(e){e[e.ToC=1]="ToC",e[e.Chapter=2]="Chapter",e[e.Death=3]="Death"}(n||(n={}))},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],ekSO7:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"createRoomPage",(()=>h));var n=e("solid-js/web"),a=e("model/domain"),s=e("./room_page_controller"),i=e("./room_page"),c=e("components/scenery/rigid/create"),d=e("../../constants.module.scss"),l=o.interopDefault(d),p=e("base/exists"),u=e("components/scenery/unicode/create"),f=e("base/unreachable_error");const m=parseInt(l.default.pageWidth),g=parseInt(l.default.pageHeight);function y(e,r){const t=m,o=g,n=null!=e.encounter?m:0,s=Math.floor(20*Math.random())+20,i=function(e){switch(e){case a.ChapterType.Tutorial:return["🪑","🛏️","🛋️","🪴"];case a.ChapterType.Prelude:case a.ChapterType.Shop:return["🏡","🏠","🌴"];case a.ChapterType.Forest:return["🌲"];case a.ChapterType.Ruins:return["🏚️","🛖","🪨"];case a.ChapterType.Tower:return["x"];default:throw new(0,f.UnreachableError)(e)}}(r.book.chapter.type);return new Array(s).fill(0).map((()=>{const e=Math.random()*g/8+g/16,r=i[Math.floor(Math.random()*i.length)],{Component:a,controller:s}=(0,c.createRigidScenery)((0,u.createUnicodeScenery)(r,e),Math.random()>.5),[d,l]=s.dimensions,p=Math.random()*(2*m-d),f=Math.random()*(.8*g-l),y=p-t,h=f-o;if(y*y+h*h<n*n)return;return{Component:a,controller:s,popupDelayMillis:30*(g-f),x:p,y:f}})).filter(p.exists)}function h(e,r){const t={scenery:y(e,r)};return{controller:new(0,s.RoomPageController)(t),Component:function(e){return(0,n.createComponent)(i.RoomPageComponent,{get scenery(){return t.scenery},get side(){return e.side}})}}}},{"solid-js/web":"33rlw","./room_page_controller":"gIQaU","./room_page":"7wTCS","components/scenery/rigid/create":"7Yn3W","../../constants.module.scss":"1FSH1","base/exists":"7izAI","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","components/scenery/unicode/create":"dkYYD","model/domain":"hG1oc","base/unreachable_error":"eQLwm"}],gIQaU:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"RoomPageController",(()=>s));var n=e("base/delay"),a=e("base/max_by");class s{constructor(e){this.ui=e}async popup(){const e=(0,a.minBy)(this.ui.scenery,(e=>e.popupDelayMillis))||0;await Promise.all(this.ui.scenery.map((async r=>{await(0,n.delay)(r.popupDelayMillis-e),await r.controller.popup()})))}async popdown(){const e=(0,a.maxBy)(this.ui.scenery,(e=>e.popupDelayMillis))||0;await Promise.all(this.ui.scenery.map((async r=>{await(0,n.delay)(e-r.popupDelayMillis),await r.controller.popdown()})))}}},{"base/delay":"hGewO","base/max_by":"SzOaI","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],SzOaI:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");function n(e,r){const t=e.reduce(((e,t)=>{const o=r(t);return null==e||o>e[1]?[t,o]:e}),void 0);return t?.[1]}function a(e,r){const t=e.reduce(((e,t)=>{const o=r(t);return null==e||o<e[1]?[t,o]:e}),void 0);return t?.[1]}o.defineInteropFlag(t),o.export(t,"maxBy",(()=>n)),o.export(t,"minBy",(()=>a))},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"7wTCS":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"RoomPageComponent",(()=>f));var n=e("solid-js/web"),a=e("./room_page.module.scss"),s=o.interopDefault(a),i=e("solid-js"),c=e("../page_controller"),d=e("../../constants.module.scss"),l=o.interopDefault(d);const p=(0,n.template)("<div>"),u=parseInt(l.default.pageWidth);function f(e){return(()=>{const r=p();return(0,n.insert)(r,(0,n.createComponent)(i.For,{get each(){return e.scenery},children:r=>(()=>{const t=p();return(0,n.insert)(t,(0,n.createComponent)(r.Component,{get x(){return r.x-(e.side===c.PageSide.Left?0:u)+"vmin"}})),(0,n.effect)((e=>{const o=s.default.scenery,a=`${r.y}vmin`,i=`translateZ(${r.y/1e3}vmin)`;return o!==e._v$&&(0,n.className)(t,e._v$=o),a!==e._v$2&&(null!=(e._v$2=a)?t.style.setProperty("top",a):t.style.removeProperty("top")),i!==e._v$3&&(null!=(e._v$3=i)?t.style.setProperty("transform",i):t.style.removeProperty("transform")),e}),{_v$:void 0,_v$2:void 0,_v$3:void 0}),t})()})),(0,n.effect)((e=>(0,n.classList)(r,{[s.default.room]:!0},e))),r})()}},{"solid-js/web":"33rlw","./room_page.module.scss":"gTaHF","solid-js":"5rsr6","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","../page_controller":"iOtej","../../constants.module.scss":"1FSH1"}],gTaHF:[function(e,r,t){r.exports.scenery="_2D23sq_scenery",r.exports.room="_2D23sq_room"},{}],"1FSH1":[function(e,r,t){r.exports.cardWidth="9",r.exports.cardHeight="12",r.exports.pageWidth="50",r.exports.pageHeight="70"},{}],"7Yn3W":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"createRigidScenery",(()=>c));var n=e("solid-js/web"),a=e("ui/animation/animation_manager"),s=e("./rigid_scenery_controller"),i=e("./rigid_scenery");function c(e,r){const t=s.rigidSceneryUI.create({up:!1}),o=new(0,a.AnimationManager);return{controller:new(0,s.RigidSceneryController)(o,t,e.controller),Component:function(a){return(0,n.createComponent)(i.RigidSceneryComponent,{animations:o,get up(){return t.up},get x(){return a.x},flipX:r,get children(){return(0,n.createComponent)(e.Component,{})}})}}}},{"solid-js/web":"33rlw","ui/animation/animation_manager":"fbyYW","./rigid_scenery_controller":"2pEMc","./rigid_scenery":"9hYde","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"2pEMc":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"Animations",(()=>s)),o.export(t,"rigidSceneryUI",(()=>i)),o.export(t,"RigidSceneryController",(()=>c));var n=e("model/descriptor/record"),a=e("model/descriptor/literals");let s;!function(e){e[e.Popped=1]="Popped"}(s||(s={}));const i=(0,n.activeRecordDescriptor)({up:a.booleanDescriptor});class c{constructor(e,r,t){this.animations=e,this.ui=r,this.controller=t}async popup(){this.ui.up||(this.ui.up=!0,await this.animations.waitForAnimation(1))}async popdown(){this.ui.up&&(this.ui.up=!1,await this.animations.waitForAnimation(1))}get dimensions(){return this.controller.dimensions}}},{"model/descriptor/record":"9b5Fs","model/descriptor/literals":"6SgZZ","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"9hYde":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"RigidSceneryComponent",(()=>l));var n=e("solid-js/web"),a=e("solid-js"),s=e("./rigid_scenery.module.scss"),i=o.interopDefault(s),c=e("./rigid_scenery_controller");const d=(0,n.template)("<div><div><div>");function l(e){const[r,t]=(0,a.createSignal)();return(()=>{const o=d(),a=o.firstChild,s=a.firstChild;return(0,n.addEventListener)(o,"transitionend",e.animations.createTransitionEndEventListener(r,(()=>c.Animations.Popped))),(0,n.use)(t,o),(0,n.insert)(s,(()=>e.children)),(0,n.effect)((r=>{const t={[i.default.scenery]:!0,[i.default.down]:!e.up,[i.default.up]:e.up},c=e.x,d={[i.default.flip]:e.flipX};return r._v$=(0,n.classList)(o,t,r._v$),c!==r._v$2&&(null!=(r._v$2=c)?a.style.setProperty("margin-left",c):a.style.removeProperty("margin-left")),r._v$3=(0,n.classList)(s,d,r._v$3),r}),{_v$:void 0,_v$2:void 0,_v$3:void 0}),o})()}},{"solid-js/web":"33rlw","solid-js":"5rsr6","./rigid_scenery.module.scss":"lyhLl","./rigid_scenery_controller":"2pEMc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],lyhLl:[function(e,r,t){r.exports.cardWidth="9",r.exports.cardHeight="12",r.exports.pageWidth="50",r.exports.pageHeight="70",r.exports.scenery="scenery_bd6a0f",r.exports.up="up_bd6a0f",r.exports.down="down_bd6a0f",r.exports.flip="flip_bd6a0f"},{}],"7izAI":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");function n(e){return null!=e}o.defineInteropFlag(t),o.export(t,"exists",(()=>n))},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],dkYYD:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"createUnicodeScenery",(()=>i));var n=e("solid-js/web"),a=e("./unicode_scenery"),s=e("./unicode_scenery_controller");function i(e,r){return{Component:function(){return(0,n.createComponent)(a.UnicodeSceneryComponent,{fontSize:`${r}vmin`,unicode:e})},controller:new(0,s.UnicodeSceneryController)([r,r])}}},{"solid-js/web":"33rlw","./unicode_scenery":"fSP5s","./unicode_scenery_controller":"lpocf","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],fSP5s:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"UnicodeSceneryComponent",(()=>s));var n=e("solid-js/web");const a=(0,n.template)("<div>");function s(e){return(()=>{const r=a();return(0,n.insert)(r,(()=>e.unicode)),(0,n.effect)((()=>null!=e.fontSize?r.style.setProperty("font-size",e.fontSize):r.style.removeProperty("font-size"))),r})()}},{"solid-js/web":"33rlw","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],lpocf:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"UnicodeSceneryController",(()=>n));class n{constructor(e){this.dimensions=e}async popup(){}async popdown(){}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],ebtqy:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"createDeathPage",(()=>i));var n=e("solid-js/web"),a=e("../page_controller"),s=e("./death_page");function i(e,r,t){return{controller:new(0,a.EmptyPageController),Component:function(o){return(0,n.createComponent)(s.DeathPageComponent,{get side(){return o.side},navigation:r,spread:e,onFocusUIElement:t})}}}},{"solid-js/web":"33rlw","../page_controller":"iOtej","./death_page":"4aL0c","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"4aL0c":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"DeathPageComponent",(()=>f));var n=e("solid-js/web"),a=e("components/navigation_target"),s=e("../page_controller"),i=e("./death_page.module.scss"),c=o.interopDefault(i);const d=(0,n.template)("<div><h2>You have fallen.");function l(){return null}function p(e){return(()=>{const r=d();return r.$$mouseover=()=>e.onFocusUIElement("a"),r.addEventListener("focus",(()=>e.onFocusUIElement("a"))),r.$$click=()=>e.navigation({type:a.NavigationTargetType.ToC}),(0,n.effect)((()=>(0,n.className)(r,c.default.container))),r})()}const u={[s.PageSide.Left]:function(){return(0,n.createComponent)(l,{})},[s.PageSide.Right]:function(e){return(0,n.createComponent)(p,{get navigation(){return e.navigation},get onFocusUIElement(){return e.onFocusUIElement}})}};function f(e){return(0,n.createComponent)(n.Dynamic,{get component(){return u[e.side]},get side(){return e.side},get spread(){return e.spread},get navigation(){return e.navigation},get onFocusUIElement(){return e.onFocusUIElement}})}(0,n.delegateEvents)(["click","mouseover"])},{"solid-js/web":"33rlw","components/navigation_target":"5PTDl","../page_controller":"iOtej","./death_page.module.scss":"6xPm9","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"6xPm9":[function(e,r,t){r.exports.container="SkyA-W_container"},{}],dG5uB:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"initialGame",(()=>s));var n=e("model/domain"),a=e("./chapters/ruins/chapter");const s=n.gameDescriptor.create({book:{spread:void 0,chapter:a.chapter,cardSlots:new Array(3).fill(0).map((()=>({targetCard:void 0,playedCards:[]})))},playerCharacter:void 0,playerHand:new Array(6).fill(0).map((()=>({targetCard:void 0,playedCards:[]})))})},{"model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","./chapters/ruins/chapter":"dOmiz"}],dOmiz:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"chapter",(()=>s));var n=e("model/domain"),a=e("./cards");const s=n.chapterDescriptor.freeze({type:n.ChapterType.Ruins,deck:[...a.cards],finalCard:a.finalCard,pagesRemaining:10})},{"model/domain":"hG1oc","./cards":"z567B","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],z567B:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"cards",(()=>y)),o.export(t,"finalCard",(()=>v));var n=e("data/effects"),a=e("data/events/shrine/cards"),s=e("model/domain");const i={name:"jammed door",description:"Grudgingly, the door opens.",type:s.CardFaceType.ChoiceBack,background:s.CardBackgroundType.Door,foreground:void 0,symbol:void 0,cost:[n.DamageUp]},c={name:"locked door",description:"You manage to pick the crude lock.",type:s.CardFaceType.ChoiceBack,background:s.CardBackgroundType.Door,foreground:void 0,symbol:void 0,cost:[n.Finesse]},d={name:"dark doorway",description:"Light floods the passageway.",type:s.CardFaceType.ChoiceBack,background:s.CardBackgroundType.Door,foreground:void 0,symbol:void 0,cost:[n.Perception]},l={name:"door",description:void 0,type:s.CardFaceType.ChoiceBack,background:s.CardBackgroundType.Door,foreground:void 0,symbol:void 0,cost:[]},p={name:"empty passage",description:"A crumbling walkway.",type:s.CardFaceType.Choice,background:s.CardBackgroundType.Passageway,foreground:void 0,symbol:void 0,choice:{type:s.ChoiceType.NextPage,encounter:void 0},cost:[],benefit:[]},u={name:"rodent of unusual size",description:"The creature hisses at you belligerently.",type:s.CardFaceType.Choice,background:s.CardBackgroundType.Passageway,foreground:s.CardForegroundType.Rat,symbol:void 0,choice:{type:s.ChoiceType.NextPage,encounter:{type:s.EncounterType.Battle,monster:s.MonsterType.BigRat}},cost:[],benefit:[]},f={name:"trapped hallway",description:"An arrow flies out of a hidden recess.",type:s.CardFaceType.Choice,background:s.CardBackgroundType.Passageway,foreground:s.CardForegroundType.Trap,symbol:void 0,choice:{type:s.ChoiceType.NextPage,encounter:void 0},cost:[n.DamageDown],benefit:[]},m={name:"fountain",description:"You are drawn to the sound of bubbling water. A pristine fountain stands amongst the ruins.",type:s.CardFaceType.Choice,background:s.CardBackgroundType.Passageway,foreground:s.CardForegroundType.Fountain,symbol:void 0,choice:{type:s.ChoiceType.NextPage,encounter:{type:s.EncounterType.Event,event:s.EventType.Fountain}},cost:[],benefit:[]},g={name:"treasure",description:"The glint of gold.",type:s.CardFaceType.Choice,background:s.CardBackgroundType.Passageway,foreground:s.CardForegroundType.Treasure,symbol:void 0,choice:{type:s.ChoiceType.NextPage,encounter:{type:s.EncounterType.Event,event:s.EventType.Treasure}},cost:[],benefit:[]},y=[l,i,d,c].flatMap((e=>[p,u,f,g].map((r=>({recycleTarget:s.RecycleTarget.Draw,recyclePosition:void 0,faces:[e,r]}))))).concat([{faces:[i,m],recycleTarget:s.RecycleTarget.Discard,recyclePosition:void 0},{faces:[d,m],recycleTarget:s.RecycleTarget.Discard,recyclePosition:void 0},{faces:[d,g],recycleTarget:s.RecycleTarget.Discard,recyclePosition:void 0},{faces:[c,g],recycleTarget:s.RecycleTarget.Discard,recyclePosition:void 0},{faces:[l,g],recycleTarget:s.RecycleTarget.Discard,recyclePosition:void 0},{faces:[c,a.cardFrontShrine],recycleTarget:s.RecycleTarget.Discard,recyclePosition:void 0}]).map((e=>({...e,visibleFaceIndex:0}))),h={name:"crumbling bridge",description:"With some trepidation you cross the bridge.",type:s.CardFaceType.ChoiceBack,background:s.CardBackgroundType.Door,foreground:void 0,symbol:void 0,cost:[]},b={name:"lion",description:"A lion lies guarding the castle gate. It slowly gets up and pads toward you.",type:s.CardFaceType.Choice,background:s.CardBackgroundType.Passageway,foreground:void 0,symbol:void 0,choice:{type:s.ChoiceType.NextChapter,encounter:{type:s.EncounterType.Battle,monster:s.MonsterType.BigRat},targetChapterIndex:3},cost:[],benefit:[]},v=s.cardDescriptor.freeze({faces:[h,b],recycleTarget:s.RecycleTarget.Discard,recyclePosition:void 0,visibleFaceIndex:0})},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","data/events/shrine/cards":"9O0J4"}],"7stQX":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"Force",(()=>a)),o.export(t,"Finesse",(()=>s)),o.export(t,"Mind",(()=>i)),o.export(t,"Magic",(()=>c)),o.export(t,"Perception",(()=>d)),o.export(t,"DamageUp",(()=>l)),o.export(t,"DamageDown",(()=>p)),o.export(t,"Youth",(()=>u)),o.export(t,"Age",(()=>f)),o.export(t,"Healing",(()=>m)),o.export(t,"PoisonUp",(()=>g)),o.export(t,"PoisonDown",(()=>y)),o.export(t,"GainMaxHealth",(()=>h)),o.export(t,"LoseMaxHealth",(()=>b)),o.export(t,"LoseCards",(()=>v)),o.export(t,"DoubleCard",(()=>C)),o.export(t,"Draw",(()=>_));var n=e("model/domain");const a={direction:n.EffectDirection.Omni,symbol:n.SymbolType.Force},s={direction:n.EffectDirection.Omni,symbol:n.SymbolType.Finesse},i={direction:n.EffectDirection.Omni,symbol:n.SymbolType.Mind},c={direction:n.EffectDirection.Omni,symbol:n.SymbolType.Magic},d={direction:n.EffectDirection.Omni,symbol:n.SymbolType.Perception},l={direction:n.EffectDirection.Up,symbol:n.SymbolType.Damage},p={direction:n.EffectDirection.Down,symbol:n.SymbolType.Damage},u={direction:n.EffectDirection.Omni,symbol:n.SymbolType.Youth},f={direction:n.EffectDirection.Omni,symbol:n.SymbolType.Age},m={direction:n.EffectDirection.Omni,symbol:n.SymbolType.Healing},g={direction:n.EffectDirection.Up,symbol:n.SymbolType.Poison},y={direction:n.EffectDirection.Down,symbol:n.SymbolType.Poison},h={direction:n.EffectDirection.Omni,symbol:n.SymbolType.GainMaxHealth},b={direction:n.EffectDirection.Omni,symbol:n.SymbolType.LoseMaxHealth},v={direction:n.EffectDirection.Omni,symbol:n.SymbolType.LoseCards},C={direction:n.EffectDirection.Omni,symbol:n.SymbolType.DoubleCard},_={direction:n.EffectDirection.Omni,symbol:n.SymbolType.Draw}},{"model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"9O0J4":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"cardFrontShrineSacrifice",(()=>d)),o.export(t,"cardFrontShrineEmpower",(()=>l)),o.export(t,"cards",(()=>p)),o.export(t,"cardFrontShrineIgnore",(()=>f)),o.export(t,"cardIgnore",(()=>m)),o.export(t,"cardFrontShrine",(()=>g));var n=e("data/effects"),a=e("model/domain");const s={name:"offer",description:"The offering is of interest.",type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.Crosshatched,foreground:a.CardForegroundType.Shrine,symbol:void 0,cost:[n.Finesse]},i={name:"offer",description:"The offering is of interest.",type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.Crosshatched,foreground:a.CardForegroundType.Shrine,symbol:void 0,cost:[n.Force]},c={name:"offer",description:"The offering is of interest.",type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.Crosshatched,foreground:a.CardForegroundType.Shrine,symbol:void 0,cost:[n.Mind]},d={name:"sacrifice",description:"You forget something important.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Shrine,symbol:void 0,cost:[n.LoseCards],benefit:[]},l={name:"empower",description:"Forbidden knowledge briefly fills your mind.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Shrine,symbol:void 0,cost:[n.DoubleCard],benefit:[]},p=[s,i,c].flatMap((e=>[d,l].map((r=>({faces:[e,r],recycleTarget:a.RecycleTarget.Discard,recyclePosition:void 0}))))).map((e=>a.cardDescriptor.freeze({...e,visibleFaceIndex:0}))),u={name:"avoid",description:void 0,type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.Crosshatched,foreground:a.CardForegroundType.Shrine,symbol:void 0,cost:[]},f={name:"avoid",description:"Discretion is the better part of valour.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Shrine,symbol:void 0,cost:[],benefit:[]},m=a.cardDescriptor.freeze({faces:[u,f],recycleTarget:a.RecycleTarget.Discard,recyclePosition:void 0,visibleFaceIndex:0}),g={name:"shrine",description:"You come across a shrine to a forgotten god.",type:a.CardFaceType.Choice,background:a.CardBackgroundType.ForestPath,foreground:a.CardForegroundType.Shrine,symbol:void 0,choice:{type:a.ChoiceType.NextPage,encounter:{type:a.EncounterType.Event,event:a.EventType.Shrine}},cost:[],benefit:[]}},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"4CbJY":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"createDragOverlay",(()=>i));var n=e("solid-js/web"),a=e("./drag_overlay"),s=e("./drag_overlay_controller");e("solid-js"),e("model/domain");function i(e,r){function t(){return(0,n.memo)((()=>{const t=(0,n.memo)((()=>!!e.draggedCard));return()=>t()&&(0,n.createComponent)(r,{get model(){return e.draggedCard}})})())}function o(){e.clearDrag()}return{controller:new(0,s.DragOverlayController),Component:function(r){return(0,n.createComponent)(a.DragOverlay,{get cx(){return e.lastMousePosition?.[0]},get cy(){return e.lastMousePosition?.[1]},Card:t,get dragging(){return e.dragging},onDragCancel:o,get children(){return r.children}})}}}},{"solid-js/web":"33rlw","./drag_overlay":"k1kYn","./drag_overlay_controller":"c9yyU","solid-js":"5rsr6","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],k1kYn:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"DragOverlay",(()=>c));var n=e("solid-js/web"),a=e("./drag_overlay.module.scss"),s=o.interopDefault(a);const i=(0,n.template)("<div><div>");function c(e){return(()=>{const r=i(),t=r.firstChild;return(0,n.addEventListener)(r,"pointerup",e.onDragCancel,!0),(0,n.insert)(r,(()=>e.children),t),(0,n.insert)(t,(0,n.createComponent)(e.Card,{})),(0,n.effect)((o=>{const a={[s.default.drag]:!0,[s.default.dragging]:e.dragging},i=s.default["scale-up"],c=null!=e.cx&&null!=e.cy?{transform:`translate(${e.cx}px, ${e.cy}px)`}:void 0;return o._v$=(0,n.classList)(r,a,o._v$),i!==o._v$2&&(0,n.className)(t,o._v$2=i),o._v$3=(0,n.style)(t,c,o._v$3),o}),{_v$:void 0,_v$2:void 0,_v$3:void 0}),r})()}(0,n.delegateEvents)(["pointerup"])},{"solid-js/web":"33rlw","./drag_overlay.module.scss":"iVxGu","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],iVxGu:[function(e,r,t){r.exports.cardWidth="9",r.exports.cardHeight="12",r.exports.pageWidth="50",r.exports.pageHeight="70",r.exports.drag="drag_5a6002",r.exports.dragging="dragging_5a6002",r.exports["scale-up"]="scale-up_5a6002"},{}],c9yyU:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"DragOverlayController",(()=>n));class n{}},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],bPP2R:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"GameManager",(()=>k));var n=e("components/card/card_controller"),a=e("model/domain"),s=e("./cards"),i=e("./games"),c=e("solid-js"),d=e("base/delay"),l=e("data/player/initial"),p=e("base/unreachable_error"),u=e("./encounters"),f=e("components/navigation_target"),m=e("data/chapters/prelude/chapter"),g=e("data/chapters/forest/chapter"),y=e("data/chapters/ruins/chapter"),h=e("data/chapters/store/chapter"),b=e("data/chapters/tutorial/chapter"),v=e("base/arrays"),C=e("base/exists"),_=e("ui/sounds/sound_manager"),T=e("base/flattened_promise");class k{constructor(e,r,t,o,n,a,s,i,c,d){this.speaker=e,this.soundManager=r,this.game=t,this.navigation=o,this.tableController=n,this.bookController=a,this.cardControllerManager=s,this.cardSlotControllerManager=i,this.battleEncounterControllerManager=c,this.eventEncounterControllerManager=d}async chooseTargetCard(e){const r=e.targetCard;if(null==r||this.game.playerHand.indexOf(e)>=0)return;const t=(0,s.cardFace)(r,!1),o=this.cardControllerManager.lookupController(r);t.type!==a.CardFaceType.ChoiceBack&&t.type!==a.CardFaceType.Choice||(o?.setElevated(!0),e.playedCards.forEach((e=>this.cardControllerManager.lookupController(e)?.setElevated(!0)))),t.type===a.CardFaceType.ChoiceBack&&(await(o?.flip()),await(0,d.delay)(500));const n=(0,s.cardFace)(r,!1);if(n.type===a.CardFaceType.Choice){n.description&&this.speaker.say(n.description);const r=(0,i.gameEncounterBattle)(this.game);null!=r&&await(this.battleEncounterControllerManager.lookupController(r)?.perform(n));const t=await this.applyCardEffects(e);await t();const o=n.choice;switch(o.type){case a.ChoiceType.NextChapter:return this.createChapter(o.targetChapterIndex),this.nextPage(o.encounter,e);case a.ChoiceType.NextPage:return this.nextPage(o.encounter,e);case a.ChoiceType.ToC:return this.navigation({type:f.NavigationTargetType.ToC});case a.ChoiceType.NextTurn:const{playerDead:r,finishEndTurn:t}=await this.endTurn(e);if(await t(),!r)return this.startTurn();break;default:throw new(0,p.UnreachableError)(o)}}else if(n.type===a.CardFaceType.Resource||n.type===a.CardFaceType.ResourceBack)return await this.returnCardToDeck(r,e,(0,i.playerDeck)(this.game),void 0,!1,!0),this.nextPage(void 0,e)}async applyCardEffects(e){const r=e.targetCard,t=this.game.playerCharacter;let o=Promise.resolve();if(null==r||null==t)return()=>o;const n=(0,s.cardFace)(r,!1),c=(0,s.calculateTargetCardEffectUsages)(n,e,void 0),d=await this.applyUsages(r,c.cost,a.EffectDirection.Down,t);o=o.then(d);const l=(0,i.gameEncounterBattle)(this.game);if(null==l||this.game.playerHand.indexOf(e)>=0)return()=>o;const p=await this.applyUsages(r,c.benefit,a.EffectDirection.Up,l.monster);o=o.then(p);for(const r of e.playedCards){const e=(0,s.calculateCardEffectUsages)(this.game,r,void 0),t=await this.applyUsages(r,e.benefit,a.EffectDirection.Up,l.monster);o=o.then(t)}return()=>o}async applyUsages(e,r,t,o){const c=(0,s.cardSlotForCard)(this.game,e),l=this.game.playerCharacter;if(null==l)return async()=>{};const u=(0,s.cardFace)(e,!1);let{promise:f,resolve:m}=(0,T.createFlattenedPromise)();return await Promise.all([(async()=>{u.description&&r.some((({used:e,effect:{direction:r}})=>!e&&r&t||e&&!(r&t)))&&await this.speaker.say(u.description)})(),(async()=>{const u=this.cardControllerManager.lookupController(e);for(const m of r)if(!m.used&&m.effect.direction&t)switch(m.effect.symbol){case a.SymbolType.GainCards:const r=(0,s.sortCardsByRecycling)(m.effect.cards.map((e=>a.cardDescriptor.create({...e,visibleFaceIndex:0}))));o.deck=[...r,...o.deck];break;case a.SymbolType.LoseCards:null!=c&&c.playedCards.forEach((e=>e.recycleTarget=a.RecycleTarget.Destroy));break;case a.SymbolType.Damage:case a.SymbolType.Poison:await(0,d.delay)(300),await(u?.moveTo("0",t===a.EffectDirection.Down?"20vmin":"-20vmin","1vmin",n.Easing.Violent)),o.health--;const g=(0,i.gameEncounterBattle)(this.game);o!==l&&null!=g&&(this.soundManager.playEffect(o.health>0?_.SoundEffect.MonsterDamage:_.SoundEffect.Victory),await(this.battleEncounterControllerManager.lookupController(g)?.takeDamage()));break;case a.SymbolType.Healing:o.health<o.maxHealth&&(await(0,d.delay)(300),await(u?.moveTo("0",t===a.EffectDirection.Down?"20vmin":"-20vmin","1vmin",n.Easing.Gentle)),o.health=o.health+1);break;case a.SymbolType.Finesse:case a.SymbolType.Force:case a.SymbolType.Mind:case a.SymbolType.Magic:case a.SymbolType.Perception:if(o!==l)return;const y=this.game.playerHand.reduce(((r,t)=>{const o=t.targetCard;if(null!=o&&o!==e){const e=t.playedCards.find((e=>(0,s.cardFace)(e,!1).symbol===m.effect.symbol)),n=e||((0,s.cardFace)(o,!1).symbol===m.effect.symbol?o:void 0);return null!=n?[n,t]:r}return r}),void 0);if(y){const[e,r]=y;await(0,d.delay)(300),await(u?.moveTo("0",t===a.EffectDirection.Down?"20vmin":"-20vmin","1vmin",n.Easing.Violent)),await this.returnCardToDeck(e,r,[()=>l.deck,e=>l.deck=e],void 0,!0)}break;case a.SymbolType.Youth:await(u?.moveTo("0",t===a.EffectDirection.Down?"20vmin":"-20vmin","1vmin",n.Easing.Gentle)),o.age-=2;break;case a.SymbolType.Age:await(u?.moveTo("0",t===a.EffectDirection.Down?"20vmin":"-20vmin","1vmin",n.Easing.Violent)),o.age++;break;case a.SymbolType.GainMaxHealth:await(u?.moveTo("0",t===a.EffectDirection.Down?"20vmin":"-20vmin","1vmin",n.Easing.Gentle)),o.maxHealth++;break;case a.SymbolType.LoseMaxHealth:await(u?.moveTo("0",t===a.EffectDirection.Down?"20vmin":"-20vmin","1vmin",n.Easing.Violent)),o.maxHealth--,o.health>o.maxHealth&&(o.health=o.maxHealth);break;case a.SymbolType.Draw:f=f.then((()=>this.drawPlayerCards(1)));break;case a.SymbolType.DoubleCard:if(null!=c&&c.playedCards.length>0){const e=c.playedCards[Math.floor(Math.random()*c.playedCards.length)];e.faces=e.faces.map((e=>({...e,cost:e.cost.flatMap((e=>[e,e])),benefit:e.type===a.CardFaceType.Resource?e.benefit.flatMap((e=>[e,e])):[]})))}break;case a.SymbolType.Duplicate:null!=c&&(o.deck=[...c.playedCards.map((e=>a.cardDescriptor.create(a.cardDescriptor.snapshot(e)))),...o.deck]);break;default:throw new(0,p.UnreachableError)(m.effect)}})()]),await this.normalizeBoard(),()=>(m(),f)}async maybeCreatePlayer(){null==this.game.playerCharacter&&(this.game.playerCharacter=a.entityDescriptor.create(l.defaultPlayerCharacter),this.game.playerCharacter.deck=(0,v.arrayRandomize)(this.game.playerCharacter.deck))}async createChapter(e){const r=[b.chapter,m.chapter,h.chapter,g.chapter,y.chapter];(0,c.batch)((()=>{this.game.book.chapter=a.chapterDescriptor.create(r[e%r.length]),e>0?(this.game.book.chapter.deck=(0,v.arrayRandomize)(this.game.book.chapter.deck),this.game.book.cardSlots=new Array(3).fill(0).map((()=>a.cardSlotDescriptor.create({targetCard:void 0,playedCards:[]})))):(this.game.book.chapter.deck=[...this.game.book.chapter.deck].reverse(),this.game.book.cardSlots=[a.cardSlotDescriptor.create({targetCard:void 0,playedCards:[]})])}))}async nextPage(e,r){const{finishEndTurn:t,playerDead:o}=await this.endTurn(r);if(this.game.playerCharacter&&this.game.playerCharacter.age++,o)return t();this.game.book.chapter.pagesRemaining--;const n=a.bookSpreadRoomDescriptor.create({type:a.BookSpreadType.Room,encounter:e&&(0,u.hydrateEncounter)(e)});await this.bookController.showSpread(n),await t();const s=(0,i.gameEncounterBattle)(this.game),c=(0,i.gameEncounterEvent)(this.game);null!=s&&await(this.battleEncounterControllerManager.lookupController(s)?.appear()),null!=c&&await(this.eventEncounterControllerManager.lookupController(c)?.appear()),await this.startTurn()}async normalizeBoard(){const e=(0,i.allCardSlots)(this.game).filter((e=>this.isAutoFlippable(e))),r=e.map((e=>{const r=e.targetCard;if(null==r||r.visibleFaceIndex>0)return;return(0,s.cardFace)(r,!1).description})).filter(C.exists)[0];null!=r&&this.speaker.say(r),await Promise.all(e.map((async e=>{const r=e.targetCard;if(null==r)return;const t=this.cardControllerManager.lookupController(r);return null!=t?t.flip():void 0})))}async startTurn(e=this.game.playerHand.length){const r=(0,i.pageCardSlots)(this.game),[t,o,n]=(0,i.pageDeck)(this.game);if(this.game.book.chapter.pagesRemaining<0&&!n){const e=this.game.book.chapter.finalCard;r[Math.floor(r.length/2)].targetCard=e}else await Promise.all(r.map((async e=>{const r=t();if(r.length>0){const t=r[r.length-1];if(null!=t){e.targetCard=t,this.soundManager.playEffect(_.SoundEffect.CardPlacement),o(r.slice(0,-1));const n=this.cardControllerManager.lookupController(t);n?.flipUpToVertical(),await(0,d.delay)(0),await(n?.flipDownFromVertical())}}})));this.drawPlayerCards(e)}async drawPlayerCards(e){const r=this.game.playerHand;if(null!=r){const t=r.filter((e=>null==e.targetCard&&0===e.playedCards.length)),o=Math.min(e,t.length),a=this.game.playerCharacter;if(o>0&&null!=a){const e=a.deck.slice(-o),s=this.tableController.getPlayerDeckTablePosition();await(0,c.batch)((async()=>{await Promise.all(e.reverse().map((async(e,o)=>{const a=t[o],i=r.indexOf(a),c=this.tableController.getPlayerCardSlotTablePosition(i);await(this.cardControllerManager.lookupController(e)?.moveTo(...c.map(((e,r)=>e-s[r])).map((e=>`${e}vmin`)),n.Easing.Gentle)),a.targetCard=e,this.soundManager.playEffect(_.SoundEffect.CardPlacement)})))})),a.deck=a.deck.slice(0,-o)}}await(0,d.delay)(300),await this.normalizeBoard()}async endTurn(e){const r=(0,i.gameEncounterBattle)(this.game);let t=null!=r&&r.monster.health<=0;t&&r&&await(this.battleEncounterControllerManager.lookupController(r)?.die());const o=(0,i.gameEncounterEvent)(this.game);null!=o&&await(this.eventEncounterControllerManager.lookupController(o)?.disappear());const n=(0,i.pageDeck)(this.game),s=(0,i.playerDeck)(this.game),d=async e=>{const r=this.game.playerHand.indexOf(e)>=0,t=e.targetCard;if(null!=t&&r&&t.visibleFaceIndex>0||null==s)return[];const o=this.cardSlotControllerManager.lookupController(e);o?.setForceUnrotate(!0);const a=e.playedCards;null!=t&&(await this.returnCardToDeck(t,e,r?s:n,void 0,r),e.targetCard=void 0),null!=s&&(await Promise.all(a.map((async r=>this.returnCardToDeck(r,e,s)))),e.playedCards=[]),o?.setForceUnrotate(!1)},l=this.game.playerCharacter,p=null==l||l.health<=0,u=(0,i.allCardSlots)(this.game).filter((r=>p||r!==e));if(await(0,c.batch)((async()=>{await Promise.all(u.flatMap(d))})),t){const e=this.game.book.spread;e?.type===a.BookSpreadType.Room&&(e.encounter=void 0)}return this.game.book.spread?.type===a.BookSpreadType.Room&&this.game.book.spread.encounter?.type===a.EncounterType.Event&&(this.game.book.spread.encounter=void 0),p&&await this.playerDeath(),{playerDead:p,finishEndTurn:async()=>{null!=e&&await d(e)}}}isAutoFlippable(e){const r=e.targetCard;if(null==r)return!1;const t=(0,s.cardFace)(r,!1),o=r.faces[0],n=r.visibleFaceIndex>0,i=this.game.playerHand.indexOf(e)>=0,c=(0,s.calculateTargetCardEffectUsages)(o,e,this.cardControllerManager).cost.every((e=>e.used));return!c&&n&&t.type!==a.CardFaceType.Choice||c&&!n&&(i||t.type!==a.CardFaceType.ResourceBack)}async returnCardToDeck(e,r,t,o,s,i){const c=this.cardControllerManager.lookupController(e),d=this.game.playerHand.indexOf(r)>=0;c?.setElevated(!1);const l=e.recycleTarget,p=e.recycleTarget===a.RecycleTarget.Destroy?void 0:l===a.RecycleTarget.Discard?o:t,u=(d||e!==r.targetCard||i)&&null!=p;if(u?e.visibleFaceIndex>0&&await(c?.flip()):(await(c?.flipUpToVertical()),e.visibleFaceIndex=0),null!=p){const[r,t]=p,o=r(),n=o.length,a=s?0:e.recyclePosition?Math.min(n-e.recyclePosition-1,n):Math.floor(Math.random()*n);t([...o.slice(0,a),e,...o.slice(a)])}if(r.targetCard===e?r.targetCard=void 0:r.playedCards=r.playedCards.filter((r=>r!==e)),u){const e=this.tableController.getPlayerDeckTablePosition(),t=this.game.playerHand.indexOf(r),o=this.game.book.cardSlots.indexOf(r),a=t>=0?this.tableController.getPlayerCardSlotTablePosition(t):this.tableController.getBookCardSlotTablePosition(o);await(c?.moveFrom(...a.map(((r,t)=>r-e[t])).map((e=>`${e}vmin`)),n.Easing.Gentle,t<0?"rotateX(-90deg)":void 0)),this.soundManager.playEffect(_.SoundEffect.CardExit)}}async playerDeath(){await this.navigation({type:f.NavigationTargetType.Death}),this.game.playerCharacter=void 0,(0,i.allCardSlots)(this.game).forEach((e=>{e.targetCard=void 0,e.playedCards=[]}))}}},{"model/domain":"hG1oc","./cards":"kFtME","./games":"3tjca","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","solid-js":"5rsr6","base/delay":"hGewO","data/player/initial":"iboxN","base/unreachable_error":"eQLwm","./encounters":"2BJdZ","components/card/card_controller":"eIxqM","components/navigation_target":"5PTDl","base/arrays":"c63XN","base/exists":"7izAI","data/chapters/ruins/chapter":"dOmiz","data/chapters/forest/chapter":"35iq2","data/chapters/prelude/chapter":"ae7DI","data/chapters/store/chapter":"aoHVx","data/chapters/tutorial/chapter":"VbxeC","ui/sounds/sound_manager":"iITyB","base/flattened_promise":"9HvUW"}],iboxN:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"defaultPlayerCharacter",(()=>n));const n=e("model/domain").entityDescriptor.freeze({deck:[],health:3,maxHealth:3,age:20})},{"model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"2BJdZ":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"hydrateEncounter",(()=>h));var n=e("base/arrays"),a=e("base/unreachable_error"),s=e("data/monsters/rat/initial"),i=e("data/monsters/troll/initial"),c=e("data/events/fountain/cards"),d=e("data/events/magic_tree/cards"),l=e("data/events/mushroom/cards"),p=e("data/events/shrine/cards"),u=e("data/items/cards"),f=e("model/domain"),m=e("data/monsters/snail/initial"),g=e("data/monsters/rooster/initial"),y=e("data/monsters/dummy/initial");function h(e){switch(e.type){case f.EncounterType.Battle:const r=function(e){switch(e){case f.MonsterType.BigRat:return s.defaultRat;case f.MonsterType.Troll:return i.defaultTroll;case f.MonsterType.Snail:return m.defaultSnail;case f.MonsterType.Rooster:return g.defaultRooster;case f.MonsterType.Dummy:return y.defaultDummy;default:throw new(0,a.UnreachableError)(e)}}(e.monster),t=(0,n.arrayRandomize)(r.deck);return{type:e.type,monsterType:e.monster,monster:{...r,deck:t}};case f.EncounterType.Event:switch(e.event){case f.EventType.Fountain:return{type:f.EncounterType.Event,eventType:e.event,deck:(0,n.arrayRandomize)(c.cards).slice(0,2).concat([c.cardIgnore])};case f.EventType.MagicTree:return{type:f.EncounterType.Event,eventType:e.event,deck:(0,n.arrayRandomize)(d.cards).slice(0,3)};case f.EventType.Mushroom:return{type:f.EncounterType.Event,eventType:e.event,deck:(0,n.arrayRandomize)(l.cards).slice(0,2).concat([l.cardIgnore])};case f.EventType.Shrine:return{type:f.EncounterType.Event,eventType:e.event,deck:(0,n.arrayRandomize)(p.cards).slice(0,2).concat([p.cardIgnore])};case f.EventType.Treasure:return{type:f.EncounterType.Event,eventType:e.event,deck:(0,n.arrayRandomize)(u.cards).slice(0,2).concat(u.ignoreCards[Math.floor(Math.random()*u.ignoreCards.length)])};case f.EventType.Shop:return{type:f.EncounterType.Event,eventType:e.event,deck:[b(f.SymbolType.Force,u.cards),b(f.SymbolType.Finesse,u.cards),b(f.SymbolType.Magic,u.cards)]};default:throw new(0,a.UnreachableError)(e.event)}default:throw new(0,a.UnreachableError)(e)}}function b(e,r){const t=r.filter((r=>r.faces.some((r=>r.symbol===e)))),o=t.length>0?t:r;return(0,n.arrayRandomize)(o)[0]}},{"base/unreachable_error":"eQLwm","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","base/arrays":"c63XN","data/monsters/rat/initial":"fhIPE","data/monsters/troll/initial":"2Gfop","data/events/fountain/cards":"bOODI","data/events/magic_tree/cards":"ecSzl","data/monsters/snail/initial":"e4Drc","data/events/mushroom/cards":"e86jK","data/events/shrine/cards":"9O0J4","data/items/cards":"5hers","data/monsters/rooster/initial":"41pZX","data/monsters/dummy/initial":"hvpj3"}],fhIPE:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"defaultRat",(()=>s));var n=e("model/domain"),a=e("./cards");const s=n.entityDescriptor.freeze({deck:a.cards,health:2,maxHealth:2,age:2})},{"model/domain":"hG1oc","./cards":"kT937","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],kT937:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"cardFrontRatBite",(()=>d)),o.export(t,"cardFrontRatScreech",(()=>l)),o.export(t,"cardFrontRatCower",(()=>p)),o.export(t,"cards",(()=>u));var n=e("data/effects"),a=e("model/domain");const s={name:"cornered",description:void 0,type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.Crosshatched,foreground:a.CardForegroundType.Rat,symbol:void 0,cost:[]},i={name:"rodent cunning",description:"You predict where the rat is going and intercept.",type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.Crosshatched,foreground:a.CardForegroundType.Rat,symbol:void 0,cost:[n.Mind]},c={name:"scurrying",description:"The rat is fast, but you are faster.",type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.Crosshatched,foreground:a.CardForegroundType.Rat,symbol:void 0,cost:[n.Finesse]},d={name:"bite",description:"The rat bares its teeth.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Rat,symbol:a.SymbolType.Finesse,cost:[n.DamageDown],benefit:[]},l={name:"screech",description:"It makes a terrifying noise.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Rat,symbol:a.SymbolType.Finesse,cost:[n.Force,n.Finesse,n.Mind],benefit:[]},p={name:"cower",description:"The rat backs away in fear.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Rat,symbol:a.SymbolType.Finesse,cost:[n.DamageUp],benefit:[]},u=[s,i,c].flatMap((e=>[d,l,p].map((r=>({faces:[e,r],recycleTarget:a.RecycleTarget.Draw,recyclePosition:void 0}))))).map((e=>a.cardDescriptor.freeze({...e,visibleFaceIndex:0})))},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"2Gfop":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"defaultTroll",(()=>s));var n=e("model/domain"),a=e("./cards");const s=n.entityDescriptor.freeze({deck:a.cards,health:4,maxHealth:4,age:34})},{"model/domain":"hG1oc","./cards":"9deJ1","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"9deJ1":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"cardFrontTrollSmash",(()=>d)),o.export(t,"cardFrontTrollOdour",(()=>l)),o.export(t,"cardFrontTrollRegeneration",(()=>p)),o.export(t,"cards",(()=>u));var n=e("data/effects"),a=e("model/domain");const s={name:"aggression",description:void 0,type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.Crosshatched,foreground:a.CardForegroundType.Troll,symbol:void 0,cost:[]},i={name:"trolling",description:"The troll unwittingly telegraphs its next move.",type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.Crosshatched,foreground:a.CardForegroundType.Troll,symbol:void 0,cost:[n.Mind]},c={name:"surprise",description:"The blow catches the troll off guard.",type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.Crosshatched,foreground:a.CardForegroundType.Troll,symbol:void 0,cost:[n.DamageUp]},d={name:"smash",description:"The troll slams you with a tree branch.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Troll,symbol:a.SymbolType.Force,cost:[n.DamageDown,n.DamageDown],benefit:[]},l={name:"trollish odour",description:"That thing reeks.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Troll,symbol:a.SymbolType.Force,cost:[n.Force,n.Force,n.Mind],benefit:[]},p={name:"regenerate",description:"The trolls wounds heal before your eyes!",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Troll,symbol:a.SymbolType.Force,cost:[n.DamageUp],benefit:[n.Healing]},u=[c,i,s].flatMap((e=>[d,l,p].map((r=>({faces:[e,r],recycleTarget:a.RecycleTarget.Draw,recyclePosition:void 0}))))).map((e=>a.cardDescriptor.freeze({...e,visibleFaceIndex:0})))},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],bOODI:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"cardFrontFountainWater",(()=>c)),o.export(t,"cardFrontFountainPoison",(()=>d)),o.export(t,"cardFrontFountainHealing",(()=>l)),o.export(t,"cardFrontFountainYouth",(()=>p)),o.export(t,"cards",(()=>u)),o.export(t,"cardFrontFountainIgnore",(()=>m)),o.export(t,"cardIgnore",(()=>g));var n=e("data/effects"),a=e("model/domain");const s={name:"drink",description:"You recall a fact about fountains.",type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.Crosshatched,foreground:a.CardForegroundType.Fountain,symbol:void 0,cost:[n.Mind]},i={name:"drink",description:"The magic echoes in the fountain.",type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.Crosshatched,foreground:a.CardForegroundType.Fountain,symbol:void 0,cost:[n.Magic]},c={name:"water",description:"There's nothing special about this fountain.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Fountain,symbol:void 0,cost:[],benefit:[]},d={name:"poison",description:"The murky water tastes incredibly foul.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Fountain,symbol:void 0,cost:[n.PoisonDown],benefit:[]},l={name:"healing",description:"You feel restored.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Fountain,symbol:void 0,cost:[n.Healing],benefit:[]},p={name:"youth",description:"The water slakes a thirst you, up until this moment, were totally unaware of .",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Fountain,symbol:void 0,cost:[n.Youth,n.Youth,n.Youth],benefit:[]},u=[s,i].flatMap((e=>[c,d,l,p].map((r=>({faces:[e,r],recycleTarget:a.RecycleTarget.Discard,recyclePosition:void 0}))))).map((e=>a.cardDescriptor.freeze({...e,visibleFaceIndex:0}))),f={name:"ignore",description:void 0,type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.Crosshatched,foreground:a.CardForegroundType.Fountain,symbol:void 0,cost:[]},m={name:"ignore",description:"Best left alone.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Fountain,symbol:void 0,cost:[],benefit:[]},g=a.cardDescriptor.freeze({faces:[f,m],recycleTarget:a.RecycleTarget.Discard,recyclePosition:void 0,visibleFaceIndex:0})},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],ecSzl:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"cardFrontMagicTreeGoldenApple",(()=>d)),o.export(t,"cardFrontMagicTreeGreenApple",(()=>l)),o.export(t,"cardFrontMagicTreeRedApple",(()=>p)),o.export(t,"cards",(()=>u));var n=e("data/effects"),a=e("model/domain");const s={name:"pick fruit",description:"You climb the tree and dislodge a juicy piece of fruit.",type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.Crosshatched,foreground:a.CardForegroundType.MagicTree,symbol:void 0,cost:[n.Finesse]},i={name:"shake tree",description:"You shake the tree until something falls down.",type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.Crosshatched,foreground:a.CardForegroundType.MagicTree,symbol:void 0,cost:[n.Force]},c={name:"gather fruit",description:"You espy unspoiled fruit resting upon the ground.",type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.Crosshatched,foreground:a.CardForegroundType.MagicTree,symbol:void 0,cost:[]},d={name:"golden apple",description:"The flavour is strange, yet somehow familiar. You feel the burden of the years lift.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.MagicTree,symbol:void 0,cost:[n.Youth,n.Youth,n.Youth],benefit:[]},l={name:"granny smith apple",description:"Surprisingly disappointing.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.MagicTree,symbol:void 0,cost:[n.Healing],benefit:[]},p={name:"red delicious apple",description:"You feel satisfied.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Fountain,symbol:void 0,cost:[n.GainMaxHealth,n.Healing],benefit:[]},u=[i,c,s].flatMap((e=>[d,l,p].map((r=>({faces:[e,r],recycleTarget:a.RecycleTarget.Discard,recyclePosition:void 0}))))).map((e=>a.cardDescriptor.freeze({...e,visibleFaceIndex:0})))},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],e4Drc:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"defaultSnail",(()=>s));var n=e("model/domain"),a=e("./cards");const s=n.entityDescriptor.freeze({deck:a.cards,health:1,maxHealth:1,age:1})},{"model/domain":"hG1oc","./cards":"k5LZg","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],k5LZg:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"cardFrontSnailBite",(()=>c)),o.export(t,"cardFrontSnailHide",(()=>d)),o.export(t,"cards",(()=>l));var n=e("data/effects"),a=e("model/domain");const s={name:"extend",description:void 0,type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.Crosshatched,foreground:a.CardForegroundType.Snail,symbol:void 0,cost:[]},i={name:"retract",description:"You knock the snail over.",type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.Crosshatched,foreground:a.CardForegroundType.Snail,symbol:void 0,cost:[n.DamageUp]},c={name:"bite",description:"The snail nips at you.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Snail,symbol:a.SymbolType.Force,cost:[n.DamageDown],benefit:[]},d={name:"hide",description:"The snail retreats within its shell.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Rat,symbol:a.SymbolType.Force,cost:[n.DamageUp,n.DamageUp],benefit:[]},l=[s,i].flatMap((e=>[c,d].map((r=>({faces:[e,r],recycleTarget:a.RecycleTarget.Draw,recyclePosition:void 0}))))).map((e=>a.cardDescriptor.freeze({...e,visibleFaceIndex:0})))},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],e86jK:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"cardFrontMushroomBenign",(()=>d)),o.export(t,"cardFrontMushroomForce",(()=>l)),o.export(t,"cardFrontMushroomPoison",(()=>p)),o.export(t,"cardFrontMushroomFinesse",(()=>u)),o.export(t,"cardFrontMushroomMind",(()=>f)),o.export(t,"cardFrontMushroomMagic",(()=>m)),o.export(t,"cardFrontMushroomYouth",(()=>g)),o.export(t,"cardFrontMushroomMaturity",(()=>y)),o.export(t,"cardFrontMushroomHealing",(()=>h)),o.export(t,"cards",(()=>b)),o.export(t,"cardFrontMushroomIgnore",(()=>C)),o.export(t,"cardIgnore",(()=>_));var n=e("data/effects"),a=e("model/domain");const s={name:"blue mushroom",description:"You consider the mushroom.",type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.Crosshatched,foreground:a.CardForegroundType.Mushroom,symbol:void 0,cost:[n.Mind]},i={name:"red mushroom",description:"You gently inspect the mushroom.",type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.Crosshatched,foreground:a.CardForegroundType.Mushroom,symbol:void 0,cost:[n.Perception,n.Finesse]},c={name:"familiar mushroom",description:"You recognise one of the mushrooms.",type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.Crosshatched,foreground:a.CardForegroundType.Mushroom,symbol:void 0,cost:[]},d={name:"benign mushroom",description:"The mushroom has no effect.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Mushroom,symbol:void 0,cost:[],benefit:[]},l={name:"strength fungus",description:"You feel strong.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Mushroom,symbol:void 0,cost:[{symbol:a.SymbolType.GainCards,direction:a.EffectDirection.Omni,cards:[{faces:[{name:"fungal strength",description:"Your fungal strength bursts forth!",type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,foreground:a.CardForegroundType.Mushroom,symbol:a.SymbolType.Perception,cost:[n.Finesse]},{name:"fungal strength",description:"I like to think of myself as a fun guy.",type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Mushroom,symbol:a.SymbolType.Perception,cost:[],benefit:[n.Force,n.Force,n.Force]}],recycleTarget:a.RecycleTarget.Draw,recyclePosition:5}]}],benefit:[]},p={name:"poison mushroom",description:"You feel sick.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Mushroom,symbol:void 0,cost:[n.PoisonDown,{symbol:a.SymbolType.GainCards,direction:a.EffectDirection.Omni,cards:[{faces:[{name:"fungal immunity",description:void 0,type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,foreground:a.CardForegroundType.Mushroom,symbol:void 0,cost:[]},{name:"fungal immunity",description:".",type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Mushroom,symbol:void 0,cost:[],benefit:[n.PoisonDown]}],recycleTarget:a.RecycleTarget.Draw,recyclePosition:5}]}],benefit:[]},u={name:"finesse fungus",description:"You feel fast.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Mushroom,symbol:void 0,cost:[{symbol:a.SymbolType.GainCards,direction:a.EffectDirection.Omni,cards:[{faces:[{name:"fugue state",description:void 0,type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,foreground:a.CardForegroundType.Mushroom,symbol:void 0,cost:[]},{name:"fugue state",description:".",type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Mushroom,symbol:void 0,cost:[n.Force,n.Mind],benefit:[n.Finesse,n.Finesse]}],recycleTarget:a.RecycleTarget.Draw,recyclePosition:5}]}],benefit:[]},f={name:"special mushroom",description:"The mushroom opens your third eye.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Mushroom,symbol:void 0,cost:[{symbol:a.SymbolType.GainCards,direction:a.EffectDirection.Omni,cards:[{faces:[{name:"third eye",description:void 0,type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,foreground:a.CardForegroundType.Mushroom,symbol:a.SymbolType.Perception,cost:[]},{name:"third eye",description:"You can see everything.",type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Mushroom,symbol:a.SymbolType.Perception,cost:[],benefit:[n.Perception]}],recycleTarget:a.RecycleTarget.Draw,recyclePosition:1}]}],benefit:[]},m={name:"magic mushroom",description:"You feel absolutely magical.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Mushroom,symbol:void 0,cost:[{symbol:a.SymbolType.GainCards,direction:a.EffectDirection.Omni,cards:[{faces:[{name:"spore magic",description:void 0,type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,foreground:a.CardForegroundType.Mushroom,symbol:a.SymbolType.Magic,cost:[]},{name:"spore magic",description:"Magic ish magic yeh.",type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Mushroom,symbol:a.SymbolType.Magic,cost:[],benefit:[n.Magic]}],recycleTarget:a.RecycleTarget.Draw,recyclePosition:4}]}],benefit:[]},g={name:"youth mushroom",description:"You feel younger.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Mushroom,symbol:void 0,cost:[n.Youth,n.Youth],benefit:[]},y={name:"maturity mushroom",description:"You feel older.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Mushroom,symbol:void 0,cost:[n.Age,n.Age],benefit:[]},h={name:"health mushroom",description:"You feel alive.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Mushroom,symbol:void 0,cost:[n.GainMaxHealth],benefit:[]},b=[s,i,c].flatMap((e=>[d,u,l,p,m,f,g,y,h].map((r=>({faces:[e,r],recycleTarget:a.RecycleTarget.Discard,recyclePosition:void 0}))))).map((e=>a.cardDescriptor.freeze({...e,visibleFaceIndex:0}))),v={name:"ignore",description:void 0,type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.Crosshatched,foreground:a.CardForegroundType.Mushroom,symbol:void 0,cost:[]},C={name:"ignore",description:"Best left alone.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Mushroom,symbol:void 0,cost:[],benefit:[]},_=a.cardDescriptor.freeze({faces:[v,C],recycleTarget:a.RecycleTarget.Discard,recyclePosition:void 0,visibleFaceIndex:0})},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"5hers":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"cards",(()=>x)),o.export(t,"ignoreCards",(()=>F));var n=e("model/domain"),a=e("./dodge"),s=e("./finesse"),i=e("./force"),c=e("./headbutt"),d=e("./kick"),l=e("./mind"),p=e("./shield"),u=e("./torch"),f=e("data/effects"),m=e("./cloak"),g=e("./dagger"),y=e("./magic"),h=e("./magic/barrier"),b=e("./magic/grace"),v=e("./magic/strength"),C=e("./magic/missile"),_=e("./magic/poison"),T=e("./magic/divination"),k=e("./magic/fireball");const x=[a.cardDodge,s.cardFinesseLazy,i.cardForceLazy,i.cardForceEager,c.cardHeadbutt,d.cardKick,l.cardMindEager,p.cardBlock,p.cardDeflect,u.cardTorch,s.cardFinesse1,m.cardMisdirection,s.cardFinesseFeat,i.cardForceFeat,g.cardPoisonBlade,g.cardCriticalStrike,y.cardMagicFeat,y.cardMagicIncantation5,h.cardMagicBarrier,b.cardMagicGrace,v.cardMagicStrength,T.cardMagicSight,C.cardMagicMissile,_.cardMagicPoison,k.cardFireball],w={name:"ignore",description:void 0,type:n.CardFaceType.ChoiceBack,background:n.CardBackgroundType.Crosshatched,foreground:void 0,symbol:void 0,cost:[]},F=[{name:"ignore",description:"Junk.",type:n.CardFaceType.Choice,choice:{type:n.ChoiceType.NextTurn},background:n.CardBackgroundType.Clear,foreground:void 0,symbol:void 0,cost:[],benefit:[]},{name:"potion of youth",description:"You feel invigorated.",type:n.CardFaceType.Choice,choice:{type:n.ChoiceType.NextTurn},background:n.CardBackgroundType.Clear,foreground:void 0,symbol:void 0,cost:[f.Youth],benefit:[]},{name:"potion of health",description:"You feel better.",type:n.CardFaceType.Choice,choice:{type:n.ChoiceType.NextTurn},background:n.CardBackgroundType.Clear,foreground:void 0,symbol:void 0,cost:[f.Healing],benefit:[]}].map((e=>n.cardDescriptor.freeze({faces:[w,e],recycleTarget:n.RecycleTarget.Discard,recyclePosition:void 0,visibleFaceIndex:0})))},{"model/domain":"hG1oc","./dodge":"8tjcS","./finesse":"l8TNj","./force":"dV5CQ","./headbutt":"b3Xl6","./kick":"93BsG","./mind":"kS38s","./shield":"bqiUz","./torch":"9RqWs","data/effects":"7stQX","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","./cloak":"ldHxe","./dagger":"qbBOi","./magic":"7Mvju","./magic/barrier":"kryNn","./magic/grace":"doNRd","./magic/strength":"dPTWY","./magic/missile":"7943L","./magic/poison":"kpj6S","./magic/divination":"f2XGZ","./magic/fireball":"im71a"}],"8tjcS":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"cardDefinitionDodge",(()=>c)),o.export(t,"cardDodge",(()=>d));var n=e("data/effects"),a=e("model/domain");const s={name:"dodge",description:"You crouch in readiness.",type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,foreground:void 0,symbol:void 0,cost:[n.Finesse]},i={name:"dodge",description:"Cat like, you jump out of the way.",type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Finesse,cost:[],benefit:[n.DamageDown]},c={recycleTarget:a.RecycleTarget.Draw,recyclePosition:5,faces:[s,i]},d=a.cardDescriptor.freeze({...c,visibleFaceIndex:0})},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],l8TNj:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"cardDefinitionFinesseLazy",(()=>c)),o.export(t,"cardFinesseLazy",(()=>d)),o.export(t,"cardDefinitionFinesseFastHands1",(()=>u)),o.export(t,"cardFinesse1",(()=>f)),o.export(t,"cardDefinitionFinesseFastHands3",(()=>m)),o.export(t,"cardFinesse3",(()=>g)),o.export(t,"cardDefinitionFinesseFeat",(()=>b)),o.export(t,"cardFinesseFeat",(()=>v)),o.export(t,"cardDefinitionFinesseMartialTraining",(()=>T));var n=e("data/effects"),a=e("model/domain");const s={name:"agility",type:a.CardFaceType.ResourceBack,description:void 0,background:a.CardBackgroundType.Crosshatched,foreground:void 0,symbol:void 0,cost:[]},i={name:"agility",description:"You move with agility.",type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Finesse,cost:[],benefit:[n.Finesse]},c={recycleTarget:a.RecycleTarget.Draw,recyclePosition:5,faces:[s,i]},d=a.cardDescriptor.freeze({...c,visibleFaceIndex:0}),l={name:"fast hands",type:a.CardFaceType.ResourceBack,description:void 0,background:a.CardBackgroundType.Crosshatched,foreground:void 0,symbol:void 0,cost:[]},p={name:"fast hands",description:"Your hands are a blur.",type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Finesse,cost:[n.Draw],benefit:[n.Finesse]},u={recycleTarget:a.RecycleTarget.Draw,recyclePosition:1,faces:[l,p]},f=a.cardDescriptor.freeze({...u,visibleFaceIndex:0}),m={recycleTarget:a.RecycleTarget.Draw,recyclePosition:3,faces:[l,p]},g=a.cardDescriptor.freeze({...u,visibleFaceIndex:0}),y={name:"feat of agility",type:a.CardFaceType.ResourceBack,description:void 0,background:a.CardBackgroundType.Crosshatched,foreground:void 0,symbol:void 0,cost:[n.Finesse,n.Finesse]},h={name:"feat of agility",description:void 0,type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Finesse,cost:[],benefit:[n.Finesse,n.Finesse]},b={recycleTarget:a.RecycleTarget.Draw,recyclePosition:3,faces:[y,h]},v=a.cardDescriptor.freeze({...u,visibleFaceIndex:0}),C={name:"martial training",type:a.CardFaceType.ResourceBack,description:void 0,background:a.CardBackgroundType.Crosshatched,foreground:void 0,symbol:void 0,cost:[n.Force]},_={name:"martial training",description:"You remember your training.",type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Finesse,cost:[],benefit:[n.Finesse,n.Force]},T={recycleTarget:a.RecycleTarget.Draw,recyclePosition:3,faces:[C,_]}},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],dV5CQ:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"cardDefinitionForce1",(()=>c)),o.export(t,"cardDefinitionForce3",(()=>d)),o.export(t,"cardDefinitionForce5",(()=>l)),o.export(t,"cardDefinitionForce7",(()=>p)),o.export(t,"cardForceEager",(()=>u)),o.export(t,"cardDefinitionForceFeat",(()=>g)),o.export(t,"cardForceFeat",(()=>y)),o.export(t,"cardDefinitionForceRandom",(()=>v)),o.export(t,"cardForceRandom",(()=>C)),o.export(t,"cardDefinitionForceLazy",(()=>k)),o.export(t,"cardForceLazy",(()=>x)),o.export(t,"cardDefinitionForceLazy2x",(()=>D)),o.export(t,"cardForceLazy2x",(()=>j));var n=e("data/effects"),a=e("model/domain");const s={name:"warriors strength",description:void 0,type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,foreground:void 0,symbol:void 0,cost:[]},i={name:"warriors strength",description:"Your martial training means strength is always available.",type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Force,cost:[],benefit:[n.Force]},c={recycleTarget:a.RecycleTarget.Draw,recyclePosition:1,faces:[s,i]},d={recycleTarget:a.RecycleTarget.Draw,recyclePosition:3,faces:[s,i]},l={recycleTarget:a.RecycleTarget.Draw,recyclePosition:5,faces:[s,i]},p={recycleTarget:a.RecycleTarget.Draw,recyclePosition:7,faces:[s,i]},u=a.cardDescriptor.freeze({...c,visibleFaceIndex:0}),f={name:"innate strength",description:void 0,type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,foreground:void 0,symbol:void 0,cost:[n.Force,n.Force]},m={name:"innate strength",description:void 0,type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Force,cost:[],benefit:[n.Force,n.Force]},g={recycleTarget:a.RecycleTarget.Draw,recyclePosition:7,faces:[f,m]},y=a.cardDescriptor.freeze({...g,visibleFaceIndex:0}),h={name:"innate strength",description:void 0,type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,foreground:void 0,symbol:void 0,cost:[]},b={name:"innate strength",description:"You draw on your natural strength.",type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Force,cost:[],benefit:[n.Force]},v={recycleTarget:a.RecycleTarget.Draw,recyclePosition:5,faces:[h,b]},C=a.cardDescriptor.freeze({...v,visibleFaceIndex:0}),_={name:"lethargic strength",description:void 0,type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,foreground:void 0,symbol:void 0,cost:[]},T={name:"lethargic strength",description:"Yawn! If I must.",type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Force,cost:[],benefit:[n.Force]},k={recycleTarget:a.RecycleTarget.Draw,recyclePosition:9,faces:[_,T]},x=a.cardDescriptor.freeze({...k,visibleFaceIndex:0}),w={name:"dig deep",description:void 0,type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,foreground:void 0,symbol:void 0,cost:[]},F={name:"dig deep",description:"You give it everything you've got.",type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Force,cost:[],benefit:[n.Force,n.Force]},D={recycleTarget:a.RecycleTarget.Draw,recyclePosition:7,faces:[w,F]},j=a.cardDescriptor.freeze({...D,visibleFaceIndex:0})},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],b3Xl6:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"cardDefinitionHeadbutt",(()=>c)),o.export(t,"cardHeadbutt",(()=>d));var n=e("data/effects"),a=e("model/domain");const s={name:"headbutt",description:"The head is really a fifth limb if you think about it.",type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,symbol:void 0,foreground:void 0,cost:[n.Mind]},i={name:"headbutt",description:"With a deranged grin, you smash your forehead into the opponent.",type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Force,cost:[n.Mind,n.Mind],benefit:[n.DamageUp]},c={recycleTarget:a.RecycleTarget.Draw,recyclePosition:9,faces:[s,i]},d=a.cardDescriptor.freeze({...c,visibleFaceIndex:0})},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"93BsG":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"cardDefinitionKick",(()=>c)),o.export(t,"cardKick",(()=>d));var n=e("data/effects"),a=e("model/domain");const s={name:"kick",description:"You prepare to strike.",type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,symbol:void 0,foreground:void 0,cost:[n.Force]},i={name:"kick",description:"You deliver a swift kick.",type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Force,cost:[],benefit:[n.DamageUp]},c={recycleTarget:a.RecycleTarget.Draw,recyclePosition:4,faces:[s,i]},d=a.cardDescriptor.freeze({...c,visibleFaceIndex:0})},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],kS38s:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"cardDefinitionMindLazy",(()=>c)),o.export(t,"cardMindLazy",(()=>d)),o.export(t,"cardDefinitionMindEager",(()=>u)),o.export(t,"cardMindEager",(()=>f)),o.export(t,"cardDefinitionMindDeepThinking",(()=>y)),o.export(t,"cardMindDeepThinking",(()=>h)),o.export(t,"cardDefinitionMindCunning",(()=>C)),o.export(t,"cardMindCunning",(()=>_));var n=e("data/effects"),a=e("model/domain");const s={name:"innate intelligence",description:void 0,type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,symbol:void 0,foreground:void 0,cost:[]},i={name:"innate intelligence",description:"You draw on everything you've learned.",type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Mind,cost:[],benefit:[n.Mind,n.Perception]},c={recycleTarget:a.RecycleTarget.Draw,recyclePosition:9,faces:[s,i]},d=a.cardDescriptor.freeze({...c,visibleFaceIndex:0}),l={name:"quick thinking",description:void 0,type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,symbol:void 0,foreground:void 0,cost:[]},p={name:"quick thinking",description:"Suddenly the solution is clear.",type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Mind,cost:[],benefit:[n.Mind]},u={recycleTarget:a.RecycleTarget.Draw,recyclePosition:1,faces:[l,p]},f=a.cardDescriptor.freeze({...c,visibleFaceIndex:0}),m={name:"deep thinking",description:void 0,type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,symbol:void 0,foreground:void 0,cost:[]},g={name:"deep thinking",description:"You consider the problem at hand.",type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Mind,cost:[],benefit:[n.Mind,n.Mind]},y={recycleTarget:a.RecycleTarget.Draw,recyclePosition:1,faces:[m,g]},h=a.cardDescriptor.freeze({...y,visibleFaceIndex:0}),b={name:"cunning",description:void 0,type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,symbol:void 0,foreground:void 0,cost:[]},v={name:"cunning",description:"Like a fox.",type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Mind,cost:[n.Magic],benefit:[n.Mind,n.Perception]},C={recycleTarget:a.RecycleTarget.Draw,recyclePosition:4,faces:[b,v]},_=a.cardDescriptor.freeze({...C,visibleFaceIndex:0})},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],bqiUz:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"cardDefinitionBlock",(()=>c)),o.export(t,"cardBlock",(()=>d)),o.export(t,"cardDefinitionDeflect",(()=>u)),o.export(t,"cardDeflect",(()=>f));var n=e("data/effects"),a=e("model/domain");const s={name:"block",description:"You grip your shield tightly.",type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,foreground:void 0,symbol:void 0,cost:[n.Force,n.Force]},i={name:"block",description:"You raise your shield.",type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Force,cost:[],benefit:[n.DamageDown,n.DamageDown,n.Force]},c={recycleTarget:a.RecycleTarget.Draw,recyclePosition:5,faces:[s,i]},d=a.cardDescriptor.freeze({...c,visibleFaceIndex:0}),l={name:"deflect",description:"You adjust your shield, just so.",type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,foreground:void 0,symbol:void 0,cost:[n.Force]},p={name:"deflect",description:"The blow glances off.",type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Force,cost:[],benefit:[n.DamageDown]},u={recycleTarget:a.RecycleTarget.Draw,recyclePosition:3,faces:[l,p]},f=a.cardDescriptor.freeze({...u,visibleFaceIndex:0})},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"9RqWs":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"cardDefinitionTorch",(()=>c)),o.export(t,"cardTorch",(()=>d));var n=e("data/effects"),a=e("model/domain");const s={name:"torch",description:"The torch ignites!",type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,symbol:void 0,foreground:void 0,cost:[n.Force]},i={name:"torch",description:"You beat back beasts and darkness alike.",type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Force,cost:[],benefit:[n.DamageUp,n.Perception]},c={recycleTarget:a.RecycleTarget.Draw,recyclePosition:5,faces:[s,i]},d=a.cardDescriptor.freeze({...c,visibleFaceIndex:0})},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],ldHxe:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"cardDefinitionMisdirection",(()=>c)),o.export(t,"cardMisdirection",(()=>d)),o.export(t,"cardDefinitionQuickDodge",(()=>u)),o.export(t,"cardDodge",(()=>f));var n=e("data/effects"),a=e("model/domain");const s={name:"misdirection",description:"You hold your clock in front of you.",type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,foreground:void 0,symbol:void 0,cost:[n.Finesse,n.Mind]},i={name:"misdirection",description:"The blow finds empty air.",type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Finesse,cost:[],benefit:[n.DamageDown,n.DamageDown]},c={recycleTarget:a.RecycleTarget.Draw,recyclePosition:6,faces:[s,i]},d=a.cardDescriptor.freeze({...c,visibleFaceIndex:0}),l={name:"quick dodge",description:void 0,type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,foreground:void 0,symbol:void 0,cost:[n.Finesse]},p={name:"quick dodge",description:void 0,type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Finesse,cost:[],benefit:[n.DamageDown]},u={recycleTarget:a.RecycleTarget.Draw,recyclePosition:1,faces:[l,p]},f=a.cardDescriptor.freeze({...u,visibleFaceIndex:0})},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],qbBOi:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"cardDefinitionStab",(()=>c)),o.export(t,"cardStab",(()=>d)),o.export(t,"cardDefinitionTwinBlades",(()=>u)),o.export(t,"cardTwinBlades",(()=>f)),o.export(t,"cardDefinitionPoisonBlade",(()=>y)),o.export(t,"cardPoisonBlade",(()=>h)),o.export(t,"cardDefinitionCriticalStrike",(()=>C)),o.export(t,"cardCriticalStrike",(()=>_));var n=e("data/effects"),a=e("model/domain");const s={name:"stab",description:"You ready your dagger.",type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,foreground:void 0,symbol:void 0,cost:[n.Finesse]},i={name:"stab",description:"The dagger flickers out, lightning fast.",type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Finesse,cost:[],benefit:[n.DamageUp]},c={recycleTarget:a.RecycleTarget.Draw,recyclePosition:1,faces:[s,i]},d=a.cardDescriptor.freeze({...c,visibleFaceIndex:0}),l={name:"twin blades",description:"Two daggers are better than one.",type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,foreground:void 0,symbol:void 0,cost:[n.Finesse,n.Finesse]},p={name:"twin blades",description:"Slash! Slash!",type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Finesse,cost:[],benefit:[n.DamageUp,n.DamageUp]},u={recycleTarget:a.RecycleTarget.Draw,recyclePosition:5,faces:[l,p]},f=a.cardDescriptor.freeze({...u,visibleFaceIndex:0}),m={name:"poison blade",description:"The poison sticks to the blade.",type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,foreground:void 0,symbol:void 0,cost:[n.Finesse,n.PoisonDown]},g={name:"poison blade",description:"You drives the poisoned dagger in.",type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Finesse,cost:[],benefit:[n.DamageUp,n.PoisonUp]},y={recycleTarget:a.RecycleTarget.Draw,recyclePosition:4,faces:[m,g]},h=a.cardDescriptor.freeze({...y,visibleFaceIndex:0}),b={name:"critical strike",description:"You eye up your opponents weaknesses.",type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,foreground:void 0,symbol:void 0,cost:[n.Finesse,n.Finesse,n.Mind]},v={name:"critical strike",description:"It's a crit!",type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Finesse,cost:[],benefit:[n.DamageUp,n.DamageUp,n.DamageUp]},C={recycleTarget:a.RecycleTarget.Draw,recyclePosition:9,faces:[b,v]},_=a.cardDescriptor.freeze({...C,visibleFaceIndex:0})},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"7Mvju":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"cardDefinitionMagicFeat",(()=>c)),o.export(t,"cardMagicFeat",(()=>d)),o.export(t,"cardDefinitionMagicIncantation1",(()=>u)),o.export(t,"cardDefinitionMagicIncantation5",(()=>f)),o.export(t,"cardMagicIncantation5",(()=>m));var n=e("data/effects"),a=e("model/domain");const s={name:"magic feat",description:void 0,type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,symbol:void 0,foreground:void 0,cost:[n.Magic,n.Magic]},i={name:"magic feat",description:void 0,type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Magic,cost:[],benefit:[n.Magic,n.Magic]},c={recycleTarget:a.RecycleTarget.Draw,recyclePosition:9,faces:[s,i]},d=a.cardDescriptor.freeze({...c,visibleFaceIndex:0}),l={name:"incantation",description:"You begin chanting.",type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,symbol:void 0,foreground:void 0,cost:[n.Mind,n.Mind]},p={name:"incantation",description:void 0,type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Magic,cost:[],benefit:[n.Magic]},u={recycleTarget:a.RecycleTarget.Draw,recyclePosition:1,faces:[l,p]},f={recycleTarget:a.RecycleTarget.Draw,recyclePosition:5,faces:[l,p]},m=a.cardDescriptor.freeze({...f,visibleFaceIndex:0})},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],kryNn:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"cardDefinitionMagicBarrier",(()=>c)),o.export(t,"cardMagicBarrier",(()=>d));var n=e("data/effects"),a=e("model/domain");const s={name:"magic barrier",description:"A translucent bubble surrounds you.",type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,foreground:void 0,symbol:void 0,cost:[n.Magic]},i={name:"magic barrier",description:"The blow bounces off harmlessly.",type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Magic,cost:[],benefit:[n.DamageDown,n.DamageDown]},c={recycleTarget:a.RecycleTarget.Draw,recyclePosition:3,faces:[s,i]},d=a.cardDescriptor.freeze({...c,visibleFaceIndex:0})},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],doNRd:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"cardDefinitionMagicGrace",(()=>c)),o.export(t,"cardMagicGrace",(()=>d));var n=e("data/effects"),a=e("model/domain");const s={name:"cats grace",description:"You feel agile!",type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,foreground:void 0,symbol:void 0,cost:[n.Magic]},i={name:"cats grace",description:"The agility fades.",type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Magic,cost:[],benefit:[n.Finesse,n.Finesse]},c={recycleTarget:a.RecycleTarget.Draw,recyclePosition:6,faces:[s,i]},d=a.cardDescriptor.freeze({...c,visibleFaceIndex:0})},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],dPTWY:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"cardDefinitionMagicStrength",(()=>c)),o.export(t,"cardMagicStrength",(()=>d));var n=e("data/effects"),a=e("model/domain");const s={name:"bulls strength",description:"You feel strong!",type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,foreground:void 0,symbol:void 0,cost:[n.Magic]},i={name:"bulls strength",description:"The strength fades.",type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Magic,cost:[],benefit:[n.Force,n.Force]},c={recycleTarget:a.RecycleTarget.Draw,recyclePosition:6,faces:[s,i]},d=a.cardDescriptor.freeze({...c,visibleFaceIndex:0})},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"7943L":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"cardDefinitionMagicMissile",(()=>c)),o.export(t,"cardMagicMissile",(()=>d));var n=e("data/effects"),a=e("model/domain");const s={name:"magic missile",description:"You raise your staff.",type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,foreground:void 0,symbol:void 0,cost:[n.Magic]},i={name:"magic missile",description:"Brightly coloured sparks shoot from your fingers.",type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Magic,cost:[],benefit:[n.DamageUp,n.Magic]},c={recycleTarget:a.RecycleTarget.Draw,recyclePosition:4,faces:[s,i]},d=a.cardDescriptor.freeze({...c,visibleFaceIndex:0})},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],kpj6S:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"cardDefinitionMagicPoison",(()=>c)),o.export(t,"cardMagicPoison",(()=>d));var n=e("data/effects"),a=e("model/domain");const s={name:"poison squirt",description:"A viscous liquid wells in your mouth.",type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,foreground:void 0,symbol:void 0,cost:[n.Magic]},i={name:"poison squirt",description:"You spit!",type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Magic,cost:[],benefit:[n.PoisonUp]},c={recycleTarget:a.RecycleTarget.Draw,recyclePosition:7,faces:[s,i]},d=a.cardDescriptor.freeze({...c,visibleFaceIndex:0})},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],f2XGZ:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"cardDefinitionMagicSight",(()=>c)),o.export(t,"cardMagicSight",(()=>d));var n=e("data/effects"),a=e("model/domain");const s={name:"divination",description:"You can see through walls!",type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,foreground:void 0,symbol:void 0,cost:[n.Magic]},i={name:"divination",description:void 0,type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Magic,cost:[],benefit:[n.Mind,n.Perception]},c={recycleTarget:a.RecycleTarget.Draw,recyclePosition:8,faces:[s,i]},d=a.cardDescriptor.freeze({...c,visibleFaceIndex:0})},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],im71a:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"cardDefinitionFireball",(()=>c)),o.export(t,"cardFireball",(()=>d));var n=e("data/effects"),a=e("model/domain");const s={name:"fireball",description:"You suddenly feel hot.",type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,foreground:void 0,symbol:void 0,cost:[n.Magic,n.Magic]},i={name:"fireball",description:"Fire! Ball!!!",type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Magic,cost:[],benefit:[n.DamageUp,n.DamageUp,n.DamageUp,n.Perception]},c={recycleTarget:a.RecycleTarget.Draw,recyclePosition:4,faces:[s,i]},d=a.cardDescriptor.freeze({...c,visibleFaceIndex:0})},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"41pZX":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"defaultRooster",(()=>s));var n=e("model/domain"),a=e("../rooster/cards");const s=n.entityDescriptor.freeze({deck:a.cards,health:2,maxHealth:2,age:5})},{"model/domain":"hG1oc","../rooster/cards":"2QcmV","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"2QcmV":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"cardFrontRoosterClaw",(()=>c)),o.export(t,"cardFrontRoosterCrow",(()=>d)),o.export(t,"cardFrontRoosterEvade",(()=>l)),o.export(t,"cards",(()=>p));var n=e("data/effects"),a=e("model/domain");const s={name:"territorial",description:"The rooster makes angry clucking noises.",type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.Crosshatched,foreground:a.CardForegroundType.Rooster,symbol:void 0,cost:[]},i={name:"intimidation",description:"You see through the birds bluster.",type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.Crosshatched,foreground:a.CardForegroundType.Rooster,symbol:void 0,cost:[n.Mind]},c={name:"claw",description:"The rooster claws at your eyes.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Rooster,symbol:a.SymbolType.Finesse,cost:[n.DamageDown,n.Finesse,n.Perception],benefit:[]},d={name:"crow",description:"The cock crows.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Rooster,symbol:a.SymbolType.Mind,cost:[n.Mind,n.Mind,n.Mind],benefit:[]},l={name:"evade",description:"In a cloud of feathers, the rooster forces you to give chase.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Rooster,symbol:a.SymbolType.Finesse,cost:[n.DamageUp,n.Force],benefit:[]},p=[s,s,i].flatMap((e=>[c,d,l].map((r=>({faces:[e,r],recycleTarget:a.RecycleTarget.Draw,recyclePosition:void 0}))))).map((e=>a.cardDescriptor.freeze({...e,visibleFaceIndex:0})))},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],hvpj3:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"defaultDummy",(()=>s));var n=e("model/domain"),a=e("./cards");const s=n.entityDescriptor.freeze({deck:a.cards,health:6,maxHealth:6,age:600})},{"model/domain":"hG1oc","./cards":"4QXc9","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"4QXc9":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"cardFrontDummyDefend",(()=>i)),o.export(t,"cardFrontDummyHardWork",(()=>c)),o.export(t,"cardFrontDummyGiveUp",(()=>d)),o.export(t,"cards",(()=>l));var n=e("data/effects"),a=e("model/domain");const s={name:"indifference",description:void 0,type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.Crosshatched,foreground:a.CardForegroundType.Dummy,symbol:void 0,cost:[]},i={name:"bark skin",description:void 0,type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Dummy,symbol:void 0,cost:[n.DamageUp],benefit:[]},c={name:"hard work",description:"",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Dummy,symbol:void 0,cost:[n.Force,n.Force,n.Force],benefit:[]},d={name:"move on",description:"",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextPage,encounter:void 0},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Dummy,symbol:void 0,cost:[],benefit:[]},l=[s].flatMap((e=>[i,c,d].map((r=>({faces:[e,r],recycleTarget:a.RecycleTarget.Draw,recyclePosition:void 0}))))).map((e=>a.cardDescriptor.freeze({...e,visibleFaceIndex:0})))},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"35iq2":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"chapter",(()=>s));var n=e("model/domain"),a=e("./cards");const s=n.chapterDescriptor.freeze({type:n.ChapterType.Forest,deck:[...a.cards],pagesRemaining:6,finalCard:a.finalCard})},{"model/domain":"hG1oc","./cards":"9yciV","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"9yciV":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"cards",(()=>y)),o.export(t,"finalCard",(()=>v));var n=e("data/effects"),a=e("data/events/shrine/cards"),s=e("model/domain");const i={name:"shadowed path",description:"The path reveals itself.",type:s.CardFaceType.ChoiceBack,background:s.CardBackgroundType.DarkenedForestPath,foreground:void 0,symbol:void 0,cost:[n.Perception]},c={name:"overgrown path",description:"You clear the branches.",type:s.CardFaceType.ChoiceBack,background:s.CardBackgroundType.DarkenedForestPath,foreground:void 0,symbol:void 0,cost:[n.Force]},d={name:"path",description:void 0,type:s.CardFaceType.ChoiceBack,background:s.CardBackgroundType.ForestPath,foreground:void 0,symbol:void 0,cost:[]},l={name:"small clearing",description:"This way looks safe.",type:s.CardFaceType.Choice,background:s.CardBackgroundType.ForestPath,foreground:void 0,symbol:void 0,choice:{type:s.ChoiceType.NextPage,encounter:void 0},cost:[],benefit:[]},p={name:"a big snail",description:"The snail inches toward you.",type:s.CardFaceType.Choice,background:s.CardBackgroundType.ForestPath,foreground:s.CardForegroundType.Snail,symbol:void 0,choice:{type:s.ChoiceType.NextPage,encounter:{type:s.EncounterType.Battle,monster:s.MonsterType.Snail}},cost:[],benefit:[]},u={name:"thicket",description:"The thorns entangle you.",type:s.CardFaceType.Choice,background:s.CardBackgroundType.ForestPath,foreground:s.CardForegroundType.Trap,symbol:void 0,choice:{type:s.ChoiceType.NextPage,encounter:void 0},cost:[n.Force,n.Finesse],benefit:[]},f={name:"magic tree",description:"There's something unusual about this tree.",type:s.CardFaceType.Choice,background:s.CardBackgroundType.ForestPath,foreground:s.CardForegroundType.MagicTree,symbol:void 0,choice:{type:s.ChoiceType.NextPage,encounter:{type:s.EncounterType.Event,event:s.EventType.MagicTree}},cost:[],benefit:[]},m={name:"mushroom",description:"A circle of mushrooms.",type:s.CardFaceType.Choice,background:s.CardBackgroundType.ForestPath,foreground:s.CardForegroundType.Mushroom,symbol:void 0,choice:{type:s.ChoiceType.NextPage,encounter:{type:s.EncounterType.Event,event:s.EventType.Mushroom}},cost:[],benefit:[]},g={name:"treasure",description:"The glint of gold.",type:s.CardFaceType.Choice,background:s.CardBackgroundType.Passageway,foreground:s.CardForegroundType.Treasure,symbol:void 0,choice:{type:s.ChoiceType.NextPage,encounter:{type:s.EncounterType.Event,event:s.EventType.Treasure}},cost:[],benefit:[]},y=[c,i,d].flatMap((e=>[l,p,u].map((r=>({recycleTarget:s.RecycleTarget.Draw,recyclePosition:void 0,faces:[e,r]}))))).concat([{faces:[c,f],recycleTarget:s.RecycleTarget.Discard,recyclePosition:void 0},{faces:[i,f],recycleTarget:s.RecycleTarget.Discard,recyclePosition:void 0},{faces:[c,m],recycleTarget:s.RecycleTarget.Discard,recyclePosition:void 0},{faces:[i,m],recycleTarget:s.RecycleTarget.Discard,recyclePosition:void 0},{faces:[d,m],recycleTarget:s.RecycleTarget.Discard,recyclePosition:void 0},{faces:[c,a.cardFrontShrine],recycleTarget:s.RecycleTarget.Discard,recyclePosition:void 0},{faces:[i,a.cardFrontShrine],recycleTarget:s.RecycleTarget.Discard,recyclePosition:void 0},{faces:[d,g],recycleTarget:s.RecycleTarget.Discard,recyclePosition:void 0},{faces:[d,a.cardFrontShrine],recycleTarget:s.RecycleTarget.Discard,recyclePosition:void 0}]).map((e=>({...e,visibleFaceIndex:0}))),h={name:"cobbled road",description:"You stumble out of the forest, blinking in the sunlight.",type:s.CardFaceType.ChoiceBack,background:s.CardBackgroundType.DarkenedForestPath,foreground:void 0,symbol:void 0,cost:[]},b={name:"troll",description:"A vulgar oaf blocks your way. He looks at you, licking his lips obscenely.",type:s.CardFaceType.Choice,background:s.CardBackgroundType.ForestPath,foreground:void 0,symbol:void 0,choice:{type:s.ChoiceType.NextChapter,encounter:{type:s.EncounterType.Battle,monster:s.MonsterType.Troll},targetChapterIndex:4},cost:[],benefit:[]},v=s.cardDescriptor.freeze({faces:[h,b],recycleTarget:s.RecycleTarget.Discard,recyclePosition:void 0,visibleFaceIndex:0})},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","data/events/shrine/cards":"9O0J4"}],ae7DI:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"chapter",(()=>s));var n=e("model/domain"),a=e("./cards");const s=n.chapterDescriptor.freeze({type:n.ChapterType.Prelude,deck:[...a.cards],pagesRemaining:1,finalCard:a.finalCard})},{"model/domain":"hG1oc","./cards":"bvkVN","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],bvkVN:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"cardFrontAttributesWarrior",(()=>T)),o.export(t,"cardFrontAttributesFinesse",(()=>k)),o.export(t,"cardFrontAttributesMind",(()=>x)),o.export(t,"cards",(()=>w)),o.export(t,"finalCard",(()=>j));var n=e("data/items/force"),a=e("data/items/shield"),s=e("data/items/sword"),i=e("data/items/torch"),c=e("model/domain"),d=e("data/items/finesse"),l=e("data/effects"),p=e("data/items/dodge"),u=e("data/items/dagger"),f=e("data/items/cloak"),m=e("data/items/mind"),g=e("data/items/poison"),y=e("data/items/magic"),h=e("data/items/magic/barrier"),b=e("data/items/magic/missile"),v=e("data/items/magic/divination"),C=e("data/items/magic/haste");const _={name:"character select",description:"Choose your equipment.",type:c.CardFaceType.ChoiceBack,background:c.CardBackgroundType.Crosshatched,foreground:c.CardForegroundType.Fountain,symbol:void 0,cost:[]},T={name:"sword and shield",description:"You choose the path of the warrior.",type:c.CardFaceType.Choice,choice:{type:c.ChoiceType.NextPage,encounter:void 0},background:c.CardBackgroundType.Clear,foreground:void 0,symbol:void 0,cost:[{symbol:c.SymbolType.GainCards,direction:c.EffectDirection.Down,cards:[d.cardDefinitionFinesseMartialTraining,d.cardDefinitionFinesseMartialTraining,n.cardDefinitionForce1,n.cardDefinitionForce3,n.cardDefinitionForce5,p.cardDefinitionDodge,n.cardDefinitionForceFeat,n.cardDefinitionForceLazy2x,s.cardDefinitionSlash,s.cardDefinitionRiposte,s.cardDefinitionQuckThrust,s.cardDefinitionClumsyThrust,i.cardDefinitionTorch,a.cardDefinitionBlock,a.cardDefinitionDeflect]},l.GainMaxHealth,l.Healing],benefit:[]},k={name:"cloak and dagger",description:"You choose the path of the thief.",type:c.CardFaceType.Choice,choice:{type:c.ChoiceType.NextPage,encounter:void 0},background:c.CardBackgroundType.Clear,foreground:void 0,symbol:void 0,cost:[{symbol:c.SymbolType.GainCards,direction:c.EffectDirection.Down,cards:[d.cardDefinitionFinesseFastHands1,d.cardDefinitionFinesseFastHands3,d.cardDefinitionFinesseFastHands3,d.cardDefinitionFinesseFeat,p.cardDefinitionDodge,p.cardDefinitionDodge,u.cardDefinitionStab,u.cardDefinitionStab,m.cardMindCunning,m.cardMindCunning,g.cardDefinitionPoisonResist,u.cardDefinitionTwinBlades,u.cardDefinitionPoisonBlade,u.cardDefinitionCriticalStrike,f.cardDefinitionMisdirection]}],benefit:[]},x={name:"book and staff",description:"You choose the path of the scholar.",type:c.CardFaceType.Choice,choice:{type:c.ChoiceType.NextPage,encounter:void 0},background:c.CardBackgroundType.Clear,foreground:void 0,symbol:void 0,cost:[{symbol:c.SymbolType.GainCards,direction:c.EffectDirection.Down,cards:[m.cardDefinitionMindEager,m.cardDefinitionMindEager,m.cardDefinitionMindDeepThinking,y.cardDefinitionMagicFeat,y.cardDefinitionMagicIncantation1,y.cardDefinitionMagicIncantation1,y.cardDefinitionMagicIncantation5,h.cardDefinitionMagicBarrier,b.cardDefinitionMagicMissile,b.cardDefinitionMagicMissile,v.cardDefinitionMagicSight,C.cardDefinitionMagicHaste]}],benefit:[]},w=[_].flatMap((e=>[T,k,x].map((r=>({faces:[e,r],recycleTarget:c.RecycleTarget.Discard,recyclePosition:void 0}))))).map((e=>c.cardDescriptor.freeze({...e,visibleFaceIndex:0}))),F={name:"training",description:"A battered tree stump sits in the yard. It bears the scars of many training battles.",type:c.CardFaceType.ChoiceBack,background:c.CardBackgroundType.Crosshatched,foreground:void 0,symbol:void 0,cost:[]},D={name:"stump",description:void 0,type:c.CardFaceType.Choice,background:c.CardBackgroundType.Clear,foreground:void 0,symbol:void 0,choice:{type:c.ChoiceType.NextChapter,encounter:{type:c.EncounterType.Battle,monster:c.MonsterType.Dummy},targetChapterIndex:2},cost:[],benefit:[]},j=c.cardDescriptor.freeze({faces:[F,D],recycleTarget:c.RecycleTarget.Discard,recyclePosition:void 0,visibleFaceIndex:0})},{"data/items/force":"dV5CQ","data/items/shield":"bqiUz","data/items/sword":"7XSG8","data/items/torch":"9RqWs","model/domain":"hG1oc","data/items/finesse":"l8TNj","data/effects":"7stQX","data/items/dodge":"8tjcS","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","data/items/dagger":"qbBOi","data/items/cloak":"ldHxe","data/items/mind":"kS38s","data/items/poison":"jMdRy","data/items/magic":"7Mvju","data/items/magic/barrier":"kryNn","data/items/magic/missile":"7943L","data/items/magic/divination":"f2XGZ","data/items/magic/haste":"eG506"}],"7XSG8":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"cardDefinitionSlash",(()=>c)),o.export(t,"cardSlash",(()=>d)),o.export(t,"cardDefinitionRiposte",(()=>u)),o.export(t,"cardRiposte",(()=>f)),o.export(t,"cardDefinitionQuckThrust",(()=>y)),o.export(t,"cardQuickThrust",(()=>h)),o.export(t,"cardDefinitionClumsyThrust",(()=>C)),o.export(t,"cardClumsyThrust",(()=>_));var n=e("data/effects"),a=e("model/domain");const s={name:"slash",description:"You become aware of the heft of your sword.",type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,foreground:void 0,symbol:void 0,cost:[n.Force,n.Force]},i={name:"slash",description:"You swing the sturdy blade.",type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Force,cost:[],benefit:[n.DamageUp,n.DamageUp]},c={recycleTarget:a.RecycleTarget.Draw,recyclePosition:5,faces:[s,i]},d=a.cardDescriptor.freeze({...c,visibleFaceIndex:0}),l={name:"riposte",description:"You prepare a counterattack.",type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,foreground:void 0,symbol:void 0,cost:[n.Force,n.Finesse]},p={name:"riposte",description:"Deflecting the blow, you return the favour.",type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Finesse,cost:[],benefit:[n.DamageDown,n.DamageUp]},u={recycleTarget:a.RecycleTarget.Draw,recyclePosition:5,faces:[l,p]},f=a.cardDescriptor.freeze({...c,visibleFaceIndex:0}),m={name:"quick thrust",description:"You prepare to strike.",type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,foreground:void 0,symbol:void 0,cost:[n.Finesse]},g={name:"quick thrust",description:"Viper-quick, you lash out with your blade.",type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Finesse,cost:[n.Finesse],benefit:[n.DamageUp]},y={recycleTarget:a.RecycleTarget.Draw,recyclePosition:4,faces:[m,g]},h=a.cardDescriptor.freeze({...y,visibleFaceIndex:0}),b={name:"inelegant thrust",description:"Shakily, you ready your blade.",type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,foreground:void 0,symbol:void 0,cost:[n.Force]},v={name:"inelegant thrust",description:"You desperately lunge with your sword.",type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Force,cost:[n.Finesse],benefit:[n.DamageUp]},C={recycleTarget:a.RecycleTarget.Draw,recyclePosition:2,faces:[b,v]},_=a.cardDescriptor.freeze({...C,visibleFaceIndex:0})},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],jMdRy:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"cardDefinitionPoisonResist",(()=>s));var n=e("data/effects"),a=e("model/domain");const s={faces:[{name:"iocane powder",description:void 0,type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,foreground:void 0,symbol:void 0,cost:[]},{name:"iocane powder",description:"I spent the last few years building up an immunity to iocane powder.",type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:void 0,cost:[],benefit:[n.PoisonDown,n.Perception]}],recycleTarget:a.RecycleTarget.Draw,recyclePosition:6}},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],eG506:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"cardDefinitionMagicHaste",(()=>c)),o.export(t,"cardMagicHaste",(()=>d));var n=e("data/effects"),a=e("model/domain");const s={name:"haste",description:"The world slows down.",type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,foreground:void 0,symbol:void 0,cost:[n.Magic]},i={name:"haste",description:void 0,type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Magic,cost:[n.Draw,n.Age,n.Draw],benefit:[n.DamageDown,n.DamageDown]},c={recycleTarget:a.RecycleTarget.Draw,recyclePosition:6,faces:[s,i]},d=a.cardDescriptor.freeze({...c,visibleFaceIndex:0})},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],aoHVx:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"chapter",(()=>s));var n=e("model/domain"),a=e("./cards");const s=n.chapterDescriptor.freeze({type:n.ChapterType.Shop,deck:[...a.cards],pagesRemaining:2,finalCard:a.finalCard})},{"model/domain":"hG1oc","./cards":"hi5c6","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],hi5c6:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"treasureCard",(()=>i)),o.export(t,"cards",(()=>c)),o.export(t,"finalCard",(()=>p));var n=e("model/domain");const a={name:"armoury",description:"You stop in to see the old visier before you head off.",type:n.CardFaceType.ChoiceBack,background:n.CardBackgroundType.Crosshatched,foreground:void 0,symbol:void 0,cost:[]},s={name:"armoury",description:"It's dangerous to go alone! Take this.",type:n.CardFaceType.Choice,background:n.CardBackgroundType.Passageway,foreground:void 0,symbol:void 0,choice:{type:n.ChoiceType.NextPage,encounter:{type:n.EncounterType.Event,event:n.EventType.Shop}},cost:[],benefit:[]},i=n.cardDescriptor.freeze({faces:[a,s],recycleTarget:n.RecycleTarget.Discard,recyclePosition:void 0,visibleFaceIndex:0}),c=[i],d={name:"threshold guardian",description:"The rooster stands in your way. You know this bird, it will not back down.",type:n.CardFaceType.ChoiceBack,background:n.CardBackgroundType.ForestPath,foreground:n.CardForegroundType.Rooster,symbol:void 0,cost:[]},l={name:"rooster",description:"The rooster eyes you with pure malice.",type:n.CardFaceType.Choice,background:n.CardBackgroundType.ForestPath,foreground:n.CardForegroundType.Rooster,symbol:void 0,choice:{type:n.ChoiceType.NextChapter,encounter:{type:n.EncounterType.Battle,monster:n.MonsterType.Rooster},targetChapterIndex:3},cost:[],benefit:[]},p=n.cardDescriptor.freeze({faces:[d,l],recycleTarget:n.RecycleTarget.Discard,recyclePosition:void 0,visibleFaceIndex:0})},{"model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],VbxeC:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"chapter",(()=>s));var n=e("model/domain"),a=e("./cards");const s=n.chapterDescriptor.freeze({type:n.ChapterType.Tutorial,deck:[...a.cards],pagesRemaining:a.cards.length,finalCard:a.finalCard})},{"model/domain":"hG1oc","./cards":"kPsTX","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],kPsTX:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"cardForceDefinitionTutorial1",(()=>p)),o.export(t,"cardForceTutorial1",(()=>u)),o.export(t,"cardForceDefinitionTutorial2",(()=>g)),o.export(t,"cardForceTutorial2",(()=>y)),o.export(t,"cardDefinitionPunchTutorial",(()=>v)),o.export(t,"cardPunchTutorial",(()=>C)),o.export(t,"cards",(()=>A)),o.export(t,"finalCard",(()=>P));var n=e("data/effects"),a=e("data/items/force"),s=e("data/items/kick"),i=e("data/items/shield"),c=e("model/domain");const d={name:"learners strength",description:"The yellow card is a resource card. You can use it to open the door by dragging the yellow card onto the barred door card. Notice that the symbol at the top of the card matches the symbol at the bottom of the door.",type:c.CardFaceType.ResourceBack,background:c.CardBackgroundType.Crosshatched,foreground:void 0,symbol:void 0,cost:[]},l={name:"learners strength",description:"That's the way.",type:c.CardFaceType.Resource,background:c.CardBackgroundType.Clear,foreground:void 0,symbol:c.SymbolType.Force,cost:[],benefit:[n.Force]},p={recycleTarget:c.RecycleTarget.Draw,recyclePosition:1,faces:[d,l]},u=c.cardDescriptor.freeze({...p,visibleFaceIndex:0}),f={name:"learners strength",description:"Drag both of the yellow cards on top of the dark blue card.",type:c.CardFaceType.ResourceBack,background:c.CardBackgroundType.Crosshatched,foreground:void 0,symbol:void 0,cost:[]},m={name:"learners strength",description:void 0,type:c.CardFaceType.Resource,background:c.CardBackgroundType.Clear,foreground:void 0,symbol:c.SymbolType.Force,cost:[],benefit:[n.Force]},g={recycleTarget:c.RecycleTarget.Draw,recyclePosition:1,faces:[f,m]},y=c.cardDescriptor.freeze({...g,visibleFaceIndex:0}),h={name:"learners punch",description:"This is an attack card, you can use it to hit things. Drag it onto the jammed door to open it.",type:c.CardFaceType.ResourceBack,background:c.CardBackgroundType.Crosshatched,foreground:void 0,symbol:void 0,cost:[n.Force,n.Force]},b={name:"learners punch",description:"That's the way. Now drag this card on top of the door.",type:c.CardFaceType.Resource,background:c.CardBackgroundType.Clear,foreground:void 0,symbol:c.SymbolType.Force,cost:[],benefit:[n.DamageUp]},v={recycleTarget:c.RecycleTarget.Draw,recyclePosition:1,faces:[h,b]},C=c.cardDescriptor.freeze({...v,visibleFaceIndex:0}),_={name:"door",description:"You can click on a door to go through it.",type:c.CardFaceType.ChoiceBack,background:c.CardBackgroundType.Door,foreground:void 0,symbol:void 0,cost:[]},T={name:"door",description:"Good work! I've given you a card as a reward.",type:c.CardFaceType.Choice,background:c.CardBackgroundType.Passageway,foreground:void 0,symbol:void 0,choice:{type:c.ChoiceType.NextPage,encounter:void 0},cost:[{symbol:c.SymbolType.GainCards,direction:c.EffectDirection.Down,cards:[u]}],benefit:[]},k={recycleTarget:c.RecycleTarget.Destroy,faces:[_,T],recyclePosition:1},x={name:"barred door",description:"Congratulations! You have pushed the door open. Now you know it is safe to go through this door by clicking on it.",type:c.CardFaceType.ChoiceBack,background:c.CardBackgroundType.Door,foreground:void 0,symbol:void 0,cost:[n.Force]},w={name:"open door",description:"Good work again! In the next room, you won't be able to open the door with a yellow card. Fortunately you can click on any door to go through it without knowing what's behind it.",type:c.CardFaceType.Choice,background:c.CardBackgroundType.Passageway,foreground:void 0,symbol:void 0,choice:{type:c.ChoiceType.NextPage,encounter:void 0},cost:[],benefit:[]},F={recycleTarget:c.RecycleTarget.Destroy,faces:[x,w],recyclePosition:2},D={name:"locked door",description:void 0,type:c.CardFaceType.ChoiceBack,background:c.CardBackgroundType.Door,foreground:void 0,symbol:void 0,cost:[n.Finesse]},j={name:"open door",description:"Nicely done. You can always go through a door, but you can't always see what's on the other side. I've given you some new cards as a reward.",type:c.CardFaceType.Choice,background:c.CardBackgroundType.Passageway,foreground:void 0,symbol:void 0,choice:{type:c.ChoiceType.NextPage,encounter:void 0},cost:[{symbol:c.SymbolType.GainCards,direction:c.EffectDirection.Down,cards:[y,C]}],benefit:[]},S={recycleTarget:c.RecycleTarget.Destroy,faces:[D,j],recyclePosition:3},M={name:"jammed door",description:"You force the door open with violence. Now click on the door.",type:c.CardFaceType.ChoiceBack,background:c.CardBackgroundType.Door,foreground:void 0,symbol:void 0,cost:[n.DamageUp]},B={name:"open door",description:"Congratulations on completing the tutorial. Here's some more cards and a snail to beat up.",type:c.CardFaceType.Choice,background:c.CardBackgroundType.Passageway,foreground:void 0,symbol:void 0,choice:{type:c.ChoiceType.NextPage,encounter:{type:c.EncounterType.Battle,monster:c.MonsterType.Snail}},cost:[{symbol:c.SymbolType.GainCards,direction:c.EffectDirection.Down,cards:[s.cardKick,a.cardForceEager,i.cardDeflect]}],benefit:[]},A=[k,F,S,{recycleTarget:c.RecycleTarget.Destroy,faces:[M,B],recyclePosition:4}].map((e=>c.cardDescriptor.freeze({...e,visibleFaceIndex:0}))),P=c.cardDescriptor.freeze({faces:[_,{name:"open door",description:"You escaped the tutorial!",type:c.CardFaceType.Choice,background:c.CardBackgroundType.Passageway,foreground:void 0,symbol:void 0,choice:{type:c.ChoiceType.ToC},cost:[],benefit:[]}],recycleTarget:c.RecycleTarget.Destroy,recyclePosition:1,visibleFaceIndex:0})},{"data/effects":"7stQX","data/items/force":"dV5CQ","data/items/kick":"93BsG","data/items/shield":"bqiUz","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"1ZOwu":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"createDeck",(()=>c));var n=e("solid-js/web"),a=e("solid-js"),s=e("./deck"),i=e("./deck_controller");function c(e,r){return{Component:function(){return(0,n.createComponent)(s.DeckComponent,{get children(){return(0,n.createComponent)(a.For,{get each(){return e()},children:e=>(0,n.createComponent)(r,{model:e})})}})},controller:new(0,i.DeckController)}}},{"solid-js/web":"33rlw","solid-js":"5rsr6","./deck":"8hCp5","./deck_controller":"kT6fC","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"8hCp5":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"DeckComponent",(()=>d));var n=e("solid-js/web"),a=e("solid-js"),s=e("./deck.module.scss"),i=o.interopDefault(s);const c=(0,n.template)("<div>");function d(e){return(()=>{const r=c();return(0,n.insert)(r,(0,n.createComponent)(a.For,{get each(){return(0,a.children)((()=>e.children)).toArray()},children:e=>(()=>{const r=c();return(0,n.insert)(r,e),(0,n.effect)((()=>(0,n.className)(r,i.default.card))),r})()})),(0,n.effect)((()=>(0,n.className)(r,i.default.deck))),r})()}},{"solid-js/web":"33rlw","solid-js":"5rsr6","./deck.module.scss":"9OUT6","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"9OUT6":[function(e,r,t){r.exports.deck="saLsXW_deck",r.exports.card="saLsXW_card"},{}],kT6fC:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"DeckController",(()=>n));class n{constructor(){}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],lXiSb:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"createStatusOverlay",(()=>l));var n=e("solid-js/web"),a=e("./status_overlay"),s=e("components/entity/health/entity_health"),i=e("components/narration/narration"),c=e("solid-js"),d=e("components/entity/age/entity_age");function l(){return function(e){const r=(0,n.createComponent)(s.EntityHealthComponent,{get health(){return e.playerCharacter.health},get maxHealth(){return e.playerCharacter.maxHealth}}),t=(0,n.createComponent)(d.EntityAgeComponent,{get age(){return e.playerCharacter.age}}),o=(0,c.createMemo)((()=>e.speaker.text?.split(" ")||[])),l=(0,c.createMemo)((()=>{const r=(e.speaker.text||"").substring(0,e.speaker.characterIndex);return Math.min(r.length,r.split(" ").length)})),p=(0,n.createComponent)(i.NarrationComponent,{get words(){return o()},get index(){return l()}});return(0,n.createComponent)(a.StatusOverlayComponent,{health:r,age:t,narration:p})}}},{"solid-js/web":"33rlw","./status_overlay":"i0scu","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","components/entity/health/entity_health":"k6NOx","components/narration/narration":"kSR6C","solid-js":"5rsr6","components/entity/age/entity_age":"2morj"}],i0scu:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"StatusOverlayComponent",(()=>c));var n=e("solid-js/web"),a=e("./status_overlay.module.scss"),s=o.interopDefault(a);const i=(0,n.template)("<div><div><div></div><div></div></div><div>");function c(e){return(()=>{const r=i(),t=r.firstChild,o=t.firstChild,a=o.nextSibling,c=t.nextSibling;return(0,n.insert)(o,(()=>e.health)),(0,n.insert)(a,(()=>e.age)),(0,n.insert)(c,(()=>e.narration)),(0,n.effect)((e=>{const i=s.default.overlay,d=s.default["status-bar"],l=s.default["health-container"],p=s.default["age-container"],u=s.default.narration;return i!==e._v$&&(0,n.className)(r,e._v$=i),d!==e._v$2&&(0,n.className)(t,e._v$2=d),l!==e._v$3&&(0,n.className)(o,e._v$3=l),p!==e._v$4&&(0,n.className)(a,e._v$4=p),u!==e._v$5&&(0,n.className)(c,e._v$5=u),e}),{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),r})()}},{"solid-js/web":"33rlw","./status_overlay.module.scss":"2hTNJ","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"2hTNJ":[function(e,r,t){r.exports.cardWidth="9",r.exports.cardHeight="12",r.exports.pageWidth="50",r.exports.pageHeight="70",r.exports.overlay="overlay_1607aa",r.exports["status-bar"]="status-bar_1607aa",r.exports["health-container"]="health-container_1607aa",r.exports["age-container"]="age-container_1607aa",r.exports.narration="narration_1607aa"},{}],k6NOx:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"EntityHealthComponent",(()=>d));var n=e("solid-js/web"),a=e("solid-js"),s=e("./entity_health.module.scss"),i=o.interopDefault(s);const c=(0,n.template)("<div>");function d(e){return(()=>{const r=c();return(0,n.insert)(r,(0,n.createComponent)(a.Index,{get each(){return new Array(e.maxHealth).fill(0)},children:(r,t)=>(()=>{const r=c();return(0,n.effect)((o=>(0,n.classList)(r,{[i.default.health]:!0,[i.default.small]:e.small,[i.default.filled]:t<e.health},o))),r})()})),(0,n.effect)((()=>(0,n.className)(r,i.default.container))),r})()}},{"solid-js/web":"33rlw","solid-js":"5rsr6","./entity_health.module.scss":"4pCL6","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"4pCL6":[function(e,r,t){r.exports.small="AkI8aW_small",r.exports.container="AkI8aW_container",r.exports.health="AkI8aW_health",r.exports.filled="AkI8aW_filled"},{}],kSR6C:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"NarrationComponent",(()=>d));var n=e("solid-js/web"),a=e("./narration.module.scss"),s=o.interopDefault(a),i=e("solid-js");const c=(0,n.template)("<span> ");function d(e){return(0,n.createComponent)(i.For,{get each(){return e.words},children:(r,t)=>(()=>{const o=c(),a=o.firstChild;return(0,n.insert)(o,r,a),(0,n.effect)((r=>(0,n.classList)(o,{[s.default.word]:!0,[s.default.visible]:t()<e.index},r))),o})()})}},{"solid-js/web":"33rlw","./narration.module.scss":"kuQ2e","solid-js":"5rsr6","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],kuQ2e:[function(e,r,t){r.exports.word="WAp4nG_word",r.exports.visible="WAp4nG_visible"},{}],"2morj":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"EntityAgeComponent",(()=>c));var n=e("solid-js/web"),a=e("./entity_age.module.scss"),s=o.interopDefault(a);const i=(0,n.template)("<div> years old");function c(e){return(()=>{const r=i(),t=r.firstChild;return(0,n.insert)(r,(()=>e.age),t),(0,n.effect)((()=>(0,n.className)(r,s.default.container))),r})()}},{"solid-js/web":"33rlw","./entity_age.module.scss":"6UYDR","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"6UYDR":[function(e,r,t){r.exports.container="QPFmeG_container"},{}],h8cfH:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"createEncounterBattleManger",(()=>c));var n=e("solid-js/web"),a=e("components/entity/create"),s=e("./encounter_battle"),i=e("components/component_manager");function c(){return new(0,i.ComponentManager)((function(e){const{controller:r,Component:t}=(0,a.createMonster)(e.monsterType);return{Component:function(){return(0,n.createComponent)(s.EncounterBattleComponent,{model:e,get children(){return(0,n.createComponent)(t,{})}})},controller:r}}))}},{"solid-js/web":"33rlw","components/entity/create":"6VgvT","./encounter_battle":"d02tT","components/component_manager":"e6kRp","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"6VgvT":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"createMonster",(()=>p));var n=e("base/unreachable_error"),a=e("model/domain"),s=e("./rat/create"),i=e("./troll/create"),c=e("./snail/create"),d=e("./rooster/create"),l=e("./dummy/create");function p(e){switch(e){case a.MonsterType.BigRat:return(0,s.createRatEntity)();case a.MonsterType.Troll:return(0,i.createTrollEntity)();case a.MonsterType.Snail:return(0,c.createSnailEntity)();case a.MonsterType.Rooster:return(0,d.createRoosterEntity)();case a.MonsterType.Dummy:return(0,l.createDummyEntity)();default:throw new(0,n.UnreachableError)(e)}}},{"base/unreachable_error":"eQLwm","model/domain":"hG1oc","./rat/create":"e0TXQ","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","./troll/create":"kdRxv","./snail/create":"3ZEaP","./rooster/create":"9hHe5","./dummy/create":"dBKUS"}],e0TXQ:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"createRatEntity",(()=>c));var n=e("data/monsters/rat/cards"),a=e("../rigid/create"),s=e("../rigid/rigid_entity_controller"),i=e("../unicode/create");function c(){return(0,a.createRigidEntity)(new Map([[n.cardFrontRatBite,s.Animations.Attack],[n.cardFrontRatScreech,s.Animations.Special],[n.cardFrontRatCower,s.Animations.Block]]),(0,i.createUnicodeEntity)("🐀"),void 0,!0)}},{"../rigid/create":"cR4Ik","../rigid/rigid_entity_controller":"azAeR","../unicode/create":"j37aC","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","data/monsters/rat/cards":"kT937"}],cR4Ik:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"createRigidEntity",(()=>c));var n=e("solid-js/web"),a=e("ui/animation/animation_manager"),s=e("./rigid_entity_controller"),i=e("./rigid_entity");e("solid-js");function c(e,r,t,o){const c=s.rigidEntityUI.create({activeAnimation:void 0,hidden:!0}),d=new(0,a.AnimationManager);return{controller:new(0,s.RigidEntityController)(d,e,s.Animations.Special,c,t),Component:function(){return(0,n.createComponent)(i.RigidEntityComponent,{animations:d,get hidden(){return c.hidden},get activeAnimation(){return c.activeAnimation},flipX:o,get children(){return(0,n.createComponent)(r,{})}})}}}},{"solid-js/web":"33rlw","ui/animation/animation_manager":"fbyYW","./rigid_entity_controller":"azAeR","./rigid_entity":"gfyby","solid-js":"5rsr6","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],azAeR:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"Animations",(()=>c)),o.export(t,"rigidEntityUI",(()=>d)),o.export(t,"RigidEntityController",(()=>l));var n=e("model/descriptor/record"),a=e("model/descriptor/literals"),s=e("model/descriptor/option"),i=e("solid-js");let c;!function(e){e[e.Appear=1]="Appear",e[e.Disappear=2]="Disappear",e[e.Attack=3]="Attack",e[e.Special=4]="Special",e[e.TakeDamage=5]="TakeDamage",e[e.Die=6]="Die",e[e.Block=7]="Block"}(c||(c={}));const d=(0,n.activeRecordDescriptor)({activeAnimation:(0,s.optionalDescriptor)(new(0,a.LiteralTypeDescriptor)),hidden:a.booleanDescriptor});class l{constructor(e,r,t,o,n){this.animations=e,this.actions=r,this.fallbackAnimation=t,this.rigidEntityUI=o,this.dynamicEntityController=n}async perform(e){const r=this.actions.get(e)||this.fallbackAnimation;await this.performAnimation(r,(()=>this.dynamicEntityController?.perform(e)))}async takeDamage(){await this.performAnimation(5)}async appear(){await(0,i.batch)((()=>(this.rigidEntityUI.hidden=!1,this.performAnimation(1,(()=>this.dynamicEntityController?.appear())))))}async disappear(){await this.performAnimation(2,(()=>this.dynamicEntityController?.disappear())),(0,i.batch)((()=>{this.rigidEntityUI.hidden=!0}))}async die(){await this.performAnimation(6,(()=>this.dynamicEntityController?.die())),(0,i.batch)((()=>{this.rigidEntityUI.hidden=!0}))}async performAnimation(e,r){this.rigidEntityUI.activeAnimation=e,await Promise.all([null!=e&&this.animations.waitForAnimation(e),r?.()]),this.rigidEntityUI.activeAnimation=void 0}}},{"model/descriptor/record":"9b5Fs","model/descriptor/literals":"6SgZZ","model/descriptor/option":"c8pK3","solid-js":"5rsr6","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],gfyby:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"RigidEntityComponent",(()=>p));var n=e("solid-js/web"),a=e("./rigid_entity.module.scss"),s=o.interopDefault(a),i=e("./rigid_entity_controller"),c=e("solid-js"),d=e("base/unreachable_error");const l=(0,n.template)("<div><div>");function p(e){const[r,t]=(0,c.createSignal)(),o=()=>{switch(e.activeAnimation){case i.Animations.Appear:case i.Animations.Disappear:return s.default.appearAnimation;case i.Animations.Attack:return s.default.attackAnimation;case i.Animations.Die:return s.default.dieAnimation;case i.Animations.Special:return s.default.specialAnimation;case i.Animations.Block:return s.default.blockAnimation;case i.Animations.TakeDamage:return s.default.takeDamageAnimation;case void 0:return"";default:throw new(0,d.UnreachableError)(e.activeAnimation)}},a=e.animations.createAnimationEndEventListener(r,(()=>[e.activeAnimation,o()]));return(()=>{const r=l(),o=r.firstChild;return(0,n.use)(t,r),(0,n.addEventListener)(r,"animationend",a),(0,n.insert)(o,(()=>e.children)),(0,n.effect)((t=>{const a={[s.default.entity]:!0,[s.default.hidden]:e.hidden,[s.default.idle]:null==e.activeAnimation,[s.default.appear]:e.activeAnimation===i.Animations.Appear||e.activeAnimation===i.Animations.Disappear,[s.default.reverse]:e.activeAnimation===i.Animations.Disappear,[s.default.attack]:e.activeAnimation===i.Animations.Attack,[s.default.die]:e.activeAnimation===i.Animations.Die,[s.default.block]:e.activeAnimation===i.Animations.Block,[s.default.special]:e.activeAnimation==i.Animations.Special,[s.default["take-damage"]]:e.activeAnimation===i.Animations.TakeDamage},c={[s.default.inner]:!0,[s.default.flipX]:e.flipX};return t._v$=(0,n.classList)(r,a,t._v$),t._v$2=(0,n.classList)(o,c,t._v$2),t}),{_v$:void 0,_v$2:void 0}),r})()}},{"solid-js/web":"33rlw","./rigid_entity.module.scss":"3IDZa","./rigid_entity_controller":"azAeR","solid-js":"5rsr6","base/unreachable_error":"eQLwm","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"3IDZa":[function(e,r,t){r.exports.die="V5XGxa_die",r.exports.inner="V5XGxa_inner",r.exports.flipX="V5XGxa_flipX",r.exports.attackAnimation="V5XGxa_attackAnimation",r.exports.attackAnimation,r.exports.idle="V5XGxa_idle",r.exports.special="V5XGxa_special",r.exports.dieAnimation="V5XGxa_dieAnimation",r.exports.dieAnimation,r.exports.takeDamageAnimation="V5XGxa_takeDamageAnimation",r.exports.takeDamageAnimation,r.exports.hidden="V5XGxa_hidden",r.exports.block="V5XGxa_block",r.exports.entity="V5XGxa_entity",r.exports.appear="V5XGxa_appear",r.exports.reverse="V5XGxa_reverse",r.exports.blockAnimation="V5XGxa_blockAnimation",r.exports.blockAnimation,r.exports.appearAnimation="V5XGxa_appearAnimation",r.exports.appearAnimation,r.exports.specialAnimation="V5XGxa_specialAnimation",r.exports.specialAnimation,r.exports["take-damage"]="V5XGxa_take-damage",r.exports.idleAnimation="V5XGxa_idleAnimation",r.exports.idleAnimation,r.exports.attack="V5XGxa_attack"},{}],j37aC:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"createUnicodeEntity",(()=>s));var n=e("solid-js/web"),a=e("./unicode_entity");function s(e,r){return function(){return(0,n.createComponent)(a.UnicodeEntityComponent,{unicode:e,fontSize:r})}}},{"solid-js/web":"33rlw","./unicode_entity":"kwS88","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],kwS88:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"UnicodeEntityComponent",(()=>c));var n=e("solid-js/web"),a=e("./unicode_entity.module.scss"),s=o.interopDefault(a);const i=(0,n.template)("<div>");function c(e){return(()=>{const r=i();return(0,n.insert)(r,(()=>e.unicode)),(0,n.effect)((t=>{const o=s.default.entity,a=e.fontSize&&{"font-size":e.fontSize};return o!==t._v$&&(0,n.className)(r,t._v$=o),t._v$2=(0,n.style)(r,a,t._v$2),t}),{_v$:void 0,_v$2:void 0}),r})()}},{"solid-js/web":"33rlw","./unicode_entity.module.scss":"hRnwJ","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],hRnwJ:[function(e,r,t){r.exports.cardWidth="9",r.exports.cardHeight="12",r.exports.pageWidth="50",r.exports.pageHeight="70",r.exports.entity="entity_6cc677"},{}],kdRxv:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"createTrollEntity",(()=>c));var n=e("data/monsters/troll/cards"),a=e("../rigid/create"),s=e("../rigid/rigid_entity_controller"),i=e("../unicode/create");function c(){return(0,a.createRigidEntity)(new Map([[n.cardFrontTrollSmash,s.Animations.Attack],[n.cardFrontTrollOdour,s.Animations.Special],[n.cardFrontTrollRegeneration,s.Animations.Block]]),(0,i.createUnicodeEntity)("🧌"),void 0,!1)}},{"data/monsters/troll/cards":"9deJ1","../rigid/create":"cR4Ik","../rigid/rigid_entity_controller":"azAeR","../unicode/create":"j37aC","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"3ZEaP":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"createSnailEntity",(()=>c));var n=e("data/monsters/snail/cards"),a=e("../rigid/create"),s=e("../rigid/rigid_entity_controller"),i=e("../unicode/create");function c(){return(0,a.createRigidEntity)(new Map([[n.cardFrontSnailBite,s.Animations.Attack],[n.cardFrontSnailHide,s.Animations.Block]]),(0,i.createUnicodeEntity)("🐌"),void 0,!0)}},{"data/monsters/snail/cards":"k5LZg","../rigid/create":"cR4Ik","../rigid/rigid_entity_controller":"azAeR","../unicode/create":"j37aC","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"9hHe5":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"createRoosterEntity",(()=>c));var n=e("data/monsters/rooster/cards"),a=e("../rigid/create"),s=e("../rigid/rigid_entity_controller"),i=e("../unicode/create");function c(){return(0,a.createRigidEntity)(new Map([[n.cardFrontRoosterClaw,s.Animations.Attack],[n.cardFrontRoosterEvade,s.Animations.Block],[n.cardFrontRoosterCrow,s.Animations.Special]]),(0,i.createUnicodeEntity)("🐓"),void 0,!0)}},{"data/monsters/rooster/cards":"2QcmV","../rigid/create":"cR4Ik","../rigid/rigid_entity_controller":"azAeR","../unicode/create":"j37aC","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],dBKUS:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"createDummyEntity",(()=>s));var n=e("../rigid/create"),a=e("../unicode/create");function s(){return(0,n.createRigidEntity)(new Map([]),(0,a.createUnicodeEntity)("🪵"),void 0,!1)}},{"../rigid/create":"cR4Ik","../unicode/create":"j37aC","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],d02tT:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"EncounterBattleComponent",(()=>d));var n=e("solid-js/web"),a=e("./encounter_battle.module.scss"),s=o.interopDefault(a),i=e("components/entity/health/entity_health");const c=(0,n.template)("<div>");function d(e){return(()=>{const r=c();return(0,n.insert)(r,(0,n.createComponent)(i.EntityHealthComponent,{get health(){return e.model.monster.health},get maxHealth(){return e.model.monster.maxHealth}}),null),(0,n.insert)(r,(()=>e.children),null),(0,n.effect)((()=>(0,n.className)(r,s.default.container))),r})()}},{"solid-js/web":"33rlw","./encounter_battle.module.scss":"gKGEF","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","components/entity/health/entity_health":"k6NOx"}],gKGEF:[function(e,r,t){r.exports.cardWidth="9",r.exports.cardHeight="12",r.exports.pageWidth="50",r.exports.pageHeight="70",r.exports.container="container_dde8a2"},{}],"6nTV1":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"createEncounterEventManger",(()=>g));var n=e("solid-js/web"),a=e("model/domain"),s=e("components/component_manager"),i=e("components/entity/fountain/create"),c=e("base/unreachable_error"),d=e("./encounter_event"),l=e("components/entity/magic_tree/create"),p=e("components/entity/mushroom/create"),u=e("components/entity/shrine/create"),f=e("components/entity/treasure/create"),m=e("components/entity/shop/create");function g(){return new(0,s.ComponentManager)((function(e){const{Component:r,controller:t}=function(e){switch(e.eventType){case a.EventType.Fountain:return(0,i.createFountainEntity)();case a.EventType.MagicTree:return(0,l.createMagicTreeEntity)();case a.EventType.Mushroom:return(0,p.createMushroomEntity)();case a.EventType.Shrine:return(0,u.createShrineEntity)();case a.EventType.Treasure:return(0,f.createTreasureEntity)();case a.EventType.Shop:return(0,m.createShopEntity)();default:throw new(0,c.UnreachableError)(e.eventType)}}(e);return{Component:function(){return(0,n.createComponent)(d.EncounterEventComponent,{get children(){return(0,n.createComponent)(r,{})}})},controller:t}}))}},{"solid-js/web":"33rlw","model/domain":"hG1oc","components/component_manager":"e6kRp","components/entity/fountain/create":"bXF0b","base/unreachable_error":"eQLwm","./encounter_event":"5JPj0","components/entity/magic_tree/create":"gYTb3","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","components/entity/mushroom/create":"aafsL","components/entity/shrine/create":"4FgTT","components/entity/treasure/create":"2atoY","components/entity/shop/create":"cawgm"}],bXF0b:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"createFountainEntity",(()=>s));var n=e("../rigid/create"),a=e("../unicode/create");function s(){return(0,n.createRigidEntity)(new Map([]),(0,a.createUnicodeEntity)("⛲"),void 0,!1)}},{"../rigid/create":"cR4Ik","../unicode/create":"j37aC","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"5JPj0":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"EncounterEventComponent",(()=>c));var n=e("solid-js/web"),a=e("./encounter_event.module.scss"),s=o.interopDefault(a);const i=(0,n.template)("<div>");function c(e){return(()=>{const r=i();return(0,n.insert)(r,(()=>e.children)),(0,n.effect)((()=>(0,n.className)(r,s.default.container))),r})()}},{"solid-js/web":"33rlw","./encounter_event.module.scss":"6H3r8","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"6H3r8":[function(e,r,t){r.exports.cardWidth="9",r.exports.cardHeight="12",r.exports.pageWidth="50",r.exports.pageHeight="70",r.exports.container="container_f42fb8"},{}],gYTb3:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"createMagicTreeEntity",(()=>s));var n=e("../rigid/create"),a=e("../unicode/create");function s(){return(0,n.createRigidEntity)(new Map([]),(0,a.createUnicodeEntity)("🌳"),void 0,!1)}},{"../rigid/create":"cR4Ik","../unicode/create":"j37aC","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],aafsL:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"createMushroomEntity",(()=>s));var n=e("../rigid/create"),a=e("../unicode/create");function s(){return(0,n.createRigidEntity)(new Map([]),(0,a.createUnicodeEntity)("🍄"),void 0,!1)}},{"../rigid/create":"cR4Ik","../unicode/create":"j37aC","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"4FgTT":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"createShrineEntity",(()=>s));var n=e("../rigid/create"),a=e("../unicode/create");function s(){return(0,n.createRigidEntity)(new Map([]),(0,a.createUnicodeEntity)("⛩️"),void 0,!1)}},{"../rigid/create":"cR4Ik","../unicode/create":"j37aC","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"2atoY":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"createTreasureEntity",(()=>s));var n=e("../rigid/create"),a=e("../unicode/create");function s(){return(0,n.createRigidEntity)(new Map([]),(0,a.createUnicodeEntity)("💰"),void 0,!1)}},{"../rigid/create":"cR4Ik","../unicode/create":"j37aC","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],cawgm:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"createShopEntity",(()=>s));var n=e("../rigid/create"),a=e("../unicode/create");function s(){return(0,n.createRigidEntity)(new Map([]),(0,a.createUnicodeEntity)("👳"),void 0,!1)}},{"../rigid/create":"cR4Ik","../unicode/create":"j37aC","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],f4J0Y:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"createEncounter",(()=>s));var n=e("solid-js/web"),a=e("model/domain");e("solid-js");function s(e,r){const t={[a.EncounterType.Battle]:function(r){return(0,n.createComponent)(e.FactoryComponent,{get model(){return r.model}})},[a.EncounterType.Event]:function(e){return(0,n.createComponent)(r.FactoryComponent,{get model(){return e.model}})}};return function(e){return(0,n.createComponent)(n.Dynamic,{get component(){return t[e.model.type]},get model(){return e.model}})}}},{"solid-js/web":"33rlw","model/domain":"hG1oc","solid-js":"5rsr6","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"14Eqm":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"RenderingSpeaker",(()=>s));var n=e("solid-js"),a=e("base/delay");class s{constructor(e){this.splitter=e,this.previousPromise=Promise.resolve();const[r,t]=(0,n.createSignal)();this.textGetter=r,this.textSetter=t;const[o,a]=(0,n.createSignal)(0);this.characterIndexGetter=o,this.characterIndexSetter=a}say(e){return this.previousPromise=this.previousPromise.then((async()=>{(0,n.batch)((()=>{this.textSetter(e),this.characterIndexSetter(0)})),await this.splitter.say(e,(e=>{this.characterIndexSetter(e)})),await(0,a.delay)(200),this.characterIndexSetter(0),await(0,a.delay)(200)})),this.previousPromise}get characterIndex(){return this.characterIndexGetter()}get text(){return this.textGetter()}}},{"solid-js":"5rsr6","base/delay":"hGewO","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],i62HP:[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"SpeechSynthesisWordSplitter",(()=>n));class n{constructor(e,r){this.speechSynthesis=e,this.fallback=r,this.cachedUtterances=new Map,e.onvoiceschanged=()=>this.cachedVoice=void 0}get voice(){return null==this.cachedVoice&&(this.cachedVoice=this.calculateVoice()),this.cachedVoice}calculateVoice(){const e=this.speechSynthesis?.getVoices();if(!e?.length)return;const r=e.filter((e=>"EN-GB"===e.lang.toUpperCase())),t=r.find((e=>e.name.toUpperCase().indexOf(" MALE")>=0));if(null!=t)return t;if(r.length>0)return r[0];const o=e.find((e=>e.default));return null!=o?o:e[0]}async say(e,r){const t=this.calculateUtterance(e);t&&this.speechSynthesis.speak(t),await this.fallback.say(e,r)}calculateUtterance(e){let r=this.cachedUtterances.get(e);if(null!=r)return r;const t=this.voice;return t?(r=new SpeechSynthesisUtterance(e),r.addEventListener("boundary",(e=>console.log(e))),r.rate=1,r.pitch=.4,r.lang="en",r.voice=t,this.cachedUtterances.set(e,r),r):void 0}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"6sNch":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"DelayWordSplitter",(()=>a));var n=e("base/delay");class a{async say(e,r){const t=e.split(" ");let o=-1;for(const e of t){let t=e.length;e.endsWith(",")&&t++,e.endsWith(".")&&(t+=3),o+=e.length+1,r(o),await(0,n.delay)(100*t)}}}},{"base/delay":"hGewO","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"9fV2F":[function(e,r,t){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"PoliteSpeaker",(()=>n));class n{constructor(e){this.speaker=e,this.lastSpoke=new Map}async say(e){const r=this.lastSpoke.get(e),t=Date.now();if(null==r||(t-r)/3e5>Math.random()+.2)return this.lastSpoke.set(e,t),this.speaker.say(e)}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}]},["2JcSZ","4zTVb"],"4zTVb","parcelRequirefc40");
//# sourceMappingURL=index.529db5bb.js.map
