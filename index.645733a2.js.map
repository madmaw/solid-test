{"mappings":"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","sources":["src/index.tsx","node_modules/solid-js/web/dist/web.js","node_modules/solid-js/dist/solid.js","node_modules/@parcel/transformer-js/src/esmodule-helpers.js","src/components/table/create.tsx","src/components/table/table.tsx","src/components/table/table.module.scss","src/components/table/table_controller.ts","src/model/descriptor/literals.ts","src/model/descriptor/record.ts","src/ui/animation/animation_manager.ts","src/base/delay.ts","src/base/flattened_promise.ts","src/components/book/create.tsx","src/components/book/book.tsx","src/components/book/book.module.scss","src/components/book/book_controller.ts","src/model/descriptor/option.ts","src/model/domain.ts","src/model/descriptor/list.ts","src/model/descriptor/union.ts","src/components/card_slot/create.tsx","src/components/card_slot/card_slot.tsx","src/components/card_slot/card_slot.module.scss","src/rules/interaction_manager.ts","src/base/unreachable_error.ts","src/rules/card.ts","src/components/card_slot/card_slots.tsx","src/components/card_slot/card_slots.module.scss","src/components/component_manager.tsx","src/components/card_slot/card_slot_controller.ts","src/components/card/create.tsx","src/components/card/card_controller.ts","src/components/card/card.tsx","src/components/card/card.module.scss","src/components/card/face/card_face.tsx","src/components/card/face/card_face.module.scss","src/components/card/face/card_face_resource.tsx","src/components/effect/effect_strip.tsx","src/components/effect/effect_strip.module.scss","src/components/effect/effect.tsx","src/components/effect/effect.module.scss","src/components/card/face/card_face_description.tsx","src/components/card/face/card_face_description.module.scss","src/components/card/face/card_face_name.tsx","src/components/card/face/card_face_name.module.scss","src/components/card/face/card_face_resource_back.tsx","src/components/card/face/card_face_choice.tsx","src/components/card/face/card_face_choice_back.tsx","src/components/page/create.tsx","src/components/page/page_controller.ts","src/components/page/page.tsx","src/components/page/toc/page_toc.tsx","src/components/page/blank/page_blank.tsx","src/ui/cutout/cutout.tsx","src/ui/cutout/cutout.module.scss","src/components/page/toc/page_toc.module.scss","src/components/page/room/page_room.tsx","src/components/page/room/page_room.module.scss","src/data/initial.ts","src/data/cards/kick.ts","src/data/effects.ts","src/data/cards/might.ts","src/data/cards/next_room.ts","src/components/spread/create.tsx","src/components/spread/spread.tsx","src/components/spread/room/spread_room.tsx","src/components/spread/room/spread_room.module.scss","src/components/spread/blank/spread_blank.tsx","src/components/spread/spread_controller.ts","src/components/drag/create.tsx","src/components/drag/drag_overlay.tsx","src/components/drag/drag_overlay.module.scss","src/components/drag/drag_overlay_controller.ts"],"sourcesContent":["import { render } from \"solid-js/web\";\nimport { createTable } from \"components/table/create\";\nimport { View } from \"components/table/table_controller\";\nimport { createBook } from \"components/book/create\";\nimport { createCardSlotManager, createCardSlots } from \"components/card_slot/create\";\nimport { createCardManager } from \"components/card/create\";\nimport { createPageManager } from \"components/page/create\";\nimport { PageSide } from \"components/page/page_controller\";\nimport { BookSpreadType, bookSpreadRoomDescriptor, bookSpreadTableOfContentsDescriptor } from \"model/domain\";\nimport { cardMight, cardNextRoom, initialGame } from \"data/initial\";\nimport { createSpread } from \"components/spread/create\";\nimport { InteractionManager } from \"rules/interaction_manager\";\nimport { createDragOverlay } from \"components/drag/create\";\n\nwindow.onload = function () {\n  const app = document.getElementById('app')!;\n  const game = initialGame;\n  const cardManager = createCardManager();\n  const interactionManger = new InteractionManager(cardManager);\n  window.addEventListener('mousemove', e => {\n    interactionManger.lastMousePosition = [e.clientX, e.clientY];\n  });\n\n  const {\n    Component: TableComponent,\n    controller: tableController,\n  } = createTable(interactionManger);\n\n  const onNavigate = (to: BookSpreadType) => {\n    const spread = bookSpreadRoomDescriptor.create({\n      type: BookSpreadType.Room,\n      cardSlots: [\n        {\n          targetCard: undefined,\n          playedCards: [],\n        },\n        {\n          targetCard: undefined,\n          playedCards: [],\n        },\n        {\n          targetCard: undefined,\n          playedCards: [],\n        },\n      ],\n    });\n    spread.cardSlots[0].targetCard = cardNextRoom;\n    bookController.showSpread(spread);\n  };\n\n  const leftPageManager = createPageManager({\n    side: PageSide.Left,\n    onNavigate,\n  });\n  const rightPageManager = createPageManager({\n    side: PageSide.Right,\n    onNavigate,\n  });\n\n\n  const cardSlotManager = createCardSlotManager(\n    cardManager.FactoryComponent,\n    interactionManger,\n    game,\n  );\n\n  const {\n    Component: CardSlotsComponent,\n  } = createCardSlots(cardSlotManager.FactoryComponent);\n\n  const {\n    Component: SpreadComponent,\n  } = createSpread({\n    CardSlotsComponent,\n  });\n\n  const {\n    Component: BookImpl,\n    controller: bookController,\n  } = createBook({\n    leftPageComponentManager: leftPageManager,\n    rightPageComponentManager: rightPageManager,\n    book: game.book,\n\n  });\n\n  const onClickCover = async () => {\n    await tableController.setView(View.Tilted);\n    // bookController.showSpread(bookSpreadTableOfContentsDescriptor.create({\n    //   type: BookSpreadType.TableOfContents,\n    // }));\n    onNavigate(BookSpreadType.Room);\n    console.log('show main menu');\n  };\n\n  function Hand() {\n    return <CardSlotsComponent model={game.cardSlots}/>;\n  }\n\n  function SpreadOverlay() {\n    // <>{}</> is needed to re-render on game.book.spread changing\n    return (\n      <>\n        {\n          game.book.spread && <SpreadComponent model={game.book.spread}/>\n        }\n      </>\n    );\n  }\n\n  const { Component: DragOverlay } = createDragOverlay(\n    interactionManger,\n    cardManager.FactoryComponent,\n  );\n\n\n  const Deck = () => <div/>;\n\n  function Book() {\n    return <BookImpl onClickCover={onClickCover} />;\n  }\n\n  render(() => (\n      <TableComponent\n          Book={Book}\n          Hand={Hand}\n          Deck={Deck}\n          SpreadOverlay={SpreadOverlay}\n          DragOverlay={DragOverlay}\n      />\n  ), app);\n\n  // setInterval(() => {\n  //   cardManager.lookupController(cardMight)?.flip();\n  // }, 5000);\n\n};\n","import { createRoot, createRenderEffect, sharedConfig, untrack, enableHydration, getOwner, createEffect, runWithOwner, createSignal, onCleanup, splitProps, createMemo, $DEVCOMP } from 'solid-js';\nexport { ErrorBoundary, For, Index, Match, Show, Suspense, SuspenseList, Switch, createComponent, createRenderEffect as effect, getOwner, createMemo as memo, mergeProps, untrack } from 'solid-js';\n\nconst booleans = [\"allowfullscreen\", \"async\", \"autofocus\", \"autoplay\", \"checked\", \"controls\", \"default\", \"disabled\", \"formnovalidate\", \"hidden\", \"indeterminate\", \"ismap\", \"loop\", \"multiple\", \"muted\", \"nomodule\", \"novalidate\", \"open\", \"playsinline\", \"readonly\", \"required\", \"reversed\", \"seamless\", \"selected\"];\nconst Properties = /*#__PURE__*/new Set([\"className\", \"value\", \"readOnly\", \"formNoValidate\", \"isMap\", \"noModule\", \"playsInline\", ...booleans]);\nconst ChildProperties = /*#__PURE__*/new Set([\"innerHTML\", \"textContent\", \"innerText\", \"children\"]);\nconst Aliases = /*#__PURE__*/Object.assign(Object.create(null), {\n  className: \"class\",\n  htmlFor: \"for\"\n});\nconst PropAliases = /*#__PURE__*/Object.assign(Object.create(null), {\n  class: \"className\",\n  formnovalidate: {\n    $: \"formNoValidate\",\n    BUTTON: 1,\n    INPUT: 1\n  },\n  ismap: {\n    $: \"isMap\",\n    IMG: 1\n  },\n  nomodule: {\n    $: \"noModule\",\n    SCRIPT: 1\n  },\n  playsinline: {\n    $: \"playsInline\",\n    VIDEO: 1\n  },\n  readonly: {\n    $: \"readOnly\",\n    INPUT: 1,\n    TEXTAREA: 1\n  }\n});\nfunction getPropAlias(prop, tagName) {\n  const a = PropAliases[prop];\n  return typeof a === \"object\" ? a[tagName] ? a[\"$\"] : undefined : a;\n}\nconst DelegatedEvents = /*#__PURE__*/new Set([\"beforeinput\", \"click\", \"dblclick\", \"contextmenu\", \"focusin\", \"focusout\", \"input\", \"keydown\", \"keyup\", \"mousedown\", \"mousemove\", \"mouseout\", \"mouseover\", \"mouseup\", \"pointerdown\", \"pointermove\", \"pointerout\", \"pointerover\", \"pointerup\", \"touchend\", \"touchmove\", \"touchstart\"]);\nconst SVGElements = /*#__PURE__*/new Set([\n\"altGlyph\", \"altGlyphDef\", \"altGlyphItem\", \"animate\", \"animateColor\", \"animateMotion\", \"animateTransform\", \"circle\", \"clipPath\", \"color-profile\", \"cursor\", \"defs\", \"desc\", \"ellipse\", \"feBlend\", \"feColorMatrix\", \"feComponentTransfer\", \"feComposite\", \"feConvolveMatrix\", \"feDiffuseLighting\", \"feDisplacementMap\", \"feDistantLight\", \"feFlood\", \"feFuncA\", \"feFuncB\", \"feFuncG\", \"feFuncR\", \"feGaussianBlur\", \"feImage\", \"feMerge\", \"feMergeNode\", \"feMorphology\", \"feOffset\", \"fePointLight\", \"feSpecularLighting\", \"feSpotLight\", \"feTile\", \"feTurbulence\", \"filter\", \"font\", \"font-face\", \"font-face-format\", \"font-face-name\", \"font-face-src\", \"font-face-uri\", \"foreignObject\", \"g\", \"glyph\", \"glyphRef\", \"hkern\", \"image\", \"line\", \"linearGradient\", \"marker\", \"mask\", \"metadata\", \"missing-glyph\", \"mpath\", \"path\", \"pattern\", \"polygon\", \"polyline\", \"radialGradient\", \"rect\",\n\"set\", \"stop\",\n\"svg\", \"switch\", \"symbol\", \"text\", \"textPath\",\n\"tref\", \"tspan\", \"use\", \"view\", \"vkern\"]);\nconst SVGNamespace = {\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\"\n};\nconst DOMElements = /*#__PURE__*/new Set([\"html\", \"base\", \"head\", \"link\", \"meta\", \"style\", \"title\", \"body\", \"address\", \"article\", \"aside\", \"footer\", \"header\", \"main\", \"nav\", \"section\", \"body\", \"blockquote\", \"dd\", \"div\", \"dl\", \"dt\", \"figcaption\", \"figure\", \"hr\", \"li\", \"ol\", \"p\", \"pre\", \"ul\", \"a\", \"abbr\", \"b\", \"bdi\", \"bdo\", \"br\", \"cite\", \"code\", \"data\", \"dfn\", \"em\", \"i\", \"kbd\", \"mark\", \"q\", \"rp\", \"rt\", \"ruby\", \"s\", \"samp\", \"small\", \"span\", \"strong\", \"sub\", \"sup\", \"time\", \"u\", \"var\", \"wbr\", \"area\", \"audio\", \"img\", \"map\", \"track\", \"video\", \"embed\", \"iframe\", \"object\", \"param\", \"picture\", \"portal\", \"source\", \"svg\", \"math\", \"canvas\", \"noscript\", \"script\", \"del\", \"ins\", \"caption\", \"col\", \"colgroup\", \"table\", \"tbody\", \"td\", \"tfoot\", \"th\", \"thead\", \"tr\", \"button\", \"datalist\", \"fieldset\", \"form\", \"input\", \"label\", \"legend\", \"meter\", \"optgroup\", \"option\", \"output\", \"progress\", \"select\", \"textarea\", \"details\", \"dialog\", \"menu\", \"summary\", \"details\", \"slot\", \"template\", \"acronym\", \"applet\", \"basefont\", \"bgsound\", \"big\", \"blink\", \"center\", \"content\", \"dir\", \"font\", \"frame\", \"frameset\", \"hgroup\", \"image\", \"keygen\", \"marquee\", \"menuitem\", \"nobr\", \"noembed\", \"noframes\", \"plaintext\", \"rb\", \"rtc\", \"shadow\", \"spacer\", \"strike\", \"tt\", \"xmp\", \"a\", \"abbr\", \"acronym\", \"address\", \"applet\", \"area\", \"article\", \"aside\", \"audio\", \"b\", \"base\", \"basefont\", \"bdi\", \"bdo\", \"bgsound\", \"big\", \"blink\", \"blockquote\", \"body\", \"br\", \"button\", \"canvas\", \"caption\", \"center\", \"cite\", \"code\", \"col\", \"colgroup\", \"content\", \"data\", \"datalist\", \"dd\", \"del\", \"details\", \"dfn\", \"dialog\", \"dir\", \"div\", \"dl\", \"dt\", \"em\", \"embed\", \"fieldset\", \"figcaption\", \"figure\", \"font\", \"footer\", \"form\", \"frame\", \"frameset\", \"head\", \"header\", \"hgroup\", \"hr\", \"html\", \"i\", \"iframe\", \"image\", \"img\", \"input\", \"ins\", \"kbd\", \"keygen\", \"label\", \"legend\", \"li\", \"link\", \"main\", \"map\", \"mark\", \"marquee\", \"menu\", \"menuitem\", \"meta\", \"meter\", \"nav\", \"nobr\", \"noembed\", \"noframes\", \"noscript\", \"object\", \"ol\", \"optgroup\", \"option\", \"output\", \"p\", \"param\", \"picture\", \"plaintext\", \"portal\", \"pre\", \"progress\", \"q\", \"rb\", \"rp\", \"rt\", \"rtc\", \"ruby\", \"s\", \"samp\", \"script\", \"section\", \"select\", \"shadow\", \"slot\", \"small\", \"source\", \"spacer\", \"span\", \"strike\", \"strong\", \"style\", \"sub\", \"summary\", \"sup\", \"table\", \"tbody\", \"td\", \"template\", \"textarea\", \"tfoot\", \"th\", \"thead\", \"time\", \"title\", \"tr\", \"track\", \"tt\", \"u\", \"ul\", \"var\", \"video\", \"wbr\", \"xmp\", \"input\"]);\n\nfunction reconcileArrays(parentNode, a, b) {\n  let bLength = b.length,\n    aEnd = a.length,\n    bEnd = bLength,\n    aStart = 0,\n    bStart = 0,\n    after = a[aEnd - 1].nextSibling,\n    map = null;\n  while (aStart < aEnd || bStart < bEnd) {\n    if (a[aStart] === b[bStart]) {\n      aStart++;\n      bStart++;\n      continue;\n    }\n    while (a[aEnd - 1] === b[bEnd - 1]) {\n      aEnd--;\n      bEnd--;\n    }\n    if (aEnd === aStart) {\n      const node = bEnd < bLength ? bStart ? b[bStart - 1].nextSibling : b[bEnd - bStart] : after;\n      while (bStart < bEnd) parentNode.insertBefore(b[bStart++], node);\n    } else if (bEnd === bStart) {\n      while (aStart < aEnd) {\n        if (!map || !map.has(a[aStart])) a[aStart].remove();\n        aStart++;\n      }\n    } else if (a[aStart] === b[bEnd - 1] && b[bStart] === a[aEnd - 1]) {\n      const node = a[--aEnd].nextSibling;\n      parentNode.insertBefore(b[bStart++], a[aStart++].nextSibling);\n      parentNode.insertBefore(b[--bEnd], node);\n      a[aEnd] = b[bEnd];\n    } else {\n      if (!map) {\n        map = new Map();\n        let i = bStart;\n        while (i < bEnd) map.set(b[i], i++);\n      }\n      const index = map.get(a[aStart]);\n      if (index != null) {\n        if (bStart < index && index < bEnd) {\n          let i = aStart,\n            sequence = 1,\n            t;\n          while (++i < aEnd && i < bEnd) {\n            if ((t = map.get(a[i])) == null || t !== index + sequence) break;\n            sequence++;\n          }\n          if (sequence > index - bStart) {\n            const node = a[aStart];\n            while (bStart < index) parentNode.insertBefore(b[bStart++], node);\n          } else parentNode.replaceChild(b[bStart++], a[aStart++]);\n        } else aStart++;\n      } else a[aStart++].remove();\n    }\n  }\n}\n\nconst $$EVENTS = \"_$DX_DELEGATE\";\nfunction render(code, element, init, options = {}) {\n  let disposer;\n  createRoot(dispose => {\n    disposer = dispose;\n    element === document ? code() : insert(element, code(), element.firstChild ? null : undefined, init);\n  }, options.owner);\n  return () => {\n    disposer();\n    element.textContent = \"\";\n  };\n}\nfunction template(html, isCE, isSVG) {\n  let node;\n  const create = () => {\n    const t = document.createElement(\"template\");\n    t.innerHTML = html;\n    return isSVG ? t.content.firstChild.firstChild : t.content.firstChild;\n  };\n  const fn = isCE ? () => (node || (node = create())).cloneNode(true) : () => untrack(() => document.importNode(node || (node = create()), true));\n  fn.cloneNode = fn;\n  return fn;\n}\nfunction delegateEvents(eventNames, document = window.document) {\n  const e = document[$$EVENTS] || (document[$$EVENTS] = new Set());\n  for (let i = 0, l = eventNames.length; i < l; i++) {\n    const name = eventNames[i];\n    if (!e.has(name)) {\n      e.add(name);\n      document.addEventListener(name, eventHandler);\n    }\n  }\n}\nfunction clearDelegatedEvents(document = window.document) {\n  if (document[$$EVENTS]) {\n    for (let name of document[$$EVENTS].keys()) document.removeEventListener(name, eventHandler);\n    delete document[$$EVENTS];\n  }\n}\nfunction setAttribute(node, name, value) {\n  if (value == null) node.removeAttribute(name);else node.setAttribute(name, value);\n}\nfunction setAttributeNS(node, namespace, name, value) {\n  if (value == null) node.removeAttributeNS(namespace, name);else node.setAttributeNS(namespace, name, value);\n}\nfunction className(node, value) {\n  if (value == null) node.removeAttribute(\"class\");else node.className = value;\n}\nfunction addEventListener(node, name, handler, delegate) {\n  if (delegate) {\n    if (Array.isArray(handler)) {\n      node[`$$${name}`] = handler[0];\n      node[`$$${name}Data`] = handler[1];\n    } else node[`$$${name}`] = handler;\n  } else if (Array.isArray(handler)) {\n    const handlerFn = handler[0];\n    node.addEventListener(name, handler[0] = e => handlerFn.call(node, handler[1], e));\n  } else node.addEventListener(name, handler);\n}\nfunction classList(node, value, prev = {}) {\n  const classKeys = Object.keys(value || {}),\n    prevKeys = Object.keys(prev);\n  let i, len;\n  for (i = 0, len = prevKeys.length; i < len; i++) {\n    const key = prevKeys[i];\n    if (!key || key === \"undefined\" || value[key]) continue;\n    toggleClassKey(node, key, false);\n    delete prev[key];\n  }\n  for (i = 0, len = classKeys.length; i < len; i++) {\n    const key = classKeys[i],\n      classValue = !!value[key];\n    if (!key || key === \"undefined\" || prev[key] === classValue || !classValue) continue;\n    toggleClassKey(node, key, true);\n    prev[key] = classValue;\n  }\n  return prev;\n}\nfunction style(node, value, prev) {\n  if (!value) return prev ? setAttribute(node, \"style\") : value;\n  const nodeStyle = node.style;\n  if (typeof value === \"string\") return nodeStyle.cssText = value;\n  typeof prev === \"string\" && (nodeStyle.cssText = prev = undefined);\n  prev || (prev = {});\n  value || (value = {});\n  let v, s;\n  for (s in prev) {\n    value[s] == null && nodeStyle.removeProperty(s);\n    delete prev[s];\n  }\n  for (s in value) {\n    v = value[s];\n    if (v !== prev[s]) {\n      nodeStyle.setProperty(s, v);\n      prev[s] = v;\n    }\n  }\n  return prev;\n}\nfunction spread(node, props = {}, isSVG, skipChildren) {\n  const prevProps = {};\n  if (!skipChildren) {\n    createRenderEffect(() => prevProps.children = insertExpression(node, props.children, prevProps.children));\n  }\n  createRenderEffect(() => props.ref && props.ref(node));\n  createRenderEffect(() => assign(node, props, isSVG, true, prevProps, true));\n  return prevProps;\n}\nfunction dynamicProperty(props, key) {\n  const src = props[key];\n  Object.defineProperty(props, key, {\n    get() {\n      return src();\n    },\n    enumerable: true\n  });\n  return props;\n}\nfunction innerHTML(parent, content) {\n  !sharedConfig.context && (parent.innerHTML = content);\n}\nfunction use(fn, element, arg) {\n  return untrack(() => fn(element, arg));\n}\nfunction insert(parent, accessor, marker, initial) {\n  if (marker !== undefined && !initial) initial = [];\n  if (typeof accessor !== \"function\") return insertExpression(parent, accessor, initial, marker);\n  createRenderEffect(current => insertExpression(parent, accessor(), current, marker), initial);\n}\nfunction assign(node, props, isSVG, skipChildren, prevProps = {}, skipRef = false) {\n  props || (props = {});\n  for (const prop in prevProps) {\n    if (!(prop in props)) {\n      if (prop === \"children\") continue;\n      prevProps[prop] = assignProp(node, prop, null, prevProps[prop], isSVG, skipRef);\n    }\n  }\n  for (const prop in props) {\n    if (prop === \"children\") {\n      if (!skipChildren) insertExpression(node, props.children);\n      continue;\n    }\n    const value = props[prop];\n    prevProps[prop] = assignProp(node, prop, value, prevProps[prop], isSVG, skipRef);\n  }\n}\nfunction hydrate$1(code, element, options = {}) {\n  sharedConfig.completed = globalThis._$HY.completed;\n  sharedConfig.events = globalThis._$HY.events;\n  sharedConfig.load = globalThis._$HY.load;\n  sharedConfig.gather = root => gatherHydratable(element, root);\n  sharedConfig.registry = new Map();\n  sharedConfig.context = {\n    id: options.renderId || \"\",\n    count: 0\n  };\n  gatherHydratable(element, options.renderId);\n  const dispose = render(code, element, [...element.childNodes], options);\n  sharedConfig.context = null;\n  return dispose;\n}\nfunction getNextElement(template) {\n  let node, key;\n  if (!sharedConfig.context || !(node = sharedConfig.registry.get(key = getHydrationKey()))) {\n    if (sharedConfig.context) console.warn(\"Unable to find DOM nodes for hydration key:\", key);\n    if (!template) throw new Error(\"Unrecoverable Hydration Mismatch. No template for key: \" + key);\n    return template();\n  }\n  if (sharedConfig.completed) sharedConfig.completed.add(node);\n  sharedConfig.registry.delete(key);\n  return node;\n}\nfunction getNextMatch(el, nodeName) {\n  while (el && el.localName !== nodeName) el = el.nextSibling;\n  return el;\n}\nfunction getNextMarker(start) {\n  let end = start,\n    count = 0,\n    current = [];\n  if (sharedConfig.context) {\n    while (end) {\n      if (end.nodeType === 8) {\n        const v = end.nodeValue;\n        if (v === \"#\") count++;else if (v === \"/\") {\n          if (count === 0) return [end, current];\n          count--;\n        }\n      }\n      current.push(end);\n      end = end.nextSibling;\n    }\n  }\n  return [end, current];\n}\nfunction runHydrationEvents() {\n  if (sharedConfig.events && !sharedConfig.events.queued) {\n    queueMicrotask(() => {\n      const {\n        completed,\n        events\n      } = sharedConfig;\n      events.queued = false;\n      while (events.length) {\n        const [el, e] = events[0];\n        if (!completed.has(el)) return;\n        eventHandler(e);\n        events.shift();\n      }\n    });\n    sharedConfig.events.queued = true;\n  }\n}\nfunction toPropertyName(name) {\n  return name.toLowerCase().replace(/-([a-z])/g, (_, w) => w.toUpperCase());\n}\nfunction toggleClassKey(node, key, value) {\n  const classNames = key.trim().split(/\\s+/);\n  for (let i = 0, nameLen = classNames.length; i < nameLen; i++) node.classList.toggle(classNames[i], value);\n}\nfunction assignProp(node, prop, value, prev, isSVG, skipRef) {\n  let isCE, isProp, isChildProp, propAlias, forceProp;\n  if (prop === \"style\") return style(node, value, prev);\n  if (prop === \"classList\") return classList(node, value, prev);\n  if (value === prev) return prev;\n  if (prop === \"ref\") {\n    if (!skipRef) value(node);\n  } else if (prop.slice(0, 3) === \"on:\") {\n    const e = prop.slice(3);\n    prev && node.removeEventListener(e, prev);\n    value && node.addEventListener(e, value);\n  } else if (prop.slice(0, 10) === \"oncapture:\") {\n    const e = prop.slice(10);\n    prev && node.removeEventListener(e, prev, true);\n    value && node.addEventListener(e, value, true);\n  } else if (prop.slice(0, 2) === \"on\") {\n    const name = prop.slice(2).toLowerCase();\n    const delegate = DelegatedEvents.has(name);\n    if (!delegate && prev) {\n      const h = Array.isArray(prev) ? prev[0] : prev;\n      node.removeEventListener(name, h);\n    }\n    if (delegate || value) {\n      addEventListener(node, name, value, delegate);\n      delegate && delegateEvents([name]);\n    }\n  } else if (prop.slice(0, 5) === \"attr:\") {\n    setAttribute(node, prop.slice(5), value);\n  } else if ((forceProp = prop.slice(0, 5) === \"prop:\") || (isChildProp = ChildProperties.has(prop)) || !isSVG && ((propAlias = getPropAlias(prop, node.tagName)) || (isProp = Properties.has(prop))) || (isCE = node.nodeName.includes(\"-\"))) {\n    if (forceProp) {\n      prop = prop.slice(5);\n      isProp = true;\n    }\n    if (prop === \"class\" || prop === \"className\") className(node, value);else if (isCE && !isProp && !isChildProp) node[toPropertyName(prop)] = value;else node[propAlias || prop] = value;\n  } else {\n    const ns = isSVG && prop.indexOf(\":\") > -1 && SVGNamespace[prop.split(\":\")[0]];\n    if (ns) setAttributeNS(node, ns, prop, value);else setAttribute(node, Aliases[prop] || prop, value);\n  }\n  return value;\n}\nfunction eventHandler(e) {\n  const key = `$$${e.type}`;\n  let node = e.composedPath && e.composedPath()[0] || e.target;\n  if (e.target !== node) {\n    Object.defineProperty(e, \"target\", {\n      configurable: true,\n      value: node\n    });\n  }\n  Object.defineProperty(e, \"currentTarget\", {\n    configurable: true,\n    get() {\n      return node || document;\n    }\n  });\n  if (sharedConfig.registry && !sharedConfig.done) sharedConfig.done = _$HY.done = true;\n  while (node) {\n    const handler = node[key];\n    if (handler && !node.disabled) {\n      const data = node[`${key}Data`];\n      data !== undefined ? handler.call(node, data, e) : handler.call(node, e);\n      if (e.cancelBubble) return;\n    }\n    node = node._$host || node.parentNode || node.host;\n  }\n}\nfunction insertExpression(parent, value, current, marker, unwrapArray) {\n  if (sharedConfig.context) {\n    !current && (current = [...parent.childNodes]);\n    let cleaned = [];\n    for (let i = 0; i < current.length; i++) {\n      const node = current[i];\n      if (node.nodeType === 8 && node.data.slice(0, 2) === \"!$\") node.remove();else cleaned.push(node);\n    }\n    current = cleaned;\n  }\n  while (typeof current === \"function\") current = current();\n  if (value === current) return current;\n  const t = typeof value,\n    multi = marker !== undefined;\n  parent = multi && current[0] && current[0].parentNode || parent;\n  if (t === \"string\" || t === \"number\") {\n    if (sharedConfig.context) return current;\n    if (t === \"number\") value = value.toString();\n    if (multi) {\n      let node = current[0];\n      if (node && node.nodeType === 3) {\n        node.data = value;\n      } else node = document.createTextNode(value);\n      current = cleanChildren(parent, current, marker, node);\n    } else {\n      if (current !== \"\" && typeof current === \"string\") {\n        current = parent.firstChild.data = value;\n      } else current = parent.textContent = value;\n    }\n  } else if (value == null || t === \"boolean\") {\n    if (sharedConfig.context) return current;\n    current = cleanChildren(parent, current, marker);\n  } else if (t === \"function\") {\n    createRenderEffect(() => {\n      let v = value();\n      while (typeof v === \"function\") v = v();\n      current = insertExpression(parent, v, current, marker);\n    });\n    return () => current;\n  } else if (Array.isArray(value)) {\n    const array = [];\n    const currentArray = current && Array.isArray(current);\n    if (normalizeIncomingArray(array, value, current, unwrapArray)) {\n      createRenderEffect(() => current = insertExpression(parent, array, current, marker, true));\n      return () => current;\n    }\n    if (sharedConfig.context) {\n      if (!array.length) return current;\n      for (let i = 0; i < array.length; i++) {\n        if (array[i].parentNode) return current = array;\n      }\n    }\n    if (array.length === 0) {\n      current = cleanChildren(parent, current, marker);\n      if (multi) return current;\n    } else if (currentArray) {\n      if (current.length === 0) {\n        appendNodes(parent, array, marker);\n      } else reconcileArrays(parent, current, array);\n    } else {\n      current && cleanChildren(parent);\n      appendNodes(parent, array);\n    }\n    current = array;\n  } else if (value instanceof Node) {\n    if (sharedConfig.context && value.parentNode) return current = multi ? [value] : value;\n    if (Array.isArray(current)) {\n      if (multi) return current = cleanChildren(parent, current, marker, value);\n      cleanChildren(parent, current, null, value);\n    } else if (current == null || current === \"\" || !parent.firstChild) {\n      parent.appendChild(value);\n    } else parent.replaceChild(value, parent.firstChild);\n    current = value;\n  } else console.warn(`Unrecognized value. Skipped inserting`, value);\n  return current;\n}\nfunction normalizeIncomingArray(normalized, array, current, unwrap) {\n  let dynamic = false;\n  for (let i = 0, len = array.length; i < len; i++) {\n    let item = array[i],\n      prev = current && current[i];\n    if (item instanceof Node) {\n      normalized.push(item);\n    } else if (item == null || item === true || item === false) ; else if (Array.isArray(item)) {\n      dynamic = normalizeIncomingArray(normalized, item, prev) || dynamic;\n    } else if ((typeof item) === \"function\") {\n      if (unwrap) {\n        while (typeof item === \"function\") item = item();\n        dynamic = normalizeIncomingArray(normalized, Array.isArray(item) ? item : [item], Array.isArray(prev) ? prev : [prev]) || dynamic;\n      } else {\n        normalized.push(item);\n        dynamic = true;\n      }\n    } else {\n      const value = String(item);\n      if (prev && prev.nodeType === 3) {\n        prev.data = value;\n        normalized.push(prev);\n      } else normalized.push(document.createTextNode(value));\n    }\n  }\n  return dynamic;\n}\nfunction appendNodes(parent, array, marker = null) {\n  for (let i = 0, len = array.length; i < len; i++) parent.insertBefore(array[i], marker);\n}\nfunction cleanChildren(parent, current, marker, replacement) {\n  if (marker === undefined) return parent.textContent = \"\";\n  const node = replacement || document.createTextNode(\"\");\n  if (current.length) {\n    let inserted = false;\n    for (let i = current.length - 1; i >= 0; i--) {\n      const el = current[i];\n      if (node !== el) {\n        const isParent = el.parentNode === parent;\n        if (!inserted && !i) isParent ? parent.replaceChild(node, el) : parent.insertBefore(node, marker);else isParent && el.remove();\n      } else inserted = true;\n    }\n  } else parent.insertBefore(node, marker);\n  return [node];\n}\nfunction gatherHydratable(element, root) {\n  const templates = element.querySelectorAll(`*[data-hk]`);\n  for (let i = 0; i < templates.length; i++) {\n    const node = templates[i];\n    const key = node.getAttribute(\"data-hk\");\n    if ((!root || key.startsWith(root)) && !sharedConfig.registry.has(key)) sharedConfig.registry.set(key, node);\n  }\n}\nfunction getHydrationKey() {\n  const hydrate = sharedConfig.context;\n  return `${hydrate.id}${hydrate.count++}`;\n}\nfunction NoHydration(props) {\n  return sharedConfig.context ? undefined : props.children;\n}\nfunction Hydration(props) {\n  return props.children;\n}\nfunction voidFn() {}\n\nfunction throwInBrowser(func) {\n  const err = new Error(`${func.name} is not supported in the browser, returning undefined`);\n  console.error(err);\n}\nfunction renderToString(fn, options) {\n  throwInBrowser(renderToString);\n}\nfunction renderToStringAsync(fn, options) {\n  throwInBrowser(renderToStringAsync);\n}\nfunction renderToStream(fn, options) {\n  throwInBrowser(renderToStream);\n}\nfunction ssr(template, ...nodes) {}\nfunction ssrElement(name, props, children, needsId) {}\nfunction ssrClassList(value) {}\nfunction ssrStyle(value) {}\nfunction ssrAttribute(key, value) {}\nfunction ssrHydrationKey() {}\nfunction resolveSSRNode(node) {}\nfunction escape(html) {}\nfunction ssrSpread(props, isSVG, skipChildren) {}\n\nconst isServer = false;\nconst isDev = false;\nconst SVG_NAMESPACE = \"http://www.w3.org/2000/svg\";\nfunction createElement(tagName, isSVG = false) {\n  return isSVG ? document.createElementNS(SVG_NAMESPACE, tagName) : document.createElement(tagName);\n}\nconst hydrate = (...args) => {\n  enableHydration();\n  return hydrate$1(...args);\n};\nfunction Portal(props) {\n  const {\n      useShadow\n    } = props,\n    marker = document.createTextNode(\"\"),\n    mount = () => props.mount || document.body,\n    owner = getOwner();\n  let content;\n  let hydrating = !!sharedConfig.context;\n  createEffect(() => {\n    if (hydrating) getOwner().user = hydrating = false;\n    content || (content = runWithOwner(owner, () => props.children));\n    const el = mount();\n    if (el instanceof HTMLHeadElement) {\n      const [clean, setClean] = createSignal(false);\n      const cleanup = () => setClean(true);\n      createRoot(dispose => insert(el, () => !clean() ? content : dispose(), null));\n      onCleanup(cleanup);\n    } else {\n      const container = createElement(props.isSVG ? \"g\" : \"div\", props.isSVG),\n        renderRoot = useShadow && container.attachShadow ? container.attachShadow({\n          mode: \"open\"\n        }) : container;\n      Object.defineProperty(container, \"_$host\", {\n        get() {\n          return marker.parentNode;\n        },\n        configurable: true\n      });\n      insert(renderRoot, content);\n      el.appendChild(container);\n      props.ref && props.ref(container);\n      onCleanup(() => el.removeChild(container));\n    }\n  }, undefined, {\n    render: !hydrating\n  });\n  return marker;\n}\nfunction Dynamic(props) {\n  const [p, others] = splitProps(props, [\"component\"]);\n  const cached = createMemo(() => p.component);\n  return createMemo(() => {\n    const component = cached();\n    switch (typeof component) {\n      case \"function\":\n        Object.assign(component, {\n          [$DEVCOMP]: true\n        });\n        return untrack(() => component(others));\n      case \"string\":\n        const isSvg = SVGElements.has(component);\n        const el = sharedConfig.context ? getNextElement() : createElement(component, isSvg);\n        spread(el, others, isSvg);\n        return el;\n    }\n  });\n}\n\nexport { Aliases, voidFn as Assets, ChildProperties, DOMElements, DelegatedEvents, Dynamic, Hydration, voidFn as HydrationScript, NoHydration, Portal, Properties, SVGElements, SVGNamespace, addEventListener, assign, classList, className, clearDelegatedEvents, delegateEvents, dynamicProperty, escape, voidFn as generateHydrationScript, voidFn as getAssets, getHydrationKey, getNextElement, getNextMarker, getNextMatch, getPropAlias, hydrate, innerHTML, insert, isDev, isServer, render, renderToStream, renderToString, renderToStringAsync, resolveSSRNode, runHydrationEvents, setAttribute, setAttributeNS, spread, ssr, ssrAttribute, ssrClassList, ssrElement, ssrHydrationKey, ssrSpread, ssrStyle, style, template, use, voidFn as useAssets };\n","let taskIdCounter = 1,\n  isCallbackScheduled = false,\n  isPerformingWork = false,\n  taskQueue = [],\n  currentTask = null,\n  shouldYieldToHost = null,\n  yieldInterval = 5,\n  deadline = 0,\n  maxYieldInterval = 300,\n  scheduleCallback = null,\n  scheduledCallback = null;\nconst maxSigned31BitInt = 1073741823;\nfunction setupScheduler() {\n  const channel = new MessageChannel(),\n    port = channel.port2;\n  scheduleCallback = () => port.postMessage(null);\n  channel.port1.onmessage = () => {\n    if (scheduledCallback !== null) {\n      const currentTime = performance.now();\n      deadline = currentTime + yieldInterval;\n      const hasTimeRemaining = true;\n      try {\n        const hasMoreWork = scheduledCallback(hasTimeRemaining, currentTime);\n        if (!hasMoreWork) {\n          scheduledCallback = null;\n        } else port.postMessage(null);\n      } catch (error) {\n        port.postMessage(null);\n        throw error;\n      }\n    }\n  };\n  if (navigator && navigator.scheduling && navigator.scheduling.isInputPending) {\n    const scheduling = navigator.scheduling;\n    shouldYieldToHost = () => {\n      const currentTime = performance.now();\n      if (currentTime >= deadline) {\n        if (scheduling.isInputPending()) {\n          return true;\n        }\n        return currentTime >= maxYieldInterval;\n      } else {\n        return false;\n      }\n    };\n  } else {\n    shouldYieldToHost = () => performance.now() >= deadline;\n  }\n}\nfunction enqueue(taskQueue, task) {\n  function findIndex() {\n    let m = 0;\n    let n = taskQueue.length - 1;\n    while (m <= n) {\n      const k = n + m >> 1;\n      const cmp = task.expirationTime - taskQueue[k].expirationTime;\n      if (cmp > 0) m = k + 1;else if (cmp < 0) n = k - 1;else return k;\n    }\n    return m;\n  }\n  taskQueue.splice(findIndex(), 0, task);\n}\nfunction requestCallback(fn, options) {\n  if (!scheduleCallback) setupScheduler();\n  let startTime = performance.now(),\n    timeout = maxSigned31BitInt;\n  if (options && options.timeout) timeout = options.timeout;\n  const newTask = {\n    id: taskIdCounter++,\n    fn,\n    startTime,\n    expirationTime: startTime + timeout\n  };\n  enqueue(taskQueue, newTask);\n  if (!isCallbackScheduled && !isPerformingWork) {\n    isCallbackScheduled = true;\n    scheduledCallback = flushWork;\n    scheduleCallback();\n  }\n  return newTask;\n}\nfunction cancelCallback(task) {\n  task.fn = null;\n}\nfunction flushWork(hasTimeRemaining, initialTime) {\n  isCallbackScheduled = false;\n  isPerformingWork = true;\n  try {\n    return workLoop(hasTimeRemaining, initialTime);\n  } finally {\n    currentTask = null;\n    isPerformingWork = false;\n  }\n}\nfunction workLoop(hasTimeRemaining, initialTime) {\n  let currentTime = initialTime;\n  currentTask = taskQueue[0] || null;\n  while (currentTask !== null) {\n    if (currentTask.expirationTime > currentTime && (!hasTimeRemaining || shouldYieldToHost())) {\n      break;\n    }\n    const callback = currentTask.fn;\n    if (callback !== null) {\n      currentTask.fn = null;\n      const didUserCallbackTimeout = currentTask.expirationTime <= currentTime;\n      callback(didUserCallbackTimeout);\n      currentTime = performance.now();\n      if (currentTask === taskQueue[0]) {\n        taskQueue.shift();\n      }\n    } else taskQueue.shift();\n    currentTask = taskQueue[0] || null;\n  }\n  return currentTask !== null;\n}\n\nconst sharedConfig = {\n  context: undefined,\n  registry: undefined\n};\nfunction setHydrateContext(context) {\n  sharedConfig.context = context;\n}\nfunction nextHydrateContext() {\n  return {\n    ...sharedConfig.context,\n    id: `${sharedConfig.context.id}${sharedConfig.context.count++}-`,\n    count: 0\n  };\n}\n\nconst equalFn = (a, b) => a === b;\nconst $PROXY = Symbol(\"solid-proxy\");\nconst $TRACK = Symbol(\"solid-track\");\nconst $DEVCOMP = Symbol(\"solid-dev-component\");\nconst signalOptions = {\n  equals: equalFn\n};\nlet ERROR = null;\nlet runEffects = runQueue;\nconst STALE = 1;\nconst PENDING = 2;\nconst UNOWNED = {\n  owned: null,\n  cleanups: null,\n  context: null,\n  owner: null\n};\nconst NO_INIT = {};\nvar Owner = null;\nlet Transition = null;\nlet Scheduler = null;\nlet ExternalSourceFactory = null;\nlet Listener = null;\nlet Updates = null;\nlet Effects = null;\nlet ExecCount = 0;\nconst [transPending, setTransPending] = /*@__PURE__*/createSignal(false);\nfunction createRoot(fn, detachedOwner) {\n  const listener = Listener,\n    owner = Owner,\n    unowned = fn.length === 0,\n    root = unowned ? UNOWNED : {\n      owned: null,\n      cleanups: null,\n      context: null,\n      owner: detachedOwner === undefined ? owner : detachedOwner\n    },\n    updateFn = unowned ? fn : () => fn(() => untrack(() => cleanNode(root)));\n  Owner = root;\n  Listener = null;\n  try {\n    return runUpdates(updateFn, true);\n  } finally {\n    Listener = listener;\n    Owner = owner;\n  }\n}\nfunction createSignal(value, options) {\n  options = options ? Object.assign({}, signalOptions, options) : signalOptions;\n  const s = {\n    value,\n    observers: null,\n    observerSlots: null,\n    comparator: options.equals || undefined\n  };\n  const setter = value => {\n    if (typeof value === \"function\") {\n      if (Transition && Transition.running && Transition.sources.has(s)) value = value(s.tValue);else value = value(s.value);\n    }\n    return writeSignal(s, value);\n  };\n  return [readSignal.bind(s), setter];\n}\nfunction createComputed(fn, value, options) {\n  const c = createComputation(fn, value, true, STALE);\n  if (Scheduler && Transition && Transition.running) Updates.push(c);else updateComputation(c);\n}\nfunction createRenderEffect(fn, value, options) {\n  const c = createComputation(fn, value, false, STALE);\n  if (Scheduler && Transition && Transition.running) Updates.push(c);else updateComputation(c);\n}\nfunction createEffect(fn, value, options) {\n  runEffects = runUserEffects;\n  const c = createComputation(fn, value, false, STALE),\n    s = SuspenseContext && lookup(Owner, SuspenseContext.id);\n  if (s) c.suspense = s;\n  if (!options || !options.render) c.user = true;\n  Effects ? Effects.push(c) : updateComputation(c);\n}\nfunction createReaction(onInvalidate, options) {\n  let fn;\n  const c = createComputation(() => {\n      fn ? fn() : untrack(onInvalidate);\n      fn = undefined;\n    }, undefined, false, 0),\n    s = SuspenseContext && lookup(Owner, SuspenseContext.id);\n  if (s) c.suspense = s;\n  c.user = true;\n  return tracking => {\n    fn = tracking;\n    updateComputation(c);\n  };\n}\nfunction createMemo(fn, value, options) {\n  options = options ? Object.assign({}, signalOptions, options) : signalOptions;\n  const c = createComputation(fn, value, true, 0);\n  c.observers = null;\n  c.observerSlots = null;\n  c.comparator = options.equals || undefined;\n  if (Scheduler && Transition && Transition.running) {\n    c.tState = STALE;\n    Updates.push(c);\n  } else updateComputation(c);\n  return readSignal.bind(c);\n}\nfunction createResource(pSource, pFetcher, pOptions) {\n  let source;\n  let fetcher;\n  let options;\n  if (arguments.length === 2 && typeof pFetcher === \"object\" || arguments.length === 1) {\n    source = true;\n    fetcher = pSource;\n    options = pFetcher || {};\n  } else {\n    source = pSource;\n    fetcher = pFetcher;\n    options = pOptions || {};\n  }\n  let pr = null,\n    initP = NO_INIT,\n    id = null,\n    loadedUnderTransition = false,\n    scheduled = false,\n    resolved = (\"initialValue\" in options),\n    dynamic = typeof source === \"function\" && createMemo(source);\n  const contexts = new Set(),\n    [value, setValue] = (options.storage || createSignal)(options.initialValue),\n    [error, setError] = createSignal(undefined),\n    [track, trigger] = createSignal(undefined, {\n      equals: false\n    }),\n    [state, setState] = createSignal(resolved ? \"ready\" : \"unresolved\");\n  if (sharedConfig.context) {\n    id = `${sharedConfig.context.id}${sharedConfig.context.count++}`;\n    let v;\n    if (options.ssrLoadFrom === \"initial\") initP = options.initialValue;else if (sharedConfig.load && (v = sharedConfig.load(id))) initP = v[0];\n  }\n  function loadEnd(p, v, error, key) {\n    if (pr === p) {\n      pr = null;\n      resolved = true;\n      if ((p === initP || v === initP) && options.onHydrated) queueMicrotask(() => options.onHydrated(key, {\n        value: v\n      }));\n      initP = NO_INIT;\n      if (Transition && p && loadedUnderTransition) {\n        Transition.promises.delete(p);\n        loadedUnderTransition = false;\n        runUpdates(() => {\n          Transition.running = true;\n          completeLoad(v, error);\n        }, false);\n      } else completeLoad(v, error);\n    }\n    return v;\n  }\n  function completeLoad(v, err) {\n    runUpdates(() => {\n      if (err === undefined) setValue(() => v);\n      setState(err !== undefined ? \"errored\" : \"ready\");\n      setError(err);\n      for (const c of contexts.keys()) c.decrement();\n      contexts.clear();\n    }, false);\n  }\n  function read() {\n    const c = SuspenseContext && lookup(Owner, SuspenseContext.id),\n      v = value(),\n      err = error();\n    if (err !== undefined && !pr) throw err;\n    if (Listener && !Listener.user && c) {\n      createComputed(() => {\n        track();\n        if (pr) {\n          if (c.resolved && Transition && loadedUnderTransition) Transition.promises.add(pr);else if (!contexts.has(c)) {\n            c.increment();\n            contexts.add(c);\n          }\n        }\n      });\n    }\n    return v;\n  }\n  function load(refetching = true) {\n    if (refetching !== false && scheduled) return;\n    scheduled = false;\n    const lookup = dynamic ? dynamic() : source;\n    loadedUnderTransition = Transition && Transition.running;\n    if (lookup == null || lookup === false) {\n      loadEnd(pr, untrack(value));\n      return;\n    }\n    if (Transition && pr) Transition.promises.delete(pr);\n    const p = initP !== NO_INIT ? initP : untrack(() => fetcher(lookup, {\n      value: value(),\n      refetching\n    }));\n    if (typeof p !== \"object\" || !(p && \"then\" in p)) {\n      loadEnd(pr, p, undefined, lookup);\n      return p;\n    }\n    pr = p;\n    scheduled = true;\n    queueMicrotask(() => scheduled = false);\n    runUpdates(() => {\n      setState(resolved ? \"refreshing\" : \"pending\");\n      trigger();\n    }, false);\n    return p.then(v => loadEnd(p, v, undefined, lookup), e => loadEnd(p, undefined, castError(e), lookup));\n  }\n  Object.defineProperties(read, {\n    state: {\n      get: () => state()\n    },\n    error: {\n      get: () => error()\n    },\n    loading: {\n      get() {\n        const s = state();\n        return s === \"pending\" || s === \"refreshing\";\n      }\n    },\n    latest: {\n      get() {\n        if (!resolved) return read();\n        const err = error();\n        if (err && !pr) throw err;\n        return value();\n      }\n    }\n  });\n  if (dynamic) createComputed(() => load(false));else load(false);\n  return [read, {\n    refetch: load,\n    mutate: setValue\n  }];\n}\nfunction createDeferred(source, options) {\n  let t,\n    timeout = options ? options.timeoutMs : undefined;\n  const node = createComputation(() => {\n    if (!t || !t.fn) t = requestCallback(() => setDeferred(() => node.value), timeout !== undefined ? {\n      timeout\n    } : undefined);\n    return source();\n  }, undefined, true);\n  const [deferred, setDeferred] = createSignal(node.value, options);\n  updateComputation(node);\n  setDeferred(() => node.value);\n  return deferred;\n}\nfunction createSelector(source, fn = equalFn, options) {\n  const subs = new Map();\n  const node = createComputation(p => {\n    const v = source();\n    for (const [key, val] of subs.entries()) if (fn(key, v) !== fn(key, p)) {\n      for (const c of val.values()) {\n        c.state = STALE;\n        if (c.pure) Updates.push(c);else Effects.push(c);\n      }\n    }\n    return v;\n  }, undefined, true, STALE);\n  updateComputation(node);\n  return key => {\n    const listener = Listener;\n    if (listener) {\n      let l;\n      if (l = subs.get(key)) l.add(listener);else subs.set(key, l = new Set([listener]));\n      onCleanup(() => {\n        l.delete(listener);\n        !l.size && subs.delete(key);\n      });\n    }\n    return fn(key, Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value);\n  };\n}\nfunction batch(fn) {\n  return runUpdates(fn, false);\n}\nfunction untrack(fn) {\n  if (Listener === null) return fn();\n  const listener = Listener;\n  Listener = null;\n  try {\n    return fn();\n  } finally {\n    Listener = listener;\n  }\n}\nfunction on(deps, fn, options) {\n  const isArray = Array.isArray(deps);\n  let prevInput;\n  let defer = options && options.defer;\n  return prevValue => {\n    let input;\n    if (isArray) {\n      input = Array(deps.length);\n      for (let i = 0; i < deps.length; i++) input[i] = deps[i]();\n    } else input = deps();\n    if (defer) {\n      defer = false;\n      return undefined;\n    }\n    const result = untrack(() => fn(input, prevInput, prevValue));\n    prevInput = input;\n    return result;\n  };\n}\nfunction onMount(fn) {\n  createEffect(() => untrack(fn));\n}\nfunction onCleanup(fn) {\n  if (Owner === null) ;else if (Owner.cleanups === null) Owner.cleanups = [fn];else Owner.cleanups.push(fn);\n  return fn;\n}\nfunction catchError(fn, handler) {\n  ERROR || (ERROR = Symbol(\"error\"));\n  Owner = createComputation(undefined, undefined, true);\n  Owner.context = {\n    [ERROR]: [handler]\n  };\n  if (Transition && Transition.running) Transition.sources.add(Owner);\n  try {\n    return fn();\n  } catch (err) {\n    handleError(err);\n  } finally {\n    Owner = Owner.owner;\n  }\n}\nfunction onError(fn) {\n  ERROR || (ERROR = Symbol(\"error\"));\n  if (Owner === null) ;else if (Owner.context === null) Owner.context = {\n    [ERROR]: [fn]\n  };else if (!Owner.context[ERROR]) Owner.context[ERROR] = [fn];else Owner.context[ERROR].push(fn);\n}\nfunction getListener() {\n  return Listener;\n}\nfunction getOwner() {\n  return Owner;\n}\nfunction runWithOwner(o, fn) {\n  const prev = Owner;\n  const prevListener = Listener;\n  Owner = o;\n  Listener = null;\n  try {\n    return runUpdates(fn, true);\n  } catch (err) {\n    handleError(err);\n  } finally {\n    Owner = prev;\n    Listener = prevListener;\n  }\n}\nfunction enableScheduling(scheduler = requestCallback) {\n  Scheduler = scheduler;\n}\nfunction startTransition(fn) {\n  if (Transition && Transition.running) {\n    fn();\n    return Transition.done;\n  }\n  const l = Listener;\n  const o = Owner;\n  return Promise.resolve().then(() => {\n    Listener = l;\n    Owner = o;\n    let t;\n    if (Scheduler || SuspenseContext) {\n      t = Transition || (Transition = {\n        sources: new Set(),\n        effects: [],\n        promises: new Set(),\n        disposed: new Set(),\n        queue: new Set(),\n        running: true\n      });\n      t.done || (t.done = new Promise(res => t.resolve = res));\n      t.running = true;\n    }\n    runUpdates(fn, false);\n    Listener = Owner = null;\n    return t ? t.done : undefined;\n  });\n}\nfunction useTransition() {\n  return [transPending, startTransition];\n}\nfunction resumeEffects(e) {\n  Effects.push.apply(Effects, e);\n  e.length = 0;\n}\nfunction createContext(defaultValue, options) {\n  const id = Symbol(\"context\");\n  return {\n    id,\n    Provider: createProvider(id),\n    defaultValue\n  };\n}\nfunction useContext(context) {\n  let ctx;\n  return (ctx = lookup(Owner, context.id)) !== undefined ? ctx : context.defaultValue;\n}\nfunction children(fn) {\n  const children = createMemo(fn);\n  const memo = createMemo(() => resolveChildren(children()));\n  memo.toArray = () => {\n    const c = memo();\n    return Array.isArray(c) ? c : c != null ? [c] : [];\n  };\n  return memo;\n}\nlet SuspenseContext;\nfunction getSuspenseContext() {\n  return SuspenseContext || (SuspenseContext = createContext({}));\n}\nfunction enableExternalSource(factory) {\n  if (ExternalSourceFactory) {\n    const oldFactory = ExternalSourceFactory;\n    ExternalSourceFactory = (fn, trigger) => {\n      const oldSource = oldFactory(fn, trigger);\n      const source = factory(x => oldSource.track(x), trigger);\n      return {\n        track: x => source.track(x),\n        dispose() {\n          source.dispose();\n          oldSource.dispose();\n        }\n      };\n    };\n  } else {\n    ExternalSourceFactory = factory;\n  }\n}\nfunction readSignal() {\n  const runningTransition = Transition && Transition.running;\n  if (this.sources && (runningTransition ? this.tState : this.state)) {\n    if ((runningTransition ? this.tState : this.state) === STALE) updateComputation(this);else {\n      const updates = Updates;\n      Updates = null;\n      runUpdates(() => lookUpstream(this), false);\n      Updates = updates;\n    }\n  }\n  if (Listener) {\n    const sSlot = this.observers ? this.observers.length : 0;\n    if (!Listener.sources) {\n      Listener.sources = [this];\n      Listener.sourceSlots = [sSlot];\n    } else {\n      Listener.sources.push(this);\n      Listener.sourceSlots.push(sSlot);\n    }\n    if (!this.observers) {\n      this.observers = [Listener];\n      this.observerSlots = [Listener.sources.length - 1];\n    } else {\n      this.observers.push(Listener);\n      this.observerSlots.push(Listener.sources.length - 1);\n    }\n  }\n  if (runningTransition && Transition.sources.has(this)) return this.tValue;\n  return this.value;\n}\nfunction writeSignal(node, value, isComp) {\n  let current = Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value;\n  if (!node.comparator || !node.comparator(current, value)) {\n    if (Transition) {\n      const TransitionRunning = Transition.running;\n      if (TransitionRunning || !isComp && Transition.sources.has(node)) {\n        Transition.sources.add(node);\n        node.tValue = value;\n      }\n      if (!TransitionRunning) node.value = value;\n    } else node.value = value;\n    if (node.observers && node.observers.length) {\n      runUpdates(() => {\n        for (let i = 0; i < node.observers.length; i += 1) {\n          const o = node.observers[i];\n          const TransitionRunning = Transition && Transition.running;\n          if (TransitionRunning && Transition.disposed.has(o)) continue;\n          if (TransitionRunning ? !o.tState : !o.state) {\n            if (o.pure) Updates.push(o);else Effects.push(o);\n            if (o.observers) markDownstream(o);\n          }\n          if (!TransitionRunning) o.state = STALE;else o.tState = STALE;\n        }\n        if (Updates.length > 10e5) {\n          Updates = [];\n          if (false) ;\n          throw new Error();\n        }\n      }, false);\n    }\n  }\n  return value;\n}\nfunction updateComputation(node) {\n  if (!node.fn) return;\n  cleanNode(node);\n  const owner = Owner,\n    listener = Listener,\n    time = ExecCount;\n  Listener = Owner = node;\n  runComputation(node, Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value, time);\n  if (Transition && !Transition.running && Transition.sources.has(node)) {\n    queueMicrotask(() => {\n      runUpdates(() => {\n        Transition && (Transition.running = true);\n        Listener = Owner = node;\n        runComputation(node, node.tValue, time);\n        Listener = Owner = null;\n      }, false);\n    });\n  }\n  Listener = listener;\n  Owner = owner;\n}\nfunction runComputation(node, value, time) {\n  let nextValue;\n  try {\n    nextValue = node.fn(value);\n  } catch (err) {\n    if (node.pure) {\n      if (Transition && Transition.running) {\n        node.tState = STALE;\n        node.tOwned && node.tOwned.forEach(cleanNode);\n        node.tOwned = undefined;\n      } else {\n        node.state = STALE;\n        node.owned && node.owned.forEach(cleanNode);\n        node.owned = null;\n      }\n    }\n    node.updatedAt = time + 1;\n    return handleError(err);\n  }\n  if (!node.updatedAt || node.updatedAt <= time) {\n    if (node.updatedAt != null && \"observers\" in node) {\n      writeSignal(node, nextValue, true);\n    } else if (Transition && Transition.running && node.pure) {\n      Transition.sources.add(node);\n      node.tValue = nextValue;\n    } else node.value = nextValue;\n    node.updatedAt = time;\n  }\n}\nfunction createComputation(fn, init, pure, state = STALE, options) {\n  const c = {\n    fn,\n    state: state,\n    updatedAt: null,\n    owned: null,\n    sources: null,\n    sourceSlots: null,\n    cleanups: null,\n    value: init,\n    owner: Owner,\n    context: null,\n    pure\n  };\n  if (Transition && Transition.running) {\n    c.state = 0;\n    c.tState = state;\n  }\n  if (Owner === null) ;else if (Owner !== UNOWNED) {\n    if (Transition && Transition.running && Owner.pure) {\n      if (!Owner.tOwned) Owner.tOwned = [c];else Owner.tOwned.push(c);\n    } else {\n      if (!Owner.owned) Owner.owned = [c];else Owner.owned.push(c);\n    }\n  }\n  if (ExternalSourceFactory) {\n    const [track, trigger] = createSignal(undefined, {\n      equals: false\n    });\n    const ordinary = ExternalSourceFactory(c.fn, trigger);\n    onCleanup(() => ordinary.dispose());\n    const triggerInTransition = () => startTransition(trigger).then(() => inTransition.dispose());\n    const inTransition = ExternalSourceFactory(c.fn, triggerInTransition);\n    c.fn = x => {\n      track();\n      return Transition && Transition.running ? inTransition.track(x) : ordinary.track(x);\n    };\n  }\n  return c;\n}\nfunction runTop(node) {\n  const runningTransition = Transition && Transition.running;\n  if ((runningTransition ? node.tState : node.state) === 0) return;\n  if ((runningTransition ? node.tState : node.state) === PENDING) return lookUpstream(node);\n  if (node.suspense && untrack(node.suspense.inFallback)) return node.suspense.effects.push(node);\n  const ancestors = [node];\n  while ((node = node.owner) && (!node.updatedAt || node.updatedAt < ExecCount)) {\n    if (runningTransition && Transition.disposed.has(node)) return;\n    if (runningTransition ? node.tState : node.state) ancestors.push(node);\n  }\n  for (let i = ancestors.length - 1; i >= 0; i--) {\n    node = ancestors[i];\n    if (runningTransition) {\n      let top = node,\n        prev = ancestors[i + 1];\n      while ((top = top.owner) && top !== prev) {\n        if (Transition.disposed.has(top)) return;\n      }\n    }\n    if ((runningTransition ? node.tState : node.state) === STALE) {\n      updateComputation(node);\n    } else if ((runningTransition ? node.tState : node.state) === PENDING) {\n      const updates = Updates;\n      Updates = null;\n      runUpdates(() => lookUpstream(node, ancestors[0]), false);\n      Updates = updates;\n    }\n  }\n}\nfunction runUpdates(fn, init) {\n  if (Updates) return fn();\n  let wait = false;\n  if (!init) Updates = [];\n  if (Effects) wait = true;else Effects = [];\n  ExecCount++;\n  try {\n    const res = fn();\n    completeUpdates(wait);\n    return res;\n  } catch (err) {\n    if (!wait) Effects = null;\n    Updates = null;\n    handleError(err);\n  }\n}\nfunction completeUpdates(wait) {\n  if (Updates) {\n    if (Scheduler && Transition && Transition.running) scheduleQueue(Updates);else runQueue(Updates);\n    Updates = null;\n  }\n  if (wait) return;\n  let res;\n  if (Transition) {\n    if (!Transition.promises.size && !Transition.queue.size) {\n      const sources = Transition.sources;\n      const disposed = Transition.disposed;\n      Effects.push.apply(Effects, Transition.effects);\n      res = Transition.resolve;\n      for (const e of Effects) {\n        \"tState\" in e && (e.state = e.tState);\n        delete e.tState;\n      }\n      Transition = null;\n      runUpdates(() => {\n        for (const d of disposed) cleanNode(d);\n        for (const v of sources) {\n          v.value = v.tValue;\n          if (v.owned) {\n            for (let i = 0, len = v.owned.length; i < len; i++) cleanNode(v.owned[i]);\n          }\n          if (v.tOwned) v.owned = v.tOwned;\n          delete v.tValue;\n          delete v.tOwned;\n          v.tState = 0;\n        }\n        setTransPending(false);\n      }, false);\n    } else if (Transition.running) {\n      Transition.running = false;\n      Transition.effects.push.apply(Transition.effects, Effects);\n      Effects = null;\n      setTransPending(true);\n      return;\n    }\n  }\n  const e = Effects;\n  Effects = null;\n  if (e.length) runUpdates(() => runEffects(e), false);\n  if (res) res();\n}\nfunction runQueue(queue) {\n  for (let i = 0; i < queue.length; i++) runTop(queue[i]);\n}\nfunction scheduleQueue(queue) {\n  for (let i = 0; i < queue.length; i++) {\n    const item = queue[i];\n    const tasks = Transition.queue;\n    if (!tasks.has(item)) {\n      tasks.add(item);\n      Scheduler(() => {\n        tasks.delete(item);\n        runUpdates(() => {\n          Transition.running = true;\n          runTop(item);\n        }, false);\n        Transition && (Transition.running = false);\n      });\n    }\n  }\n}\nfunction runUserEffects(queue) {\n  let i,\n    userLength = 0;\n  for (i = 0; i < queue.length; i++) {\n    const e = queue[i];\n    if (!e.user) runTop(e);else queue[userLength++] = e;\n  }\n  if (sharedConfig.context) setHydrateContext();\n  for (i = 0; i < userLength; i++) runTop(queue[i]);\n}\nfunction lookUpstream(node, ignore) {\n  const runningTransition = Transition && Transition.running;\n  if (runningTransition) node.tState = 0;else node.state = 0;\n  for (let i = 0; i < node.sources.length; i += 1) {\n    const source = node.sources[i];\n    if (source.sources) {\n      const state = runningTransition ? source.tState : source.state;\n      if (state === STALE) {\n        if (source !== ignore && (!source.updatedAt || source.updatedAt < ExecCount)) runTop(source);\n      } else if (state === PENDING) lookUpstream(source, ignore);\n    }\n  }\n}\nfunction markDownstream(node) {\n  const runningTransition = Transition && Transition.running;\n  for (let i = 0; i < node.observers.length; i += 1) {\n    const o = node.observers[i];\n    if (runningTransition ? !o.tState : !o.state) {\n      if (runningTransition) o.tState = PENDING;else o.state = PENDING;\n      if (o.pure) Updates.push(o);else Effects.push(o);\n      o.observers && markDownstream(o);\n    }\n  }\n}\nfunction cleanNode(node) {\n  let i;\n  if (node.sources) {\n    while (node.sources.length) {\n      const source = node.sources.pop(),\n        index = node.sourceSlots.pop(),\n        obs = source.observers;\n      if (obs && obs.length) {\n        const n = obs.pop(),\n          s = source.observerSlots.pop();\n        if (index < obs.length) {\n          n.sourceSlots[s] = index;\n          obs[index] = n;\n          source.observerSlots[index] = s;\n        }\n      }\n    }\n  }\n  if (Transition && Transition.running && node.pure) {\n    if (node.tOwned) {\n      for (i = node.tOwned.length - 1; i >= 0; i--) cleanNode(node.tOwned[i]);\n      delete node.tOwned;\n    }\n    reset(node, true);\n  } else if (node.owned) {\n    for (i = node.owned.length - 1; i >= 0; i--) cleanNode(node.owned[i]);\n    node.owned = null;\n  }\n  if (node.cleanups) {\n    for (i = node.cleanups.length - 1; i >= 0; i--) node.cleanups[i]();\n    node.cleanups = null;\n  }\n  if (Transition && Transition.running) node.tState = 0;else node.state = 0;\n  node.context = null;\n}\nfunction reset(node, top) {\n  if (!top) {\n    node.tState = 0;\n    Transition.disposed.add(node);\n  }\n  if (node.owned) {\n    for (let i = 0; i < node.owned.length; i++) reset(node.owned[i]);\n  }\n}\nfunction castError(err) {\n  if (err instanceof Error) return err;\n  return new Error(typeof err === \"string\" ? err : \"Unknown error\", {\n    cause: err\n  });\n}\nfunction runErrors(fns, err) {\n  for (const f of fns) f(err);\n}\nfunction handleError(err) {\n  const fns = ERROR && lookup(Owner, ERROR);\n  if (!fns) throw err;\n  const error = castError(err);\n  if (Effects) Effects.push({\n    fn() {\n      runErrors(fns, error);\n    },\n    state: STALE\n  });else runErrors(fns, error);\n}\nfunction lookup(owner, key) {\n  return owner ? owner.context && owner.context[key] !== undefined ? owner.context[key] : lookup(owner.owner, key) : undefined;\n}\nfunction resolveChildren(children) {\n  if (typeof children === \"function\" && !children.length) return resolveChildren(children());\n  if (Array.isArray(children)) {\n    const results = [];\n    for (let i = 0; i < children.length; i++) {\n      const result = resolveChildren(children[i]);\n      Array.isArray(result) ? results.push.apply(results, result) : results.push(result);\n    }\n    return results;\n  }\n  return children;\n}\nfunction createProvider(id, options) {\n  return function provider(props) {\n    let res;\n    createRenderEffect(() => res = untrack(() => {\n      Owner.context = {\n        [id]: props.value\n      };\n      return children(() => props.children);\n    }), undefined);\n    return res;\n  };\n}\n\nfunction observable(input) {\n  return {\n    subscribe(observer) {\n      if (!(observer instanceof Object) || observer == null) {\n        throw new TypeError(\"Expected the observer to be an object.\");\n      }\n      const handler = typeof observer === \"function\" ? observer : observer.next && observer.next.bind(observer);\n      if (!handler) {\n        return {\n          unsubscribe() {}\n        };\n      }\n      const dispose = createRoot(disposer => {\n        createEffect(() => {\n          const v = input();\n          untrack(() => handler(v));\n        });\n        return disposer;\n      });\n      if (getOwner()) onCleanup(dispose);\n      return {\n        unsubscribe() {\n          dispose();\n        }\n      };\n    },\n    [Symbol.observable || \"@@observable\"]() {\n      return this;\n    }\n  };\n}\nfunction from(producer) {\n  const [s, set] = createSignal(undefined, {\n    equals: false\n  });\n  if (\"subscribe\" in producer) {\n    const unsub = producer.subscribe(v => set(() => v));\n    onCleanup(() => \"unsubscribe\" in unsub ? unsub.unsubscribe() : unsub());\n  } else {\n    const clean = producer(set);\n    onCleanup(clean);\n  }\n  return s;\n}\n\nconst FALLBACK = Symbol(\"fallback\");\nfunction dispose(d) {\n  for (let i = 0; i < d.length; i++) d[i]();\n}\nfunction mapArray(list, mapFn, options = {}) {\n  let items = [],\n    mapped = [],\n    disposers = [],\n    len = 0,\n    indexes = mapFn.length > 1 ? [] : null;\n  onCleanup(() => dispose(disposers));\n  return () => {\n    let newItems = list() || [],\n      i,\n      j;\n    newItems[$TRACK];\n    return untrack(() => {\n      let newLen = newItems.length,\n        newIndices,\n        newIndicesNext,\n        temp,\n        tempdisposers,\n        tempIndexes,\n        start,\n        end,\n        newEnd,\n        item;\n      if (newLen === 0) {\n        if (len !== 0) {\n          dispose(disposers);\n          disposers = [];\n          items = [];\n          mapped = [];\n          len = 0;\n          indexes && (indexes = []);\n        }\n        if (options.fallback) {\n          items = [FALLBACK];\n          mapped[0] = createRoot(disposer => {\n            disposers[0] = disposer;\n            return options.fallback();\n          });\n          len = 1;\n        }\n      }\n      else if (len === 0) {\n        mapped = new Array(newLen);\n        for (j = 0; j < newLen; j++) {\n          items[j] = newItems[j];\n          mapped[j] = createRoot(mapper);\n        }\n        len = newLen;\n      } else {\n        temp = new Array(newLen);\n        tempdisposers = new Array(newLen);\n        indexes && (tempIndexes = new Array(newLen));\n        for (start = 0, end = Math.min(len, newLen); start < end && items[start] === newItems[start]; start++);\n        for (end = len - 1, newEnd = newLen - 1; end >= start && newEnd >= start && items[end] === newItems[newEnd]; end--, newEnd--) {\n          temp[newEnd] = mapped[end];\n          tempdisposers[newEnd] = disposers[end];\n          indexes && (tempIndexes[newEnd] = indexes[end]);\n        }\n        newIndices = new Map();\n        newIndicesNext = new Array(newEnd + 1);\n        for (j = newEnd; j >= start; j--) {\n          item = newItems[j];\n          i = newIndices.get(item);\n          newIndicesNext[j] = i === undefined ? -1 : i;\n          newIndices.set(item, j);\n        }\n        for (i = start; i <= end; i++) {\n          item = items[i];\n          j = newIndices.get(item);\n          if (j !== undefined && j !== -1) {\n            temp[j] = mapped[i];\n            tempdisposers[j] = disposers[i];\n            indexes && (tempIndexes[j] = indexes[i]);\n            j = newIndicesNext[j];\n            newIndices.set(item, j);\n          } else disposers[i]();\n        }\n        for (j = start; j < newLen; j++) {\n          if (j in temp) {\n            mapped[j] = temp[j];\n            disposers[j] = tempdisposers[j];\n            if (indexes) {\n              indexes[j] = tempIndexes[j];\n              indexes[j](j);\n            }\n          } else mapped[j] = createRoot(mapper);\n        }\n        mapped = mapped.slice(0, len = newLen);\n        items = newItems.slice(0);\n      }\n      return mapped;\n    });\n    function mapper(disposer) {\n      disposers[j] = disposer;\n      if (indexes) {\n        const [s, set] = createSignal(j);\n        indexes[j] = set;\n        return mapFn(newItems[j], s);\n      }\n      return mapFn(newItems[j]);\n    }\n  };\n}\nfunction indexArray(list, mapFn, options = {}) {\n  let items = [],\n    mapped = [],\n    disposers = [],\n    signals = [],\n    len = 0,\n    i;\n  onCleanup(() => dispose(disposers));\n  return () => {\n    const newItems = list() || [];\n    newItems[$TRACK];\n    return untrack(() => {\n      if (newItems.length === 0) {\n        if (len !== 0) {\n          dispose(disposers);\n          disposers = [];\n          items = [];\n          mapped = [];\n          len = 0;\n          signals = [];\n        }\n        if (options.fallback) {\n          items = [FALLBACK];\n          mapped[0] = createRoot(disposer => {\n            disposers[0] = disposer;\n            return options.fallback();\n          });\n          len = 1;\n        }\n        return mapped;\n      }\n      if (items[0] === FALLBACK) {\n        disposers[0]();\n        disposers = [];\n        items = [];\n        mapped = [];\n        len = 0;\n      }\n      for (i = 0; i < newItems.length; i++) {\n        if (i < items.length && items[i] !== newItems[i]) {\n          signals[i](() => newItems[i]);\n        } else if (i >= items.length) {\n          mapped[i] = createRoot(mapper);\n        }\n      }\n      for (; i < items.length; i++) {\n        disposers[i]();\n      }\n      len = signals.length = disposers.length = newItems.length;\n      items = newItems.slice(0);\n      return mapped = mapped.slice(0, len);\n    });\n    function mapper(disposer) {\n      disposers[i] = disposer;\n      const [s, set] = createSignal(newItems[i]);\n      signals[i] = set;\n      return mapFn(s, i);\n    }\n  };\n}\n\nlet hydrationEnabled = false;\nfunction enableHydration() {\n  hydrationEnabled = true;\n}\nfunction createComponent(Comp, props) {\n  if (hydrationEnabled) {\n    if (sharedConfig.context) {\n      const c = sharedConfig.context;\n      setHydrateContext(nextHydrateContext());\n      const r = untrack(() => Comp(props || {}));\n      setHydrateContext(c);\n      return r;\n    }\n  }\n  return untrack(() => Comp(props || {}));\n}\nfunction trueFn() {\n  return true;\n}\nconst propTraps = {\n  get(_, property, receiver) {\n    if (property === $PROXY) return receiver;\n    return _.get(property);\n  },\n  has(_, property) {\n    if (property === $PROXY) return true;\n    return _.has(property);\n  },\n  set: trueFn,\n  deleteProperty: trueFn,\n  getOwnPropertyDescriptor(_, property) {\n    return {\n      configurable: true,\n      enumerable: true,\n      get() {\n        return _.get(property);\n      },\n      set: trueFn,\n      deleteProperty: trueFn\n    };\n  },\n  ownKeys(_) {\n    return _.keys();\n  }\n};\nfunction resolveSource(s) {\n  return !(s = typeof s === \"function\" ? s() : s) ? {} : s;\n}\nfunction mergeProps(...sources) {\n  let proxy = false;\n  for (let i = 0; i < sources.length; i++) {\n    const s = sources[i];\n    proxy = proxy || !!s && $PROXY in s;\n    sources[i] = typeof s === \"function\" ? (proxy = true, createMemo(s)) : s;\n  }\n  if (proxy) {\n    return new Proxy({\n      get(property) {\n        for (let i = sources.length - 1; i >= 0; i--) {\n          const v = resolveSource(sources[i])[property];\n          if (v !== undefined) return v;\n        }\n      },\n      has(property) {\n        for (let i = sources.length - 1; i >= 0; i--) {\n          if (property in resolveSource(sources[i])) return true;\n        }\n        return false;\n      },\n      keys() {\n        const keys = [];\n        for (let i = 0; i < sources.length; i++) keys.push(...Object.keys(resolveSource(sources[i])));\n        return [...new Set(keys)];\n      }\n    }, propTraps);\n  }\n  const target = {};\n  for (let i = sources.length - 1; i >= 0; i--) {\n    if (sources[i]) {\n      const descriptors = Object.getOwnPropertyDescriptors(sources[i]);\n      for (const key in descriptors) {\n        if (key in target) continue;\n        Object.defineProperty(target, key, {\n          enumerable: true,\n          get() {\n            for (let i = sources.length - 1; i >= 0; i--) {\n              const v = (sources[i] || {})[key];\n              if (v !== undefined) return v;\n            }\n          }\n        });\n      }\n    }\n  }\n  return target;\n}\nfunction splitProps(props, ...keys) {\n  const blocked = new Set(keys.flat());\n  if ($PROXY in props) {\n    const res = keys.map(k => {\n      return new Proxy({\n        get(property) {\n          return k.includes(property) ? props[property] : undefined;\n        },\n        has(property) {\n          return k.includes(property) && property in props;\n        },\n        keys() {\n          return k.filter(property => property in props);\n        }\n      }, propTraps);\n    });\n    res.push(new Proxy({\n      get(property) {\n        return blocked.has(property) ? undefined : props[property];\n      },\n      has(property) {\n        return blocked.has(property) ? false : property in props;\n      },\n      keys() {\n        return Object.keys(props).filter(k => !blocked.has(k));\n      }\n    }, propTraps));\n    return res;\n  }\n  const descriptors = Object.getOwnPropertyDescriptors(props);\n  keys.push(Object.keys(descriptors).filter(k => !blocked.has(k)));\n  return keys.map(k => {\n    const clone = {};\n    for (let i = 0; i < k.length; i++) {\n      const key = k[i];\n      if (!(key in props)) continue;\n      Object.defineProperty(clone, key, descriptors[key] ? descriptors[key] : {\n        get() {\n          return props[key];\n        },\n        set() {\n          return true;\n        },\n        enumerable: true\n      });\n    }\n    return clone;\n  });\n}\nfunction lazy(fn) {\n  let comp;\n  let p;\n  const wrap = props => {\n    const ctx = sharedConfig.context;\n    if (ctx) {\n      const [s, set] = createSignal();\n      (p || (p = fn())).then(mod => {\n        setHydrateContext(ctx);\n        set(() => mod.default);\n        setHydrateContext();\n      });\n      comp = s;\n    } else if (!comp) {\n      const [s] = createResource(() => (p || (p = fn())).then(mod => mod.default));\n      comp = s;\n    }\n    let Comp;\n    return createMemo(() => (Comp = comp()) && untrack(() => {\n      if (false) ;\n      if (!ctx) return Comp(props);\n      const c = sharedConfig.context;\n      setHydrateContext(ctx);\n      const r = Comp(props);\n      setHydrateContext(c);\n      return r;\n    }));\n  };\n  wrap.preload = () => p || ((p = fn()).then(mod => comp = () => mod.default), p);\n  return wrap;\n}\nlet counter = 0;\nfunction createUniqueId() {\n  const ctx = sharedConfig.context;\n  return ctx ? `${ctx.id}${ctx.count++}` : `cl-${counter++}`;\n}\n\nconst narrowedError = name => `Stale read from <${name}>.`;\nfunction For(props) {\n  const fallback = \"fallback\" in props && {\n    fallback: () => props.fallback\n  };\n  return createMemo(mapArray(() => props.each, props.children, fallback || undefined));\n}\nfunction Index(props) {\n  const fallback = \"fallback\" in props && {\n    fallback: () => props.fallback\n  };\n  return createMemo(indexArray(() => props.each, props.children, fallback || undefined));\n}\nfunction Show(props) {\n  const keyed = props.keyed;\n  const condition = createMemo(() => props.when, undefined, {\n    equals: (a, b) => keyed ? a === b : !a === !b\n  });\n  return createMemo(() => {\n    const c = condition();\n    if (c) {\n      const child = props.children;\n      const fn = typeof child === \"function\" && child.length > 0;\n      return fn ? untrack(() => child(keyed ? c : () => {\n        if (!untrack(condition)) throw narrowedError(\"Show\");\n        return props.when;\n      })) : child;\n    }\n    return props.fallback;\n  }, undefined, undefined);\n}\nfunction Switch(props) {\n  let keyed = false;\n  const equals = (a, b) => a[0] === b[0] && (keyed ? a[1] === b[1] : !a[1] === !b[1]) && a[2] === b[2];\n  const conditions = children(() => props.children),\n    evalConditions = createMemo(() => {\n      let conds = conditions();\n      if (!Array.isArray(conds)) conds = [conds];\n      for (let i = 0; i < conds.length; i++) {\n        const c = conds[i].when;\n        if (c) {\n          keyed = !!conds[i].keyed;\n          return [i, c, conds[i]];\n        }\n      }\n      return [-1];\n    }, undefined, {\n      equals\n    });\n  return createMemo(() => {\n    const [index, when, cond] = evalConditions();\n    if (index < 0) return props.fallback;\n    const c = cond.children;\n    const fn = typeof c === \"function\" && c.length > 0;\n    return fn ? untrack(() => c(keyed ? when : () => {\n      if (untrack(evalConditions)[0] !== index) throw narrowedError(\"Match\");\n      return cond.when;\n    })) : c;\n  }, undefined, undefined);\n}\nfunction Match(props) {\n  return props;\n}\nlet Errors;\nfunction resetErrorBoundaries() {\n  Errors && [...Errors].forEach(fn => fn());\n}\nfunction ErrorBoundary(props) {\n  let err;\n  let v;\n  if (sharedConfig.context && sharedConfig.load && (v = sharedConfig.load(sharedConfig.context.id + sharedConfig.context.count))) err = v[0];\n  const [errored, setErrored] = createSignal(err, undefined);\n  Errors || (Errors = new Set());\n  Errors.add(setErrored);\n  onCleanup(() => Errors.delete(setErrored));\n  return createMemo(() => {\n    let e;\n    if (e = errored()) {\n      const f = props.fallback;\n      return typeof f === \"function\" && f.length ? untrack(() => f(e, () => setErrored())) : f;\n    }\n    return catchError(() => props.children, setErrored);\n  }, undefined, undefined);\n}\n\nconst suspenseListEquals = (a, b) => a.showContent === b.showContent && a.showFallback === b.showFallback;\nconst SuspenseListContext = createContext();\nfunction SuspenseList(props) {\n  let [wrapper, setWrapper] = createSignal(() => ({\n      inFallback: false\n    })),\n    show;\n  const listContext = useContext(SuspenseListContext);\n  const [registry, setRegistry] = createSignal([]);\n  if (listContext) {\n    show = listContext.register(createMemo(() => wrapper()().inFallback));\n  }\n  const resolved = createMemo(prev => {\n    const reveal = props.revealOrder,\n      tail = props.tail,\n      {\n        showContent = true,\n        showFallback = true\n      } = show ? show() : {},\n      reg = registry(),\n      reverse = reveal === \"backwards\";\n    if (reveal === \"together\") {\n      const all = reg.every(inFallback => !inFallback());\n      const res = reg.map(() => ({\n        showContent: all && showContent,\n        showFallback\n      }));\n      res.inFallback = !all;\n      return res;\n    }\n    let stop = false;\n    let inFallback = prev.inFallback;\n    const res = [];\n    for (let i = 0, len = reg.length; i < len; i++) {\n      const n = reverse ? len - i - 1 : i,\n        s = reg[n]();\n      if (!stop && !s) {\n        res[n] = {\n          showContent,\n          showFallback\n        };\n      } else {\n        const next = !stop;\n        if (next) inFallback = true;\n        res[n] = {\n          showContent: next,\n          showFallback: !tail || next && tail === \"collapsed\" ? showFallback : false\n        };\n        stop = true;\n      }\n    }\n    if (!stop) inFallback = false;\n    res.inFallback = inFallback;\n    return res;\n  }, {\n    inFallback: false\n  });\n  setWrapper(() => resolved);\n  return createComponent(SuspenseListContext.Provider, {\n    value: {\n      register: inFallback => {\n        let index;\n        setRegistry(registry => {\n          index = registry.length;\n          return [...registry, inFallback];\n        });\n        return createMemo(() => resolved()[index], undefined, {\n          equals: suspenseListEquals\n        });\n      }\n    },\n    get children() {\n      return props.children;\n    }\n  });\n}\nfunction Suspense(props) {\n  let counter = 0,\n    show,\n    ctx,\n    p,\n    flicker,\n    error;\n  const [inFallback, setFallback] = createSignal(false),\n    SuspenseContext = getSuspenseContext(),\n    store = {\n      increment: () => {\n        if (++counter === 1) setFallback(true);\n      },\n      decrement: () => {\n        if (--counter === 0) setFallback(false);\n      },\n      inFallback,\n      effects: [],\n      resolved: false\n    },\n    owner = getOwner();\n  if (sharedConfig.context && sharedConfig.load) {\n    const key = sharedConfig.context.id + sharedConfig.context.count;\n    let ref = sharedConfig.load(key);\n    if (ref && (p = ref[0]) && p !== \"$$f\") {\n      if (typeof p !== \"object\" || !(\"then\" in p)) p = Promise.resolve(p);\n      const [s, set] = createSignal(undefined, {\n        equals: false\n      });\n      flicker = s;\n      p.then(err => {\n        if (err || sharedConfig.done) {\n          err && (error = err);\n          return set();\n        }\n        sharedConfig.gather(key);\n        setHydrateContext(ctx);\n        set();\n        setHydrateContext();\n      });\n    }\n  }\n  const listContext = useContext(SuspenseListContext);\n  if (listContext) show = listContext.register(store.inFallback);\n  let dispose;\n  onCleanup(() => dispose && dispose());\n  return createComponent(SuspenseContext.Provider, {\n    value: store,\n    get children() {\n      return createMemo(() => {\n        if (error) throw error;\n        ctx = sharedConfig.context;\n        if (flicker) {\n          flicker();\n          return flicker = undefined;\n        }\n        if (ctx && p === \"$$f\") setHydrateContext();\n        const rendered = createMemo(() => props.children);\n        return createMemo(prev => {\n          const inFallback = store.inFallback(),\n            {\n              showContent = true,\n              showFallback = true\n            } = show ? show() : {};\n          if ((!inFallback || p && p !== \"$$f\") && showContent) {\n            store.resolved = true;\n            dispose && dispose();\n            dispose = ctx = p = undefined;\n            resumeEffects(store.effects);\n            return rendered();\n          }\n          if (!showFallback) return;\n          if (dispose) return prev;\n          return createRoot(disposer => {\n            dispose = disposer;\n            if (ctx) {\n              setHydrateContext({\n                id: ctx.id + \"f\",\n                count: 0\n              });\n              ctx = undefined;\n            }\n            return props.fallback;\n          }, owner);\n        });\n      });\n    }\n  });\n}\n\nconst DEV = undefined;\n\nexport { $DEVCOMP, $PROXY, $TRACK, DEV, ErrorBoundary, For, Index, Match, Show, Suspense, SuspenseList, Switch, batch, cancelCallback, catchError, children, createComponent, createComputed, createContext, createDeferred, createEffect, createMemo, createReaction, createRenderEffect, createResource, createRoot, createSelector, createSignal, createUniqueId, enableExternalSource, enableHydration, enableScheduling, equalFn, from, getListener, getOwner, indexArray, lazy, mapArray, mergeProps, observable, on, onCleanup, onError, onMount, requestCallback, resetErrorBoundaries, runWithOwner, sharedConfig, splitProps, startTransition, untrack, useContext, useTransition };\n","exports.interopDefault = function (a) {\n  return a && a.__esModule ? a : {default: a};\n};\n\nexports.defineInteropFlag = function (a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n};\n\nexports.exportAll = function (source, dest) {\n  Object.keys(source).forEach(function (key) {\n    if (key === 'default' || key === '__esModule' || dest.hasOwnProperty(key)) {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function () {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n};\n\nexports.export = function (dest, destName, get) {\n  Object.defineProperty(dest, destName, {\n    enumerable: true,\n    get: get,\n  });\n};\n","import { Component } from \"solid-js\";\nimport { TableComponent } from \"./table\";\nimport { Animations, TableController, View, tableUIDescriptor } from \"./table_controller\";\nimport { AnimationManager } from \"ui/animation/animation_manager\";\nimport { InteractionManager } from \"rules/interaction_manager\";\n\nexport function createTable(interactionManager: InteractionManager) {\n  const tableUI = tableUIDescriptor.create({\n    view: View.TopDownBookCentered,\n  })\n  const animations = new AnimationManager<Animations>(); \n  const controller = new TableController(tableUI, animations);\n  function onDragCancel() {\n    interactionManager.clearDrag();\n  }\n\n  function Component(props: {\n    Book: Component,\n    Hand: Component,\n    Deck: Component,\n    SpreadOverlay: Component,\n    DragOverlay: Component,\n  }) {\n    return (\n      <TableComponent\n          Book={props.Book}\n          Hand={props.Hand}\n          Deck={props.Deck}\n          SpreadOverlay={props.SpreadOverlay}\n          DragOverlay={props.DragOverlay}\n          view={tableUI.view} \n          animations={animations}\n          onDragCancel={onDragCancel}\n          dragging={interactionManager.dragging}\n      />\n    );\n  }\n\n  return {\n    Component,\n    controller,\n  };\n}","import { Component, createSignal } from \"solid-js\";\nimport styles from './table.module.scss';\nimport { Animations, View } from \"./table_controller\";\nimport { AnimationManager } from \"ui/animation/animation_manager\";\n\nexport function TableComponent(props: {\n  Book: Component,\n  Hand: Component,\n  Deck: Component,\n  SpreadOverlay: Component,\n  DragOverlay: Component,\n  view: View,\n  animations: AnimationManager<Animations>,\n  onDragCancel: () => void,\n  dragging: boolean,\n}) {\n  const [tableRef, setTableRef] = createSignal<HTMLDivElement>();\n  return (\n    <div class={styles.container}>\n      <div\n          classList={{\n            [styles.room]: true,\n            [styles.dragging]: props.dragging,\n          }}\n          onMouseUp={props.onDragCancel}\n      >\n        <div\n            classList={{\n              [styles.table]: true,\n              [styles.tilted]: props.view === View.Tilted,\n              [styles.topDown]: props.view === View.TopDown,\n              [styles.topDownBookCentered]: props.view === View.TopDownBookCentered,\n            }}\n            onTransitionEnd={props.animations.createTransitionEndEventListener(\n              tableRef,\n              () => props.view\n            )}\n            ref={setTableRef}>\n          <div class={styles.book}>\n            <props.Book/>\n          </div>\n          <div class={styles['spread-overlay']}>\n            <props.SpreadOverlay/>\n          </div>\n          <div class={styles.hand}>\n            <props.Hand/>\n          </div>\n          <div class={styles.deck}>\n            <props.Deck/>\n          </div>\n        </div>\n      </div>\n      <div class={styles['drag-overlay']}>\n        <props.DragOverlay/>\n      </div>\n    </div>\n  );\n}\n","@use '../card/card.module.scss';\n\n@value tableWidth: min(100vw, 100vh);\n@value tableHeight: calc(tableWidth * 1.3);\n\n// NOTE: this crashes parceljs \n// @value pageWidth: min(30vh, 30vw);\n@value pageWidth: 30vh;\n@value pageHeight: calc(pageWidth * 1.4);\n\n@value bookWidth: pageWidth;\n@value bookHeight: pageHeight;\n@value bookTop: 10%;\n\n@value handSlotTop: 8%;\n@value handSlotWidth: 45vh;\n@value handSlotHeight: cardHeight;\n\n@value tableColor: #763F13;\n@value tableColorDark: #221100;\n\n@value tiltAngle: 50deg;\n\n.container {\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n}\n\n.room {\n  position: absolute;\n  perspective: calc(tableWidth);\n  perspective-origin: 50% 50%;\n  width: 100%;\n  height: 100%;\n  transform-style: preserve-3d;  \n}\n\n.room * {\n  transform-style: preserve-3d;\n}\n\n.room.dragging {\n  cursor: grabbing;\n}\n\n.table {\n  background: tableColor;\n  position: absolute;\n  width: tableWidth;\n  height: tableHeight;\n  transform-origin: calc(tableWidth/2) tableHeight;\n  transition: transform 1s ease-in-out;\n  pointer-events: all;\n  bottom: 0;\n  left: calc((100vw - tableWidth)/2);\n}\n\n.table.topDown {\n  background: tableColorDark;\n  transform:\n      rotateX(20deg)\n      translate(0, calc(bookHeight))\n      translateZ(calc(-1 * tableWidth));\n}\n\n.table.topDownBookCentered {\n  // TODO gradients aren't transitionable, but an overlay with opacity is...\n  background: linear-gradient(tableColorDark, tableColor);\n  transform:\n      rotateX(20deg)\n      translate(calc(-1 * (bookWidth / 2)), calc(tableHeight - bookHeight - bookTop - handSlotTop))\n      translateZ(calc(tableHeight/4))\n      ;\n}\n\n.table.tilted {\n  // TODO gradients aren't transitionable, but an overlay with opacity is...\n  background: linear-gradient(tableColorDark, tableColor);\n  transform:\n      translateZ(calc(tableHeight * .8))\n      translate(0, 0)\n      rotateX(tiltAngle)\n      ;\n}\n\n.book {\n  position: absolute;\n  top: bookTop;\n  left: 50%;\n  width: bookWidth;\n  height: bookHeight;\n  background-color: brown;\n}\n\n.hand {\n  position: absolute;\n  display: flex;\n  top: calc(bookTop + bookHeight + handSlotTop);\n  left: calc((100% - handSlotWidth) / 2);\n  width: handSlotWidth;\n  height: handSlotHeight;\n}\n\n.deck {\n  position: absolute;\n  top: calc(bookTop + bookHeight + handSlotTop);\n  left: calc((100% + handSlotWidth) / 2 + 2%);\n  width: cardWidth;\n  height: cardHeight;\n  background-color: blue;\n}\n\n.spread-overlay {\n  position: absolute;\n  top: calc(bookTop + bookHeight);\n  left: calc(tableWidth/2 - bookWidth/2);\n  width: calc(bookWidth);\n  height: cardHeight;\n  transform: translateZ(calc(cardHeight * 2.5)) rotateX(calc(-80deg));\n  transform-origin: top;\n}\n\n.drag-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\n","import { AnimationManager } from \"ui/animation/animation_manager\";\nimport { LiteralTypeDescriptor } from \"model/descriptor/literals\";\nimport { activeRecordDescriptor } from \"model/descriptor/record\";\n\nexport const enum View {\n  TopDown = 0,\n  TopDownBookCentered = 1,\n  Tilted = 2,\n};\n\nexport type Animations = View;\n\nconst viewDescriptor = new LiteralTypeDescriptor<View>();\n\nexport const tableUIDescriptor = activeRecordDescriptor({\n  view: viewDescriptor,\n});\n\nexport type TableUI = typeof tableUIDescriptor.aMutable;\nexport type TableUIState = typeof tableUIDescriptor.aState;\n\nexport class TableController {\n\n  constructor(\n    private readonly tableUI: TableUI,\n    private readonly animations: AnimationManager<Animations>,\n  ) {\n  }\n\n  async setView(view: View) {\n    if (this.tableUI.view !== view) {\n      this.tableUI.view = view;\n      return this.animations.waitForAnimation(view);\n    }\n  }\n}\n","import { Component } from \"solid-js\";\nimport { TypeDescriptor } from \"./types\";\n\nexport class LiteralTypeDescriptor<LiteralType> implements TypeDescriptor<LiteralType, LiteralType> {\n\n  constructor() { }\n\n  aState!: LiteralType;\n\n  aMutable!: LiteralType;\n\n  create(s: LiteralType): LiteralType {\n    return s;\n  }\n\n  snapshot(m: LiteralType): LiteralType {\n    return m;\n  }\n\n  freeze(s: LiteralType): LiteralType {\n    return s;\n  }\n}\n\n\nexport const numberDescriptor = new LiteralTypeDescriptor<number>();\n\nexport const stringDescriptor = new LiteralTypeDescriptor<string>();\n\nexport const booleanDescriptor = new LiteralTypeDescriptor<boolean>();\n\nexport const componentDescriptor = new LiteralTypeDescriptor<Component>();\n","import { createSignal, Signal } from \"solid-js\";\nimport { TypeDescriptor, TypeDescriptors } from \"./types\";\n\ntype Mutable = {\n  __aMutable: true,\n};\n\ntype State = {\n  __aMutable?: never,\n};\n\n\ntype RecordState<\n  Attributes extends TypeDescriptors,\n> = { [K in keyof Attributes]: Attributes[K]['aState'] } & State;\n\ntype RecordMutable<\n  Attributes extends TypeDescriptors,\n> = { [K in keyof Attributes]: Attributes[K]['aMutable'] } & Mutable;\n\n\ntype RecordStateWithNoMutables<\n  Attributes extends TypeDescriptors,\n> = { [K in keyof Attributes]: Attributes[K]['aState'] & State };\n\n\nclass ValueRecordTypeDescriptor<AttributeTypeDescriptors extends TypeDescriptors>\n  implements TypeDescriptor<RecordState<AttributeTypeDescriptors>, RecordMutable<AttributeTypeDescriptors>> {\n  constructor(private readonly attributeTypes: AttributeTypeDescriptors) { }\n\n  aState!: Readonly<RecordState<AttributeTypeDescriptors>>;\n\n  aMutable!: Readonly<RecordMutable<AttributeTypeDescriptors>>;\n\n  create(s: RecordStateWithNoMutables<AttributeTypeDescriptors>): RecordMutable<AttributeTypeDescriptors> {\n    const mutable: RecordMutable<AttributeTypeDescriptors> = {} as any;\n    for (let key in this.attributeTypes) {\n      const attributeType = this.attributeTypes[key];\n      const value = s[key];\n      const valueMutable = attributeType.create(value);\n      mutable[key] = valueMutable;\n    }\n    return mutable;\n  }\n\n  snapshot(m: RecordMutable<AttributeTypeDescriptors>): RecordState<AttributeTypeDescriptors> {\n    const snapshot: RecordState<AttributeTypeDescriptors> = {} as any;\n    for (let key in this.attributeTypes) {\n      const attributeType = this.attributeTypes[key];\n      const value = m[key];\n      const valueMutable = attributeType.snapshot(value);\n      snapshot[key] = valueMutable;\n    }\n    return snapshot;\n  }\n\n  freeze(s: RecordState<AttributeTypeDescriptors>): RecordState<AttributeTypeDescriptors> {\n    const snapshot: RecordState<AttributeTypeDescriptors> = {} as any;\n    for (let key in this.attributeTypes) {\n      const attributeType = this.attributeTypes[key];\n      const value = s[key];\n      const valueMutable = attributeType.freeze(value);\n      snapshot[key] = valueMutable;\n    }\n    return Object.freeze(snapshot);    \n  }\n\n}\n\nexport function valueRecordDescriptor<AttributeTypeDescriptors extends TypeDescriptors>(\n  attributeTypes: AttributeTypeDescriptors,\n) {\n  return new ValueRecordTypeDescriptor(attributeTypes);\n}\n\ntype ActiveRecordTarget<\n  AttributeTypeDescriptors extends TypeDescriptors\n> = { [K in keyof AttributeTypeDescriptors]: Signal<AttributeTypeDescriptors[K]['aMutable']> };\n\nclass ActiveRecordProxyHandler<AttributeTypeDescriptors extends TypeDescriptors>\n  implements ProxyHandler<ActiveRecordTarget<AttributeTypeDescriptors>> {\n  constructor() {\n\n  }\n\n  get(target: ActiveRecordTarget<AttributeTypeDescriptors>, p: string) {\n    return target[p]?.[0]?.();\n  }\n\n  set(target: ActiveRecordTarget<AttributeTypeDescriptors>, p: string, newValue: any): boolean {\n    const signal = target[p]?.[1];\n    signal?.(newValue);\n    return signal != null;\n  }\n}\n\nclass ActiveRecordTypeDescriptor<AttributeTypeDescriptors extends TypeDescriptors>\n  implements TypeDescriptor<RecordState<AttributeTypeDescriptors>, RecordMutable<AttributeTypeDescriptors>> {\n  constructor(private readonly attributeTypes: AttributeTypeDescriptors) { }\n\n  aState!: Readonly<RecordState<AttributeTypeDescriptors>>;\n\n  aMutable!: RecordMutable<AttributeTypeDescriptors>;\n\n  create(s: RecordState<AttributeTypeDescriptors>): RecordMutable<AttributeTypeDescriptors> {\n\n    const target: ActiveRecordTarget<AttributeTypeDescriptors> = {} as any;\n    for (let key in this.attributeTypes) {\n      const attributeType = this.attributeTypes[key];\n      const value = s[key];\n      const valueMutable = attributeType.create(value);\n      target[key] = createSignal(valueMutable);\n    }\n    return new Proxy(target, new ActiveRecordProxyHandler()) as RecordMutable<AttributeTypeDescriptors>;\n  }\n\n  snapshot(m: RecordMutable<AttributeTypeDescriptors>): RecordState<AttributeTypeDescriptors> {\n    const snapshot: RecordState<AttributeTypeDescriptors> = {} as any;\n    for (let key in this.attributeTypes) {\n      const attributeType = this.attributeTypes[key];\n      const value = m[key];\n      const valueMutable = attributeType.snapshot(value);\n      snapshot[key] = valueMutable;\n    }\n    return snapshot;\n  }\n\n  freeze(s: RecordState<AttributeTypeDescriptors>): RecordState<AttributeTypeDescriptors> {\n    const snapshot: RecordState<AttributeTypeDescriptors> = {} as any;\n    for (let key in this.attributeTypes) {\n      const attributeType = this.attributeTypes[key];\n      const value = s[key];\n      const valueMutable = attributeType.snapshot(value);\n      snapshot[key] = valueMutable;\n    }\n    return Object.freeze(snapshot);    \n  }\n}\n\nexport function activeRecordDescriptor<AttributeTypeDescriptors extends TypeDescriptors>(\n  attributeTypes: AttributeTypeDescriptors,\n) {\n  return new ActiveRecordTypeDescriptor(attributeTypes);\n}","import { Accessor } from \"solid-js\";\nimport { delay } from \"../../base/delay\";\nimport { FlattenedPromise, createFlattenedPromise } from \"../../base/flattened_promise\";\n\nexport class AnimationCanceledError extends Error {\n\n}\n\nexport class AnimationManager<T> {\n  private animations: Map<T, FlattenedPromise<void>> = new Map();\n\n  constructor() {\n\n  }\n\n  waitForAnimation(t: T, timeoutMillis: number = 1000): Promise<void> {\n    this.maybeCancelAnimation(t);\n    const animation = createFlattenedPromise<void>();\n    this.animations.set(t, animation);\n    return Promise.race([animation.promise, delay(timeoutMillis)]);\n  }\n\n  maybeCancelAnimation(t: T) {\n    const flattenedPromise = this.animations.get(t);\n    if (flattenedPromise) {\n      flattenedPromise.reject(new AnimationCanceledError());\n      this.animations.delete(t);\n    }\n  }\n\n  maybeCompleteAnimation(t: T) {\n    const flattenedPromise = this.animations.get(t);\n    if (flattenedPromise) {\n      flattenedPromise.resolve();\n      this.animations.delete(t);\n    }\n  }\n\n  createAnimationEndEventListener(\n      ref: Accessor<EventTarget | undefined>,\n      animationIdAndName: Accessor<[T, string]>,\n  ) {\n    return (e: AnimationEvent) => {\n      const [id, name] = animationIdAndName();\n      if (e.target != null && ref() === e.target && e.animationName === name) {\n        this.maybeCompleteAnimation(id);\n      }\n    };\n  }\n\n  createTransitionEndEventListener(\n    ref: Accessor<EventTarget | undefined>,\n    animationId: Accessor<T>,\n    ) {\n    return (e: TransitionEvent) => {\n      if (e.target != null && ref() === e.target) {\n        this.maybeCompleteAnimation(animationId());\n      }\n    };\n  }\n\n  createCutoutPoppedUpOrDownCallback(\n    poppedUpValue: T,\n    poppedDownValue: T = poppedUpValue,\n  ) {\n    return (poppedUp: boolean) => {\n      this.maybeCompleteAnimation(poppedUp ? poppedUpValue : poppedDownValue);\n    };\n  }\n}\n","import { createFlattenedPromise } from \"./flattened_promise\";\n\nexport function delay(milliseconds: number): Promise<void> {\n  const { promise, resolve } = createFlattenedPromise<void>();\n  setTimeout(resolve, milliseconds);\n  return promise;\n}","export type FlattenedPromise<T> = {\n  promise: Promise<T>;\n  reject: (e: unknown) => void;\n  resolve: (t: T) => void;\n}\n\nexport function createFlattenedPromise<T>(): FlattenedPromise<T> {\n  let _resolve: (t: T) => void;\n  let _reject: (e: unknown) => void;\n  const promise = new Promise<T>((resolve, reject) => {\n    _resolve = resolve;\n    _reject = reject;\n  });\n  return {\n    promise,\n    resolve: (t: T) => _resolve(t),\n    reject: (e: unknown) => _reject(e), \n  };\n}","import { Book, BookSpread } from \"model/domain\";\nimport { BookComponent, PagePair } from \"./book\";\nimport { Animations, BookController, PageComponentManager, bookUIDescriptor } from \"./book_controller\";\nimport { AnimationManager } from \"ui/animation/animation_manager\";\n\nexport function createBook({\n  leftPageComponentManager,\n  rightPageComponentManager,\n  book,\n}: {\n  leftPageComponentManager: PageComponentManager,\n  rightPageComponentManager: PageComponentManager,\n  book: Book,\n}) {\n  function renderPagePair(spread: BookSpread | undefined): PagePair | undefined {\n    if (spread == null) {\n      return;\n    }\n    return [\n      <leftPageComponentManager.FactoryComponent model={spread}/>,\n      <rightPageComponentManager.FactoryComponent model={spread}/>\n    ];\n  }\n  \n  const animations = new AnimationManager<Animations>();\n  const bookUI = bookUIDescriptor.create({\n    previousSpread: undefined,\n    turnLeftToRight: true,\n  });\n  const controller = new BookController(\n    book,\n    bookUI,\n    animations,\n    [leftPageComponentManager, rightPageComponentManager],\n  );\n\n  const Component = (props: { onClickCover: () => void }) => {\n    return (\n      <BookComponent\n          animations={animations}\n          previousPages={renderPagePair(bookUI.previousSpread)}\n          currentPages={renderPagePair(book.spread)}\n          onClickCover={props.onClickCover}\n      />\n    );\n  };\n\n  return {\n    Component,\n    controller,\n  };\n}\n\n","import { For, JSX, JSXElement, ParentProps, createSignal } from 'solid-js';\nimport styles from './book.module.scss'\nimport { AnimationManager } from 'ui/animation/animation_manager';\nimport { Animations } from './book_controller';\n\nconst FAKE_PAGE_COUNT = 64;\n\nexport type PagePair = [JSXElement, JSXElement];\n\nexport function PageComponent(props: ParentProps & {\n  z: number,\n  onClick?: () => void,\n  // TODO: find correct typing for style\n  style?: JSX.CSSProperties,\n}) {\n  return (\n    <div class={styles.page} onClick={props.onClick} style={{\n      transform: `translateZ(${props.z}px)`,\n      ...props.style\n    }}>\n      {props.children}\n    </div>\n  );\n}\n\nexport function BookComponent(props: {\n  animations: AnimationManager<Animations>,\n  previousPages: PagePair | undefined,\n  currentPages: PagePair | undefined,\n  onClickCover?: () => void,\n}) {\n  const [spineRef, setSpineRef] = createSignal<HTMLDivElement>();\n  return (\n    <div class={styles.container}>\n      <div class={styles.book}>\n        {/* Back half */}\n        <PageComponent z={-0.5 - FAKE_PAGE_COUNT / 2}/>\n\n        <For each={[...Array(FAKE_PAGE_COUNT / 2).keys()]}>\n          {page =>\n            // `FAKE_PAGE_COUNT / 2 - 1` is just so DOM order matches physical order but its pretty ugly, can probably just use `z-index`\n            <PageComponent z={-1.5 - (FAKE_PAGE_COUNT / 2 - 1 - page)} />\n          }\n          </For>\n\n        {/* Right page */}\n        <PageComponent z={-0.5}>\n          {props.currentPages?.[1]}\n        </PageComponent>\n\n        <div\n            classList={{\n              [styles.spine]: true,\n              [styles.open]: props.currentPages != null,\n            }}\n            onAnimationEnd={props.animations.createAnimationEndEventListener(\n              spineRef,\n              () => ['turn', styles.openAnimation],\n            )}\n            ref={setSpineRef}>\n          {/* Left page */}\n          <PageComponent z={0.5}>\n            {/* The left page has been rotated so we have to rotate its contents back */}\n            <div style={{ transform: 'rotateY(180deg)' }}>\n              {props.currentPages?.[0]}\n            </div>\n          </PageComponent>\n\n          {/* Front half */}\n          <For each={[...Array(FAKE_PAGE_COUNT / 2).keys()]}>\n            {page =>\n              <PageComponent z={1.5 + page} />\n            }\n          </For>\n\n          <PageComponent z={0.5 + FAKE_PAGE_COUNT / 2} onClick={props.onClickCover}>\n            <h1>GRAND TERMINUS</h1>\n          </PageComponent>\n        </div>\n      </div>\n    </div>\n  );\n}\n",".container {\n  //display: flex;\n  position: absolute;\n  // align-items: center;\n  // justify-content: center;\n  width: 100%;\n  height: 100%;\n  transform: translateZ(32px);\n}\n\n.book {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  /* TODO: use an animation to center book */\n  transition: transform 1s;\n  will-change: transform;\n}\n\n.spine {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  transform-origin: left;\n}\n\n.page {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  transform-origin: left bottom;\n  background: ghostwhite;\n  box-shadow: rgba(0, 0, 0, 0.15) 0px 1.95px 0px;\n  background: linear-gradient(90deg, gainsboro 0%, ghostwhite 5%);\n}\n\n.page:last-child {\n  background: darkslategray;\n  color: white;\n  text-align: center;\n}\n\n.open {\n  animation-name: openAnimation;\n  animation-duration: .5s;\n  animation-timing-function: ease-in;\n  // NOTE\n  // rather than rely on filling forward, I saw a talk \n  // internally at Canva where the speaker recommended having the final\n  // state in your class, and animating from the old state to the final state.\n  // I think it's more robust or something\n  animation-fill-mode: forwards;\n}\n\n@keyframes openAnimation {\n  from {\n    transform: rotateY(0deg);\n  }\n\n  to {\n    transform: rotateY(-180deg);\n  }\n}","import { ComponentManager } from \"components/component_manager\";\nimport { PageController } from \"components/page/page_controller\";\nimport { booleanDescriptor } from \"model/descriptor/literals\";\nimport { optionalDescriptor } from \"model/descriptor/option\";\nimport { activeRecordDescriptor } from \"model/descriptor/record\";\nimport { Book, BookSpread, bookSpreadDescriptor } from \"model/domain\";\nimport { batch } from \"solid-js\";\nimport { AnimationManager } from \"ui/animation/animation_manager\";\n\nexport type Animations = 'turn';\n\nexport type PageComponentManager = ComponentManager<BookSpread, PageController>;\n\nexport const bookUIDescriptor = activeRecordDescriptor({\n  previousSpread: optionalDescriptor(bookSpreadDescriptor),\n  turnLeftToRight: booleanDescriptor,\n});\n\nexport type BookUI = typeof bookUIDescriptor.aMutable;\nexport type BookUIState = typeof bookUIDescriptor.aState;\n\nexport class BookController {\n  constructor(\n    private readonly book: Book,\n    private readonly bookUI: BookUI,\n    private animations: AnimationManager<Animations>,\n    private pageComponentManagers: readonly PageComponentManager[],\n  ) { }\n\n  async showSpread(spread: BookSpread | undefined, turnLeftToRight: boolean = false) {\n    if (spread != this.book.spread) {\n      const previousSpread = this.book.spread;\n      if (previousSpread != null) {\n        await Promise.all(\n          this.pageComponentManagers.map(m => m.lookupController(previousSpread)?.popDown())\n        );\n      }\n      batch(() => {\n        this.bookUI.previousSpread = this.book.spread;\n        this.bookUI.turnLeftToRight = turnLeftToRight;\n        this.book.spread = spread;\n      });\n      await this.animations.waitForAnimation('turn');\n      if (spread != null) {\n        await Promise.all(\n          this.pageComponentManagers.map(m => m.lookupController(spread)?.popUp())\n        );\n      }\n    }\n  }\n}\n","import { TypeDescriptor } from \"./types\";\n\ntype OptionalState<MandatoryTypeDescriptor extends TypeDescriptor> =\n  MandatoryTypeDescriptor['aState'] | undefined;\n\ntype OptionalMutable<MandatoryTypeDescriptor extends TypeDescriptor> =\n  MandatoryTypeDescriptor['aMutable'] | undefined;\n\nclass OptionalTypeDescriptor<MandatoryTypeDescriptor extends TypeDescriptor>\n  implements TypeDescriptor<OptionalState<MandatoryTypeDescriptor>, OptionalMutable<MandatoryTypeDescriptor>> {\n  constructor(private readonly mandatoryTypeDescriptor: MandatoryTypeDescriptor) { }\n\n  aState!: MandatoryTypeDescriptor['aState'] | undefined;\n\n  aMutable!: MandatoryTypeDescriptor['aMutable'] | undefined;\n\n  create(s: OptionalState<MandatoryTypeDescriptor>): OptionalMutable<MandatoryTypeDescriptor> {\n    return s != null ? this.mandatoryTypeDescriptor.create(s) : undefined;\n  }\n\n  snapshot(m: OptionalMutable<MandatoryTypeDescriptor>): OptionalState<MandatoryTypeDescriptor> {\n    return m != null ? this.mandatoryTypeDescriptor.snapshot(m) : undefined;\n  }\n\n  freeze(s: OptionalState<MandatoryTypeDescriptor>): OptionalState<MandatoryTypeDescriptor> {\n    return s != null ? this.mandatoryTypeDescriptor.freeze(s) : undefined;\n  }\n}\n\nexport function optionalDescriptor<MandatoryTypeDescriptor extends TypeDescriptor>(\n  mandatoryTypeDescriptor: MandatoryTypeDescriptor,\n) {\n  return new OptionalTypeDescriptor(mandatoryTypeDescriptor);\n}\n","import { listDescriptor } from \"./descriptor/list\";\nimport { LiteralTypeDescriptor, numberDescriptor, stringDescriptor } from \"./descriptor/literals\";\nimport { optionalDescriptor } from \"./descriptor/option\";\nimport { activeRecordDescriptor, valueRecordDescriptor } from \"./descriptor/record\";\nimport { discriminatingUnionDescriptor } from \"./descriptor/union\";\n\nexport const enum SymbolType {\n  // force resource\n  Force = 1,\n  // finesse resource\n  Finesse,\n  // magic resource (fey?)\n  Magic,\n  // fire damage/light\n  Fire,\n  // take pysical damage/heal\n  Damage,\n  // get older/younger\n  Age,\n  // draw a card/put a card back\n  Draw,\n}\n\nexport const symbolTypeDescriptor = new LiteralTypeDescriptor<SymbolType>();\n\nexport const enum EffectDirection {\n  Up = 1,\n  Down,\n}\n\nexport const effectDescriptor = valueRecordDescriptor({\n  symbol: symbolTypeDescriptor,\n  direction: new LiteralTypeDescriptor<EffectDirection>(),\n});\n\nexport const enum CardBackgroundType {\n  Crosshatched = 1,\n  Clear,\n  Door,\n  Passageway,\n}\n\nexport const enum CardFaceType {\n  Resource = 1,\n  ResourceBack,\n  Choice,\n  ChoiceBack,\n}\n\nconst cardFaceCommon = {\n  background: new LiteralTypeDescriptor<CardBackgroundType>,\n  cost: listDescriptor(effectDescriptor),\n};\n\nexport const cardFaceResourceDescriptor = valueRecordDescriptor({\n  type: new LiteralTypeDescriptor<CardFaceType.Resource>(),\n  benefit: listDescriptor(effectDescriptor),\n  ...cardFaceCommon,\n});\n\nexport const cardFaceResourceBackDescriptor = valueRecordDescriptor({\n  type: new LiteralTypeDescriptor<CardFaceType.ResourceBack>(),\n  ...cardFaceCommon,\n});\n\nexport const cardFaceChoiceDescriptor = valueRecordDescriptor({\n  type: new LiteralTypeDescriptor<CardFaceType.Choice>(),\n  effect: listDescriptor(effectDescriptor),\n  ...cardFaceCommon,\n});\n\nexport const cardFaceChoiceBackDescriptor = valueRecordDescriptor({\n  type: new LiteralTypeDescriptor<CardFaceType.ChoiceBack>(),\n  name: stringDescriptor,\n  ...cardFaceCommon,\n});\n\nexport const cardFaceDescriptor = discriminatingUnionDescriptor(\n  {\n    [CardFaceType.Resource]: cardFaceResourceDescriptor,\n    [CardFaceType.ResourceBack]: cardFaceResourceBackDescriptor,\n    [CardFaceType.Choice]: cardFaceChoiceDescriptor,\n    [CardFaceType.ChoiceBack]: cardFaceChoiceBackDescriptor,\n  },\n  s => s.type,\n  m => m.type,\n);\n\nexport const cardTypeDescriptor = valueRecordDescriptor({\n  name: stringDescriptor,\n  description: stringDescriptor,\n  faces: listDescriptor(cardFaceDescriptor),\n});\n\nexport const cardDescriptor = activeRecordDescriptor({\n  type: cardTypeDescriptor,\n  visibleFaceIndex: numberDescriptor,\n});\n\nexport const cardSlotDescriptor = activeRecordDescriptor({\n  targetCard: optionalDescriptor(cardDescriptor),\n  playedCards: listDescriptor(cardDescriptor),\n});\n\n// a \"spread\" is two pages viewed together\nexport const enum BookSpreadType {\n  TableOfContents = 1,\n  Room,\n}\n\nexport const bookSpreadTableOfContentsDescriptor = activeRecordDescriptor({\n  type: new LiteralTypeDescriptor<BookSpreadType.TableOfContents>(),\n});\n\nexport const bookSpreadRoomDescriptor = activeRecordDescriptor({\n  type: new LiteralTypeDescriptor<BookSpreadType.Room>(),\n  cardSlots: listDescriptor(cardSlotDescriptor),\n});\n\nexport const bookSpreadDescriptor = discriminatingUnionDescriptor(\n  {\n    [BookSpreadType.TableOfContents]: bookSpreadTableOfContentsDescriptor,\n    [BookSpreadType.Room]: bookSpreadRoomDescriptor,\n  },\n  s => s.type,\n  m => m.type,\n);\n\nexport const bookDescriptor = activeRecordDescriptor({\n  // undefined == closed\n  spread: optionalDescriptor(bookSpreadDescriptor),\n});\n\nexport const gameDescriptor = activeRecordDescriptor({\n  book: bookDescriptor,\n  cardSlots: listDescriptor(cardSlotDescriptor),\n});\n\nexport type Effect = typeof effectDescriptor.aMutable;\nexport type EffectState = typeof effectDescriptor.aState;\nexport type CardFaceResource = typeof cardFaceResourceDescriptor.aMutable;\nexport type CardFaceResourceState = typeof cardFaceResourceDescriptor.aState;\nexport type CardFaceResourceBack = typeof cardFaceResourceBackDescriptor.aMutable;\nexport type CardFaceResourceBackState = typeof cardFaceResourceBackDescriptor.aState;\nexport type CardFaceChoice = typeof cardFaceChoiceDescriptor.aMutable;\nexport type CardFaceChoiceState = typeof cardFaceChoiceDescriptor.aState;\nexport type CardFaceChoiceBack = typeof cardFaceChoiceBackDescriptor.aMutable;\nexport type CardFaceChoiceBackState = typeof cardFaceChoiceBackDescriptor.aState;\nexport type CardFace = typeof cardFaceDescriptor.aMutable;\nexport type CardFaceState = typeof cardFaceDescriptor.aState;\nexport type CardType = typeof cardTypeDescriptor.aMutable;\nexport type CardTypeState = typeof cardTypeDescriptor.aState;\nexport type Card = typeof cardDescriptor.aMutable;\nexport type CardState = typeof cardDescriptor.aState;\nexport type CardSlot = typeof cardSlotDescriptor.aMutable;\nexport type CardSlotState = typeof cardSlotDescriptor.aState;\nexport type BookSpreadTableOfContents = typeof bookSpreadTableOfContentsDescriptor.aMutable;\nexport type BookSpreadTableOfContentsState = typeof bookSpreadTableOfContentsDescriptor.aState;\nexport type BookSpreadRoom = typeof bookSpreadRoomDescriptor.aMutable;\nexport type BookSpreadRoomState = typeof bookSpreadRoomDescriptor.aState;\nexport type BookSpread = typeof bookSpreadDescriptor.aMutable;\nexport type BookSpreadState = typeof bookSpreadDescriptor.aState;\nexport type Book = typeof bookDescriptor.aMutable;\nexport type BookState = typeof bookDescriptor.aState;\nexport type Game = typeof gameDescriptor.aMutable;\nexport type GameState = typeof gameDescriptor.aState;\n","import { TypeDescriptor } from \"./types\";\n\ntype ListState<\n  ElementTypeDescriptor extends TypeDescriptor,\n> = readonly ElementTypeDescriptor['aState'][];\n\ntype ListMutable<\n  ElementTypeDescriptor extends TypeDescriptor,\n> = readonly ElementTypeDescriptor['aMutable'][];\n\n\nclass ListTypeDescriptor<ElementTypeDescriptor extends TypeDescriptor>\n  implements TypeDescriptor<ListState<ElementTypeDescriptor>, ListMutable<ElementTypeDescriptor>> {\n\n  constructor(private readonly elementTypeDescriptor: ElementTypeDescriptor) { }\n\n  aState!: ListState<ElementTypeDescriptor>;\n\n  aMutable!: ListMutable<ElementTypeDescriptor>;\n\n  create(s: ListState<ElementTypeDescriptor>): ListMutable<ElementTypeDescriptor> {\n    return s.map(v => this.elementTypeDescriptor.create(v));\n  }\n\n  snapshot(m: ListMutable<ElementTypeDescriptor>): ListState<ElementTypeDescriptor> {\n    return m.map(v => this.elementTypeDescriptor.snapshot(v));\n  }\n\n  freeze(s: ListState<ElementTypeDescriptor>): ListState<ElementTypeDescriptor> {\n    return Object.freeze(s.map(v => this.elementTypeDescriptor.freeze(v)));\n  }\n}\n\nexport function listDescriptor<ElementTypeDescriptor extends TypeDescriptor,>(elementTypeDescriptor: ElementTypeDescriptor) {\n  return new ListTypeDescriptor(elementTypeDescriptor);\n}","import { TypeDescriptor } from \"./types\";\n\ntype Types = { [k: string]: TypeDescriptor };\n\ntype OneStateOf<C extends Types> = C[keyof C]['aState'];\ntype OneMutableOf<C extends Types> = C[keyof C]['aMutable'];\n\nclass DiscriminatingUnionTypeDescriptor<C extends Types> implements TypeDescriptor<OneStateOf<C>, OneMutableOf<C>> {\n  constructor(\n    private readonly cases: C,\n    private readonly discriminatorState: (s: OneStateOf<C>) => keyof C,\n    private readonly discriminatorMutable: (m: OneMutableOf<C>) => keyof C,\n  ) {\n  }\n\n  aState!: OneStateOf<C>;\n\n  aMutable!: OneMutableOf<C>;\n\n  create(s: OneStateOf<C>): OneMutableOf<C> {\n    const type = this.discriminatorState(s);\n    return this.cases[type].create(s);\n  }\n\n  snapshot(m: OneMutableOf<C>): OneStateOf<C> {\n    const type = this.discriminatorMutable(m);\n    return this.cases[type].snapshot(m);\n  }\n\n  freeze(s: OneStateOf<C>): OneMutableOf<C> {\n    const type = this.discriminatorState(s);\n    return this.cases[type].freeze(s);\n  }\n}\n\nexport function discriminatingUnionDescriptor<C extends Types>(\n  cases: C,\n  discriminatorState: (s: OneStateOf<C>) => keyof C,\n  discriminatorMutable: (m: OneMutableOf<C>) => keyof C,\n) {\n  return new DiscriminatingUnionTypeDescriptor(cases, discriminatorState, discriminatorMutable);\n}\n","import { Card, CardSlot, Game } from \"model/domain\";\nimport { CardSlotComponent as CardSlotComponentImpl } from \"./card_slot\";\nimport { CardSlotsComponent } from \"./card_slots\";\nimport { Component, For } from \"solid-js\";\nimport { ComponentManager } from \"components/component_manager\";\nimport { CardSlotController } from \"./card_slot_controller\";\nimport { InteractionManager } from \"rules/interaction_manager\";\n\nexport function createCardSlots(\n  CardSlotComponent: Component<{ model: CardSlot }>,\n) {\n  const Component = (props : {\n    model: readonly CardSlot[],\n  }) => {\n    return (\n      <CardSlotsComponent\n          CardSlotComponent={CardSlotComponent}\n          cardSlots={props.model}/>\n    );\n  };\n  return {\n    Component,\n  };\n}\n\nexport function createCardSlotManager(\n    CardComponent: Component<{ model: Card }>,\n    interactionManager: InteractionManager,\n    game: Game,\n) {\n  function createCardSlot(cardSlot: CardSlot) {\n    const controller = new CardSlotController();\n    const internalOnDragStart = () => interactionManager.startDrag(cardSlot);\n    const internalOnDrop = () => interactionManager.drop(cardSlot);\n    \n    function Component() {\n      return (\n          <CardSlotComponentImpl\n              targetCard={cardSlot.targetCard\n                  && <CardComponent model={cardSlot.targetCard}/>\n              }\n              targetInteraction={interactionManager.allowedInteraction(cardSlot)}\n              onDragStart={internalOnDragStart}\n              onDrop={internalOnDrop}\n              bordered={game.cardSlots.indexOf(cardSlot) >= 0}\n          >\n            <For each={cardSlot.playedCards}>\n              {card => {\n                return <CardComponent model={card}/>\n              }}\n            </For>\n          </CardSlotComponentImpl>\n      );\n    }\n    return {\n      controller,\n      Component,\n    };\n  };\n  return new ComponentManager(createCardSlot);\n}\n","import { Interaction } from 'rules/interaction_manager';\nimport styles from './card_slot.module.scss';\nimport { For, JSX, ParentProps, children } from \"solid-js\";\n\nconst interactionStyles: Record<Interaction, string> = Object.freeze({\n  [Interaction.None]: styles.none,\n  [Interaction.Drag]: styles.draggable,\n  [Interaction.Activate]: styles.clickable,\n  [Interaction.Disabled]: styles.immovable,\n  [Interaction.NoDrop]: styles['no-drop'],\n  [Interaction.Drop]: styles.drop,\n  [Interaction.Dragging]: styles.dragging,\n  [Interaction.LongPress]: styles['long-press'],\n});\n\nexport function CardSlotComponent(props: ParentProps<{\n  targetCard: JSX.Element,\n  targetInteraction: Interaction,\n  bordered: boolean,\n  onDragStart: () => void,\n  onDrop: () => void,\n}>) {\n  return (\n    <div\n        class={styles.container}\n        onMouseUp={props.onDrop}>\n      <div\n          classList={{ \n            [styles['target-card']]: true,\n            [interactionStyles[props.targetInteraction]]: true,\n            [styles.bordered]: props.bordered\n          }}\n          onMouseDown={props.onDragStart}>\n        {props.targetCard}\n      </div>\n      <div class={styles['played-cards']}>\n        <For each={children(() => props.children).toArray()}>\n          {child => (\n            <div class={styles['played-card']}>{child}</div>\n          )}\n        </For>\n      </div>\n    </div>\n  );\n}\n","@use '../card/card.module.scss';\n\n.container {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-items: start;\n  height: calc(cardHeight * 2.5);\n  gap: 2%;\n}\n\n.target-card {\n  width: cardWidth;\n  height: cardHeight;\n}\n\n.target-card.bordered {\n  border: .1vw solid #422;\n  border-radius: cardBorderRadius;\n}\n\n.target-card.none {\n  cursor: default;\n}\n\n.target-card.draggable {\n  cursor: grab;\n}\n\n.target-card.dragging {\n  cursor: grabbing;\n}\n\n.target-card.clickable {\n  cursor: pointer;\n}\n\n.target-card.immovable {\n  cursor: not-allowed;\n}\n\n.target-card.no-drop {\n  cursor: no-drop;\n}\n\n.target-card.drop {\n  cursor: pointer;\n}\n\n.target-card.long-press {\n  cursor: pointer;\n}\n\n.target-card.long-pressing {\n  cursor: grabbing;\n}\n\n.played-cards {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-items: start;\n}\n\n.played-card {\n  margin-bottom: calc(-.75 * cardHeight);\n}\n","import { UnreachableError } from \"base/unreachable_error\";\nimport { CardController } from \"components/card/card_controller\";\nimport { ComponentManager } from \"components/component_manager\";\nimport { Card, CardFaceType, CardSlot } from \"model/domain\";\nimport { Accessor, Setter, batch, createSignal } from \"solid-js\";\nimport { cardFace } from \"./card\";\n\nexport const enum Interaction {\n  None = 1,\n  Activate,\n  Drag,\n  Dragging,\n  Drop,\n  NoDrop,\n  LongPress,\n  Disabled,\n}\n\ntype DragState = [Card, CardSlot] | undefined;\ntype MousePosition = [number, number] | undefined;\ntype LongPress = [CardSlot, Promise<void>] | undefined;\n\nexport class InteractionManager {\n  private readonly dragged: Accessor<DragState>;\n  private readonly setDragged: Setter<DragState>;\n  private readonly mousePosition: Accessor<MousePosition>;\n  private readonly setMousePosition: Setter<MousePosition>;\n  private readonly longPress: Accessor<LongPress>;\n  private readonly setLongPress: Setter<LongPress>;\n\n  constructor(private cardManager: ComponentManager<Card, CardController>) {\n    const [dragged, setDragged] = createSignal<DragState>()\n    this.dragged = dragged;\n    this.setDragged = setDragged;\n    const [mousePosition, setMousePosition] = createSignal<MousePosition>();\n    this.mousePosition = mousePosition;\n    this.setMousePosition = setMousePosition;\n    const [longPress, setLongPress] = createSignal<LongPress>();\n    this.longPress = longPress;\n    this.setLongPress = setLongPress;\n  }\n\n  get dragging() {\n    return this.dragged() != null;\n  }\n\n  get lastMousePosition() {\n    return this.mousePosition();\n  }\n\n  set lastMousePosition(mousePosition: MousePosition) {\n    this.setMousePosition(mousePosition);\n  }\n\n  get draggedCard() {\n    return this.dragged()?.[0];\n  }\n\n  allowedInteraction(\n    targetCardSlot: CardSlot | undefined,\n  ): Interaction {\n    const dragged = this.dragged();\n    const targetCard = targetCardSlot?.targetCard;\n    if (dragged != null) {\n      const [_, draggedCardSlot] = dragged;\n      if (targetCardSlot == draggedCardSlot) {\n        return Interaction.Dragging;\n      }\n      if (targetCard != null) {\n        // can drop \n        return Interaction.Drop;\n      }\n      return Interaction.NoDrop;\n    }\n    if (targetCard == null) {\n      return Interaction.None;\n    }\n\n    const targetFace = cardFace(targetCard);\n    switch (targetFace.type) {\n      case CardFaceType.Choice:\n        return Interaction.Activate;\n      case CardFaceType.ChoiceBack:\n        return Interaction.Activate;\n      case CardFaceType.Resource:\n        return Interaction.Drag;\n      case CardFaceType.ResourceBack:\n        return Interaction.LongPress;\n      default:\n        throw new UnreachableError(targetFace);\n    }\n  }\n\n  startDrag(cardSlot: CardSlot) {\n    const interaction = this.allowedInteraction(cardSlot);\n    const targetCard = cardSlot.targetCard;\n    if (targetCard != null) {\n      if (interaction === Interaction.Drag) {\n        batch(() => {\n          cardSlot.targetCard = undefined;\n          this.setDragged([targetCard, cardSlot]);\n        });  \n      } else if (interaction === Interaction.LongPress) {\n        if (this.longPress() == null) {\n          const promise = this.cardManager.lookupController(targetCard)?.flipTemporarily(true);\n          if (promise) {\n            this.setLongPress([cardSlot, promise]);\n          }  \n        }\n      }\n    }\n  }\n\n  clearDrag() {\n    const dragged = this.dragged();\n    if (dragged) {\n      const [draggedCard, draggedCardSlot] = dragged;\n      batch(() => {\n        draggedCardSlot.targetCard = draggedCard;\n        this.setDragged();\n      });  \n    }\n    const longPress = this.longPress();\n    if (longPress) {\n      const [cardSlot, promise] = longPress;\n      promise.finally(() => {\n        this.setLongPress();\n        return cardSlot.targetCard\n            && this.cardManager.lookupController(cardSlot.targetCard)?.flipTemporarily(false);\n      });\n    }\n  }\n\n  drop(targetCardSlot: CardSlot) {\n    const dragged = this.dragged();\n    if (dragged) {\n      const [draggedCard, draggedCardSlot] = dragged;\n      const interaction = this.allowedInteraction(targetCardSlot);\n      if (draggedCardSlot != targetCardSlot && interaction == Interaction.Drop) {\n        batch(() => {\n          targetCardSlot.playedCards = [...targetCardSlot.playedCards, draggedCard];\n          draggedCardSlot.targetCard = undefined;\n          this.setDragged();\n        });  \n      } else {\n        batch(() =>{\n          draggedCardSlot.targetCard = draggedCard;\n          this.setDragged();\n        });\n      }\n    }\n  }\n}\n\n","export class UnreachableError extends Error {\n  constructor(value: never) {\n    super();\n  }\n}\n","import { Card, CardFaceType } from \"model/domain\";\n\nexport function cardFace(card: Card, offset = 0) {\n  const faces = card.type.faces; \n  return faces[(card.visibleFaceIndex + offset)%faces.length];\n}\n","import { Component, For } from 'solid-js';\nimport styles from './card_slots.module.scss';\nimport { CardSlot } from 'model/domain';\n\nexport function CardSlotsComponent(props: {\n  cardSlots: readonly CardSlot[],\n  CardSlotComponent: Component<{ model: CardSlot }>,\n}) {\n  return (\n    <div class={styles.container}>\n      <For each={props.cardSlots}>\n        {cardSlot => (\n          <props.CardSlotComponent model={cardSlot}/>\n        )}\n      </For>\n    </div>\n  );\n}\n",".container {\n  display: flex;\n  justify-content: stretch;\n  width: 100%;\n  height: 100%;\n}","import { Component } from \"solid-js\"\n\nexport type ComponentAndController<ComponentProps, Controller> = {\n  controller: Controller,\n  Component: Component<ComponentProps>,\n};\n\nexport class ComponentManager<Model extends object, Controller, ComponentProps = {}> {\n  private cache = new WeakMap<Model, ComponentAndController<ComponentProps, Controller>>();\n\n  readonly FactoryComponent = (props: { model: Model } & ComponentProps) => {\n    const Component = this.lookupOrCreateComponent(props.model);\n    return <Component {...props}/>;\n  };\n\n  constructor(\n    private readonly factory: (model: Model) => ComponentAndController<ComponentProps, Controller>\n  ) {}\n\n  private lookupOrCreate(model: Model): ComponentAndController<ComponentProps, Controller> {\n    let result = this.cache.get(model);\n    if (result == null) {\n      result = this.factory(model);\n      this.cache.set(model, result);\n    }\n    return result;\n  }\n\n  lookupOrCreateComponent(model: Model): Component<ComponentProps> {\n    return this.lookupOrCreate(model).Component;\n  }\n\n  lookupController(model: Model): Controller | undefined {\n    return this.cache.get(model)?.controller;\n  }\n}","export class CardSlotController {\n  \n}","import { Card } from \"model/domain\";\nimport { Animations, CardController, FlipState, cardUIDescriptor } from \"./card_controller\";\nimport { AnimationManager } from \"ui/animation/animation_manager\";\nimport { CardComponent } from \"./card\";\nimport { CardFaceComponent } from \"./face/card_face\";\nimport { ComponentManager } from \"components/component_manager\";\nimport { cardFace } from \"rules/card\";\n\nexport function createCardManager() {\n  function createCard(card: Card) {\n    const animations = new AnimationManager<Animations>();\n    const cardUI = cardUIDescriptor.create({\n      flipState: FlipState.Flat,\n      peeking: false,\n    });\n\n    function Component() {\n      return (\n        <CardComponent\n            flipState={cardUI.flipState}\n            elevated={cardUI.peeking || cardUI.flipState === FlipState.FlippingUpToVertical}\n            animations={animations}>\n          <CardFaceComponent\n              face={cardFace(card, cardUI.peeking ? 1 : 0)}\n              cardType={card.type}\n          />\n        </CardComponent>\n      );\n    }\n  \n    const controller = new CardController(card, cardUI, animations);\n  \n    return {\n      Component,\n      controller,\n    };\n  };\n  return new ComponentManager(createCard);\n}\n","import { AnimationManager } from \"ui/animation/animation_manager\";\nimport { LiteralTypeDescriptor, booleanDescriptor } from \"model/descriptor/literals\";\nimport { activeRecordDescriptor } from \"model/descriptor/record\";\nimport { Card} from \"model/domain\";\nimport { batch } from \"solid-js\";\n\nexport const enum FlipState {\n  Flat = 1,\n  FlippingUpToVertical,\n  FlippingDownFromVertical,\n}\n\nexport type Animations = FlipState;\n\nexport const cardUIDescriptor = activeRecordDescriptor({\n  flipState: new LiteralTypeDescriptor<FlipState>(),\n  peeking: booleanDescriptor,  \n});\n\nexport type CardUI = typeof cardUIDescriptor.aMutable;\nexport type CardUIState = typeof cardUIDescriptor.aState;\n\nexport class CardController {\n  constructor(\n    private readonly card: Card,\n    private readonly cardUI: CardUI,\n    private readonly animations: AnimationManager<Animations>,\n  ) {}\n\n  async flip(): Promise<void> {\n    this.internalFlip(() => {\n      this.card.visibleFaceIndex = this.card.visibleFaceIndex + 1;\n    })\n  }\n\n  async flipTemporarily(peeking: boolean): Promise<void> {\n    this.internalFlip(() => {\n      this.cardUI.peeking = peeking;\n    });\n  }\n\n  private async internalFlip(doFlip: () => void) {\n    this.cardUI.flipState = FlipState.FlippingUpToVertical;\n    await this.animations.waitForAnimation(FlipState.FlippingUpToVertical);\n    batch(() => {\n      doFlip();\n      this.cardUI.flipState = FlipState.FlippingDownFromVertical;\n    });\n    await this.animations.waitForAnimation(FlipState.FlippingDownFromVertical);\n    this.cardUI.flipState = FlipState.Flat;\n  }\n}\n","import { Animations, FlipState } from \"./card_controller\";\nimport styles from './card.module.scss';\nimport { ParentProps, createSignal } from \"solid-js\";\nimport { AnimationManager } from \"ui/animation/animation_manager\";\n\nexport type CardProps = ParentProps<{\n  flipState: FlipState,\n  elevated: boolean,\n  animations: AnimationManager<Animations>,\n}>;\n\nexport function CardComponent(props: CardProps) {\n  const [cardRef, setCardRef] = createSignal<HTMLDivElement>();\n  return (\n    <div\n        classList={{\n          [styles.card]: true,\n          [styles.elevated]: props.elevated,\n        }}>\n      <div\n          classList={{\n              [styles.rotate]: true,\n              [styles.flat]: props.flipState === FlipState.Flat,\n              [styles.flippingUpToVertical]: props.flipState === FlipState.FlippingUpToVertical,\n              [styles.flippingDownFromVertical]: props.flipState === FlipState.FlippingDownFromVertical,\n          }}\n          onTransitionEnd={props.animations.createTransitionEndEventListener(\n            cardRef,\n            () => props.flipState,\n          )}\n          ref={setCardRef}\n      >\n        <div classList={{\n            [styles.scale]: true,\n            [styles.flat]: props.flipState === FlipState.Flat,\n            [styles.flippingUpToVertical]: props.flipState === FlipState.FlippingUpToVertical,\n            [styles.flippingDownFromVertical]: props.flipState === FlipState.FlippingDownFromVertical,\n        }}>\n          {props.children}\n        </div>\n      </div>\n    </div>\n  );\n}\n","@value cardWidth: min(4vw, 4vh);\n@value cardHeight: calc(cardWidth * 1.39);\n@value cardBorderRadius: .4vw;\n@value flipAnimationDuration: 200ms;\n\n.card {\n  width: cardWidth;\n  height: cardHeight;\n  transform-origin: center;\n  transform: translateZ(0);\n  transition: transform flipAnimationDuration ease-in-out;\n}\n\n.card.elevated {\n  transform: translateZ(calc(cardWidth/2));\n}\n\n.rotate {\n  transform: rotateY(0);\n  transition: none;\n}\n\n.rotate.flippingUpToVertical {\n  transform: rotateY(90deg);\n  transition: transform calc(flipAnimationDuration/2) ease-in;\n  transition-delay: flipAnimationDuration;\n}\n\n.rotate.flippingDownFromVertical {\n  transform: rotateY(180deg);\n  transition: transform calc(flipAnimationDuration/2) ease-out;\n}\n\n.scale {\n  transition: none;\n}\n\n.scale.flat, .scale.flippingUpToVertical {\n  transform: scaleX(1);\n}\n\n.scale.flippingDownFromVertical {\n  transform: scaleX(-1);\n}","import { CardBackgroundType, CardFace, CardFaceChoice, CardFaceChoiceBack, CardFaceResource, CardFaceResourceBack, CardFaceType, CardType } from \"model/domain\";\nimport styles from './card_face.module.scss';\nimport { Component } from \"solid-js\";\nimport { Dynamic } from \"solid-js/web\";\nimport { CardFaceResourceComponent } from \"./card_face_resource\";\nimport { CardFaceResourceBackComponent } from \"./card_face_resource_back\";\nimport { CardFaceChoiceComponent } from \"./card_face_choice\";\nimport { CardFaceChoiceBackComponent } from \"./card_face_choice_back\";\n\n\nconst cardFaceComponents: { [K in CardFaceType]: Component<CardFaceProps>} = {\n  [CardFaceType.Resource]: function (props: CardFaceProps) {\n    return <CardFaceResourceComponent\n        face={props.face as CardFaceResource}\n        cardType={props.cardType}/>;\n  },\n  [CardFaceType.ResourceBack]: function (props: CardFaceProps) {\n    return <CardFaceResourceBackComponent\n        face={props.face as CardFaceResourceBack}\n        cardType={props.cardType}/>;\n  },\n  [CardFaceType.Choice]: function (props: CardFaceProps) {\n    return <CardFaceChoiceComponent\n        face={props.face as CardFaceChoice}\n        cardType={props.cardType}/>;\n  },\n  [CardFaceType.ChoiceBack]: function (props: CardFaceProps) {\n    return <CardFaceChoiceBackComponent\n        face={props.face as CardFaceChoiceBack}/>;\n  },\n}\n\nexport type CardFaceProps = {\n  face: CardFace\n  cardType: CardType,\n};\n\nexport function CardFaceComponent(props: CardFaceProps) {\n  return (\n    <div classList={{\n      [styles['card-face']]: true,\n      [styles['backgroundClear']]: props.face.background === CardBackgroundType.Clear,\n      [styles['backgroundCrosshatched']]: props.face.background === CardBackgroundType.Crosshatched,\n      [styles['backgroundDoor']]: props.face.background === CardBackgroundType.Door,\n      [styles['backgroundPassageway']]: props.face.background === CardBackgroundType.Passageway,\n    }}>\n      <Dynamic\n          component={cardFaceComponents[props.face.type]}\n          face={props.face}\n          cardType={props.cardType}/>\n    </div>\n  );\n}\n","@use '../card.module.scss';\n\n.card-face {\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  border-radius: cardBorderRadius;\n  border-width: .1vh;\n  border-style: solid;  \n  box-sizing: border-box;\n}\n\n.card-face.backgroundClear {\n  background-color: blue;\n  border-color: darkblue;\n}\n\n.card-face.backgroundDoor {\n  background-color: brown;\n  border-color: black;\n}\n\n.card-face.backgroundCrosshatched {\n  background-color: grey;\n  border-color: #222;\n}\n\n.card-face.backgroundPassageway {\n  background-color: green;\n  border-color: darkgreen;\n\n}\n\n","import { CardFaceResource, CardType } from \"model/domain\";\nimport { EffectStripComponent } from \"components/effect/effect_strip\";\nimport { CardFaceDescriptionComponent } from \"./card_face_description\";\nimport { CardFaceNameComponent } from \"./card_face_name\";\n\nexport function CardFaceResourceComponent(props: {\n  cardType: CardType,\n  face: CardFaceResource,\n}) {\n  return (\n    <>\n      <EffectStripComponent effects={props.face.benefit}/>\n      <CardFaceDescriptionComponent>\n        <CardFaceNameComponent name={props.cardType.name}/>\n      </CardFaceDescriptionComponent>\n      <EffectStripComponent effects={props.face.cost}/>\n    </>\n  );\n}\n\n","import { Effect } from \"model/domain\";\nimport styles from './effect_strip.module.scss';\nimport { For } from \"solid-js\";\nimport { EffectComponent } from \"./effect\";\n\nexport function EffectStripComponent(props: {\n  effects?: readonly Effect[],\n}) {\n  return (\n    <div class={styles.container}>\n      <For each={props.effects}>\n        {effect => (<EffectComponent effect={effect}/>)}\n      </For>\n    </div>\n  );\n}",".container {\n  width: 100%;\n  height: 1vw;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n}","import { Effect, EffectDirection, SymbolType } from \"model/domain\";\nimport styles from './effect.module.scss';\n\nconst ResourceSymbols: Record<SymbolType, string> = {\n  [SymbolType.Force]: 'A',\n  [SymbolType.Finesse]: 'B',\n  [SymbolType.Magic]: 'C',\n  [SymbolType.Damage]: 'D',\n  [SymbolType.Age]: 'E',\n  [SymbolType.Fire]: 'F',\n  [SymbolType.Draw]: 'G',\n};\n\nexport function EffectComponent(props: {\n  effect: Effect,\n}) {\n  return (\n    <div classList={{\n      [styles.container]: true,\n      [styles.down]: props.effect.direction === EffectDirection.Down,\n    }}>\n      {ResourceSymbols[props.effect.symbol]}\n    </div>\n  );\n}\n",".container {\n  font-size: 1vw;\n  text-align: center;\n  vertical-align: middle;\n  overflow: hidden;\n  width: 1vw;\n  height: 1vw;\n}\n\n.container.down {\n  transform: scaleY(-1);\n  transform-origin: center;\n}","import { ParentProps } from \"solid-js\";\nimport styles from './card_face_description.module.scss';\n\nexport function CardFaceDescriptionComponent(props: ParentProps<{}>) {\n  return (\n    <div class={styles.container}>\n      {props.children}\n    </div>\n  );\n}",".container {\n  flex: 1;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n}\n\n","import styles from './card_face_name.module.scss';\n\nexport function CardFaceNameComponent(props: {\n  name: string,\n}) {\n  return (<div class={styles.container}>{props.name}</div>);\n}",".container {\n  font-size: .7vw;\n  text-align: center;\n  font-weight: bold;\n  text-transform: capitalize;\n}\n","import { CardFaceResourceBack, CardType } from \"model/domain\";\nimport { EffectStripComponent } from \"components/effect/effect_strip\";\nimport { CardFaceDescriptionComponent } from \"./card_face_description\";\nimport { CardFaceNameComponent } from \"./card_face_name\";\n\nexport function CardFaceResourceBackComponent(props: {\n  face: CardFaceResourceBack,\n  cardType: CardType,\n}) {\n  return (\n    <>\n      <EffectStripComponent/>\n      <CardFaceDescriptionComponent>\n        <CardFaceNameComponent name={props.cardType.name}/>\n      </CardFaceDescriptionComponent>\n      <EffectStripComponent effects={props.face.cost}/>\n    </>\n  );\n}\n\n","import { CardFaceChoice, CardType } from \"model/domain\";\nimport { EffectStripComponent } from \"components/effect/effect_strip\";\nimport { CardFaceNameComponent } from \"./card_face_name\";\n\nexport function CardFaceChoiceComponent(props: {\n  face: CardFaceChoice,\n  cardType: CardType,\n}) {\n  return (\n    <>\n      <EffectStripComponent effects={props.face.effect}/>\n      <CardFaceNameComponent name={props.cardType.name}/>\n      <EffectStripComponent effects={props.face.cost}/>\n    </>\n  );\n}\n\n","import { CardFaceChoiceBack } from \"model/domain\";\nimport { EffectStripComponent } from \"components/effect/effect_strip\";\nimport { CardFaceDescriptionComponent } from \"./card_face_description\";\nimport { CardFaceNameComponent } from \"./card_face_name\";\n\nexport function CardFaceChoiceBackComponent(props: {\n  face: CardFaceChoiceBack,\n}) {\n  return (\n    <>\n      <EffectStripComponent/>\n      <CardFaceDescriptionComponent>\n        <CardFaceNameComponent name={props.face.name}/>\n      </CardFaceDescriptionComponent>\n      <EffectStripComponent effects={props.face.cost}/>\n    </>\n  );\n}\n","import { BookSpread, BookSpreadType } from \"model/domain\";\nimport { Animations, PageController, PageSide, pageUIDescriptor } from \"./page_controller\";\nimport { AnimationManager } from \"ui/animation/animation_manager\";\nimport { PageComponent } from \"./page\";\nimport { ComponentManager } from \"components/component_manager\";\n\nexport function createPageManager({\n  side,\n  onNavigate,\n}: {\n  side: PageSide, \n  // TODO onNavigate params\n  onNavigate: (to: BookSpreadType) => void,\n}) {\n  // might need a different controller per spread type?\n  function createPage(spread: BookSpread) {\n    const animations = new AnimationManager<Animations>();\n    const pageUI = pageUIDescriptor.create({\n      popped: false,\n    });\n    const controller = new PageController(pageUI, animations);\n      \n    const Component = () => (\n      <PageComponent\n          animations={animations}\n          onNavigate={onNavigate}\n          pageUI={pageUI}\n          side={side}\n          spread={spread}/>\n    );\n  \n    return {\n      controller,\n      Component,\n    }\n  }\n  return new ComponentManager(createPage);\n}\n","import { booleanDescriptor } from \"model/descriptor/literals\";\nimport { activeRecordDescriptor } from \"model/descriptor/record\";\nimport { createEffect } from \"solid-js\";\nimport { AnimationManager } from \"ui/animation/animation_manager\";\n\nexport const enum PageSide {\n  Left = 1,\n  Right,\n}\n\nexport type Animations = 'pop-up' | 'pop-down';\n\nexport const pageUIDescriptor = activeRecordDescriptor({\n  popped: booleanDescriptor,\n});\n\nexport type PageUI = typeof pageUIDescriptor.aMutable;\nexport type PageUIState = typeof pageUIDescriptor.aState;\n\nexport class PageController {\n\n  constructor(\n    private readonly pageUI: PageUI,\n    private readonly animations: AnimationManager<Animations>,\n  ) {\n  }\n\n  popUp() {\n    this.pageUI.popped = true;\n    return this.animations.waitForAnimation('pop-up');\n  }\n\n  popDown() {\n    this.pageUI.popped = false;\n    return this.animations.waitForAnimation('pop-down');\n  }\n}\n","import { BookSpread, BookSpreadRoom, BookSpreadTableOfContents, BookSpreadType } from \"model/domain\";\nimport { Component } from \"solid-js\";\nimport { Animations, PageSide, PageUI } from \"./page_controller\";\nimport { Dynamic } from \"solid-js/web\";\nimport { PageToCComponent } from \"./toc/page_toc\";\nimport { PageRoomComponent } from \"./room/page_room\";\nimport { AnimationManager } from \"ui/animation/animation_manager\";\n\nexport type PageProps<T extends BookSpread = BookSpread> = {\n  animations: AnimationManager<Animations>\n  spread: T,\n  pageUI: PageUI,\n  side: PageSide,\n  onNavigate: (to: BookSpreadType) => void,\n};\n\nconst pageComponents: { [K in BookSpreadType]: Component<PageProps>} = {\n  [BookSpreadType.Room]: function (props: PageProps) {\n    return <PageRoomComponent\n        animations={props.animations}\n        spread={props.spread as BookSpreadRoom}\n        pageUI={props.pageUI}\n        side={props.side}\n        onNavigate={props.onNavigate}/>;\n  },\n  [BookSpreadType.TableOfContents]: function (props: PageProps) {\n    return <PageToCComponent\n        animations={props.animations}\n        spread={props.spread as BookSpreadTableOfContents}\n        pageUI={props.pageUI}\n        side={props.side}\n        onNavigate={props.onNavigate}/>\n  },\n}\n\nexport function PageComponent(props: PageProps) {\n  return (\n    <Dynamic\n        component={pageComponents[props.spread.type]}\n        animations={props.animations}\n        spread={props.spread}\n        pageUI={props.pageUI}\n        side={props.side}\n        onNavigate={props.onNavigate}/>\n  )\n}\n\n\n","import { BookSpreadTableOfContents, BookSpreadType } from \"model/domain\";\nimport { PageProps } from \"../page\";\nimport { PageSide } from \"../page_controller\";\nimport { Component } from \"solid-js\";\nimport { PageBlankComponent } from \"../blank/page_blank\";\nimport { Dynamic } from \"solid-js/web\";\nimport { Cutout } from \"ui/cutout/cutout\";\nimport styles from './page_toc.module.scss';\n\ntype PageToCProps = PageProps<BookSpreadTableOfContents>;\n\nconst sideComponents: { [K in PageSide]: Component<PageToCProps>} = {\n  [PageSide.Left]:PageBlankComponent,\n  [PageSide.Right]: function (props: PageToCProps) {\n    return <PageTocRightComponent\n        animations={props.animations}\n        pageUI={props.pageUI}\n        side={props.side}\n        spread={props.spread}\n        onNavigate={props.onNavigate}/>\n  },\n}\n\n\nexport function PageToCComponent(props: PageToCProps) {\n  return (\n    <Dynamic\n      component={sideComponents[props.side]} animations={props.animations}\n      pageUI={props.pageUI}\n      side={props.side}\n      onNavigate={props.onNavigate}\n      spread={props.spread}\n    />\n  );\n}\n\nfunction PageTocRightComponent(props: PageToCProps) {\n  return (\n    <div class={styles.toc}>\n      <Cutout\n          class={styles.row}\n          up={props.pageUI.popped}\n          onPoppedUpOrDown={props.animations.createCutoutPoppedUpOrDownCallback('pop-up', 'pop-down')}>\n        <h1>GRAND TERMINUS</h1>\n      </Cutout>\n      <Cutout\n          class={styles.row}\n          up={props.pageUI.popped}\n          onPoppedUpOrDown={props.animations.createCutoutPoppedUpOrDownCallback('pop-up', 'pop-down')}>\n        <button onClick={() => props.onNavigate(BookSpreadType.Room)}>\n          <h2>Begin Origin</h2>\n        </button>\n      </Cutout>\n    </div >  \n  );\n}\n","export function PageBlankComponent() {\n  return null;\n}","import { JSX, ParentProps, createEffect } from 'solid-js';\nimport styles from './cutout.module.scss';\n\nexport type CutoutProps = ParentProps<{\n  style?: JSX.CSSProperties,\n  class?: string,\n  up: boolean,\n  onPoppedUpOrDown?: (up: boolean) => void,\n}>;\n\n// TODO: find correct typing for style\nexport function Cutout(props: CutoutProps) {\n  let cutoutRef: HTMLDivElement | undefined;\n  const onTransitionEnd = function(e: TransitionEvent) {\n    if (e.target === cutoutRef) {\n      props.onPoppedUpOrDown?.(props.up);\n    }\n  };  \n\n  return (\n    <div\n        ref={cutoutRef}\n        class={props.class}\n        classList={{\n          [styles.cutout]: true,\n          [styles.up]: props.up,\n        }}\n        style={props.style}\n        onTransitionEnd={onTransitionEnd}\n    >\n      {props.children}\n    </div>\n  );\n}\n","@value popupAngle: -85deg;\n\n.cutout {\n  transform-origin: bottom;\n  transform: rotateX(0deg);\n  transition-property: transform;\n  transition-duration: 300ms;\n  transition-timing-function: ease-in;\n}\n\n.cutout.up {\n  transform: rotateX(popupAngle);\n  transition-duration: 400ms;\n  transition-timing-function: cubic-bezier(.47,1.64,.41,.8);\n}\n\n// .cutout.down {\n// }\n\n// @keyframes popupAnimation {\n//   from {\n//     transform: rotateX(0deg) scaleY(1);\n//   }\n\n//   to {\n//     transform: rotateX(popupAngle) scaleY(1);    \n//   }\n// }\n\n// @keyframes popdownAnimation {\n//   from {\n//     transform: rotateX(popupAngle) scaleY(1);    \n//   }\n\n//   to {\n//     transform: rotateX(0deg) scaleY(1);\n//   }\n// }",".toc {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n}\n\n.row {\n  flex: 0;\n}","import { BookSpreadRoom } from \"model/domain\";\nimport { PageProps } from \"../page\";\nimport styles from './page_room.module.scss';\nimport { Cutout, CutoutProps } from \"ui/cutout/cutout\";\nimport { For } from \"solid-js\";\n\ntype TestCutout = {\n  leftPercent: number,\n  topPercent: number,\n  widthPercent: number,\n  heightPercent: number,\n  color: string,\n}\n\nfunction TestCutoutComponent(props: Pick<CutoutProps, 'onPoppedUpOrDown' | 'up'> & {\n  cutout: TestCutout,\n}) {\n  return (\n    // Since cutout rotates the div we need to either apply the translation before the rotation in the same style, or parent it in another element that translates it like this\n    \n    <Cutout\n        up={props.up}\n        style={{\n          top: `${props.cutout.topPercent}%`,\n          left: `${props.cutout.leftPercent}%`,\n          width: `${props.cutout.widthPercent}%`,\n          height: `${props.cutout.heightPercent}%`,\n          \"transition-delay\": `${(100 - props.cutout.topPercent) * 10}ms`,\n          position: 'absolute', \n        }}\n        onPoppedUpOrDown={props.onPoppedUpOrDown}>\n      <div\n          class={styles.testCutout}\n          style={{\n            background: props.cutout.color,\n          }}/>\n    </Cutout>\n  );\n}\n\n\nexport function PageRoomComponent(props: PageProps<BookSpreadRoom>) {\n  const onPoppedUpOrDown = props.animations.createCutoutPoppedUpOrDownCallback(\n    'pop-up',\n    'pop-down'\n  );\n  const cutouts = new Array(3 + Math.floor(Math.random() * 30)).fill(0).map<TestCutout>(() => {\n    const widthPercent = Math.random() * 5 + 3;\n    const heightPercent = Math.pow(Math.random(), 2) * 15 + 5;\n    const leftPercent = Math.random() * (100 - widthPercent);\n    const topPercent = Math.random() * (100 - heightPercent);\n    return {\n      topPercent,\n      leftPercent,\n      widthPercent,\n      heightPercent, \n      color: `#${Math.floor(Math.random() * 16777215).toString(16)}`,\n    };\n  });\n  return (\n    <div\n        class={styles.room}\n        style={{\n          background: `#${Math.floor(Math.random() * 16777215).toString(16)}`\n        }}>\n      <For each={cutouts}>\n        {cutout => (\n          <TestCutoutComponent\n              up={props.pageUI.popped}\n              onPoppedUpOrDown={onPoppedUpOrDown}\n              cutout={cutout}/>\n        )}\n      </For>\n    </div>\n  );\n\n}\n",".room {\n  width: 100%;\n  height: 100%;\n}\n\n.testCutout {\n  width: 100%;\n  height: 100%;\n  transform-origin: bottom;\n}","import { cardDescriptor, gameDescriptor } from \"model/domain\";\nimport { cardTypeKick } from \"data/cards/kick\";\nimport { cardTypeMight } from \"data/cards/might\";\nimport { cardTypeNextRoom } from \"./cards/next_room\";\n\nexport const cardKick = cardDescriptor.create({\n  type: cardTypeKick,\n  visibleFaceIndex: 0,\n});\nexport const cardMight = cardDescriptor.create({\n  type: cardTypeMight,\n  visibleFaceIndex: 1,\n});\nexport const cardNextRoom = cardDescriptor.create({\n  type: cardTypeNextRoom,\n  visibleFaceIndex: 0,\n})\n\nexport const initialGame = gameDescriptor.create({\n  book: {\n    spread: undefined,\n  },\n  cardSlots: [\n    {\n      targetCard: cardDescriptor.snapshot(cardMight),\n      playedCards: [],\n    },\n    {\n      targetCard: cardDescriptor.snapshot(cardMight),\n      playedCards: [],\n    },\n    {\n      targetCard: cardDescriptor.snapshot(cardKick),\n      playedCards: [],\n    },\n    {\n      targetCard: cardDescriptor.snapshot(cardMight),\n      playedCards: [],\n    },\n    {\n      targetCard: undefined,\n      playedCards: [],\n    },\n    {\n      targetCard: undefined,\n      playedCards: [],\n    },\n  ],\n});\n\n","import { DamageUp, ForceUp } from \"data/effects\";\nimport { CardBackgroundType, CardFaceType, cardFaceResourceBackDescriptor, cardFaceResourceDescriptor, cardTypeDescriptor } from \"model/domain\";\n\nconst cardFaceKickBack = cardFaceResourceBackDescriptor.freeze({\n  type: CardFaceType.ResourceBack,\n  background: CardBackgroundType.Crosshatched,\n  cost: [ForceUp],\n});\nconst cardFaceKickFront = cardFaceResourceDescriptor.freeze({\n  type: CardFaceType.Resource,\n  background: CardBackgroundType.Clear,\n  cost: [],\n  benefit: [DamageUp],\n});\nexport const cardTypeKick = cardTypeDescriptor.freeze({\n  name: 'kick',\n  description: 'A swift kick.',\n  faces: [cardFaceKickBack, cardFaceKickFront],\n});\n","import { EffectDirection, SymbolType, effectDescriptor } from \"model/domain\";\n\nexport const ForceUp = effectDescriptor.freeze({\n  direction: EffectDirection.Up,\n  symbol: SymbolType.Force,\n});\n\nexport const ForceDown = effectDescriptor.freeze({\n  direction: EffectDirection.Down,\n  symbol: SymbolType.Force,\n});\n\nexport const FinesseUp = effectDescriptor.freeze({\n  direction: EffectDirection.Up,\n  symbol: SymbolType.Finesse,\n});\n\nexport const FinesseDown = effectDescriptor.freeze({\n  direction: EffectDirection.Down,\n  symbol: SymbolType.Finesse,\n});\n\nexport const MagicUp = effectDescriptor.freeze({\n  direction: EffectDirection.Up,\n  symbol: SymbolType.Magic,\n});\n\nexport const MagicDown = effectDescriptor.freeze({\n  direction: EffectDirection.Down,\n  symbol: SymbolType.Magic,\n});\n\nexport const DamageUp = effectDescriptor.freeze({\n  direction: EffectDirection.Up,\n  symbol: SymbolType.Damage,\n});\n\nexport const DamageDown = effectDescriptor.freeze({\n  direction: EffectDirection.Down,\n  symbol: SymbolType.Damage,\n});\n\nexport const FireUp = effectDescriptor.freeze({\n  direction: EffectDirection.Up,\n  symbol: SymbolType.Fire,\n});\n\nexport const FireDown = effectDescriptor.freeze({\n  direction: EffectDirection.Down,\n  symbol: SymbolType.Fire,\n});\n\nexport const AgeUp = effectDescriptor.freeze({\n  direction: EffectDirection.Up,\n  symbol: SymbolType.Age,\n});\n\nexport const AgeDown = effectDescriptor.freeze({\n  direction: EffectDirection.Down,\n  symbol: SymbolType.Age,\n});\n\n","import { ForceUp } from \"data/effects\";\nimport { CardBackgroundType, CardFaceType, cardFaceResourceBackDescriptor, cardFaceResourceDescriptor, cardTypeDescriptor } from \"model/domain\";\n\nconst cardFaceMightBack = cardFaceResourceBackDescriptor.freeze({\n  type: CardFaceType.ResourceBack,\n  background: CardBackgroundType.Crosshatched,\n  cost: [],\n});\nconst cardFaceMightFront = cardFaceResourceDescriptor.freeze({\n  type: CardFaceType.Resource,\n  background: CardBackgroundType.Clear,\n  cost: [],\n  benefit: [ForceUp],\n});\nexport const cardTypeMight = cardTypeDescriptor.freeze({\n  name: 'might',\n  description: 'You brace for the next feat of strength.',\n  faces: [cardFaceMightBack, cardFaceMightFront],\n});","import { ForceUp } from \"data/effects\";\nimport { CardBackgroundType, CardFaceType, cardFaceChoiceBackDescriptor, cardFaceChoiceDescriptor, cardTypeDescriptor } from \"model/domain\";\n\nconst cardFaceNextRoomBack = cardFaceChoiceBackDescriptor.freeze({\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.Door,\n  name: 'jammed door',\n  cost: [ForceUp],\n});\nconst cardFaceNextRoomFront = cardFaceChoiceDescriptor.freeze({\n  type: CardFaceType.Choice,\n  background: CardBackgroundType.Clear,\n  cost: [],\n  effect: [],\n});\nexport const cardTypeNextRoom = cardTypeDescriptor.freeze({\n  name: 'next room',\n  description: 'the adventure continues',\n  faces: [cardFaceNextRoomBack, cardFaceNextRoomFront],\n});","import { AnimationManager } from \"ui/animation/animation_manager\";\nimport { SpreadComponent } from \"./spread\";\nimport { Animations, SpreadController } from \"./spread_controller\";\nimport { Component } from \"solid-js\";\nimport { BookSpread, CardSlot } from \"model/domain\";\n\nexport function createSpread({\n  CardSlotsComponent,\n}: {\n  CardSlotsComponent: Component<{ model: readonly CardSlot[] }>,\n}) {\n  const animations = new AnimationManager<Animations>();\n  const controller = new SpreadController();\n  function Component(props: { model: BookSpread }) {\n    return (\n        <SpreadComponent\n            animations={animations}\n            CardSlotsComponent={CardSlotsComponent}\n            spread={props.model}\n        />\n    );\n  };\n\n  return {\n    controller,\n    Component,\n  }\n}","import { BookSpread, BookSpreadRoom, BookSpreadType, CardSlot } from \"model/domain\";\nimport { Component } from \"solid-js\";\nimport { Dynamic } from \"solid-js/web\";\nimport { AnimationManager } from \"ui/animation/animation_manager\";\nimport { SpreadRoomComponent } from \"./room/spread_room\";\nimport { SpreadBlankComponent } from \"./blank/spread_blank\";\nimport { Animations } from \"./spread_controller\";\n\nexport type SpreadProps<T extends BookSpread = BookSpread> = {\n  animations: AnimationManager<Animations>,\n  spread: T,\n  CardSlotsComponent: Component<{ model: readonly CardSlot[] }>,\n};\n\nconst spreadComponents: { [K in BookSpreadType]: Component<SpreadProps>} = {\n  [BookSpreadType.Room]: function (props: SpreadProps) {\n    return <SpreadRoomComponent\n        animations={props.animations}\n        spread={props.spread as BookSpreadRoom}\n        CardSlotsComponent={props.CardSlotsComponent}/>;\n  },\n  [BookSpreadType.TableOfContents]: SpreadBlankComponent,\n}\n\nexport function SpreadComponent(props: SpreadProps) {\n  return (\n    <Dynamic\n        component={spreadComponents[props.spread.type]} \n        animations={props.animations}\n        spread={props.spread}\n        CardSlotsComponent={props.CardSlotsComponent}/>\n  )\n}","import { BookSpreadRoom } from \"model/domain\";\nimport { SpreadProps } from \"../spread\";\nimport styles from './spread_room.module.scss';\n\nexport function SpreadRoomComponent(props: SpreadProps<BookSpreadRoom>) {\n  return (\n    <div class={styles.container}>\n      <props.CardSlotsComponent model={props.spread.cardSlots}/>\n    </div>\n  );\n}",".container {\n  display: flex;\n  width: 100%;\n  height: 100%;\n  align-items: center;\n}\n","export function SpreadBlankComponent() {\n  return null;\n}","export type Animations = '?';\n\nexport class SpreadController {\n  constructor() {\n\n  }\n\n\n}","import { InteractionManager } from \"rules/interaction_manager\";\nimport { DragOverlay } from \"./drag_overlay\";\nimport { DragOverlayController } from \"./drag_overlay_controller\";\nimport { Component } from \"solid-js\";\nimport { Card } from \"model/domain\";\n\nexport function createDragOverlay(\n  interactionManager: InteractionManager,\n  CardComponent: Component<{ model: Card }>,\n) {\n  const controller = new DragOverlayController();\n  function Card() {\n    return (\n      <>\n        {\n          interactionManager.draggedCard\n              && <CardComponent model={interactionManager.draggedCard}/>            \n        }\n      </>\n    );\n  }\n\n  function Component() {\n    return (\n      <>\n        {\n          interactionManager.lastMousePosition && (\n            <DragOverlay\n                cx={interactionManager.lastMousePosition[0]}\n                cy={interactionManager.lastMousePosition[1]}\n                Card={Card}\n            />\n          )\n        }\n      </>\n    );\n  }\n\n  return {\n    controller, \n    Component,\n  };\n}","import { Component } from 'solid-js';\nimport styles from './drag_overlay.module.scss';\n\nexport function DragOverlay(props: {\n  cx: number,\n  cy: number,\n  Card: Component,\n}) {\n  return (\n    <div class={styles.drag} style={{\n      transform: `translate(${props.cx}px, ${props.cy}px)`\n    }}>\n      <div class={styles['scale-up']}>\n        <props.Card/> \n      </div>\n    </div>\n  )\n}\n","@use '../card/card.module.scss';\n\n.drag {\n  position: absolute;\n  width: cardWidth;\n  height: cardHeight;\n  margin-left: calc(cardWidth/-2);\n  margin-top: calc(cardHeight/-2);\n}\n\n.scale-up { \n  transform: scale(2.5);\n}","export class DragOverlayController {\n  \n}\n"],"names":["_create","require","_tableController","_create1","_create2","_create3","_create4","_pageController","_domain","_initial","_create5","_interactionManager","_create6","window","onload","app","document","getElementById","game","initialGame","cardManager","createCardManager","interactionManger","InteractionManager","addEventListener","e","lastMousePosition","clientX","clientY","Component","TableComponent","controller","tableController","createTable","onNavigate","to","spread","bookSpreadRoomDescriptor","create","type","BookSpreadType","Room","cardSlots","targetCard","undefined","playedCards","cardNextRoom","bookController","showSpread","leftPageManager","createPageManager","side","PageSide","Left","rightPageManager","Right","cardSlotManager","createCardSlotManager","FactoryComponent","CardSlotsComponent","createCardSlots","SpreadComponent","createSpread","BookImpl","createBook","leftPageComponentManager","rightPageComponentManager","book","onClickCover","async","setView","View","Tilted","console","log","Hand","_$createComponent","model","SpreadOverlay","_$memo","_c$","DragOverlay","createDragOverlay","Deck","_tmpl$","Book","render","parcelHelpers","export","exports","_solidJs","ErrorBoundary","For","Index","Match","Show","Suspense","SuspenseList","Switch","createComponent","createRenderEffect","getOwner","createMemo","mergeProps","untrack","Aliases","voidFn","ChildProperties","DOMElements","DelegatedEvents","Dynamic","Hydration","NoHydration","Portal","Properties","SVGElements","SVGNamespace","assign","classList","className","clearDelegatedEvents","delegateEvents","dynamicProperty","escape","getHydrationKey","getNextElement","getNextMarker","getNextMatch","getPropAlias","hydrate","innerHTML","insert","isDev","isServer","renderToStream","renderToString","renderToStringAsync","resolveSSRNode","runHydrationEvents","setAttribute","setAttributeNS","ssr","ssrAttribute","ssrClassList","ssrElement","ssrHydrationKey","ssrSpread","ssrStyle","style","template","use","Set","Object","htmlFor","PropAliases","class","formnovalidate","$","BUTTON","INPUT","ismap","IMG","nomodule","SCRIPT","playsinline","VIDEO","readonly","TEXTAREA","prop","tagName","a","xlink","xml","$$EVENTS","code","element","init","options","disposer","createRoot","dispose","firstChild","owner","textContent","html","isCE","isSVG","node","t","createElement","content","fn","cloneNode","importNode","eventNames","document1","i","l","length","name","has","add","eventHandler","keys","removeEventListener","value","removeAttribute","namespace","removeAttributeNS","handler","delegate","Array","isArray","handlerFn","call","prev","classKeys","prevKeys","len","key","toggleClassKey","classValue","nodeStyle","cssText","v","s","removeProperty","setProperty","props","skipChildren","prevProps","children","insertExpression","ref","src","defineProperty","get","enumerable","parent","sharedConfig","context","arg","accessor","marker","initial","current","skipRef","assignProp","registry","warn","Error","completed","delete","el","nodeName","localName","nextSibling","start","end","count","nodeType","nodeValue","push","events","queued","queueMicrotask","shift","classNames","trim","split","nameLen","toggle","isProp","isChildProp","propAlias","forceProp","slice","toLowerCase","h","includes","replace","_","w","toUpperCase","ns","indexOf","composedPath","target","configurable","done","_$HY","disabled","data","cancelBubble","_$host","parentNode","host","unwrapArray","childNodes","cleaned","remove","multi","toString","createTextNode","cleanChildren","array","currentArray","normalizeIncomingArray","appendNodes","b","bLength","aEnd","bEnd","aStart","bStart","after","map","insertBefore","Map","set","index","sequence","replaceChild","reconcileArrays","Node","appendChild","normalized","unwrap","dynamic","item","String","replacement","inserted","isParent","gatherHydratable","root","templates","querySelectorAll","getAttribute","startsWith","id","throwInBrowser","func","err","error","nodes","needsId","SVG_NAMESPACE","createElementNS","args","enableHydration","globalThis","load","gather","renderId","hydrate$1","useShadow","hydrating","createEffect","user","runWithOwner","mount","body","HTMLHeadElement","clean","setClean","createSignal","cleanup","onCleanup","container","renderRoot","attachShadow","mode","removeChild","p","others","splitProps","cached","component","$DEVCOMP","isSvg","$PROXY","$TRACK","DEV","batch","cancelCallback","catchError","createComputed","createContext","createDeferred","createReaction","createResource","createSelector","createUniqueId","enableExternalSource","enableScheduling","equalFn","from","getListener","indexArray","lazy","mapArray","observable","on","onError","onMount","requestCallback","resetErrorBoundaries","startTransition","useContext","useTransition","taskIdCounter","isCallbackScheduled","isPerformingWork","taskQueue","currentTask","shouldYieldToHost","yieldInterval","deadline","maxYieldInterval","scheduleCallback","scheduledCallback","maxSigned31BitInt","channel","MessageChannel","port","port2","postMessage","port1","onmessage","currentTime","performance","now","hasTimeRemaining","navigator","scheduling","isInputPending","setupScheduler","startTime","timeout","newTask","expirationTime","task","splice","m","n","k","cmp","findIndex","enqueue","flushWork","initialTime","callback","workLoop","setHydrateContext","Symbol","signalOptions","equals","ERROR","runEffects","runQueue","STALE","PENDING","UNOWNED","owned","cleanups","NO_INIT","Owner","Transition","Scheduler","ExternalSourceFactory","Listener","Updates","Effects","ExecCount","transPending","setTransPending","detachedOwner","listener","unowned","updateFn","cleanNode","runUpdates","observers","observerSlots","comparator","readSignal","bind","running","sources","tValue","writeSignal","c","createComputation","updateComputation","runUserEffects","SuspenseContext","lookup","suspense","onInvalidate","tracking","tState","pSource","pFetcher","pOptions","source","fetcher","arguments","pr","initP","loadedUnderTransition","scheduled","resolved","contexts","setValue","storage","initialValue","setError","track","trigger","state","setState","ssrLoadFrom","loadEnd","onHydrated","promises","completeLoad","decrement","clear","read","increment","refetching","then","castError","defineProperties","loading","latest","refetch","mutate","timeoutMs","setDeferred","deferred","subs","val","entries","values","pure","size","deps","prevInput","defer","prevValue","input","result","handleError","o","prevListener","scheduler","Promise","resolve","effects","disposed","queue","res","defaultValue","Provider","createProvider","ctx","memo","resolveChildren","toArray","getSuspenseContext","factory","oldFactory","oldSource","x","runningTransition","this","updates","lookUpstream","sSlot","sourceSlots","isComp","TransitionRunning","markDownstream","time","runComputation","nextValue","tOwned","forEach","updatedAt","ordinary","triggerInTransition","inTransition","runTop","inFallback","ancestors","top","wait","tasks","scheduleQueue","apply","d","completeUpdates","userLength","ignore","pop","obs","reset","cause","runErrors","fns","f","results","subscribe","observer","TypeError","next","unsubscribe","producer","unsub","FALLBACK","list","mapFn","items","mapped","disposers","indexes","j","newItems","newIndices","newIndicesNext","temp","tempdisposers","tempIndexes","newEnd","newLen","fallback","mapper","Math","min","signals","hydrationEnabled","Comp","r","trueFn","propTraps","property","receiver","deleteProperty","getOwnPropertyDescriptor","ownKeys","resolveSource","proxy","Proxy","descriptors","getOwnPropertyDescriptors","blocked","flat","filter","clone","comp","wrap","mod","default","preload","counter","narrowedError","each","keyed","condition","when","child","conditions","evalConditions","conds","cond","Errors","errored","setErrored","suspenseListEquals","showContent","showFallback","SuspenseListContext","show","wrapper","setWrapper","listContext","setRegistry","register","reveal","revealOrder","tail","reg","reverse","all","every","stop","flicker","setFallback","store","rendered","interopDefault","__esModule","defineInteropFlag","exportAll","dest","hasOwnProperty","destName","_table","_animationManager","interactionManager","tableUI","tableUIDescriptor","view","TopDownBookCentered","animations","AnimationManager","onDragCancel","clearDrag","dragging","TableController","_tableModuleScss","tableRef","setTableRef","_el$","_el$2","_el$3","_el$4","_el$5","_el$6","_el$7","_el$8","_$addEventListener","_$use","createTransitionEndEventListener","_$insert","_$effect","_p$","_v$","styles","_v$2","room","_v$3","table","tilted","topDown","TopDown","topDownBookCentered","_v$4","_v$5","_v$6","hand","_v$7","deck","_v$8","_$className","_$classList","_$delegateEvents","module","_literals","_record","viewDescriptor","LiteralTypeDescriptor","activeRecordDescriptor","constructor","waitForAnimation","numberDescriptor","stringDescriptor","booleanDescriptor","componentDescriptor","snapshot","freeze","valueRecordDescriptor","ValueRecordTypeDescriptor","attributeTypes","mutable","attributeType","valueMutable","ActiveRecordProxyHandler","newValue","signal","ActiveRecordTypeDescriptor","AnimationCanceledError","_delay","_flattenedPromise","timeoutMillis","maybeCancelAnimation","animation","createFlattenedPromise","race","promise","delay","flattenedPromise","reject","maybeCompleteAnimation","createAnimationEndEventListener","animationIdAndName","animationName","animationId","createCutoutPoppedUpOrDownCallback","poppedUpValue","poppedDownValue","poppedUp","milliseconds","setTimeout","_resolve","_reject","_book","_bookController","renderPagePair","bookUI","bookUIDescriptor","previousSpread","turnLeftToRight","BookComponent","previousPages","currentPages","BookController","PageComponent","_bookModuleScss","FAKE_PAGE_COUNT","onClick","page","transform","z","_$style","spineRef","setSpineRef","_tmpl$3","openAnimation","_tmpl$2","spine","open","_option","optionalDescriptor","bookSpreadDescriptor","pageComponentManagers","lookupController","popDown","popUp","OptionalTypeDescriptor","mandatoryTypeDescriptor","symbolTypeDescriptor","effectDescriptor","cardFaceResourceDescriptor","cardFaceResourceBackDescriptor","cardFaceChoiceDescriptor","cardFaceChoiceBackDescriptor","cardFaceDescriptor","cardTypeDescriptor","cardDescriptor","cardSlotDescriptor","bookSpreadTableOfContentsDescriptor","bookDescriptor","gameDescriptor","_list","_union","SymbolType","Force","Finesse","Magic","Fire","Damage","Age","Draw","EffectDirection","Up","Down","symbol","direction","CardBackgroundType","CardFaceType","Crosshatched","Clear","Door","Passageway","Resource","ResourceBack","Choice","ChoiceBack","cardFaceCommon","background","cost","listDescriptor","benefit","effect","discriminatingUnionDescriptor","description","faces","visibleFaceIndex","TableOfContents","ListTypeDescriptor","elementTypeDescriptor","DiscriminatingUnionTypeDescriptor","cases","discriminatorState","discriminatorMutable","_cardSlot","_cardSlots","_componentManager","_cardSlotController","CardSlotComponent","CardComponent","ComponentManager","cardSlot","CardSlotController","internalOnDragStart","startDrag","internalOnDrop","drop","CardSlotComponentImpl","targetInteraction","allowedInteraction","onDragStart","onDrop","bordered","card","_cardSlotModuleScss","interactionStyles","Interaction","None","none","Drag","draggable","Activate","clickable","Disabled","immovable","NoDrop","Drop","Dragging","LongPress","_unreachableError","_card","dragged","setDragged","mousePosition","setMousePosition","longPress","setLongPress","draggedCard","targetCardSlot","draggedCardSlot","targetFace","cardFace","UnreachableError","interaction","flipTemporarily","finally","super","offset","_cardSlotsModuleScss","cache","WeakMap","lookupOrCreateComponent","lookupOrCreate","_cardController","_cardFace","_card1","cardUI","cardUIDescriptor","flipState","FlipState","Flat","peeking","elevated","FlippingUpToVertical","CardFaceComponent","face","cardType","CardController","FlippingDownFromVertical","internalFlip","doFlip","_cardModuleScss","cardRef","setCardRef","rotate","flippingUpToVertical","flippingDownFromVertical","scale","_cardFaceModuleScss","_cardFaceResource","_cardFaceResourceBack","_cardFaceChoice","_cardFaceChoiceBack","cardFaceComponents","CardFaceResourceComponent","CardFaceResourceBackComponent","CardFaceChoiceComponent","CardFaceChoiceBackComponent","_$p","_effectStrip","_cardFaceDescription","_cardFaceName","EffectStripComponent","CardFaceDescriptionComponent","CardFaceNameComponent","_effectStripModuleScss","_effect","EffectComponent","_effectModuleScss","ResourceSymbols","down","_cardFaceDescriptionModuleScss","_cardFaceNameModuleScss","_page","pageUI","pageUIDescriptor","popped","PageController","_pageToc","_pageRoom","pageComponents","PageRoomComponent","PageToCComponent","_pageBlank","_cutout","_pageTocModuleScss","sideComponents","PageBlankComponent","PageTocRightComponent","Cutout","row","up","onPoppedUpOrDown","$$click","toc","_cutoutModuleScss","cutoutRef","onTransitionEnd","_ref$","cutout","_pageRoomModuleScss","TestCutoutComponent","topPercent","left","leftPercent","width","widthPercent","height","heightPercent","position","testCutout","color","cutouts","floor","random","fill","pow","cardKick","cardMight","_kick","_might","_nextRoom","cardTypeKick","cardTypeMight","cardTypeNextRoom","_effects","cardFaceKickBack","ForceUp","cardFaceKickFront","DamageUp","ForceDown","FinesseUp","FinesseDown","MagicUp","MagicDown","DamageDown","FireUp","FireDown","AgeUp","AgeDown","cardFaceMightBack","cardFaceMightFront","cardFaceNextRoomBack","cardFaceNextRoomFront","_spread","_spreadController","SpreadController","_spreadRoom","_spreadBlank","spreadComponents","SpreadRoomComponent","SpreadBlankComponent","_spreadRoomModuleScss","_dragOverlay","_dragOverlayController","Card","DragOverlayController","_c$2","cx","cy","_dragOverlayModuleScss","drag"],"version":3,"file":"index.645733a2.js.map"}