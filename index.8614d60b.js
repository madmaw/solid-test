!function(e,t,r,o,n){var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s="function"==typeof a[o]&&a[o],i=s.cache||{},c="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function l(t,r){if(!i[t]){if(!e[t]){var n="function"==typeof a[o]&&a[o];if(!r&&n)return n(t,!0);if(s)return s(t,!0);if(c&&"string"==typeof t)return c(t);var d=new Error("Cannot find module '"+t+"'");throw d.code="MODULE_NOT_FOUND",d}u.resolve=function(r){var o=e[t][1][r];return null!=o?o:r},u.cache={};var p=i[t]=new l.Module(t);e[t][0].call(p.exports,u,p,p.exports,this)}return i[t].exports;function u(e){var t=u.resolve(e);return!1===t?{}:l(t)}}l.isParcelRequire=!0,l.Module=function(e){this.id=e,this.bundle=l,this.exports={}},l.modules=e,l.cache=i,l.parent=s,l.register=function(t,r){e[t]=[function(e,t){t.exports=r},{}]},Object.defineProperty(l,"root",{get:function(){return a[o]}}),a[o]=l;for(var d=0;d<t.length;d++)l(t[d]);if(r){var p=l(r);"object"==typeof exports&&"undefined"!=typeof module?module.exports=p:"function"==typeof define&&define.amd&&define((function(){return p}))}}({"4zTVb":[function(e,t,r){var o=e("solid-js/web"),n=e("components/table/create"),a=e("components/table/table_controller"),s=e("components/book/create"),i=e("components/card_slot/create"),c=e("components/card/create"),l=e("components/page/create"),d=e("data/initial"),p=e("rules/interaction_manager"),u=e("components/drag/create"),f=e("rules/game_manager"),m=e("components/deck/create"),g=e("components/status/create"),h=e("components/encounter/battle/create"),y=e("rules/games"),v=e("solid-js"),b=e("model/domain"),C=e("components/navigation_target"),k=e("base/unreachable_error"),x=e("components/encounter/event/create"),w=e("components/encounter/create"),T=e("ui/speaker/rendering_speaker"),j=e("ui/speaker/speech_synthesis_word_splitter"),F=e("ui/speaker/delay_word_splitter"),_=e("ui/speaker/polite_speaker");window.onload=function(){const e=new(0,j.SpeechSynthesisWordSplitter)(window.speechSynthesis,new(0,F.DelayWordSplitter)),t=new(0,T.RenderingSpeaker)(e),r=new(0,_.PoliteSpeaker)(t),D=document.getElementById("app"),S=d.initialGame,E=(0,c.createCardManager)(S),I=async e=>{switch(e.type){case C.NavigationTargetType.ToC:return await L.setView(a.View.TopDown),$.showSpread(b.bookSpreadTableOfContentsDescriptor.create({type:b.BookSpreadType.TableOfContents,unlockedChapters:0}),!0);case C.NavigationTargetType.Chapter:return await L.setView(a.View.Tilted),G.maybeCreatePlayer(),G.createChapter(e.chapterIndex),G.nextPage(void 0,void 0);case C.NavigationTargetType.Death:return await $.showSpread(b.bookSpreadDeathDescriptor.create({type:b.BookSpreadType.Death})),L.setView(a.View.TopDown);default:throw new(0,k.UnreachableError)(e)}},P=(0,l.createPageManager)(I),M=(0,i.createCardSlotManager)(E.FactoryComponent,(()=>V),S),{Component:A}=(0,i.createCardSlots)(M.FactoryComponent),B=(0,g.createStatusOverlay)(),{Component:R,controller:$}=(0,s.createBook)({pageComponentManager:P,book:S.book}),{Component:U,controller:L}=(0,n.createTable)(),O=(0,h.createEncounterBattleManger)(),N=(0,x.createEncounterEventManger)(),H=(0,w.createEncounter)(O,N),G=new(0,f.GameManager)(r,S,I,L,$,E,M,O,N),V=new(0,p.InteractionManager)(G,E,M);window.addEventListener("pointermove",(e=>{V.dragging&&(V.lastMousePosition=[e.clientX,e.clientY])})),window.addEventListener("mousemove",(e=>{const t=2*(e.clientX-window.innerWidth/2)/window.innerWidth,r=2*(e.clientY-window.innerHeight/2)/window.innerHeight;L.look(Math.pow(t,3)/2,Math.pow(r,3)/2)}));const{Component:z}=(0,m.createDeck)((()=>S.playerCharacter?.deck),E.FactoryComponent);function W(){return(0,o.createComponent)(A,{get model(){return S.playerHand}})}function X(){return(0,o.memo)((()=>{const e=(0,o.memo)((()=>!!S.book.spread));return()=>e()&&(0,o.createComponent)(A,{get model(){return S.book.cardSlots}})})())}const{Component:q}=(0,u.createDragOverlay)(V,E.FactoryComponent);function Y(){const e=(0,v.createMemo)((()=>(0,y.gameEncounterBattle)(S)||(0,y.gameEncounterEvent)(S)));return(0,o.createComponent)(R,{get children(){return(0,o.memo)((()=>!!e()))()&&(0,o.createComponent)(H,{get model(){return e()}})}})}function Z(){return(0,o.memo)((()=>{const e=(0,o.memo)((()=>!!S.playerCharacter));return()=>e()&&(0,o.createComponent)(B,{get playerCharacter(){return S.playerCharacter},speaker:t})})())}(0,o.render)((()=>(0,o.createComponent)(q,{get children(){return(0,o.createComponent)(U,{Book:Y,Hand:W,Deck:z,SpreadOverlay:X,StatusOverlay:Z})}})),D),setTimeout((async()=>{I({type:C.NavigationTargetType.ToC})}),2e3)}},{"solid-js/web":"33rlw","components/table/create":"axFgj","components/table/table_controller":"5G5V6","components/book/create":"dTDP6","components/card_slot/create":"189zH","components/card/create":"9KqLK","components/page/create":"eFnBZ","data/initial":"dG5uB","rules/interaction_manager":"3lVrH","components/drag/create":"4CbJY","rules/game_manager":"bPP2R","components/deck/create":"1ZOwu","components/status/create":"lXiSb","components/encounter/battle/create":"h8cfH","rules/games":"3tjca","solid-js":"5rsr6","model/domain":"hG1oc","components/navigation_target":"5PTDl","base/unreachable_error":"eQLwm","components/encounter/event/create":"6nTV1","components/encounter/create":"f4J0Y","ui/speaker/rendering_speaker":"14Eqm","ui/speaker/speech_synthesis_word_splitter":"i62HP","ui/speaker/delay_word_splitter":"6sNch","ui/speaker/polite_speaker":"9fV2F"}],"33rlw":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"ErrorBoundary",(()=>n.ErrorBoundary)),o.export(r,"For",(()=>n.For)),o.export(r,"Index",(()=>n.Index)),o.export(r,"Match",(()=>n.Match)),o.export(r,"Show",(()=>n.Show)),o.export(r,"Suspense",(()=>n.Suspense)),o.export(r,"SuspenseList",(()=>n.SuspenseList)),o.export(r,"Switch",(()=>n.Switch)),o.export(r,"createComponent",(()=>n.createComponent)),o.export(r,"effect",(()=>n.createRenderEffect)),o.export(r,"getOwner",(()=>n.getOwner)),o.export(r,"memo",(()=>n.createMemo)),o.export(r,"mergeProps",(()=>n.mergeProps)),o.export(r,"untrack",(()=>n.untrack)),o.export(r,"Aliases",(()=>i)),o.export(r,"Assets",(()=>W)),o.export(r,"ChildProperties",(()=>s)),o.export(r,"DOMElements",(()=>f)),o.export(r,"DelegatedEvents",(()=>d)),o.export(r,"Dynamic",(()=>ue)),o.export(r,"Hydration",(()=>z)),o.export(r,"HydrationScript",(()=>W)),o.export(r,"NoHydration",(()=>V)),o.export(r,"Portal",(()=>pe)),o.export(r,"Properties",(()=>a)),o.export(r,"SVGElements",(()=>p)),o.export(r,"SVGNamespace",(()=>u)),o.export(r,"addEventListener",(()=>x)),o.export(r,"assign",(()=>E)),o.export(r,"classList",(()=>w)),o.export(r,"className",(()=>k)),o.export(r,"clearDelegatedEvents",(()=>v)),o.export(r,"delegateEvents",(()=>y)),o.export(r,"dynamicProperty",(()=>F)),o.export(r,"escape",(()=>ne)),o.export(r,"generateHydrationScript",(()=>W)),o.export(r,"getAssets",(()=>W)),o.export(r,"getHydrationKey",(()=>G)),o.export(r,"getNextElement",(()=>I)),o.export(r,"getNextMarker",(()=>M)),o.export(r,"getNextMatch",(()=>P)),o.export(r,"getPropAlias",(()=>l)),o.export(r,"hydrate",(()=>de)),o.export(r,"innerHTML",(()=>_)),o.export(r,"insert",(()=>S)),o.export(r,"isDev",(()=>ie)),o.export(r,"isServer",(()=>se)),o.export(r,"render",(()=>g)),o.export(r,"renderToStream",(()=>Z)),o.export(r,"renderToString",(()=>q)),o.export(r,"renderToStringAsync",(()=>Y)),o.export(r,"resolveSSRNode",(()=>oe)),o.export(r,"runHydrationEvents",(()=>A)),o.export(r,"setAttribute",(()=>b)),o.export(r,"setAttributeNS",(()=>C)),o.export(r,"spread",(()=>j)),o.export(r,"ssr",(()=>Q)),o.export(r,"ssrAttribute",(()=>te)),o.export(r,"ssrClassList",(()=>J)),o.export(r,"ssrElement",(()=>K)),o.export(r,"ssrHydrationKey",(()=>re)),o.export(r,"ssrSpread",(()=>ae)),o.export(r,"ssrStyle",(()=>ee)),o.export(r,"style",(()=>T)),o.export(r,"template",(()=>h)),o.export(r,"use",(()=>D)),o.export(r,"useAssets",(()=>W));var n=e("solid-js");const a=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline","allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"]),s=new Set(["innerHTML","textContent","innerText","children"]),i=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),c=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function l(e,t){const r=c[e];return"object"==typeof r?r[t]?r.$:void 0:r}const d=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),p=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),u={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},f=new Set(["html","base","head","link","meta","style","title","body","address","article","aside","footer","header","main","nav","section","body","blockquote","dd","div","dl","dt","figcaption","figure","hr","li","ol","p","pre","ul","a","abbr","b","bdi","bdo","br","cite","code","data","dfn","em","i","kbd","mark","q","rp","rt","ruby","s","samp","small","span","strong","sub","sup","time","u","var","wbr","area","audio","img","map","track","video","embed","iframe","object","param","picture","portal","source","svg","math","canvas","noscript","script","del","ins","caption","col","colgroup","table","tbody","td","tfoot","th","thead","tr","button","datalist","fieldset","form","input","label","legend","meter","optgroup","option","output","progress","select","textarea","details","dialog","menu","summary","details","slot","template","acronym","applet","basefont","bgsound","big","blink","center","content","dir","font","frame","frameset","hgroup","image","keygen","marquee","menuitem","nobr","noembed","noframes","plaintext","rb","rtc","shadow","spacer","strike","tt","xmp","a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","bgsound","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","head","header","hgroup","hr","html","i","iframe","image","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","nobr","noembed","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","plaintext","portal","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr","xmp","input"]);const m="_$DX_DELEGATE";function g(e,t,r,o={}){let a;return(0,n.createRoot)((o=>{a=o,t===document?e():S(t,e(),t.firstChild?null:void 0,r)}),o.owner),()=>{a(),t.textContent=""}}function h(e,t,r){let o;const a=()=>{const t=document.createElement("template");return t.innerHTML=e,r?t.content.firstChild.firstChild:t.content.firstChild},s=t?()=>(o||(o=a())).cloneNode(!0):()=>(0,n.untrack)((()=>document.importNode(o||(o=a()),!0)));return s.cloneNode=s,s}function y(e,t=window.document){const r=t[m]||(t[m]=new Set);for(let o=0,n=e.length;o<n;o++){const n=e[o];r.has(n)||(r.add(n),t.addEventListener(n,$))}}function v(e=window.document){if(e[m]){for(let t of e[m].keys())e.removeEventListener(t,$);delete e[m]}}function b(e,t,r){null==r?e.removeAttribute(t):e.setAttribute(t,r)}function C(e,t,r,o){null==o?e.removeAttributeNS(t,r):e.setAttributeNS(t,r,o)}function k(e,t){null==t?e.removeAttribute("class"):e.className=t}function x(e,t,r,o){if(o)Array.isArray(r)?(e[`$$${t}`]=r[0],e[`$$${t}Data`]=r[1]):e[`$$${t}`]=r;else if(Array.isArray(r)){const o=r[0];e.addEventListener(t,r[0]=t=>o.call(e,r[1],t))}else e.addEventListener(t,r)}function w(e,t,r={}){const o=Object.keys(t||{}),n=Object.keys(r);let a,s;for(a=0,s=n.length;a<s;a++){const o=n[a];o&&"undefined"!==o&&!t[o]&&(B(e,o,!1),delete r[o])}for(a=0,s=o.length;a<s;a++){const n=o[a],s=!!t[n];n&&"undefined"!==n&&r[n]!==s&&s&&(B(e,n,!0),r[n]=s)}return r}function T(e,t,r){if(!t)return r?b(e,"style"):t;const o=e.style;if("string"==typeof t)return o.cssText=t;let n,a;for(a in"string"==typeof r&&(o.cssText=r=void 0),r||(r={}),t||(t={}),r)null==t[a]&&o.removeProperty(a),delete r[a];for(a in t)n=t[a],n!==r[a]&&(o.setProperty(a,n),r[a]=n);return r}function j(e,t={},r,o){const a={};return o||(0,n.createRenderEffect)((()=>a.children=U(e,t.children,a.children))),(0,n.createRenderEffect)((()=>t.ref&&t.ref(e))),(0,n.createRenderEffect)((()=>E(e,t,r,!0,a,!0))),a}function F(e,t){const r=e[t];return Object.defineProperty(e,t,{get:()=>r(),enumerable:!0}),e}function _(e,t){!n.sharedConfig.context&&(e.innerHTML=t)}function D(e,t,r){return(0,n.untrack)((()=>e(t,r)))}function S(e,t,r,o){if(void 0===r||o||(o=[]),"function"!=typeof t)return U(e,t,o,r);(0,n.createRenderEffect)((o=>U(e,t(),o,r)),o)}function E(e,t,r,o,n={},a=!1){t||(t={});for(const o in n)if(!(o in t)){if("children"===o)continue;n[o]=R(e,o,null,n[o],r,a)}for(const s in t){if("children"===s){o||U(e,t.children);continue}const i=t[s];n[s]=R(e,s,i,n[s],r,a)}}function I(e){let t,r;if(!n.sharedConfig.context||!(t=n.sharedConfig.registry.get(r=G()))){if(n.sharedConfig.context&&console.warn("Unable to find DOM nodes for hydration key:",r),!e)throw new Error("Unrecoverable Hydration Mismatch. No template for key: "+r);return e()}return n.sharedConfig.completed&&n.sharedConfig.completed.add(t),n.sharedConfig.registry.delete(r),t}function P(e,t){for(;e&&e.localName!==t;)e=e.nextSibling;return e}function M(e){let t=e,r=0,o=[];if(n.sharedConfig.context)for(;t;){if(8===t.nodeType){const e=t.nodeValue;if("#"===e)r++;else if("/"===e){if(0===r)return[t,o];r--}}o.push(t),t=t.nextSibling}return[t,o]}function A(){n.sharedConfig.events&&!n.sharedConfig.events.queued&&(queueMicrotask((()=>{const{completed:e,events:t}=n.sharedConfig;for(t.queued=!1;t.length;){const[r,o]=t[0];if(!e.has(r))return;$(o),t.shift()}})),n.sharedConfig.events.queued=!0)}function B(e,t,r){const o=t.trim().split(/\s+/);for(let t=0,n=o.length;t<n;t++)e.classList.toggle(o[t],r)}function R(e,t,r,o,n,c){let p,f,m,g,h;if("style"===t)return T(e,r,o);if("classList"===t)return w(e,r,o);if(r===o)return o;if("ref"===t)c||r(e);else if("on:"===t.slice(0,3)){const n=t.slice(3);o&&e.removeEventListener(n,o),r&&e.addEventListener(n,r)}else if("oncapture:"===t.slice(0,10)){const n=t.slice(10);o&&e.removeEventListener(n,o,!0),r&&e.addEventListener(n,r,!0)}else if("on"===t.slice(0,2)){const n=t.slice(2).toLowerCase(),a=d.has(n);if(!a&&o){const t=Array.isArray(o)?o[0]:o;e.removeEventListener(n,t)}(a||r)&&(x(e,n,r,a),a&&y([n]))}else if("attr:"===t.slice(0,5))b(e,t.slice(5),r);else if((h="prop:"===t.slice(0,5))||(m=s.has(t))||!n&&((g=l(t,e.tagName))||(f=a.has(t)))||(p=e.nodeName.includes("-")))h&&(t=t.slice(5),f=!0),"class"===t||"className"===t?k(e,r):!p||f||m?e[g||t]=r:e[(v=t,v.toLowerCase().replace(/-([a-z])/g,((e,t)=>t.toUpperCase())))]=r;else{const o=n&&t.indexOf(":")>-1&&u[t.split(":")[0]];o?C(e,o,t,r):b(e,i[t]||t,r)}var v;return r}function $(e){const t=`$$${e.type}`;let r=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==r&&Object.defineProperty(e,"target",{configurable:!0,value:r}),Object.defineProperty(e,"currentTarget",{configurable:!0,get:()=>r||document}),n.sharedConfig.registry&&!n.sharedConfig.done&&(n.sharedConfig.done=_$HY.done=!0);r;){const o=r[t];if(o&&!r.disabled){const n=r[`${t}Data`];if(void 0!==n?o.call(r,n,e):o.call(r,e),e.cancelBubble)return}r=r._$host||r.parentNode||r.host}}function U(e,t,r,o,a){if(n.sharedConfig.context){!r&&(r=[...e.childNodes]);let t=[];for(let e=0;e<r.length;e++){const o=r[e];8===o.nodeType&&"!$"===o.data.slice(0,2)?o.remove():t.push(o)}r=t}for(;"function"==typeof r;)r=r();if(t===r)return r;const s=typeof t,i=void 0!==o;if(e=i&&r[0]&&r[0].parentNode||e,"string"===s||"number"===s){if(n.sharedConfig.context)return r;if("number"===s&&(t=t.toString()),i){let n=r[0];n&&3===n.nodeType?n.data=t:n=document.createTextNode(t),r=N(e,r,o,n)}else r=""!==r&&"string"==typeof r?e.firstChild.data=t:e.textContent=t}else if(null==t||"boolean"===s){if(n.sharedConfig.context)return r;r=N(e,r,o)}else{if("function"===s)return(0,n.createRenderEffect)((()=>{let n=t();for(;"function"==typeof n;)n=n();r=U(e,n,r,o)})),()=>r;if(Array.isArray(t)){const s=[],c=r&&Array.isArray(r);if(L(s,t,r,a))return(0,n.createRenderEffect)((()=>r=U(e,s,r,o,!0))),()=>r;if(n.sharedConfig.context){if(!s.length)return r;for(let e=0;e<s.length;e++)if(s[e].parentNode)return r=s}if(0===s.length){if(r=N(e,r,o),i)return r}else c?0===r.length?O(e,s,o):function(e,t,r){let o=r.length,n=t.length,a=o,s=0,i=0,c=t[n-1].nextSibling,l=null;for(;s<n||i<a;)if(t[s]!==r[i]){for(;t[n-1]===r[a-1];)n--,a--;if(n===s){const t=a<o?i?r[i-1].nextSibling:r[a-i]:c;for(;i<a;)e.insertBefore(r[i++],t)}else if(a===i)for(;s<n;)l&&l.has(t[s])||t[s].remove(),s++;else if(t[s]===r[a-1]&&r[i]===t[n-1]){const o=t[--n].nextSibling;e.insertBefore(r[i++],t[s++].nextSibling),e.insertBefore(r[--a],o),t[n]=r[a]}else{if(!l){l=new Map;let e=i;for(;e<a;)l.set(r[e],e++)}const o=l.get(t[s]);if(null!=o)if(i<o&&o<a){let c,d=s,p=1;for(;++d<n&&d<a&&null!=(c=l.get(t[d]))&&c===o+p;)p++;if(p>o-i){const n=t[s];for(;i<o;)e.insertBefore(r[i++],n)}else e.replaceChild(r[i++],t[s++])}else s++;else t[s++].remove()}}else s++,i++}(e,r,s):(r&&N(e),O(e,s));r=s}else if(t instanceof Node){if(n.sharedConfig.context&&t.parentNode)return r=i?[t]:t;if(Array.isArray(r)){if(i)return r=N(e,r,o,t);N(e,r,null,t)}else null!=r&&""!==r&&e.firstChild?e.replaceChild(t,e.firstChild):e.appendChild(t);r=t}else console.warn("Unrecognized value. Skipped inserting",t)}return r}function L(e,t,r,o){let n=!1;for(let a=0,s=t.length;a<s;a++){let s=t[a],i=r&&r[a];if(s instanceof Node)e.push(s);else if(null==s||!0===s||!1===s);else if(Array.isArray(s))n=L(e,s,i)||n;else if("function"==typeof s)if(o){for(;"function"==typeof s;)s=s();n=L(e,Array.isArray(s)?s:[s],Array.isArray(i)?i:[i])||n}else e.push(s),n=!0;else{const t=String(s);i&&3===i.nodeType?(i.data=t,e.push(i)):e.push(document.createTextNode(t))}}return n}function O(e,t,r=null){for(let o=0,n=t.length;o<n;o++)e.insertBefore(t[o],r)}function N(e,t,r,o){if(void 0===r)return e.textContent="";const n=o||document.createTextNode("");if(t.length){let o=!1;for(let a=t.length-1;a>=0;a--){const s=t[a];if(n!==s){const t=s.parentNode===e;o||a?t&&s.remove():t?e.replaceChild(n,s):e.insertBefore(n,r)}else o=!0}}else e.insertBefore(n,r);return[n]}function H(e,t){const r=e.querySelectorAll("*[data-hk]");for(let e=0;e<r.length;e++){const o=r[e],a=o.getAttribute("data-hk");t&&!a.startsWith(t)||n.sharedConfig.registry.has(a)||n.sharedConfig.registry.set(a,o)}}function G(){const e=n.sharedConfig.context;return`${e.id}${e.count++}`}function V(e){return n.sharedConfig.context?void 0:e.children}function z(e){return e.children}function W(){}function X(e){const t=new Error(`${e.name} is not supported in the browser, returning undefined`);console.error(t)}function q(e,t){X(q)}function Y(e,t){X(Y)}function Z(e,t){X(Z)}function Q(e,...t){}function K(e,t,r,o){}function J(e){}function ee(e){}function te(e,t){}function re(){}function oe(e){}function ne(e){}function ae(e,t,r){}const se=!1,ie=!1,ce="http://www.w3.org/2000/svg";function le(e,t=!1){return t?document.createElementNS(ce,e):document.createElement(e)}const de=(...e)=>((0,n.enableHydration)(),function(e,t,r={}){n.sharedConfig.completed=globalThis._$HY.completed,n.sharedConfig.events=globalThis._$HY.events,n.sharedConfig.load=globalThis._$HY.load,n.sharedConfig.gather=e=>H(t,e),n.sharedConfig.registry=new Map,n.sharedConfig.context={id:r.renderId||"",count:0},H(t,r.renderId);const o=g(e,t,[...t.childNodes],r);return n.sharedConfig.context=null,o}(...e));function pe(e){const{useShadow:t}=e,r=document.createTextNode(""),o=(0,n.getOwner)();let a,s=!!n.sharedConfig.context;return(0,n.createEffect)((()=>{s&&((0,n.getOwner)().user=s=!1),a||(a=(0,n.runWithOwner)(o,(()=>e.children)));const i=e.mount||document.body;if(i instanceof HTMLHeadElement){const[e,t]=(0,n.createSignal)(!1),r=()=>t(!0);(0,n.createRoot)((t=>S(i,(()=>e()?t():a),null))),(0,n.onCleanup)(r)}else{const o=le(e.isSVG?"g":"div",e.isSVG),s=t&&o.attachShadow?o.attachShadow({mode:"open"}):o;Object.defineProperty(o,"_$host",{get:()=>r.parentNode,configurable:!0}),S(s,a),i.appendChild(o),e.ref&&e.ref(o),(0,n.onCleanup)((()=>i.removeChild(o)))}}),void 0,{render:!s}),r}function ue(e){const[t,r]=(0,n.splitProps)(e,["component"]),o=(0,n.createMemo)((()=>t.component));return(0,n.createMemo)((()=>{const e=o();switch(typeof e){case"function":return Object.assign(e,{[n.$DEVCOMP]:!0}),(0,n.untrack)((()=>e(r)));case"string":const t=p.has(e),o=n.sharedConfig.context?I():le(e,t);return j(o,r,t),o}}))}},{"solid-js":"5rsr6","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"5rsr6":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"$DEVCOMP",(()=>T)),o.export(r,"$PROXY",(()=>x)),o.export(r,"$TRACK",(()=>w)),o.export(r,"DEV",(()=>ut)),o.export(r,"ErrorBoundary",(()=>it)),o.export(r,"For",(()=>et)),o.export(r,"Index",(()=>tt)),o.export(r,"Match",(()=>nt)),o.export(r,"Show",(()=>rt)),o.export(r,"Suspense",(()=>pt)),o.export(r,"SuspenseList",(()=>dt)),o.export(r,"Switch",(()=>ot)),o.export(r,"batch",(()=>K)),o.export(r,"cancelCallback",(()=>y)),o.export(r,"catchError",(()=>oe)),o.export(r,"children",(()=>fe)),o.export(r,"createComponent",(()=>Ve)),o.export(r,"createComputed",(()=>V)),o.export(r,"createContext",(()=>pe)),o.export(r,"createDeferred",(()=>Z)),o.export(r,"createEffect",(()=>W)),o.export(r,"createMemo",(()=>q)),o.export(r,"createReaction",(()=>X)),o.export(r,"createRenderEffect",(()=>z)),o.export(r,"createResource",(()=>Y)),o.export(r,"createRoot",(()=>H)),o.export(r,"createSelector",(()=>Q)),o.export(r,"createSignal",(()=>G)),o.export(r,"createUniqueId",(()=>Ke)),o.export(r,"enableExternalSource",(()=>he)),o.export(r,"enableHydration",(()=>Ge)),o.export(r,"enableScheduling",(()=>ce)),o.export(r,"equalFn",(()=>k)),o.export(r,"from",(()=>$e)),o.export(r,"getListener",(()=>ae)),o.export(r,"getOwner",(()=>se)),o.export(r,"indexArray",(()=>Ne)),o.export(r,"lazy",(()=>Ze)),o.export(r,"mapArray",(()=>Oe)),o.export(r,"mergeProps",(()=>qe)),o.export(r,"observable",(()=>Re)),o.export(r,"on",(()=>ee)),o.export(r,"onCleanup",(()=>re)),o.export(r,"onError",(()=>ne)),o.export(r,"onMount",(()=>te)),o.export(r,"requestCallback",(()=>h)),o.export(r,"resetErrorBoundaries",(()=>st)),o.export(r,"runWithOwner",(()=>ie)),o.export(r,"sharedConfig",(()=>b)),o.export(r,"splitProps",(()=>Ye)),o.export(r,"startTransition",(()=>le)),o.export(r,"untrack",(()=>J)),o.export(r,"useContext",(()=>ue)),o.export(r,"useTransition",(()=>de));let n=1,a=!1,s=!1,i=[],c=null,l=null,d=5,p=0,u=300,f=null,m=null;const g=1073741823;function h(e,t){f||function(){const e=new MessageChannel,t=e.port2;if(f=()=>t.postMessage(null),e.port1.onmessage=()=>{if(null!==m){const e=performance.now();p=e+d;const r=!0;try{m(r,e)?t.postMessage(null):m=null}catch(e){throw t.postMessage(null),e}}},navigator&&navigator.scheduling&&navigator.scheduling.isInputPending){const e=navigator.scheduling;l=()=>{const t=performance.now();return t>=p&&(!!e.isInputPending()||t>=u)}}else l=()=>performance.now()>=p}();let r=performance.now(),o=g;t&&t.timeout&&(o=t.timeout);const c={id:n++,fn:e,startTime:r,expirationTime:r+o};return function(e,t){e.splice(function(){let r=0,o=e.length-1;for(;r<=o;){const n=o+r>>1,a=t.expirationTime-e[n].expirationTime;if(a>0)r=n+1;else{if(!(a<0))return n;o=n-1}}return r}(),0,t)}(i,c),a||s||(a=!0,m=v,f()),c}function y(e){e.fn=null}function v(e,t){a=!1,s=!0;try{return function(e,t){let r=t;c=i[0]||null;for(;null!==c&&(!(c.expirationTime>r)||e&&!l());){const e=c.fn;if(null!==e){c.fn=null;e(c.expirationTime<=r),r=performance.now(),c===i[0]&&i.shift()}else i.shift();c=i[0]||null}return null!==c}(e,t)}finally{c=null,s=!1}}const b={context:void 0,registry:void 0};function C(e){b.context=e}const k=(e,t)=>e===t,x=Symbol("solid-proxy"),w=Symbol("solid-track"),T=Symbol("solid-dev-component"),j={equals:k};let F=null,_=Te;const D=1,S=2,E={owned:null,cleanups:null,context:null,owner:null},I={};var P=null;let M=null,A=null,B=null,R=null,$=null,U=null,L=0;const[O,N]=G(!1);function H(e,t){const r=R,o=P,n=0===e.length,a=n?E:{owned:null,cleanups:null,context:null,owner:void 0===t?o:t},s=n?e:()=>e((()=>J((()=>De(a)))));P=a,R=null;try{return we(s,!0)}finally{R=r,P=o}}function G(e,t){const r={value:e,observers:null,observerSlots:null,comparator:(t=t?Object.assign({},j,t):j).equals||void 0};return[ye.bind(r),e=>("function"==typeof e&&(e=M&&M.running&&M.sources.has(r)?e(r.tValue):e(r.value)),ve(r,e))]}function V(e,t,r){const o=ke(e,t,!0,D);A&&M&&M.running?$.push(o):be(o)}function z(e,t,r){const o=ke(e,t,!1,D);A&&M&&M.running?$.push(o):be(o)}function W(e,t,r){_=je;const o=ke(e,t,!1,D),n=me&&Me(P,me.id);n&&(o.suspense=n),r&&r.render||(o.user=!0),U?U.push(o):be(o)}function X(e,t){let r;const o=ke((()=>{r?r():J(e),r=void 0}),void 0,!1,0),n=me&&Me(P,me.id);return n&&(o.suspense=n),o.user=!0,e=>{r=e,be(o)}}function q(e,t,r){r=r?Object.assign({},j,r):j;const o=ke(e,t,!0,0);return o.observers=null,o.observerSlots=null,o.comparator=r.equals||void 0,A&&M&&M.running?(o.tState=D,$.push(o)):be(o),ye.bind(o)}function Y(e,t,r){let o,n,a;2===arguments.length&&"object"==typeof t||1===arguments.length?(o=!0,n=e,a=t||{}):(o=e,n=t,a=r||{});let s=null,i=I,c=null,l=!1,d=!1,p="initialValue"in a,u="function"==typeof o&&q(o);const f=new Set,[m,g]=(a.storage||G)(a.initialValue),[h,y]=G(void 0),[v,C]=G(void 0,{equals:!1}),[k,x]=G(p?"ready":"unresolved");if(b.context){let e;c=`${b.context.id}${b.context.count++}`,"initial"===a.ssrLoadFrom?i=a.initialValue:b.load&&(e=b.load(c))&&(i=e[0])}function w(e,t,r,o){return s===e&&(s=null,p=!0,e!==i&&t!==i||!a.onHydrated||queueMicrotask((()=>a.onHydrated(o,{value:t}))),i=I,M&&e&&l?(M.promises.delete(e),l=!1,we((()=>{M.running=!0,T(t,r)}),!1)):T(t,r)),t}function T(e,t){we((()=>{void 0===t&&g((()=>e)),x(void 0!==t?"errored":"ready"),y(t);for(const e of f.keys())e.decrement();f.clear()}),!1)}function j(){const e=me&&Me(P,me.id),t=m(),r=h();if(void 0!==r&&!s)throw r;return R&&!R.user&&e&&V((()=>{v(),s&&(e.resolved&&M&&l?M.promises.add(s):f.has(e)||(e.increment(),f.add(e)))})),t}function F(e=!0){if(!1!==e&&d)return;d=!1;const t=u?u():o;if(l=M&&M.running,null==t||!1===t)return void w(s,J(m));M&&s&&M.promises.delete(s);const r=i!==I?i:J((()=>n(t,{value:m(),refetching:e})));return"object"==typeof r&&r&&"then"in r?(s=r,d=!0,queueMicrotask((()=>d=!1)),we((()=>{x(p?"refreshing":"pending"),C()}),!1),r.then((e=>w(r,e,void 0,t)),(e=>w(r,void 0,Ee(e),t)))):(w(s,r,void 0,t),r)}return Object.defineProperties(j,{state:{get:()=>k()},error:{get:()=>h()},loading:{get(){const e=k();return"pending"===e||"refreshing"===e}},latest:{get(){if(!p)return j();const e=h();if(e&&!s)throw e;return m()}}}),u?V((()=>F(!1))):F(!1),[j,{refetch:F,mutate:g}]}function Z(e,t){let r,o=t?t.timeoutMs:void 0;const n=ke((()=>(r&&r.fn||(r=h((()=>s((()=>n.value))),void 0!==o?{timeout:o}:void 0)),e())),void 0,!0),[a,s]=G(n.value,t);return be(n),s((()=>n.value)),a}function Q(e,t=k,r){const o=new Map,n=ke((r=>{const n=e();for(const[e,a]of o.entries())if(t(e,n)!==t(e,r))for(const e of a.values())e.state=D,e.pure?$.push(e):U.push(e);return n}),void 0,!0,D);return be(n),e=>{const r=R;if(r){let t;(t=o.get(e))?t.add(r):o.set(e,t=new Set([r])),re((()=>{t.delete(r),!t.size&&o.delete(e)}))}return t(e,M&&M.running&&M.sources.has(n)?n.tValue:n.value)}}function K(e){return we(e,!1)}function J(e){if(null===R)return e();const t=R;R=null;try{return e()}finally{R=t}}function ee(e,t,r){const o=Array.isArray(e);let n,a=r&&r.defer;return r=>{let s;if(o){s=Array(e.length);for(let t=0;t<e.length;t++)s[t]=e[t]()}else s=e();if(a)return void(a=!1);const i=J((()=>t(s,n,r)));return n=s,i}}function te(e){W((()=>J(e)))}function re(e){return null===P||(null===P.cleanups?P.cleanups=[e]:P.cleanups.push(e)),e}function oe(e,t){F||(F=Symbol("error")),(P=ke(void 0,void 0,!0)).context={[F]:[t]},M&&M.running&&M.sources.add(P);try{return e()}catch(e){Pe(e)}finally{P=P.owner}}function ne(e){F||(F=Symbol("error")),null===P||(null===P.context?P.context={[F]:[e]}:P.context[F]?P.context[F].push(e):P.context[F]=[e])}function ae(){return R}function se(){return P}function ie(e,t){const r=P,o=R;P=e,R=null;try{return we(t,!0)}catch(e){Pe(e)}finally{P=r,R=o}}function ce(e=h){A=e}function le(e){if(M&&M.running)return e(),M.done;const t=R,r=P;return Promise.resolve().then((()=>{let o;return R=t,P=r,(A||me)&&(o=M||(M={sources:new Set,effects:[],promises:new Set,disposed:new Set,queue:new Set,running:!0}),o.done||(o.done=new Promise((e=>o.resolve=e))),o.running=!0),we(e,!1),R=P=null,o?o.done:void 0}))}function de(){return[O,le]}function pe(e,t){const r=Symbol("context");return{id:r,Provider:Be(r),defaultValue:e}}function ue(e){let t;return void 0!==(t=Me(P,e.id))?t:e.defaultValue}function fe(e){const t=q(e),r=q((()=>Ae(t())));return r.toArray=()=>{const e=r();return Array.isArray(e)?e:null!=e?[e]:[]},r}let me;function ge(){return me||(me=pe({}))}function he(e){if(B){const t=B;B=(r,o)=>{const n=t(r,o),a=e((e=>n.track(e)),o);return{track:e=>a.track(e),dispose(){a.dispose(),n.dispose()}}}}else B=e}function ye(){const e=M&&M.running;if(this.sources&&(e?this.tState:this.state))if((e?this.tState:this.state)===D)be(this);else{const e=$;$=null,we((()=>Fe(this)),!1),$=e}if(R){const e=this.observers?this.observers.length:0;R.sources?(R.sources.push(this),R.sourceSlots.push(e)):(R.sources=[this],R.sourceSlots=[e]),this.observers?(this.observers.push(R),this.observerSlots.push(R.sources.length-1)):(this.observers=[R],this.observerSlots=[R.sources.length-1])}return e&&M.sources.has(this)?this.tValue:this.value}function ve(e,t,r){let o=M&&M.running&&M.sources.has(e)?e.tValue:e.value;if(!e.comparator||!e.comparator(o,t)){if(M){const o=M.running;(o||!r&&M.sources.has(e))&&(M.sources.add(e),e.tValue=t),o||(e.value=t)}else e.value=t;e.observers&&e.observers.length&&we((()=>{for(let t=0;t<e.observers.length;t+=1){const r=e.observers[t],o=M&&M.running;o&&M.disposed.has(r)||((o?r.tState:r.state)||(r.pure?$.push(r):U.push(r),r.observers&&_e(r)),o?r.tState=D:r.state=D)}if($.length>1e6)throw $=[],new Error}),!1)}return t}function be(e){if(!e.fn)return;De(e);const t=P,r=R,o=L;R=P=e,Ce(e,M&&M.running&&M.sources.has(e)?e.tValue:e.value,o),M&&!M.running&&M.sources.has(e)&&queueMicrotask((()=>{we((()=>{M&&(M.running=!0),R=P=e,Ce(e,e.tValue,o),R=P=null}),!1)})),R=r,P=t}function Ce(e,t,r){let o;try{o=e.fn(t)}catch(t){return e.pure&&(M&&M.running?(e.tState=D,e.tOwned&&e.tOwned.forEach(De),e.tOwned=void 0):(e.state=D,e.owned&&e.owned.forEach(De),e.owned=null)),e.updatedAt=r+1,Pe(t)}(!e.updatedAt||e.updatedAt<=r)&&(null!=e.updatedAt&&"observers"in e?ve(e,o,!0):M&&M.running&&e.pure?(M.sources.add(e),e.tValue=o):e.value=o,e.updatedAt=r)}function ke(e,t,r,o=D,n){const a={fn:e,state:o,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:P,context:null,pure:r};if(M&&M.running&&(a.state=0,a.tState=o),null===P||P!==E&&(M&&M.running&&P.pure?P.tOwned?P.tOwned.push(a):P.tOwned=[a]:P.owned?P.owned.push(a):P.owned=[a]),B){const[e,t]=G(void 0,{equals:!1}),r=B(a.fn,t);re((()=>r.dispose()));const o=()=>le(t).then((()=>n.dispose())),n=B(a.fn,o);a.fn=t=>(e(),M&&M.running?n.track(t):r.track(t))}return a}function xe(e){const t=M&&M.running;if(0===(t?e.tState:e.state))return;if((t?e.tState:e.state)===S)return Fe(e);if(e.suspense&&J(e.suspense.inFallback))return e.suspense.effects.push(e);const r=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<L);){if(t&&M.disposed.has(e))return;(t?e.tState:e.state)&&r.push(e)}for(let o=r.length-1;o>=0;o--){if(e=r[o],t){let t=e,n=r[o+1];for(;(t=t.owner)&&t!==n;)if(M.disposed.has(t))return}if((t?e.tState:e.state)===D)be(e);else if((t?e.tState:e.state)===S){const t=$;$=null,we((()=>Fe(e,r[0])),!1),$=t}}}function we(e,t){if($)return e();let r=!1;t||($=[]),U?r=!0:U=[],L++;try{const t=e();return function(e){$&&(A&&M&&M.running?function(e){for(let t=0;t<e.length;t++){const r=e[t],o=M.queue;o.has(r)||(o.add(r),A((()=>{o.delete(r),we((()=>{M.running=!0,xe(r)}),!1),M&&(M.running=!1)})))}}($):Te($),$=null);if(e)return;let t;if(M)if(M.promises.size||M.queue.size){if(M.running)return M.running=!1,M.effects.push.apply(M.effects,U),U=null,void N(!0)}else{const e=M.sources,r=M.disposed;U.push.apply(U,M.effects),t=M.resolve;for(const e of U)"tState"in e&&(e.state=e.tState),delete e.tState;M=null,we((()=>{for(const e of r)De(e);for(const t of e){if(t.value=t.tValue,t.owned)for(let e=0,r=t.owned.length;e<r;e++)De(t.owned[e]);t.tOwned&&(t.owned=t.tOwned),delete t.tValue,delete t.tOwned,t.tState=0}N(!1)}),!1)}const r=U;U=null,r.length&&we((()=>_(r)),!1);t&&t()}(r),t}catch(e){r||(U=null),$=null,Pe(e)}}function Te(e){for(let t=0;t<e.length;t++)xe(e[t])}function je(e){let t,r=0;for(t=0;t<e.length;t++){const o=e[t];o.user?e[r++]=o:xe(o)}for(b.context&&C(),t=0;t<r;t++)xe(e[t])}function Fe(e,t){const r=M&&M.running;r?e.tState=0:e.state=0;for(let o=0;o<e.sources.length;o+=1){const n=e.sources[o];if(n.sources){const e=r?n.tState:n.state;e===D?n!==t&&(!n.updatedAt||n.updatedAt<L)&&xe(n):e===S&&Fe(n,t)}}}function _e(e){const t=M&&M.running;for(let r=0;r<e.observers.length;r+=1){const o=e.observers[r];(t?o.tState:o.state)||(t?o.tState=S:o.state=S,o.pure?$.push(o):U.push(o),o.observers&&_e(o))}}function De(e){let t;if(e.sources)for(;e.sources.length;){const t=e.sources.pop(),r=e.sourceSlots.pop(),o=t.observers;if(o&&o.length){const e=o.pop(),n=t.observerSlots.pop();r<o.length&&(e.sourceSlots[n]=r,o[r]=e,t.observerSlots[r]=n)}}if(M&&M.running&&e.pure){if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)De(e.tOwned[t]);delete e.tOwned}Se(e,!0)}else if(e.owned){for(t=e.owned.length-1;t>=0;t--)De(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}M&&M.running?e.tState=0:e.state=0,e.context=null}function Se(e,t){if(t||(e.tState=0,M.disposed.add(e)),e.owned)for(let t=0;t<e.owned.length;t++)Se(e.owned[t])}function Ee(e){return e instanceof Error?e:new Error("string"==typeof e?e:"Unknown error",{cause:e})}function Ie(e,t){for(const r of e)r(t)}function Pe(e){const t=F&&Me(P,F);if(!t)throw e;const r=Ee(e);U?U.push({fn(){Ie(t,r)},state:D}):Ie(t,r)}function Me(e,t){return e?e.context&&void 0!==e.context[t]?e.context[t]:Me(e.owner,t):void 0}function Ae(e){if("function"==typeof e&&!e.length)return Ae(e());if(Array.isArray(e)){const t=[];for(let r=0;r<e.length;r++){const o=Ae(e[r]);Array.isArray(o)?t.push.apply(t,o):t.push(o)}return t}return e}function Be(e,t){return function(t){let r;return z((()=>r=J((()=>(P.context={[e]:t.value},fe((()=>t.children)))))),void 0),r}}function Re(e){return{subscribe(t){if(!(t instanceof Object)||null==t)throw new TypeError("Expected the observer to be an object.");const r="function"==typeof t?t:t.next&&t.next.bind(t);if(!r)return{unsubscribe(){}};const o=H((t=>(W((()=>{const t=e();J((()=>r(t)))})),t)));return se()&&re(o),{unsubscribe(){o()}}},[Symbol.observable||"@@observable"](){return this}}}function $e(e){const[t,r]=G(void 0,{equals:!1});if("subscribe"in e){const t=e.subscribe((e=>r((()=>e))));re((()=>"unsubscribe"in t?t.unsubscribe():t()))}else{re(e(r))}return t}const Ue=Symbol("fallback");function Le(e){for(let t=0;t<e.length;t++)e[t]()}function Oe(e,t,r={}){let o=[],n=[],a=[],s=0,i=t.length>1?[]:null;return re((()=>Le(a))),()=>{let c,l,d=e()||[];return d[w],J((()=>{let e,t,u,f,m,g,h,y,v,b=d.length;if(0===b)0!==s&&(Le(a),a=[],o=[],n=[],s=0,i&&(i=[])),r.fallback&&(o=[Ue],n[0]=H((e=>(a[0]=e,r.fallback()))),s=1);else if(0===s){for(n=new Array(b),l=0;l<b;l++)o[l]=d[l],n[l]=H(p);s=b}else{for(u=new Array(b),f=new Array(b),i&&(m=new Array(b)),g=0,h=Math.min(s,b);g<h&&o[g]===d[g];g++);for(h=s-1,y=b-1;h>=g&&y>=g&&o[h]===d[y];h--,y--)u[y]=n[h],f[y]=a[h],i&&(m[y]=i[h]);for(e=new Map,t=new Array(y+1),l=y;l>=g;l--)v=d[l],c=e.get(v),t[l]=void 0===c?-1:c,e.set(v,l);for(c=g;c<=h;c++)v=o[c],l=e.get(v),void 0!==l&&-1!==l?(u[l]=n[c],f[l]=a[c],i&&(m[l]=i[c]),l=t[l],e.set(v,l)):a[c]();for(l=g;l<b;l++)l in u?(n[l]=u[l],a[l]=f[l],i&&(i[l]=m[l],i[l](l))):n[l]=H(p);n=n.slice(0,s=b),o=d.slice(0)}return n}));function p(e){if(a[l]=e,i){const[e,r]=G(l);return i[l]=r,t(d[l],e)}return t(d[l])}}}function Ne(e,t,r={}){let o,n=[],a=[],s=[],i=[],c=0;return re((()=>Le(s))),()=>{const l=e()||[];return l[w],J((()=>{if(0===l.length)return 0!==c&&(Le(s),s=[],n=[],a=[],c=0,i=[]),r.fallback&&(n=[Ue],a[0]=H((e=>(s[0]=e,r.fallback()))),c=1),a;for(n[0]===Ue&&(s[0](),s=[],n=[],a=[],c=0),o=0;o<l.length;o++)o<n.length&&n[o]!==l[o]?i[o]((()=>l[o])):o>=n.length&&(a[o]=H(d));for(;o<n.length;o++)s[o]();return c=i.length=s.length=l.length,n=l.slice(0),a=a.slice(0,c)}));function d(e){s[o]=e;const[r,n]=G(l[o]);return i[o]=n,t(r,o)}}}let He=!1;function Ge(){He=!0}function Ve(e,t){if(He&&b.context){const r=b.context;C({...b.context,id:`${b.context.id}${b.context.count++}-`,count:0});const o=J((()=>e(t||{})));return C(r),o}return J((()=>e(t||{})))}function ze(){return!0}const We={get:(e,t,r)=>t===x?r:e.get(t),has:(e,t)=>t===x||e.has(t),set:ze,deleteProperty:ze,getOwnPropertyDescriptor:(e,t)=>({configurable:!0,enumerable:!0,get:()=>e.get(t),set:ze,deleteProperty:ze}),ownKeys:e=>e.keys()};function Xe(e){return(e="function"==typeof e?e():e)?e:{}}function qe(...e){let t=!1;for(let r=0;r<e.length;r++){const o=e[r];t=t||!!o&&x in o,e[r]="function"==typeof o?(t=!0,q(o)):o}if(t)return new Proxy({get(t){for(let r=e.length-1;r>=0;r--){const o=Xe(e[r])[t];if(void 0!==o)return o}},has(t){for(let r=e.length-1;r>=0;r--)if(t in Xe(e[r]))return!0;return!1},keys(){const t=[];for(let r=0;r<e.length;r++)t.push(...Object.keys(Xe(e[r])));return[...new Set(t)]}},We);const r={};for(let t=e.length-1;t>=0;t--)if(e[t]){const o=Object.getOwnPropertyDescriptors(e[t]);for(const t in o)t in r||Object.defineProperty(r,t,{enumerable:!0,get(){for(let r=e.length-1;r>=0;r--){const o=(e[r]||{})[t];if(void 0!==o)return o}}})}return r}function Ye(e,...t){const r=new Set(t.flat());if(x in e){const o=t.map((t=>new Proxy({get:r=>t.includes(r)?e[r]:void 0,has:r=>t.includes(r)&&r in e,keys:()=>t.filter((t=>t in e))},We)));return o.push(new Proxy({get:t=>r.has(t)?void 0:e[t],has:t=>!r.has(t)&&t in e,keys:()=>Object.keys(e).filter((e=>!r.has(e)))},We)),o}const o=Object.getOwnPropertyDescriptors(e);return t.push(Object.keys(o).filter((e=>!r.has(e)))),t.map((t=>{const r={};for(let n=0;n<t.length;n++){const a=t[n];a in e&&Object.defineProperty(r,a,o[a]?o[a]:{get:()=>e[a],set:()=>!0,enumerable:!0})}return r}))}function Ze(e){let t,r;const o=o=>{const n=b.context;if(n){const[o,a]=G();(r||(r=e())).then((e=>{C(n),a((()=>e.default)),C()})),t=o}else if(!t){const[o]=Y((()=>(r||(r=e())).then((e=>e.default))));t=o}let a;return q((()=>(a=t())&&J((()=>{if(!n)return a(o);const e=b.context;C(n);const t=a(o);return C(e),t}))))};return o.preload=()=>r||((r=e()).then((e=>t=()=>e.default)),r),o}let Qe=0;function Ke(){const e=b.context;return e?`${e.id}${e.count++}`:"cl-"+Qe++}const Je=e=>`Stale read from <${e}>.`;function et(e){const t="fallback"in e&&{fallback:()=>e.fallback};return q(Oe((()=>e.each),e.children,t||void 0))}function tt(e){const t="fallback"in e&&{fallback:()=>e.fallback};return q(Ne((()=>e.each),e.children,t||void 0))}function rt(e){const t=e.keyed,r=q((()=>e.when),void 0,{equals:(e,r)=>t?e===r:!e==!r});return q((()=>{const o=r();if(o){const n=e.children;return"function"==typeof n&&n.length>0?J((()=>n(t?o:()=>{if(!J(r))throw Je("Show");return e.when}))):n}return e.fallback}),void 0,void 0)}function ot(e){let t=!1;const r=fe((()=>e.children)),o=q((()=>{let e=r();Array.isArray(e)||(e=[e]);for(let r=0;r<e.length;r++){const o=e[r].when;if(o)return t=!!e[r].keyed,[r,o,e[r]]}return[-1]}),void 0,{equals:(e,r)=>e[0]===r[0]&&(t?e[1]===r[1]:!e[1]==!r[1])&&e[2]===r[2]});return q((()=>{const[r,n,a]=o();if(r<0)return e.fallback;const s=a.children;return"function"==typeof s&&s.length>0?J((()=>s(t?n:()=>{if(J(o)[0]!==r)throw Je("Match");return a.when}))):s}),void 0,void 0)}function nt(e){return e}let at;function st(){at&&[...at].forEach((e=>e()))}function it(e){let t,r;b.context&&b.load&&(r=b.load(b.context.id+b.context.count))&&(t=r[0]);const[o,n]=G(t,void 0);return at||(at=new Set),at.add(n),re((()=>at.delete(n))),q((()=>{let t;if(t=o()){const r=e.fallback;return"function"==typeof r&&r.length?J((()=>r(t,(()=>n())))):r}return oe((()=>e.children),n)}),void 0,void 0)}const ct=(e,t)=>e.showContent===t.showContent&&e.showFallback===t.showFallback,lt=pe();function dt(e){let t,[r,o]=G((()=>({inFallback:!1})));const n=ue(lt),[a,s]=G([]);n&&(t=n.register(q((()=>r()().inFallback))));const i=q((r=>{const o=e.revealOrder,n=e.tail,{showContent:s=!0,showFallback:i=!0}=t?t():{},c=a(),l="backwards"===o;if("together"===o){const e=c.every((e=>!e())),t=c.map((()=>({showContent:e&&s,showFallback:i})));return t.inFallback=!e,t}let d=!1,p=r.inFallback;const u=[];for(let e=0,t=c.length;e<t;e++){const r=l?t-e-1:e,o=c[r]();if(d||o){const e=!d;e&&(p=!0),u[r]={showContent:e,showFallback:!(n&&(!e||"collapsed"!==n))&&i},d=!0}else u[r]={showContent:s,showFallback:i}}return d||(p=!1),u.inFallback=p,u}),{inFallback:!1});return o((()=>i)),Ve(lt.Provider,{value:{register:e=>{let t;return s((r=>(t=r.length,[...r,e]))),q((()=>i()[t]),void 0,{equals:ct})}},get children(){return e.children}})}function pt(e){let t,r,o,n,a,s=0;const[i,c]=G(!1),l=ge(),d={increment:()=>{1==++s&&c(!0)},decrement:()=>{0==--s&&c(!1)},inFallback:i,effects:[],resolved:!1},p=se();if(b.context&&b.load){const e=b.context.id+b.context.count;let t=b.load(e);if(t&&(o=t[0])&&"$$f"!==o){"object"==typeof o&&"then"in o||(o=Promise.resolve(o));const[t,s]=G(void 0,{equals:!1});n=t,o.then((t=>{if(t||b.done)return t&&(a=t),s();b.gather(e),C(r),s(),C()}))}}const u=ue(lt);let f;return u&&(t=u.register(d.inFallback)),re((()=>f&&f())),Ve(l.Provider,{value:d,get children(){return q((()=>{if(a)throw a;if(r=b.context,n)return n(),n=void 0;r&&"$$f"===o&&C();const s=q((()=>e.children));return q((n=>{const a=d.inFallback(),{showContent:i=!0,showFallback:c=!0}=t?t():{};return(!a||o&&"$$f"!==o)&&i?(d.resolved=!0,f&&f(),f=r=o=void 0,l=d.effects,U.push.apply(U,l),l.length=0,s()):c?f?n:H((t=>(f=t,r&&(C({id:r.id+"f",count:0}),r=void 0),e.fallback)),p):void 0;var l}))}))}})}const ut=void 0},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],k3151:[function(e,t,r){r.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},r.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.exportAll=function(e,t){return Object.keys(e).forEach((function(r){"default"===r||"__esModule"===r||t.hasOwnProperty(r)||Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[r]}})})),t},r.export=function(e,t,r){Object.defineProperty(e,t,{enumerable:!0,get:r})}},{}],axFgj:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"createTable",(()=>c));var n=e("solid-js/web"),a=(e("solid-js"),e("./table")),s=e("./table_controller"),i=e("ui/animation/animation_manager");function c(){const e=s.tableUIDescriptor.create({view:s.View.TopDownBookCentered,lookDx:0,lookDy:0}),t=new(0,i.AnimationManager);return{Component:function(r){return(0,n.createComponent)(a.TableComponent,{get Book(){return r.Book},get Hand(){return r.Hand},get Deck(){return r.Deck},get SpreadOverlay(){return r.SpreadOverlay},get StatusOverlay(){return r.StatusOverlay},get view(){return e.view},get lookDx(){return e.lookDx},get lookDy(){return e.lookDy},animations:t})},controller:new(0,s.TableController)(e,t)}}},{"solid-js/web":"33rlw","solid-js":"5rsr6","./table":"gDBtG","./table_controller":"5G5V6","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","ui/animation/animation_manager":"fbyYW"}],gDBtG:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"TableComponent",(()=>d));var n=e("solid-js/web"),a=e("solid-js"),s=e("./table.module.scss"),i=o.interopDefault(s),c=e("./table_controller");const l=(0,n.template)("<div><div><div><div></div><div></div><div></div><div></div></div></div><div>");function d(e){const[t,r]=(0,a.createSignal)();return(()=>{const o=l(),a=o.firstChild,s=a.firstChild,d=s.firstChild,p=d.nextSibling,u=p.nextSibling,f=u.nextSibling,m=a.nextSibling;return(0,n.use)(r,s),(0,n.addEventListener)(s,"transitionend",e.animations.createTransitionEndEventListener(t,(()=>e.view))),(0,n.insert)(d,(0,n.createComponent)(e.Book,{})),(0,n.insert)(p,(0,n.createComponent)(e.SpreadOverlay,{})),(0,n.insert)(u,(0,n.createComponent)(e.Deck,{})),(0,n.insert)(f,(0,n.createComponent)(e.Hand,{})),(0,n.insert)(m,(0,n.createComponent)(e.StatusOverlay,{})),(0,n.effect)((t=>{const r=i.default.container,l={[i.default.room]:!0},g=e.view===c.View.Tilted?{transform:`translate(${-20*e.lookDx}vmin, ${20*-e.lookDy}vmin) rotateX(${-e.lookDy/2}rad)`}:void 0,h={[i.default.table]:!0,[i.default.tilted]:e.view===c.View.Tilted,[i.default.topDown]:e.view===c.View.TopDown,[i.default.topDownBookCentered]:e.view===c.View.TopDownBookCentered},y=i.default.book,v=i.default["spread-overlay"],b=i.default.deck,C=i.default.hand,k=i.default["status-overlay"];return r!==t._v$&&(0,n.className)(o,t._v$=r),t._v$2=(0,n.classList)(a,l,t._v$2),t._v$3=(0,n.style)(a,g,t._v$3),t._v$4=(0,n.classList)(s,h,t._v$4),y!==t._v$5&&(0,n.className)(d,t._v$5=y),v!==t._v$6&&(0,n.className)(p,t._v$6=v),b!==t._v$7&&(0,n.className)(u,t._v$7=b),C!==t._v$8&&(0,n.className)(f,t._v$8=C),k!==t._v$9&&(0,n.className)(m,t._v$9=k),t}),{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0,_v$9:void 0}),o})()}},{"solid-js/web":"33rlw","./table.module.scss":"4ZLm7","./table_controller":"5G5V6","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","solid-js":"5rsr6"}],"4ZLm7":[function(e,t,r){t.exports.cardWidth="9",t.exports.cardHeight="12",t.exports.pageWidth="50",t.exports.pageHeight="70",t.exports.tableWidth="200",t.exports.tableHeight="200",t.exports.bookWidth="50",t.exports.bookHeight="70",t.exports.bookTop="10",t.exports.handSlotTop="20",t.exports.handSlotWidth="80",t.exports.handSlotHeight="12",t.exports.deckTop="10",t.exports.overlayZ="30",t.exports.container="container_e3e899",t.exports.room="room_e3e899",t.exports.table="table_e3e899",t.exports.topDown="topDown_e3e899",t.exports.topDownBookCentered="topDownBookCentered_e3e899",t.exports.tilted="tilted_e3e899",t.exports.book="book_e3e899",t.exports.hand="hand_e3e899",t.exports.deck="deck_e3e899",t.exports["spread-overlay"]="spread-overlay_e3e899",t.exports["drag-overlay"]="drag-overlay_e3e899",t.exports["status-overlay"]="status-overlay_e3e899"},{}],"5G5V6":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"View",(()=>b)),o.export(r,"tableUIDescriptor",(()=>k)),o.export(r,"TableController",(()=>x));var n=e("model/descriptor/literals"),a=e("model/descriptor/record"),s=e("./table.module.scss"),i=o.interopDefault(s),c=e("solid-js");const l=parseInt(i.default.bookTop),d=parseInt(i.default.bookWidth),p=parseInt(i.default.bookHeight),u=parseInt(i.default.tableWidth),f=parseInt(i.default.deckTop),m=parseInt(i.default.handSlotTop),g=parseInt(i.default.handSlotWidth),h=parseInt(i.default.cardWidth),y=parseInt(i.default.cardHeight),v=parseInt(i.default.overlayZ);let b;!function(e){e[e.TopDown=0]="TopDown",e[e.TopDownBookCentered=1]="TopDownBookCentered",e[e.Tilted=2]="Tilted"}(b||(b={}));const C=new(0,n.LiteralTypeDescriptor),k=(0,a.activeRecordDescriptor)({view:C,lookDx:n.numberDescriptor,lookDy:n.numberDescriptor});class x{constructor(e,t){this.tableUI=e,this.animations=t}async setView(e){if(this.tableUI.view!==e)return this.tableUI.view=e,this.animations.waitForAnimation(e)}async look(e,t){(0,c.batch)((()=>{this.tableUI.lookDx=e,this.tableUI.lookDy=t}))}getPlayerCardSlotTablePosition(e){return[(u-g)/2+(e+.5)*g/6-h/2,l+p+m,0]}getBookCardSlotTablePosition(e){return[(u-d)/2+(e+.5)*d/3-h/2,l+p+y/2,v]}getPlayerDeckTablePosition(){return[(u-g)/2-10,l+p+f,0]}}},{"model/descriptor/literals":"6SgZZ","model/descriptor/record":"9b5Fs","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","./table.module.scss":"4ZLm7","solid-js":"5rsr6"}],"6SgZZ":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"LiteralTypeDescriptor",(()=>n)),o.export(r,"numberDescriptor",(()=>a)),o.export(r,"stringDescriptor",(()=>s)),o.export(r,"booleanDescriptor",(()=>i)),o.export(r,"componentDescriptor",(()=>c));class n{constructor(){}create(e){return e}snapshot(e){return e}freeze(e){return e}}const a=new n,s=new n,i=new n,c=new n},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"9b5Fs":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"valueRecordDescriptor",(()=>s)),o.export(r,"activeRecordDescriptor",(()=>l));var n=e("solid-js");class a{constructor(e){this.attributeTypes=e}create(e){const t={};for(let r in this.attributeTypes){const o=this.attributeTypes[r],n=e[r],a=o.create(n);t[r]=a}return t}snapshot(e){const t={};for(let r in this.attributeTypes){const o=this.attributeTypes[r],n=e[r],a=o.snapshot(n);t[r]=a}return t}freeze(e){const t={};for(let r in this.attributeTypes){const o=this.attributeTypes[r],n=e[r],a=o.freeze(n);t[r]=a}return Object.freeze(t)}}function s(e){return new a(e)}class i{constructor(){}get(e,t){return e[t]?.[0]?.()}set(e,t,r){const o=e[t]?.[1];return o?.(r),null!=o}}class c{constructor(e){this.attributeTypes=e}create(e){const t={};for(let r in this.attributeTypes){const o=this.attributeTypes[r],a=e[r],s=o.create(a);t[r]=(0,n.createSignal)(s)}return new Proxy(t,new i)}snapshot(e){const t={};for(let r in this.attributeTypes){const o=this.attributeTypes[r],n=e[r],a=o.snapshot(n);t[r]=a}return t}freeze(e){const t={};for(let r in this.attributeTypes){const o=this.attributeTypes[r],n=e[r],a=o.snapshot(n);t[r]=a}return Object.freeze(t)}}function l(e){return new c(e)}},{"solid-js":"5rsr6","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],fbyYW:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"AnimationCanceledError",(()=>s)),o.export(r,"AnimationManager",(()=>i));var n=e("../../base/delay"),a=e("../../base/flattened_promise");class s extends Error{}class i{animations=new Map;constructor(){}waitForAnimation(e,t=700){this.maybeCancelAnimation(e);const r=(0,a.createFlattenedPromise)();return this.animations.set(e,r),Promise.race([r.promise,(0,n.delay)(t)])}maybeCancelAnimation(e){const t=this.animations.get(e);t&&(t.reject(new s),this.animations.delete(e))}maybeCompleteAnimation(e){const t=this.animations.get(e);t&&(t.resolve(),this.animations.delete(e))}createAnimationEndEventListener(e,t){return r=>{const[o,n]=t();null!=r.target&&e()===r.target&&r.animationName===n&&this.maybeCompleteAnimation(o)}}createTransitionEndEventListener(e,t){return r=>{null!=r.target&&e()===r.target&&this.maybeCompleteAnimation(t())}}createCutoutPoppedUpOrDownCallback(e,t=e){return r=>{this.maybeCompleteAnimation(r?e:t)}}}},{"../../base/delay":"hGewO","../../base/flattened_promise":"9HvUW","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],hGewO:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"delay",(()=>a));var n=e("./flattened_promise");function a(e){const{promise:t,resolve:r}=(0,n.createFlattenedPromise)();return setTimeout(r,e),t}},{"./flattened_promise":"9HvUW","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"9HvUW":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");function n(){let e,t;return{promise:new Promise(((r,o)=>{e=r,t=o})),resolve:t=>e(t),reject:e=>t(e)}}o.defineInteropFlag(r),o.export(r,"createFlattenedPromise",(()=>n))},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],dTDP6:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"createBook",(()=>d));var n=e("solid-js/web"),a=e("./book"),s=e("./book_controller"),i=e("ui/animation/animation_manager"),c=e("./cover/chrononomicon"),l=e("components/page/page_controller");function d({pageComponentManager:e,book:t}){function r(t){if(null!=t)return[(0,n.createComponent)(e.FactoryComponent,{model:t,get side(){return l.PageSide.Left}}),(0,n.createComponent)(e.FactoryComponent,{model:t,get side(){return l.PageSide.Right}})]}const o=new(0,i.AnimationManager),d=s.bookUIDescriptor.create({previousSpread:void 0,turnLeftToRight:!0,turnPastMidway:!1});return{Component:e=>(0,n.createComponent)(a.BookComponent,{animations:o,get previousPages(){return r(d.previousSpread)},get currentPages(){return r(t.spread)},get turnLeftToRight(){return d.turnLeftToRight},get turnPastMidway(){return d.turnPastMidway},Cover:c.ChrononomiconCoverComponent,get children(){return e.children}}),controller:new(0,s.BookController)(t,d,o,e)}}},{"solid-js/web":"33rlw","./book":"cxBFn","./book_controller":"ifMWd","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","ui/animation/animation_manager":"fbyYW","./cover/chrononomicon":"kHbFE","components/page/page_controller":"iOtej"}],cxBFn:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"BookComponent",(()=>f));var n=e("solid-js/web"),a=e("solid-js"),s=e("./book.module.scss"),i=o.interopDefault(s);const c=(0,n.template)("<div>"),l=(0,n.template)("<div><div></div><div></div><div></div><div></div><div>"),d=(0,n.template)("<div><div><div>");function p(e){return(()=>{const t=c();return(0,n.insert)(t,(()=>e.children)),(0,n.effect)((r=>(0,n.classList)(t,{[i.default.page]:!0,[i.default.flipped]:e.flipped},r))),t})()}function u(e){return(()=>{const t=l(),r=t.firstChild,o=r.nextSibling,a=o.nextSibling,s=a.nextSibling,c=s.nextSibling;return(0,n.insert)(s,(0,n.createComponent)(p,{get flipped(){return e.flipped},get children(){return e.topPage}})),(0,n.insert)(c,(0,n.createComponent)(p,{get flipped(){return e.flipped},get children(){return e.bottomPage}})),(0,n.effect)((e=>{const l=i.default["book-half"],d=i.default["book-half-front"],p=i.default["book-half-right"],u=i.default["book-half-left"],f=i.default["book-half-top"],m=i.default["book-half-bottom"];return l!==e._v$&&(0,n.className)(t,e._v$=l),d!==e._v$2&&(0,n.className)(r,e._v$2=d),p!==e._v$3&&(0,n.className)(o,e._v$3=p),u!==e._v$4&&(0,n.className)(a,e._v$4=u),f!==e._v$5&&(0,n.className)(s,e._v$5=f),m!==e._v$6&&(0,n.className)(c,e._v$6=m),e}),{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0}),t})()}function f(e){const[t,r]=(0,a.createSignal)(),o=(0,a.createMemo)((()=>e.previousPages&&e.turnLeftToRight?e.previousPages:e.currentPages)),s=(0,a.createMemo)((()=>e.previousPages&&!e.turnLeftToRight?e.previousPages:e.currentPages)),[l,f]=(0,a.createSignal)(),m=e.animations.createAnimationEndEventListener(l,(()=>e.turnLeftToRight?e.turnPastMidway?["turn",i.default.ltrdown]:["midway",i.default.ltrup]:e.turnPastMidway?["turn",i.default.rtldown]:["midway",i.default.rtlup]));return(()=>{const a=d(),l=a.firstChild,g=l.firstChild;return(0,n.insert)(l,(0,n.createComponent)(u,{get topPage(){return o()?.[1]},flipped:!1}),g),(0,n.insert)(l,(()=>{const t=(0,n.memo)((()=>!(!e.previousPages||!e.currentPages)));return()=>t()&&(()=>{const t=d(),r=t.firstChild,a=r.firstChild;return(0,n.addEventListener)(r,"animationend",m),(0,n.use)(f,r),(0,n.insert)(a,(0,n.createComponent)(p,{get flipped(){return e.turnLeftToRight&&!e.turnPastMidway||!e.turnLeftToRight&&e.turnPastMidway},get children(){return(0,n.memo)((()=>!!(e.turnLeftToRight&&!e.turnPastMidway||!e.turnLeftToRight&&e.turnPastMidway)))()?o()?.[0]:s()?.[1]}})),(0,n.effect)((o=>{const s={[i.default["turn-page"]]:!0},c={[i.default["turn-page-rotate"]]:!0,[i.default.ltr]:e.turnLeftToRight,[i.default.rtl]:!e.turnLeftToRight,[i.default.down]:e.turnPastMidway,[i.default.up]:!e.turnPastMidway},l={[i.default["turn-page-flip"]]:!0,[i.default.ltr]:e.turnLeftToRight,[i.default.rtl]:!e.turnLeftToRight,[i.default.down]:e.turnPastMidway,[i.default.up]:!e.turnPastMidway};return o._v$10=(0,n.classList)(t,s,o._v$10),o._v$11=(0,n.classList)(r,c,o._v$11),o._v$12=(0,n.classList)(a,l,o._v$12),o}),{_v$10:void 0,_v$11:void 0,_v$12:void 0}),t})()})(),g),(0,n.use)(r,g),(0,n.addEventListener)(g,"transitionend",e.animations.createTransitionEndEventListener(t,(()=>"open"))),(0,n.insert)(g,(0,n.createComponent)(u,{get topPage(){return(0,n.createComponent)(e.Cover,{})},get bottomPage(){return s()?.[0]},flipped:!0})),(0,n.insert)(l,(()=>{const t=(0,n.memo)((()=>!!e.children));return()=>t()&&(()=>{const t=c();return(0,n.insert)(t,(()=>e.children)),(0,n.effect)((()=>(0,n.className)(t,i.default.spread))),t})()})(),null),(0,n.effect)((t=>{const r=i.default.container,o=i.default.book,s={[i.default.spine]:!0,[i.default.open]:null!=e.currentPages};return r!==t._v$7&&(0,n.className)(a,t._v$7=r),o!==t._v$8&&(0,n.className)(l,t._v$8=o),t._v$9=(0,n.classList)(g,s,t._v$9),t}),{_v$7:void 0,_v$8:void 0,_v$9:void 0}),a})()}},{"solid-js/web":"33rlw","solid-js":"5rsr6","./book.module.scss":"fSYuE","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],fSYuE:[function(e,t,r){t.exports.cardWidth="9",t.exports.cardHeight="12",t.exports.pageWidth="50",t.exports.pageHeight="70",t.exports.container="container_a81f2a",t.exports.book="book_a81f2a",t.exports.spread="spread_a81f2a",t.exports.page="page_a81f2a",t.exports.flipped="flipped_a81f2a",t.exports.spine="spine_a81f2a",t.exports.open="open_a81f2a",t.exports["book-half-bottom"]="book-half-bottom_a81f2a",t.exports["book-half"]="book-half_a81f2a",t.exports["book-half-top"]="book-half-top_a81f2a",t.exports["book-half-front"]="book-half-front_a81f2a",t.exports["book-half-left"]="book-half-left_a81f2a",t.exports["book-half-right"]="book-half-right_a81f2a",t.exports["turn-page"]="turn-page_a81f2a",t.exports["turn-page-flip"]="turn-page-flip_a81f2a",t.exports.rtl="rtl_a81f2a",t.exports.down="down_a81f2a",t.exports.ltr="ltr_a81f2a",t.exports.up="up_a81f2a",t.exports["turn-page-rotate"]="turn-page-rotate_a81f2a",t.exports.ltrup="ltrup_a81f2a",t.exports.ltrdown="ltrdown_a81f2a",t.exports.rtlup="rtlup_a81f2a",t.exports.rtldown="rtldown_a81f2a"},{}],ifMWd:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"bookUIDescriptor",(()=>d)),o.export(r,"BookController",(()=>p));var n=e("base/delay"),a=e("model/descriptor/literals"),s=e("model/descriptor/option"),i=e("model/descriptor/record"),c=e("model/domain"),l=e("solid-js");const d=(0,i.activeRecordDescriptor)({previousSpread:(0,s.optionalDescriptor)(c.bookSpreadDescriptor),turnLeftToRight:a.booleanDescriptor,turnPastMidway:a.booleanDescriptor});class p{constructor(e,t,r,o){this.book=e,this.bookUI=t,this.animations=r,this.pageComponentManager=o}async showSpread(e,t=!1){if(e!=this.book.spread){const r=null==this.book.spread,o=this.book.spread;null!=o&&await(this.pageComponentManager.lookupController(o)?.popdown()),(0,l.batch)((()=>{this.bookUI.previousSpread=this.book.spread,this.bookUI.turnLeftToRight=t,this.bookUI.turnPastMidway=!1,this.book.spread=e})),r?await this.animations.waitForAnimation("open"):(await this.animations.waitForAnimation("midway"),this.bookUI.turnPastMidway=!0,await this.animations.waitForAnimation("turn"),this.bookUI.previousSpread=void 0),await(0,n.delay)(0),await(0,l.batch)((async()=>{null!=e&&await(this.pageComponentManager.lookupController(e)?.popup())}))}}}},{"model/descriptor/literals":"6SgZZ","model/descriptor/option":"c8pK3","model/descriptor/record":"9b5Fs","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","model/domain":"hG1oc","solid-js":"5rsr6","base/delay":"hGewO"}],c8pK3:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"optionalDescriptor",(()=>a));class n{constructor(e){this.mandatoryTypeDescriptor=e}create(e){return null!=e?this.mandatoryTypeDescriptor.create(e):void 0}snapshot(e){return null!=e?this.mandatoryTypeDescriptor.snapshot(e):void 0}freeze(e){return null!=e?this.mandatoryTypeDescriptor.freeze(e):void 0}}function a(e){return new n(e)}},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],hG1oc:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"SymbolType",(()=>l)),o.export(r,"EffectDirection",(()=>d)),o.export(r,"CardBackgroundType",(()=>p)),o.export(r,"CardForegroundType",(()=>u)),o.export(r,"CardFaceType",(()=>f)),o.export(r,"ChoiceType",(()=>m)),o.export(r,"EncounterType",(()=>g)),o.export(r,"MonsterType",(()=>h)),o.export(r,"EventType",(()=>y)),o.export(r,"RecycleTarget",(()=>v)),o.export(r,"cardDescriptor",(()=>b)),o.export(r,"cardSlotDescriptor",(()=>C)),o.export(r,"BookSpreadType",(()=>k)),o.export(r,"bookSpreadTableOfContentsDescriptor",(()=>x)),o.export(r,"bookSpreadDeathDescriptor",(()=>w)),o.export(r,"deckDescriptor",(()=>T)),o.export(r,"entityDescriptor",(()=>j)),o.export(r,"encounterBattleDescriptor",(()=>F)),o.export(r,"encounterEventDescriptor",(()=>_)),o.export(r,"encounterDescriptor",(()=>D)),o.export(r,"bookSpreadRoomDescriptor",(()=>S)),o.export(r,"bookSpreadDescriptor",(()=>E)),o.export(r,"ChapterType",(()=>I)),o.export(r,"chapterDescriptor",(()=>P)),o.export(r,"bookDescriptor",(()=>M)),o.export(r,"gameDescriptor",(()=>A));var n=e("./descriptor/list"),a=e("./descriptor/literals"),s=e("./descriptor/option"),i=e("./descriptor/record"),c=e("./descriptor/union");let l,d,p,u,f,m,g,h,y,v;!function(e){e[e.Force=1]="Force",e[e.Finesse=2]="Finesse",e[e.Mind=3]="Mind",e[e.Magic=4]="Magic",e[e.Fire=5]="Fire",e[e.Damage=6]="Damage",e[e.Age=7]="Age",e[e.Draw=8]="Draw",e[e.Healing=9]="Healing",e[e.Poison=10]="Poison"}(l||(l={})),function(e){e[e.Up=1]="Up",e[e.Down=2]="Down",e[e.Omni=3]="Omni"}(d||(d={})),function(e){e[e.Crosshatched=1]="Crosshatched",e[e.Clear=2]="Clear",e[e.Door=3]="Door",e[e.ForestPath=4]="ForestPath",e[e.DarkenedForestPath=5]="DarkenedForestPath",e[e.Passageway=6]="Passageway"}(p||(p={})),function(e){e[e.Rat=1]="Rat",e[e.Troll=2]="Troll",e[e.Snail=3]="Snail",e[e.Rooster=4]="Rooster",e[e.Trap=5]="Trap",e[e.Fountain=6]="Fountain",e[e.MagicTree=7]="MagicTree"}(u||(u={})),function(e){e[e.Resource=1]="Resource",e[e.ResourceBack=2]="ResourceBack",e[e.Choice=3]="Choice",e[e.ChoiceBack=4]="ChoiceBack"}(f||(f={})),function(e){e[e.NextTurn=1]="NextTurn",e[e.NextPage=2]="NextPage",e[e.NextChapter=3]="NextChapter"}(m||(m={})),function(e){e[e.Battle=1]="Battle",e[e.Event=2]="Event"}(g||(g={})),function(e){e[e.BigRat=1]="BigRat",e[e.Snail=2]="Snail",e[e.Troll=3]="Troll"}(h||(h={})),function(e){e[e.Fountain=1]="Fountain",e[e.MagicTree=2]="MagicTree"}(y||(y={})),function(e){e[e.DrawDeckTop=1]="DrawDeckTop",e[e.DrawDeckBottom=2]="DrawDeckBottom",e[e.DrawDeckRandom=3]="DrawDeckRandom",e[e.DiscardDeckTop=4]="DiscardDeckTop"}(v||(v={}));const b=(0,i.activeRecordDescriptor)({definition:new(0,a.LiteralTypeDescriptor),visibleFaceIndex:a.numberDescriptor}),C=(0,i.activeRecordDescriptor)({targetCard:(0,s.optionalDescriptor)(b),playedCards:(0,n.listDescriptor)(b)});let k;!function(e){e[e.TableOfContents=1]="TableOfContents",e[e.Room=2]="Room",e[e.Death=3]="Death"}(k||(k={}));const x=(0,i.activeRecordDescriptor)({type:new(0,a.LiteralTypeDescriptor),unlockedChapters:a.numberDescriptor}),w=(0,i.activeRecordDescriptor)({type:new(0,a.LiteralTypeDescriptor)}),T=(0,n.listDescriptor)(b),j=(0,i.activeRecordDescriptor)({health:a.numberDescriptor,maxHealth:a.numberDescriptor,deck:T}),F=(0,i.activeRecordDescriptor)({type:new(0,a.LiteralTypeDescriptor),monster:j,monsterType:new(0,a.LiteralTypeDescriptor)}),_=(0,i.activeRecordDescriptor)({type:new(0,a.LiteralTypeDescriptor),eventType:new(0,a.LiteralTypeDescriptor),deck:T}),D=(0,c.discriminatingUnionDescriptor)({1:F,2:_},(e=>e.type),(e=>e.type)),S=(0,i.activeRecordDescriptor)({type:new(0,a.LiteralTypeDescriptor),encounter:(0,s.optionalDescriptor)(D)}),E=(0,c.discriminatingUnionDescriptor)({1:x,2:S,3:w},(e=>e.type),(e=>e.type));let I;!function(e){e[e.Forest=1]="Forest",e[e.Ruins=2]="Ruins",e[e.Tower=3]="Tower"}(I||(I={}));const P=(0,i.activeRecordDescriptor)({type:new(0,a.LiteralTypeDescriptor),deck:T,pagesRemaining:a.numberDescriptor,finalCard:b}),M=(0,i.activeRecordDescriptor)({spread:(0,s.optionalDescriptor)(E),chapter:P,cardSlots:(0,n.listDescriptor)(C)}),A=(0,i.activeRecordDescriptor)({book:M,playerCharacter:(0,s.optionalDescriptor)(j),playerHand:(0,n.listDescriptor)(C)})},{"./descriptor/list":"lvxQr","./descriptor/literals":"6SgZZ","./descriptor/option":"c8pK3","./descriptor/record":"9b5Fs","./descriptor/union":"ivSrf","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],lvxQr:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"listDescriptor",(()=>a));class n{constructor(e){this.elementTypeDescriptor=e}create(e){return e.map((e=>this.elementTypeDescriptor.create(e)))}snapshot(e){return e.map((e=>this.elementTypeDescriptor.snapshot(e)))}freeze(e){return Object.freeze(e.map((e=>this.elementTypeDescriptor.freeze(e))))}}function a(e){return new n(e)}},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],ivSrf:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"discriminatingUnionDescriptor",(()=>a));class n{constructor(e,t,r){this.cases=e,this.discriminatorState=t,this.discriminatorMutable=r}create(e){const t=this.discriminatorState(e);return this.cases[t].create(e)}snapshot(e){const t=this.discriminatorMutable(e);return this.cases[t].snapshot(e)}freeze(e){const t=this.discriminatorState(e);return this.cases[t].freeze(e)}}function a(e,t,r){return new n(e,t,r)}},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],kHbFE:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"ChrononomiconCoverComponent",(()=>c));var n=e("solid-js/web"),a=e("./chrononomicon.module.scss"),s=o.interopDefault(a);const i=(0,n.template)("<div><h1>Chrononomicon");function c(){return(()=>{const e=i();return(0,n.effect)((()=>(0,n.className)(e,s.default.container))),e})()}},{"solid-js/web":"33rlw","./chrononomicon.module.scss":"8pJj9","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"8pJj9":[function(e,t,r){t.exports.container="_0XkbGq_container"},{}],iOtej:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");let n;o.defineInteropFlag(r),o.export(r,"PageSide",(()=>n)),o.export(r,"EmptyPageController",(()=>a)),function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"}(n||(n={}));class a{async popup(){}async popdown(){}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"189zH":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"createCardSlots",(()=>d)),o.export(r,"createCardSlotManager",(()=>p));var n=e("solid-js/web"),a=e("./card_slot"),s=e("./card_slots"),i=e("solid-js"),c=e("components/component_manager"),l=e("./card_slot_controller");function d(e){return{Component:t=>(0,n.createComponent)(s.CardSlotsComponent,{CardSlotComponent:e,get cardSlots(){return t.model}})}}function p(e,t,r){return new(0,c.ComponentManager)((function(o){const s=l.cardSlotUIDescriptor.create({targetCardHidden:!1,forceUnrotate:!1});function c(e,r){t().startDrag(o,e,r)}function d(){t().drop(o)}function p(){t().click(o)}return{controller:new(0,l.CardSlotController)(s),Component:function(){return(0,n.createComponent)(a.CardSlotComponent,{get targetCard(){return(0,n.memo)((()=>!(!o.targetCard||s.targetCardHidden)))()&&(0,n.createComponent)(e,{get model(){return o.targetCard}})},get targetInteraction(){return t().allowedInteraction(o)},onDragStart:c,onDrop:d,onClick:p,get bordered(){return r.playerHand.indexOf(o)>=0},get used(){return null==o.targetCard&&o.playedCards.length>0},get forceUnrotate(){return s.forceUnrotate},get children(){return(0,n.createComponent)(i.For,{get each(){return o.playedCards},children:t=>(0,n.createComponent)(e,{model:t})})}})}}}))}},{"solid-js/web":"33rlw","./card_slot":"ltYid","./card_slots":"8TIQ2","solid-js":"5rsr6","components/component_manager":"e6kRp","./card_slot_controller":"lGuHg","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],ltYid:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"CardSlotComponent",(()=>u));var n=e("solid-js/web"),a=e("rules/interaction_manager"),s=e("./card_slot.module.scss"),i=o.interopDefault(s),c=e("solid-js");const l=(0,n.template)("<div><div></div><div>"),d=(0,n.template)("<div>"),p=Object.freeze({[a.Interaction.None]:i.default.none,[a.Interaction.Drag]:i.default.draggable,[a.Interaction.Activate]:i.default.clickable,[a.Interaction.Disabled]:i.default.immovable,[a.Interaction.NoDrop]:i.default["no-drop"],[a.Interaction.Drop]:i.default.drop,[a.Interaction.Dragging]:i.default.dragging,[a.Interaction.LongPress]:i.default["long-press"]});function u(e){return(()=>{const t=l(),r=t.firstChild,o=r.nextSibling;return(0,n.addEventListener)(t,"pointerup",e.onDrop,!0),(0,n.addEventListener)(r,"click",e.onClick,!0),r.$$pointerdown=t=>e.onDragStart(t.pageX,t.pageY),(0,n.insert)(r,(()=>e.targetCard)),(0,n.insert)(o,(0,n.createComponent)(c.For,{get each(){return(0,c.children)((()=>e.children)).toArray()},children:t=>(()=>{const r=d();return(0,n.insert)(r,t),(0,n.effect)((t=>(0,n.classList)(r,{[i.default["played-card"]]:!0,[i.default.used]:e.used},t))),r})()})),(0,n.effect)((a=>{const s=i.default.container,c={[i.default["target-card"]]:!0,[p[e.targetInteraction]]:!0,[i.default.bordered]:e.bordered},l={[i.default["played-cards"]]:!0,[i.default.used]:e.used,[i.default.unrotate]:e.forceUnrotate};return s!==a._v$&&(0,n.className)(t,a._v$=s),a._v$2=(0,n.classList)(r,c,a._v$2),a._v$3=(0,n.classList)(o,l,a._v$3),a}),{_v$:void 0,_v$2:void 0,_v$3:void 0}),t})()}(0,n.delegateEvents)(["pointerup","pointerdown","click"])},{"solid-js/web":"33rlw","./card_slot.module.scss":"8mse4","solid-js":"5rsr6","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","rules/interaction_manager":"3lVrH"}],"8mse4":[function(e,t,r){t.exports.cardWidth="9",t.exports.cardHeight="12",t.exports.pageWidth="50",t.exports.pageHeight="70",t.exports.container="container_b7e78d",t.exports["target-card"]="target-card_b7e78d",t.exports.bordered="bordered_b7e78d",t.exports.none="none_b7e78d",t.exports.draggable="draggable_b7e78d",t.exports.dragging="dragging_b7e78d",t.exports.clickable="clickable_b7e78d",t.exports.immovable="immovable_b7e78d",t.exports["no-drop"]="no-drop_b7e78d",t.exports.drop="drop_b7e78d",t.exports["long-press"]="long-press_b7e78d",t.exports["long-pressing"]="long-pressing_b7e78d",t.exports["played-cards"]="played-cards_b7e78d",t.exports.used="used_b7e78d",t.exports.unrotate="unrotate_b7e78d",t.exports["played-card"]="played-card_b7e78d"},{}],"3lVrH":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"Interaction",(()=>p)),o.export(r,"InteractionManager",(()=>f));var n=e("base/unreachable_error"),a=e("model/domain"),s=e("solid-js"),i=e("./cards"),c=e("base/delay"),l=e("model/descriptor/record"),d=e("model/descriptor/literals");let p;!function(e){e[e.None=1]="None",e[e.Activate=2]="Activate",e[e.Drag=3]="Drag",e[e.Dragging=4]="Dragging",e[e.Drop=5]="Drop",e[e.NoDrop=6]="NoDrop",e[e.LongPress=7]="LongPress",e[e.Disabled=8]="Disabled"}(p||(p={}));const u=(0,l.activeRecordDescriptor)({dragging:d.booleanDescriptor,dragged:new(0,d.LiteralTypeDescriptor),mousePosition:new(0,d.LiteralTypeDescriptor),longPress:new(0,d.LiteralTypeDescriptor)});class f{constructor(e,t,r){this.gameManager=e,this.cardManager=t,this.cardSlotManager=r,this.ui=u.create({dragged:void 0,dragging:!1,longPress:void 0,mousePosition:void 0}),this.lastAnimation=Promise.resolve()}get dragging(){return this.ui.dragging}set dragging(e){this.ui.dragging=e}get lastMousePosition(){return this.ui.mousePosition}set lastMousePosition(e){this.ui.mousePosition=e}get draggedCard(){return this.ui.dragged?.[0]}allowedInteraction(e){const t=this.ui.dragged,r=e?.targetCard;if(null!=t){const[o,n]=t;return e==n?4:null!=r?5:6}if(null==r)return 1;const o=(0,i.cardFace)(r,!!this.cardManager.lookupController(r)?.isPeeking());switch(o.type){case a.CardFaceType.Choice:case a.CardFaceType.ChoiceBack:return 2;case a.CardFaceType.Resource:return 3;case a.CardFaceType.ResourceBack:return 7;default:throw new(0,n.UnreachableError)(o)}}click(e){return this.politelyAnimate((async()=>this.gameManager.chooseTargetCard(e)))}startDrag(e,t,r){return this.politelyAnimate((async()=>{const o=this.allowedInteraction(e),n=e.targetCard;if(null!=n){const a=this.cardManager.lookupController(n);3===o?(0,s.batch)((()=>{this.cardSlotManager.lookupController(e)?.setTargetCardHidden(!0),this.ui.dragged=[n,e],this.ui.mousePosition=[t,r],this.ui.dragging=!0,a?.setWarning(!0)})):7===o&&null==this.ui.longPress&&(await(a?.flipTemporarily(!0)),this.ui.longPress=e)}}))}clearDrag(){return this.ui.dragging=!1,this.politelyAnimate((async()=>{const e=this.ui.dragged;if(e){const[t,r]=e;(0,s.batch)((()=>{r.targetCard=t,this.cardSlotManager.lookupController(r)?.setTargetCardHidden(!1),this.cardManager.lookupController(t)?.setWarning(!1),this.ui.dragged=void 0}))}const t=this.ui.longPress;if(t){const e=t;if(this.ui.longPress=void 0,e.targetCard){const t=this.cardManager.lookupController(e.targetCard);await(t?.flipTemporarily(!1))}}}))}drop(e){return this.politelyAnimate((async()=>{const t=this.ui.dragged;if(t){const[r,o]=t,n=this.allowedInteraction(e);o!=e&&5==n?(await this.gameManager.applyCardEffects(o),(0,s.batch)((()=>{e.playedCards=[...e.playedCards,r],o.targetCard=void 0,this.ui.dragged=void 0})),await this.gameManager.normalizeBoard()):(0,s.batch)((()=>{o.targetCard=r,this.ui.dragged=void 0})),this.cardSlotManager.lookupController(o)?.setTargetCardHidden(!1),this.cardManager.lookupController(r)?.setWarning(!1)}}))}politelyAnimate(e){return this.lastAnimation=this.lastAnimation.catch((e=>console.warn(e))).then(e).then((()=>(0,c.delay)(0))),this.lastAnimation}}},{"base/unreachable_error":"eQLwm","model/domain":"hG1oc","solid-js":"5rsr6","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","./cards":"kFtME","base/delay":"hGewO","model/descriptor/record":"9b5Fs","model/descriptor/literals":"6SgZZ"}],eQLwm:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"UnreachableError",(()=>n));class n extends Error{constructor(e){super()}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],kFtME:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"cardFace",(()=>i)),o.export(r,"calculateCardEffects",(()=>c)),o.export(r,"calculateCardEffectUsages",(()=>l)),o.export(r,"calculateTargetCardEffectUsages",(()=>d));var n=e("model/domain"),a=e("./games"),s=e("base/unreachable_error");function i(e,t){const r=e.definition.faces;return r[(e.visibleFaceIndex+(t?1:0))%r.length]}function c(e){switch(e.type){case n.CardFaceType.Resource:case n.CardFaceType.Choice:return{cost:e.cost,benefit:e.benefit};case n.CardFaceType.ResourceBack:case n.CardFaceType.ChoiceBack:return{cost:e.cost,benefit:[]};default:throw new(0,s.UnreachableError)(e)}}function l(e,t,r){const o=(0,a.allCardSlots)(e),n=i(t,!!r?.lookupController(t)?.isPeeking()),s=o.find((e=>e.targetCard===t||e.playedCards.some((e=>e===t)))),l=s?.targetCard;if(null==s||null==l){const{cost:e,benefit:t}=c(n);return{cost:e.map((e=>({effect:e,used:null!=s}))),benefit:t.map((e=>({effect:e,used:null!=s})))}}if(t===l)return d(n,s,r);{const e=i(l,!!r?.lookupController(l)?.isPeeking()),{cost:o}=c(e),n=o.reduce(((e,t)=>{const r=e.get(t)||0;return e.set(t,r+1),e}),new Map);for(const e of s.playedCards){const r=i(e,!1),{cost:o,benefit:a}=c(r),s=a.map((e=>{const t=n.get(e)||0;return n.set(e,t-1),{effect:e,used:t>0}}));if(e===t){return{cost:o.map((e=>({effect:e,used:!0}))),benefit:s}}}}return{cost:[],benefit:[]}}function d(e,t,r){const o=function(e,t){return e.playedCards.reduce(((e,r)=>{const o=i(r,!!t?.lookupController(r)?.isPeeking());return o.type===n.CardFaceType.Resource?o.benefit.reduce(((e,t)=>{const r=e.get(t)||0;return e.set(t,r+1),e}),e):e}),new Map)}(t,r),{cost:a,benefit:s}=c(e);return{cost:a.map((e=>{const t=o.get(e)||0;return o.set(e,t-1),{effect:e,used:t>0}}))||[],benefit:s.map((e=>({effect:e,used:!1})))}}},{"model/domain":"hG1oc","./games":"3tjca","base/unreachable_error":"eQLwm","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"3tjca":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"allCardSlots",(()=>a)),o.export(r,"pageCardSlots",(()=>s)),o.export(r,"pageDeck",(()=>i)),o.export(r,"playerDeck",(()=>c)),o.export(r,"gameEncounterBattle",(()=>l)),o.export(r,"gameEncounterEvent",(()=>d));var n=e("model/domain");function a(e){return[...e.playerHand,...s(e)]}function s(e){return e.book.cardSlots}function i(e){const t=e.book.spread;if(t?.type===n.BookSpreadType.Room){const e=t.encounter;if(e?.type===n.EncounterType.Battle){const t=e.monster;return[()=>t.deck,e=>t.deck=e]}if(e?.type===n.EncounterType.Event)return[()=>e.deck,t=>e.deck=t]}return[()=>e.book.chapter.deck,t=>e.book.chapter.deck=t]}function c(e){const t=e.playerCharacter;return t&&[()=>t.deck,e=>t.deck=e]}function l(e){const t=e.book.spread;if(t?.type===n.BookSpreadType.Room&&t.encounter?.type===n.EncounterType.Battle)return t.encounter}function d(e){const t=e.book.spread;if(t?.type===n.BookSpreadType.Room&&t.encounter?.type===n.EncounterType.Event)return t.encounter}},{"model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"8TIQ2":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"CardSlotsComponent",(()=>l));var n=e("solid-js/web"),a=e("solid-js"),s=e("./card_slots.module.scss"),i=o.interopDefault(s);const c=(0,n.template)("<div>");function l(e){return(()=>{const t=c();return(0,n.insert)(t,(0,n.createComponent)(a.For,{get each(){return e.cardSlots},children:t=>(0,n.createComponent)(e.CardSlotComponent,{model:t})})),(0,n.effect)((()=>(0,n.className)(t,i.default.container))),t})()}},{"solid-js/web":"33rlw","solid-js":"5rsr6","./card_slots.module.scss":"h3qy5","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],h3qy5:[function(e,t,r){t.exports.container="_3Mq8RG_container"},{}],e6kRp:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"ComponentManager",(()=>a));var n=e("solid-js/web");e("solid-js");class a{constructor(e){this.factory=e,this.cache=new WeakMap,this.FactoryComponent=e=>{const t=this.lookupOrCreateComponent(e.model);return(0,n.createComponent)(t,e)}}lookupOrCreate(e){let t=this.cache.get(e);return null==t&&(t=this.factory(e),this.cache.set(e,t)),t}lookupOrCreateComponent(e){return this.lookupOrCreate(e).Component}lookupController(e){return this.cache.get(e)?.controller}}},{"solid-js/web":"33rlw","solid-js":"5rsr6","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],lGuHg:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"cardSlotUIDescriptor",(()=>a)),o.export(r,"CardSlotController",(()=>s));var n=e("model/descriptor/literals");const a=(0,e("model/descriptor/record").activeRecordDescriptor)({targetCardHidden:n.booleanDescriptor,forceUnrotate:n.booleanDescriptor});class s{constructor(e){this.cardSlotUI=e}setTargetCardHidden(e){this.cardSlotUI.targetCardHidden=e}setForceUnrotate(e){this.cardSlotUI.forceUnrotate=e}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151","model/descriptor/literals":"6SgZZ","model/descriptor/record":"9b5Fs"}],"9KqLK":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"createCardManager",(()=>u));var n=e("solid-js/web"),a=e("./card_controller"),s=e("ui/animation/animation_manager"),i=e("./card"),c=e("./face/card_face"),l=e("components/component_manager"),d=e("solid-js"),p=e("rules/cards");function u(e){const t=new(0,l.ComponentManager)((function(r){const o=new(0,s.AnimationManager),l=a.cardUIDescriptor.create({flipState:a.FlipState.Flat,peeking:!1,warning:!1,offset:void 0,elevated:!1});return{Component:function(){const s=(0,d.createMemo)((()=>(0,p.calculateCardEffectUsages)(e,r,t)));return(0,n.createComponent)(i.CardComponent,{get flipState(){return l.flipState},get elevated(){return l.peeking||l.flipState===a.FlipState.FlippingUpToVertical||l.elevated},animations:o,get offset(){return l.offset},get children(){return(0,n.createComponent)(c.CardFaceComponent,{get face(){return(0,p.cardFace)(r,l.peeking)},get definition(){return r.definition},get cost(){return s().cost},get benefit(){return s().benefit},get warning(){return l.warning}})}})},controller:new(0,a.CardController)(r,l,o)}}));return t}},{"solid-js/web":"33rlw","./card_controller":"eIxqM","./card":"b6tpg","components/component_manager":"e6kRp","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","ui/animation/animation_manager":"fbyYW","./face/card_face":"5xOaY","solid-js":"5rsr6","rules/cards":"kFtME"}],eIxqM:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"FlipState",(()=>c)),o.export(r,"Offset",(()=>l)),o.export(r,"Easing",(()=>d)),o.export(r,"cardUIDescriptor",(()=>p)),o.export(r,"CardController",(()=>u));var n=e("model/descriptor/literals"),a=e("model/descriptor/record"),s=e("model/descriptor/option"),i=e("base/delay");let c;!function(e){e[e.Flat=1]="Flat",e[e.FlippingUpToVertical=2]="FlippingUpToVertical",e[e.FlippingDownFromVertical=3]="FlippingDownFromVertical"}(c||(c={}));const l=-1;let d;!function(e){e[e.Instant=1]="Instant",e[e.Gentle=2]="Gentle",e[e.Violent=3]="Violent"}(d||(d={}));const p=(0,a.activeRecordDescriptor)({flipState:new(0,n.LiteralTypeDescriptor),peeking:n.booleanDescriptor,warning:n.booleanDescriptor,offset:(0,s.optionalDescriptor)(new(0,n.LiteralTypeDescriptor)),elevated:n.booleanDescriptor});class u{constructor(e,t,r){this.card=e,this.cardUI=t,this.animations=r}async flip(){await this.internalFlip((()=>{this.card.visibleFaceIndex=(this.card.visibleFaceIndex+1)%this.card.definition.faces.length}))}async flipTemporarily(e){await this.internalFlip((()=>{this.cardUI.peeking=e}))}async flipUpToVertical(){this.cardUI.flipState=2,await this.animations.waitForAnimation(2)}async flipDownFromVertical(){this.cardUI.flipState=3,await this.animations.waitForAnimation(3),this.cardUI.flipState=1}async moveTo(e,t,r,o){this.cardUI.offset={dx:e,dy:t,dz:r,easing:o},await this.animations.waitForAnimation(l),this.cardUI.offset=void 0}async moveFrom(e,t,r,o,n){this.cardUI.offset={dx:e,dy:t,dz:r,easing:1,additionalTransform:n},await(0,i.delay)(0),this.cardUI.offset={dx:"0",dy:"0",dz:"0",easing:o},await this.animations.waitForAnimation(l),this.cardUI.offset=void 0}setElevated(e){this.cardUI.elevated=e}setWarning(e){this.cardUI.warning=e}isPeeking(){return this.cardUI.peeking}async internalFlip(e){await this.flipUpToVertical(),e(),await this.flipDownFromVertical()}}},{"model/descriptor/literals":"6SgZZ","model/descriptor/record":"9b5Fs","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","model/descriptor/option":"c8pK3","base/delay":"hGewO"}],b6tpg:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"CardComponent",(()=>d));var n=e("solid-js/web"),a=e("./card_controller"),s=e("./card.module.scss"),i=o.interopDefault(s),c=e("solid-js");const l=(0,n.template)("<div><div><div><div></div></div>");function d(e){const[t,r]=(0,c.createSignal)(),[o,s]=(0,c.createSignal)();return(()=>{const c=l(),d=c.firstChild,p=d.firstChild,u=p.firstChild;return(0,n.use)(r,d),(0,n.addEventListener)(d,"transitionend",e.animations.createTransitionEndEventListener(t,(()=>a.Offset))),(0,n.use)(s,p),(0,n.addEventListener)(p,"transitionend",e.animations.createTransitionEndEventListener(o,(()=>e.flipState))),(0,n.insert)(u,(()=>e.children)),(0,n.effect)((t=>{const r={[i.default.card]:!0,[i.default.elevated]:e.elevated},o={[i.default.translate]:!0,[i.default.instant]:e.offset?.easing===a.Easing.Instant,[i.default.gentle]:e.offset?.easing===a.Easing.Gentle,[i.default.violent]:e.offset?.easing===a.Easing.Violent},s=e.offset&&{transform:`translate3d(${e.offset.dx}, ${e.offset.dy}, ${e.offset.dz}) ${e.offset.additionalTransform??""}`},l={[i.default.rotate]:!0,[i.default.flat]:e.flipState===a.FlipState.Flat,[i.default.flippingUpToVertical]:e.flipState===a.FlipState.FlippingUpToVertical,[i.default.flippingDownFromVertical]:e.flipState===a.FlipState.FlippingDownFromVertical},f={[i.default.scale]:!0,[i.default.flat]:e.flipState===a.FlipState.Flat,[i.default.flippingUpToVertical]:e.flipState===a.FlipState.FlippingUpToVertical,[i.default.flippingDownFromVertical]:e.flipState===a.FlipState.FlippingDownFromVertical};return t._v$=(0,n.classList)(c,r,t._v$),t._v$2=(0,n.classList)(d,o,t._v$2),t._v$3=(0,n.style)(d,s,t._v$3),t._v$4=(0,n.classList)(p,l,t._v$4),t._v$5=(0,n.classList)(u,f,t._v$5),t}),{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),c})()}},{"solid-js/web":"33rlw","./card_controller":"eIxqM","./card.module.scss":"4a8XN","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","solid-js":"5rsr6"}],"4a8XN":[function(e,t,r){t.exports.cardWidth="9",t.exports.cardHeight="12",t.exports.pageWidth="50",t.exports.pageHeight="70",t.exports.card="card_aeb7e9",t.exports.elevated="elevated_aeb7e9",t.exports.rotate="rotate_aeb7e9",t.exports.translate="translate_aeb7e9",t.exports.instant="instant_aeb7e9",t.exports.gentle="gentle_aeb7e9",t.exports.violent="violent_aeb7e9",t.exports.flippingUpToVertical="flippingUpToVertical_aeb7e9",t.exports.flippingDownFromVertical="flippingDownFromVertical_aeb7e9",t.exports.scale="scale_aeb7e9",t.exports.flat="flat_aeb7e9"},{}],"5xOaY":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"CardFaceComponent",(()=>g));var n=e("solid-js/web"),a=e("model/domain"),s=e("./card_face.module.scss"),i=o.interopDefault(s),c=e("components/effect/effect_strip"),l=e("./card_face_description"),d=e("./card_face_name"),p=e("components/symbol/symbol");const u=(0,n.template)("<div><div>"),f=(0,n.template)("<div>"),m=(0,n.template)('<div><svg viewBox="0 0 200 100"><g><path d="M 10 70 A 120 120 0 0 1 180 70"></path><path d="M 180 50 L 180 70 L 160 70">');function g(e){return(()=>{const t=u(),r=t.firstChild;return(0,n.insert)(t,(()=>{const t=(0,n.memo)((()=>null!=e.face.symbol));return()=>t()&&(()=>{const t=f();return(0,n.insert)(t,(0,n.createComponent)(p.SymbolComponent,{get type(){return e.face.symbol},fill:"transparent",stroke:"white"})),(0,n.effect)((()=>(0,n.className)(t,i.default.symbol))),t})()})(),r),(0,n.insert)(r,(()=>{const t=(0,n.memo)((()=>!(e.face.type!==a.CardFaceType.ChoiceBack&&e.face.type!==a.CardFaceType.ResourceBack)));return()=>t()?(0,n.createComponent)(h,{}):(0,n.createComponent)(c.EffectStripComponent,{get effects(){return e.benefit},warnUnused:!1})})(),null),(0,n.insert)(r,(0,n.createComponent)(l.CardFaceDescriptionComponent,{get children(){return(0,n.createComponent)(d.CardFaceNameComponent,{get name(){return e.face.name}})}}),null),(0,n.insert)(r,(0,n.createComponent)(c.EffectStripComponent,{get effects(){return e.cost},get warnUnused(){return e.warning}}),null),(0,n.effect)((o=>{const s={[i.default.container]:!0,[i.default.background]:!0,[i.default.clear]:e.face.background===a.CardBackgroundType.Clear,[i.default.crosshatched]:e.face.background===a.CardBackgroundType.Crosshatched,[i.default.door]:e.face.background===a.CardBackgroundType.Door,[i.default.passageway]:e.face.background===a.CardBackgroundType.Passageway,[i.default.forest]:e.face.background===a.CardBackgroundType.ForestPath,[i.default.darkened]:e.face.background===a.CardBackgroundType.DarkenedForestPath,[i.default.finesse]:e.face.symbol===a.SymbolType.Finesse,[i.default.force]:e.face.symbol===a.SymbolType.Force,[i.default.mind]:e.face.symbol===a.SymbolType.Mind},c={[i.default["card-face"]]:!0,[i.default.foreground]:null!=e.face.foreground,[i.default.rat]:e.face.foreground===a.CardForegroundType.Rat,[i.default.trap]:e.face.foreground===a.CardForegroundType.Trap,[i.default.fountain]:e.face.foreground===a.CardForegroundType.Fountain,[i.default.tree]:e.face.foreground===a.CardForegroundType.MagicTree,[i.default.snail]:e.face.foreground===a.CardForegroundType.Snail,[i.default.troll]:e.face.foreground===a.CardForegroundType.Troll,[i.default.rooster]:e.face.foreground===a.CardForegroundType.Rooster};return o._v$=(0,n.classList)(t,s,o._v$),o._v$2=(0,n.classList)(r,c,o._v$2),o}),{_v$:void 0,_v$2:void 0}),t})()}function h(){return(()=>{const e=m();return(0,n.effect)((()=>(0,n.className)(e,i.default.flip))),e})()}},{"solid-js/web":"33rlw","model/domain":"hG1oc","./card_face.module.scss":"bQPIH","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","components/effect/effect_strip":"1m2OI","./card_face_description":"bkyoU","./card_face_name":"dK3cb","components/symbol/symbol":"aPcWM"}],bQPIH:[function(e,t,r){t.exports.cardWidth="9",t.exports.cardHeight="12",t.exports.pageWidth="50",t.exports.pageHeight="70",t.exports.container="container_82efa0",t.exports.background="background_82efa0",t.exports.clear="clear_82efa0",t.exports.mind="mind_82efa0",t.exports.force="force_82efa0",t.exports.finesse="finesse_82efa0",t.exports.door="door_82efa0",t.exports.crosshatched="crosshatched_82efa0",t.exports.passageway="passageway_82efa0",t.exports.forest="forest_82efa0",t.exports.darkened="darkened_82efa0",t.exports.symbol="symbol_82efa0",t.exports["card-face"]="card-face_82efa0",t.exports.foreground="foreground_82efa0",t.exports.rat="rat_82efa0",t.exports.trap="trap_82efa0",t.exports.fountain="fountain_82efa0",t.exports.tree="tree_82efa0",t.exports.rooster="rooster_82efa0",t.exports.troll="troll_82efa0",t.exports.snail="snail_82efa0",t.exports.flip="flip_82efa0"},{}],"1m2OI":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"EffectStripComponent",(()=>d));var n=e("solid-js/web"),a=e("./effect_strip.module.scss"),s=o.interopDefault(a),i=e("solid-js"),c=e("./effect");const l=(0,n.template)("<div>");function d(e){return(()=>{const t=l();return(0,n.insert)(t,(0,n.createComponent)(i.For,{get each(){return e.effects},children:t=>(0,n.createComponent)(c.EffectComponent,{get effect(){return t.effect},get used(){return t.used},get warning(){return e.warnUnused}})})),(0,n.effect)((()=>(0,n.className)(t,s.default.container))),t})()}},{"solid-js/web":"33rlw","./effect_strip.module.scss":"zVSDH","solid-js":"5rsr6","./effect":"kG2gB","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],zVSDH:[function(e,t,r){t.exports.container="_2tXgXa_container"},{}],kG2gB:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"EffectComponent",(()=>p));var n=e("solid-js/web"),a=e("model/domain"),s=e("./effect.module.scss"),i=o.interopDefault(s),c=e("components/symbol/symbol");const l=(0,n.template)("<div>"),d={[a.SymbolType.Force]:i.default.fillForce,[a.SymbolType.Finesse]:i.default.fillFinesse,[a.SymbolType.Mind]:i.default.fillMind,[a.SymbolType.Magic]:i.default.fill,[a.SymbolType.Damage]:i.default.fillDamage,[a.SymbolType.Age]:i.default.fill,[a.SymbolType.Fire]:i.default.fill,[a.SymbolType.Draw]:i.default.fill,[a.SymbolType.Poison]:i.default.fill,[a.SymbolType.Healing]:i.default.fill};function p(e){return(()=>{const t=l();return(0,n.insert)(t,(0,n.createComponent)(c.SymbolComponent,{get type(){return e.effect.symbol},get fill(){return e.used?i.default.fill:d[e.effect.symbol]},get stroke(){return i.default.stroke}})),(0,n.effect)((r=>(0,n.classList)(t,{[i.default.container]:!0,[i.default.down]:e.effect.direction===a.EffectDirection.Down,[i.default.unused]:!e.used,[i.default.warning]:e.warning},r))),t})()}},{"solid-js/web":"33rlw","model/domain":"hG1oc","./effect.module.scss":"oHKiE","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","components/symbol/symbol":"aPcWM"}],oHKiE:[function(e,t,r){t.exports.stroke="#FFF",t.exports.fill="transparent",t.exports.fillForce="#AA3",t.exports.fillFinesse="#4A4",t.exports.fillDamage="#A44",t.exports.fillMind="#55A",t.exports.container="container_c50889",t.exports.down="down_c50889",t.exports.unused="unused_c50889",t.exports.warning="warning_c50889",t.exports.warningAnimation="warningAnimation_c50889"},{}],aPcWM:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"SymbolForceComponent",(()=>p)),o.export(r,"SymbolFinesseComponent",(()=>u)),o.export(r,"SymbolMindComponent",(()=>f)),o.export(r,"SymbolDamageComponent",(()=>m)),o.export(r,"SymbolComponent",(()=>h));var n=e("solid-js/web"),a=e("model/domain"),s=e("./damage.svg"),i=e("./finesse.svg"),c=e("./force.svg"),l=e("./mind.svg"),d=e("./symbol.svg");function p(e){return(0,n.createComponent)(d.SymbolSVGComponent,{get fill(){return e.fill},get stroke(){return e.stroke},get children(){return(0,n.createComponent)(c.SymbolForceSVGComponent,{})}})}function u(e){return(0,n.createComponent)(d.SymbolSVGComponent,{get fill(){return e.fill},get stroke(){return e.stroke},get children(){return(0,n.createComponent)(i.SymbolFinesseSVGComponent,{})}})}function f(e){return(0,n.createComponent)(d.SymbolSVGComponent,{get fill(){return e.fill},get stroke(){return e.stroke},get children(){return(0,n.createComponent)(l.SymbolMindSVGComponent,{})}})}function m(e){return(0,n.createComponent)(d.SymbolSVGComponent,{get fill(){return e.fill},get stroke(){return e.stroke},get children(){return(0,n.createComponent)(s.SymbolDamageSVGComponent,{})}})}const g={[a.SymbolType.Force]:p,[a.SymbolType.Finesse]:u,[a.SymbolType.Mind]:f,[a.SymbolType.Magic]:()=>"R",[a.SymbolType.Damage]:m,[a.SymbolType.Age]:()=>"",[a.SymbolType.Fire]:()=>"M",[a.SymbolType.Draw]:()=>"G",[a.SymbolType.Poison]:()=>"",[a.SymbolType.Healing]:()=>""};function h(e){return(0,n.createComponent)(n.Dynamic,(0,n.mergeProps)({get component(){return g[e.type]}},e))}},{"solid-js/web":"33rlw","model/domain":"hG1oc","./damage.svg":"iZ5qp","./finesse.svg":"dGLAn","./force.svg":"4Wvsh","./mind.svg":"4ppJ0","./symbol.svg":"fW3Xh","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],iZ5qp:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"SymbolDamageSVGComponent",(()=>a));const n=(0,e("solid-js/web").template)('<svg><g><path d="M 50 10 L 90 50 L 90 90 L 10 90 L 10 50 z"></path><path d="M 50 80 L 50 30"></path><path d="M 40 70 L 60 70"></svg>',!1,!0);function a(){return n()}},{"solid-js/web":"33rlw","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],dGLAn:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"SymbolFinesseSVGComponent",(()=>c));var n=e("solid-js/web"),a=e("./finesse.svg.module.scss"),s=o.interopDefault(a);const i=(0,n.template)("<svg><rect></svg>",!1,!0);function c(){return(()=>{const e=i();return(0,n.effect)((()=>(0,n.setAttribute)(e,"class",s.default.rect))),e})()}},{"solid-js/web":"33rlw","./finesse.svg.module.scss":"73tFt","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"73tFt":[function(e,t,r){t.exports.rect="CzXirq_rect"},{}],"4Wvsh":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"SymbolForceSVGComponent",(()=>c));var n=e("solid-js/web"),a=e("./force.svg.module.scss"),s=o.interopDefault(a);const i=(0,n.template)("<svg><rect></svg>",!1,!0);function c(){return(()=>{const e=i();return(0,n.effect)((()=>(0,n.setAttribute)(e,"class",s.default.rect))),e})()}},{"solid-js/web":"33rlw","./force.svg.module.scss":"97GJR","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"97GJR":[function(e,t,r){t.exports.svg="aq9fEa_svg",t.exports.rect="aq9fEa_rect"},{}],"4ppJ0":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"SymbolMindSVGComponent",(()=>c));var n=e("solid-js/web"),a=e("./mind.svg.module.scss"),s=o.interopDefault(a);const i=(0,n.template)("<svg><circle></svg>",!1,!0);function c(){return(()=>{const e=i();return(0,n.effect)((()=>(0,n.setAttribute)(e,"class",s.default.circle))),e})()}},{"solid-js/web":"33rlw","./mind.svg.module.scss":"dkxMB","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],dkxMB:[function(e,t,r){t.exports.circle="PcV7xa_circle"},{}],fW3Xh:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"SymbolSVGComponent",(()=>c));var n=e("solid-js/web"),a=e("./symbol.module.scss"),s=o.interopDefault(a);const i=(0,n.template)('<svg viewBox="0 0 100 100">');function c(e){return(()=>{const t=i();return(0,n.insert)(t,(()=>e.children)),(0,n.effect)((r=>{const o=s.default.svg,a=e.fill,i=e.stroke;return o!==r._v$&&(0,n.setAttribute)(t,"class",r._v$=o),a!==r._v$2&&(null!=(r._v$2=a)?t.style.setProperty("fill",a):t.style.removeProperty("fill")),i!==r._v$3&&(null!=(r._v$3=i)?t.style.setProperty("stroke",i):t.style.removeProperty("stroke")),r}),{_v$:void 0,_v$2:void 0,_v$3:void 0}),t})()}},{"solid-js/web":"33rlw","./symbol.module.scss":"veQl5","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],veQl5:[function(e,t,r){t.exports.svg="N8ihEq_svg"},{}],bkyoU:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"CardFaceDescriptionComponent",(()=>c));var n=e("solid-js/web"),a=e("./card_face_description.module.scss"),s=o.interopDefault(a);const i=(0,n.template)("<div>");function c(e){return(()=>{const t=i();return(0,n.insert)(t,(()=>e.children)),(0,n.effect)((()=>(0,n.className)(t,s.default.container))),t})()}},{"solid-js/web":"33rlw","./card_face_description.module.scss":"2Pyfx","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"2Pyfx":[function(e,t,r){t.exports.container="zuHU4G_container"},{}],dK3cb:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"CardFaceNameComponent",(()=>c));var n=e("solid-js/web"),a=e("./card_face_name.module.scss"),s=o.interopDefault(a);const i=(0,n.template)("<div>");function c(e){return(()=>{const t=i();return(0,n.insert)(t,(()=>e.name)),(0,n.effect)((()=>(0,n.className)(t,s.default.container))),t})()}},{"solid-js/web":"33rlw","./card_face_name.module.scss":"djlle","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],djlle:[function(e,t,r){t.exports.cardWidth="9",t.exports.cardHeight="12",t.exports.pageWidth="50",t.exports.pageHeight="70",t.exports.container="container_f9fb00"},{}],eFnBZ:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"createPageManager",(()=>d));var n=e("model/domain"),a=e("components/component_manager"),s=e("./toc/create"),i=e("base/unreachable_error"),c=e("./room/create"),l=e("./death/create");function d(e){return new(0,a.ComponentManager)((function(t){switch(t.type){case n.BookSpreadType.TableOfContents:return(0,s.createToCPage)(t,e);case n.BookSpreadType.Room:return(0,c.createRoomPage)(t);case n.BookSpreadType.Death:return(0,l.createDeathPage)(t,e);default:throw new(0,i.UnreachableError)(t)}}))}},{"components/component_manager":"e6kRp","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","model/domain":"hG1oc","./toc/create":"9VxMK","base/unreachable_error":"eQLwm","./room/create":"ekSO7","./death/create":"ebtqy"}],"9VxMK":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"createToCPage",(()=>i));var n=e("solid-js/web"),a=e("../page_controller"),s=e("./toc_page");function i(e,t){return{controller:new(0,a.EmptyPageController),Component:function(r){return(0,n.createComponent)(s.ToCPageComponent,{navigation:t,get side(){return r.side},spread:e})}}}},{"solid-js/web":"33rlw","../page_controller":"iOtej","./toc_page":"dkznI","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],dkznI:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"ToCPageComponent",(()=>g));var n=e("solid-js/web"),a=e("../page_controller"),s=e("../blank/page_blank"),i=e("./page_toc.module.scss"),c=o.interopDefault(i),l=e("components/navigation_target");const d=(0,n.template)('<li><a href="#">'),p=(0,n.template)("<div><h2>Table of Contents</h2><ol>");function u(e){return(()=>{const t=d(),r=t.firstChild;return r.$$click=()=>e.navigation({type:l.NavigationTargetType.Chapter,chapterIndex:e.targetChapter}),(0,n.insert)(r,(()=>e.name)),(0,n.effect)((r=>(0,n.classList)(t,{[c.default.disabled]:e.spread.unlockedChapters<e.targetChapter},r))),t})()}function f(e){return(()=>{const t=p(),r=t.firstChild.nextSibling;return(0,n.insert)(r,(0,n.createComponent)(u,(0,n.mergeProps)({targetChapter:0,name:"Prologue"},e)),null),(0,n.insert)(r,(0,n.createComponent)(u,(0,n.mergeProps)({targetChapter:1,name:"The Road"},e)),null),(0,n.insert)(r,(0,n.createComponent)(u,(0,n.mergeProps)({targetChapter:2,name:"The Ruins"},e)),null),(0,n.insert)(r,(0,n.createComponent)(u,(0,n.mergeProps)({targetChapter:3,name:"The Tower"},e)),null),(0,n.effect)((()=>(0,n.className)(t,c.default.toc))),t})()}const m={[a.PageSide.Left]:s.PageBlankComponent,[a.PageSide.Right]:function(e){return(0,n.createComponent)(f,{get side(){return e.side},get spread(){return e.spread},get navigation(){return e.navigation}})}};function g(e){return(0,n.createComponent)(n.Dynamic,{get component(){return m[e.side]},get side(){return e.side},get spread(){return e.spread},get navigation(){return e.navigation}})}(0,n.delegateEvents)(["click"])},{"solid-js/web":"33rlw","../page_controller":"iOtej","../blank/page_blank":"olBz5","./page_toc.module.scss":"581bA","components/navigation_target":"5PTDl","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],olBz5:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");function n(){return null}o.defineInteropFlag(r),o.export(r,"PageBlankComponent",(()=>n))},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"581bA":[function(e,t,r){t.exports.toc="RD4rca_toc",t.exports.disabled="RD4rca_disabled"},{}],"5PTDl":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");let n;o.defineInteropFlag(r),o.export(r,"NavigationTargetType",(()=>n)),function(e){e[e.ToC=1]="ToC",e[e.Chapter=2]="Chapter",e[e.Death=3]="Death"}(n||(n={}))},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],ekSO7:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"createRoomPage",(()=>m));var n=e("solid-js/web"),a=e("./room_page_controller"),s=e("./room_page"),i=e("components/scenery/rigid/create"),c=e("../../constants.module.scss"),l=o.interopDefault(c),d=e("base/exists"),p=e("components/scenery/unicode/create");const u=parseInt(l.default.pageWidth),f=parseInt(l.default.pageHeight);function m(e){const t=function(e){const t=u,r=f,o=null!=e.encounter?u:0,n=Math.floor(20*Math.random())+20;return new Array(n).fill(0).map((()=>{const e=Math.random()*f/8+f/8,{Component:n,controller:a}=(0,i.createRigidScenery)((0,p.createUnicodeScenery)("",e)),[s,c]=a.dimensions,l=Math.random()*(2*u-s),d=Math.random()*(.8*f-c),m=l-t,g=d-r;if(!(m*m+g*g<o*o))return{Component:n,controller:a,popupDelayMillis:30*(f-d),x:l,y:d}})).filter(d.exists)}(e),r={scenery:t};return{controller:new(0,a.RoomPageController)(r),Component:function(e){return(0,n.createComponent)(s.RoomPageComponent,{get scenery(){return r.scenery},get side(){return e.side}})}}}},{"solid-js/web":"33rlw","./room_page_controller":"gIQaU","./room_page":"7wTCS","components/scenery/rigid/create":"7Yn3W","../../constants.module.scss":"1FSH1","base/exists":"7izAI","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","components/scenery/unicode/create":"dkYYD"}],gIQaU:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"RoomPageController",(()=>s));var n=e("base/delay"),a=e("base/max_by");class s{constructor(e){this.ui=e}async popup(){const e=(0,a.minBy)(this.ui.scenery,(e=>e.popupDelayMillis))||0;await Promise.all(this.ui.scenery.map((async t=>{await(0,n.delay)(t.popupDelayMillis-e),await t.controller.popup()})))}async popdown(){const e=(0,a.maxBy)(this.ui.scenery,(e=>e.popupDelayMillis))||0;await Promise.all(this.ui.scenery.map((async t=>{await(0,n.delay)(e-t.popupDelayMillis),await t.controller.popdown()})))}}},{"base/delay":"hGewO","base/max_by":"SzOaI","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],SzOaI:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");function n(e,t){const r=e.reduce(((e,r)=>{const o=t(r);return null==e||o>e[1]?[r,o]:e}),void 0);return r?.[1]}function a(e,t){const r=e.reduce(((e,r)=>{const o=t(r);return null==e||o<e[1]?[r,o]:e}),void 0);return r?.[1]}o.defineInteropFlag(r),o.export(r,"maxBy",(()=>n)),o.export(r,"minBy",(()=>a))},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"7wTCS":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"RoomPageComponent",(()=>f));var n=e("solid-js/web"),a=e("./room_page.module.scss"),s=o.interopDefault(a),i=e("solid-js"),c=e("../page_controller"),l=e("../../constants.module.scss"),d=o.interopDefault(l);const p=(0,n.template)("<div>"),u=parseInt(d.default.pageWidth);function f(e){return(()=>{const t=p();return(0,n.insert)(t,(0,n.createComponent)(i.For,{get each(){return e.scenery},children:t=>(()=>{const r=p();return(0,n.insert)(r,(0,n.createComponent)(t.Component,{get x(){return t.x-(e.side===c.PageSide.Left?0:u)+"vmin"}})),(0,n.effect)((e=>{const o=s.default.scenery,a=`${t.y}vmin`,i=`translateZ(${t.y/1e3}vmin)`;return o!==e._v$&&(0,n.className)(r,e._v$=o),a!==e._v$2&&(null!=(e._v$2=a)?r.style.setProperty("top",a):r.style.removeProperty("top")),i!==e._v$3&&(null!=(e._v$3=i)?r.style.setProperty("transform",i):r.style.removeProperty("transform")),e}),{_v$:void 0,_v$2:void 0,_v$3:void 0}),r})()})),(0,n.effect)((e=>(0,n.classList)(t,{[s.default.room]:!0},e))),t})()}},{"solid-js/web":"33rlw","./room_page.module.scss":"gTaHF","solid-js":"5rsr6","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","../page_controller":"iOtej","../../constants.module.scss":"1FSH1"}],gTaHF:[function(e,t,r){t.exports.room="_2D23sq_room",t.exports.scenery="_2D23sq_scenery"},{}],"1FSH1":[function(e,t,r){t.exports.cardWidth="9",t.exports.cardHeight="12",t.exports.pageWidth="50",t.exports.pageHeight="70"},{}],"7Yn3W":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"createRigidScenery",(()=>c));var n=e("solid-js/web"),a=e("ui/animation/animation_manager"),s=e("./rigid_scenery_controller"),i=e("./rigid_scenery");function c(e){const t=s.rigidSceneryUI.create({up:!1}),r=new(0,a.AnimationManager);return{controller:new(0,s.RigidSceneryController)(r,t,e.controller),Component:function(o){return(0,n.createComponent)(i.RigidSceneryComponent,{animations:r,get up(){return t.up},get x(){return o.x},get children(){return(0,n.createComponent)(e.Component,{})}})}}}},{"solid-js/web":"33rlw","ui/animation/animation_manager":"fbyYW","./rigid_scenery_controller":"2pEMc","./rigid_scenery":"9hYde","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"2pEMc":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"Animations",(()=>s)),o.export(r,"rigidSceneryUI",(()=>i)),o.export(r,"RigidSceneryController",(()=>c));var n=e("model/descriptor/record"),a=e("model/descriptor/literals");let s;!function(e){e[e.Popped=1]="Popped"}(s||(s={}));const i=(0,n.activeRecordDescriptor)({up:a.booleanDescriptor});class c{constructor(e,t,r){this.animations=e,this.ui=t,this.controller=r}async popup(){this.ui.up||(this.ui.up=!0,await this.animations.waitForAnimation(1))}async popdown(){this.ui.up&&(this.ui.up=!1,await this.animations.waitForAnimation(1))}get dimensions(){return this.controller.dimensions}}},{"model/descriptor/record":"9b5Fs","model/descriptor/literals":"6SgZZ","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"9hYde":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"RigidSceneryComponent",(()=>d));var n=e("solid-js/web"),a=e("solid-js"),s=e("./rigid_scenery.module.scss"),i=o.interopDefault(s),c=e("./rigid_scenery_controller");const l=(0,n.template)("<div><div>");function d(e){const[t,r]=(0,a.createSignal)();return(()=>{const o=l(),a=o.firstChild;return(0,n.addEventListener)(o,"transitionend",e.animations.createTransitionEndEventListener(t,(()=>c.Animations.Popped))),(0,n.use)(r,o),(0,n.insert)(a,(()=>e.children)),(0,n.effect)((t=>{const r={[i.default.scenery]:!0,[i.default.down]:!e.up,[i.default.up]:e.up},s=e.x;return t._v$=(0,n.classList)(o,r,t._v$),s!==t._v$2&&(null!=(t._v$2=s)?a.style.setProperty("margin-left",s):a.style.removeProperty("margin-left")),t}),{_v$:void 0,_v$2:void 0}),o})()}},{"solid-js/web":"33rlw","solid-js":"5rsr6","./rigid_scenery.module.scss":"lyhLl","./rigid_scenery_controller":"2pEMc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],lyhLl:[function(e,t,r){t.exports.cardWidth="9",t.exports.cardHeight="12",t.exports.pageWidth="50",t.exports.pageHeight="70",t.exports.scenery="scenery_bd6a0f",t.exports.up="up_bd6a0f",t.exports.down="down_bd6a0f"},{}],"7izAI":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");function n(e){return null!=e}o.defineInteropFlag(r),o.export(r,"exists",(()=>n))},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],dkYYD:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"createUnicodeScenery",(()=>i));var n=e("solid-js/web"),a=e("./unicode_scenery"),s=e("./unicode_scenery_controller");function i(e,t){return{Component:function(){return(0,n.createComponent)(a.UnicodeSceneryComponent,{fontSize:`${t}vmin`,unicode:e})},controller:new(0,s.UnicodeSceneryController)([t,t])}}},{"solid-js/web":"33rlw","./unicode_scenery":"fSP5s","./unicode_scenery_controller":"lpocf","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],fSP5s:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"UnicodeSceneryComponent",(()=>s));var n=e("solid-js/web");const a=(0,n.template)("<div>");function s(e){return(()=>{const t=a();return(0,n.insert)(t,(()=>e.unicode)),(0,n.effect)((()=>null!=e.fontSize?t.style.setProperty("font-size",e.fontSize):t.style.removeProperty("font-size"))),t})()}},{"solid-js/web":"33rlw","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],lpocf:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"UnicodeSceneryController",(()=>n));class n{constructor(e){this.dimensions=e}async popup(){}async popdown(){}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],ebtqy:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"createDeathPage",(()=>i));var n=e("solid-js/web"),a=e("../page_controller"),s=e("./death_page");function i(e,t){return{controller:new(0,a.EmptyPageController),Component:function(r){return(0,n.createComponent)(s.DeathPageComponent,{get side(){return r.side},navigation:t,spread:e})}}}},{"solid-js/web":"33rlw","../page_controller":"iOtej","./death_page":"4aL0c","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"4aL0c":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"DeathPageComponent",(()=>f));var n=e("solid-js/web"),a=e("components/navigation_target"),s=e("../page_controller"),i=e("./death_page.module.scss"),c=o.interopDefault(i);const l=(0,n.template)("<div><h2>You have fallen.");function d(){return null}function p(e){return(()=>{const t=l();return t.$$click=()=>e.navigation({type:a.NavigationTargetType.ToC}),(0,n.effect)((()=>(0,n.className)(t,c.default.container))),t})()}const u={[s.PageSide.Left]:function(e){return(0,n.createComponent)(d,{})},[s.PageSide.Right]:function(e){return(0,n.createComponent)(p,{get navigation(){return e.navigation}})}};function f(e){return(0,n.createComponent)(n.Dynamic,{get component(){return u[e.side]},get side(){return e.side},get spread(){return e.spread},get navigation(){return e.navigation}})}(0,n.delegateEvents)(["click"])},{"solid-js/web":"33rlw","components/navigation_target":"5PTDl","../page_controller":"iOtej","./death_page.module.scss":"6xPm9","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"6xPm9":[function(e,t,r){t.exports.container="SkyA-W_container"},{}],dG5uB:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"initialGame",(()=>s));var n=e("model/domain"),a=e("./chapters/ruins/chapter");const s=n.gameDescriptor.create({book:{spread:void 0,chapter:a.chapter,cardSlots:new Array(3).fill(0).map((()=>({targetCard:void 0,playedCards:[]})))},playerCharacter:void 0,playerHand:new Array(6).fill(0).map((()=>({targetCard:void 0,playedCards:[]})))})},{"model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","./chapters/ruins/chapter":"dOmiz"}],dOmiz:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"chapter",(()=>s));var n=e("model/domain"),a=e("./cards");const s=n.chapterDescriptor.freeze({type:n.ChapterType.Ruins,deck:[...a.cards],finalCard:a.finalCard,pagesRemaining:10})},{"model/domain":"hG1oc","./cards":"z567B","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],z567B:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"cards",(()=>u)),o.export(r,"finalCard",(()=>g));var n=e("data/effects"),a=e("model/domain");const s={name:"jammed door",description:"Grudgingly, the door opens.",type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.Door,foreground:void 0,symbol:void 0,cost:[n.DamageUp]},i={name:"door",description:void 0,type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.Door,foreground:void 0,symbol:void 0,cost:[]},c={name:"empty passage",description:"A crumbling walkway.",type:a.CardFaceType.Choice,background:a.CardBackgroundType.Passageway,foreground:void 0,symbol:void 0,choice:{type:a.ChoiceType.NextPage,encounter:void 0},cost:[],benefit:[]},l={name:"rodent of unusual size",description:"The creature hisses at you belligerently.",type:a.CardFaceType.Choice,background:a.CardBackgroundType.Passageway,foreground:a.CardForegroundType.Rat,symbol:void 0,choice:{type:a.ChoiceType.NextPage,encounter:{type:a.EncounterType.Battle,monster:a.MonsterType.BigRat}},cost:[],benefit:[]},d={name:"trapped hallway",description:"An arrow flies out of a hidden recess.",type:a.CardFaceType.Choice,background:a.CardBackgroundType.Passageway,foreground:a.CardForegroundType.Trap,symbol:void 0,choice:{type:a.ChoiceType.NextPage,encounter:void 0},cost:[n.DamageDown],benefit:[]},p={name:"fountain",description:"You are attracted to the noise of bubbling water. A pristine fountain stands amongst the ruins.",type:a.CardFaceType.Choice,background:a.CardBackgroundType.Passageway,foreground:a.CardForegroundType.Fountain,symbol:void 0,choice:{type:a.ChoiceType.NextPage,encounter:{type:a.EncounterType.Event,event:a.EventType.Fountain}},cost:[],benefit:[]},u=[i,s].flatMap((e=>[c,l,d].map((t=>({recycleTarget:a.RecycleTarget.DrawDeckRandom,faces:[e,t]}))))).concat([{faces:[s,p],recycleTarget:a.RecycleTarget.DiscardDeckTop}]).map((e=>({definition:e,visibleFaceIndex:0}))),f={name:"crumbling bridge",description:"With some trepidation you cross the bridge.",type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.Door,foreground:void 0,symbol:void 0,cost:[]},m={name:"lion",description:"A lion lies guarding the castle gate. It slowly gets up and pads toward you.",type:a.CardFaceType.Choice,background:a.CardBackgroundType.Passageway,foreground:void 0,symbol:void 0,choice:{type:a.ChoiceType.NextChapter,encounter:{type:a.EncounterType.Battle,monster:a.MonsterType.BigRat},targetChapterIndex:2},cost:[],benefit:[]},g=a.cardDescriptor.freeze({definition:{faces:[f,m],recycleTarget:a.RecycleTarget.DiscardDeckTop},visibleFaceIndex:0})},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"7stQX":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"Force",(()=>a)),o.export(r,"Finesse",(()=>s)),o.export(r,"Mind",(()=>i)),o.export(r,"Magic",(()=>c)),o.export(r,"DamageUp",(()=>l)),o.export(r,"DamageDown",(()=>d)),o.export(r,"FireUp",(()=>p)),o.export(r,"FireDown",(()=>u)),o.export(r,"AgeUp",(()=>f)),o.export(r,"AgeDown",(()=>m)),o.export(r,"Healing",(()=>g)),o.export(r,"PoisonUp",(()=>h)),o.export(r,"PoisonDown",(()=>y));var n=e("model/domain");const a={direction:n.EffectDirection.Omni,symbol:n.SymbolType.Force},s={direction:n.EffectDirection.Omni,symbol:n.SymbolType.Finesse},i={direction:n.EffectDirection.Omni,symbol:n.SymbolType.Mind},c={direction:n.EffectDirection.Omni,symbol:n.SymbolType.Magic},l={direction:n.EffectDirection.Up,symbol:n.SymbolType.Damage},d={direction:n.EffectDirection.Down,symbol:n.SymbolType.Damage},p={direction:n.EffectDirection.Up,symbol:n.SymbolType.Fire},u={direction:n.EffectDirection.Down,symbol:n.SymbolType.Fire},f={direction:n.EffectDirection.Up,symbol:n.SymbolType.Age},m={direction:n.EffectDirection.Down,symbol:n.SymbolType.Age},g={direction:n.EffectDirection.Omni,symbol:n.SymbolType.Healing},h={direction:n.EffectDirection.Up,symbol:n.SymbolType.Poison},y={direction:n.EffectDirection.Down,symbol:n.SymbolType.Poison}},{"model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"4CbJY":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"createDragOverlay",(()=>i));var n=e("solid-js/web"),a=e("./drag_overlay"),s=e("./drag_overlay_controller");e("solid-js"),e("model/domain");function i(e,t){function r(){return(0,n.memo)((()=>{const r=(0,n.memo)((()=>!!e.draggedCard));return()=>r()&&(0,n.createComponent)(t,{get model(){return e.draggedCard}})})())}function o(){e.clearDrag()}return{controller:new(0,s.DragOverlayController),Component:function(t){return(0,n.createComponent)(a.DragOverlay,{get cx(){return e.lastMousePosition?.[0]},get cy(){return e.lastMousePosition?.[1]},Card:r,get dragging(){return e.dragging},onDragCancel:o,get children(){return t.children}})}}}},{"solid-js/web":"33rlw","./drag_overlay":"k1kYn","./drag_overlay_controller":"c9yyU","solid-js":"5rsr6","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],k1kYn:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"DragOverlay",(()=>c));var n=e("solid-js/web"),a=e("./drag_overlay.module.scss"),s=o.interopDefault(a);const i=(0,n.template)("<div><div>");function c(e){return(()=>{const t=i(),r=t.firstChild;return(0,n.addEventListener)(t,"pointerup",e.onDragCancel,!0),(0,n.insert)(t,(()=>e.children),r),(0,n.insert)(r,(0,n.createComponent)(e.Card,{})),(0,n.effect)((o=>{const a={[s.default.drag]:!0,[s.default.dragging]:e.dragging},i=s.default["scale-up"],c=null!=e.cx&&null!=e.cy?{transform:`translate(${e.cx}px, ${e.cy}px)`}:void 0;return o._v$=(0,n.classList)(t,a,o._v$),i!==o._v$2&&(0,n.className)(r,o._v$2=i),o._v$3=(0,n.style)(r,c,o._v$3),o}),{_v$:void 0,_v$2:void 0,_v$3:void 0}),t})()}(0,n.delegateEvents)(["pointerup"])},{"solid-js/web":"33rlw","./drag_overlay.module.scss":"iVxGu","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],iVxGu:[function(e,t,r){t.exports.cardWidth="9",t.exports.cardHeight="12",t.exports.pageWidth="50",t.exports.pageHeight="70",t.exports.drag="drag_5a6002",t.exports.dragging="dragging_5a6002",t.exports["scale-up"]="scale-up_5a6002"},{}],c9yyU:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"DragOverlayController",(()=>n));class n{}},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],bPP2R:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"GameManager",(()=>v));var n=e("components/card/card_controller"),a=e("model/domain"),s=e("./cards"),i=e("./games"),c=e("solid-js"),l=e("base/delay"),d=e("data/player/initial"),p=e("base/unreachable_error"),u=e("./encounters"),f=e("components/navigation_target"),m=e("data/chapters/ruins/chapter"),g=e("data/chapters/forest/chapter"),h=e("base/arrays"),y=e("base/exists");class v{constructor(e,t,r,o,n,a,s,i,c){this.speaker=e,this.game=t,this.navigation=r,this.tableController=o,this.bookController=n,this.cardControllerManager=a,this.cardSlotControllerManager=s,this.battleEncounterControllerManager=i,this.eventEncounterControllerManager=c}async chooseTargetCard(e){const t=e.targetCard;if(null==t||this.game.playerHand.indexOf(e)>=0)return;const r=(0,s.cardFace)(t,!1),o=this.cardControllerManager.lookupController(t);r.type!==a.CardFaceType.ChoiceBack&&r.type!==a.CardFaceType.Choice||(o?.setElevated(!0),e.playedCards.forEach((e=>this.cardControllerManager.lookupController(e)?.setElevated(!0)))),r.type===a.CardFaceType.ChoiceBack&&(await(o?.flip()),await(0,l.delay)(500));const n=(0,s.cardFace)(t,!1);n.description&&this.speaker.say(n.description);const c=(0,i.gameEncounterBattle)(this.game);if(null!=c&&await(this.battleEncounterControllerManager.lookupController(c)?.perform(n)),await this.applyCardEffects(e),n.type===a.CardFaceType.Choice){const t=n.choice;switch(t.type){case a.ChoiceType.NextChapter:return this.createChapter(t.targetChapterIndex),this.nextPage(t.encounter,e);case a.ChoiceType.NextPage:return this.nextPage(t.encounter,e);case a.ChoiceType.NextTurn:const{playerDead:r,finishEndTurn:o}=await this.endTurn(e);if(await o(),!r)return this.startTurn();break;default:throw new(0,p.UnreachableError)(t)}}}async applyCardEffects(e){const t=e.targetCard,r=this.game.playerCharacter;if(null==t||null==r)return;const o=(0,s.cardFace)(t,!1),n=(0,s.calculateTargetCardEffectUsages)(o,e,void 0);await this.applyUsages(t,n.cost,a.EffectDirection.Down,r);const c=(0,i.gameEncounterBattle)(this.game);if(!(null==c||this.game.playerHand.indexOf(e)>=0)){await this.applyUsages(t,n.benefit,a.EffectDirection.Up,c.monster);for(const t of e.playedCards){const e=(0,s.calculateCardEffectUsages)(this.game,t,void 0);await this.applyUsages(t,e.benefit,a.EffectDirection.Up,c.monster)}}}async applyUsages(e,t,r,o){const i=this.game.playerCharacter;if(null==i)return;const c=(0,s.cardFace)(e,!1);await Promise.all([(async()=>{c.description&&t.some((({used:e,effect:{direction:t}})=>!e&&t&r||e&&!(t&r)))&&await this.speaker.say(c.description)})(),(async()=>{const c=this.cardControllerManager.lookupController(e);for(const e of t)if(!e.used&&e.effect.direction&r)switch(e.effect.symbol){case a.SymbolType.Damage:case a.SymbolType.Poison:await(0,l.delay)(300),await(c?.moveTo("0",r===a.EffectDirection.Down?"20vmin":"-20vmin","1vmin",n.Easing.Violent)),o.health--;break;case a.SymbolType.Healing:o.health<o.maxHealth&&(await(0,l.delay)(300),await(c?.moveTo("0",r===a.EffectDirection.Down?"20vmin":"-20vmin","1vmin",n.Easing.Gentle)),o.health=o.health+1);break;case a.SymbolType.Finesse:case a.SymbolType.Force:case a.SymbolType.Mind:if(o!==i)return;const t=this.game.playerHand.reduce(((t,r)=>{const o=r.targetCard;if(null!=o){const n=r.playedCards.find((t=>(0,s.cardFace)(t,!1).symbol===e.effect.symbol)),a=n||((0,s.cardFace)(o,!1).symbol===e.effect.symbol?o:void 0);return null!=a?[a,r]:t}return t}),void 0);if(t){const[e,o]=t;await(0,l.delay)(300),await(c?.moveTo("0",r===a.EffectDirection.Down?"20vmin":"-20vmin","1vmin",n.Easing.Violent)),await this.returnCardToDeck(e,o,[()=>i.deck,e=>i.deck=e])}}})()]),await this.normalizeBoard()}async maybeCreatePlayer(){null==this.game.playerCharacter&&(this.game.playerCharacter=a.entityDescriptor.create(d.defaultPlayerCharacter),this.game.playerCharacter.deck=(0,h.arrayRandomize)(this.game.playerCharacter.deck))}async createChapter(e){const t=[g.chapter,m.chapter];(0,c.batch)((()=>{this.game.book.chapter=a.chapterDescriptor.create(t[e%t.length]),this.game.book.chapter.deck=(0,h.arrayRandomize)(this.game.book.chapter.deck)}))}async nextPage(e,t){const{finishEndTurn:r,playerDead:o}=await this.endTurn(t);if(o)return r();this.game.book.chapter.pagesRemaining--;const n=a.bookSpreadRoomDescriptor.create({type:a.BookSpreadType.Room,encounter:e&&(0,u.hydrateEncounter)(e)});await this.bookController.showSpread(n),await r();const s=(0,i.gameEncounterBattle)(this.game),c=(0,i.gameEncounterEvent)(this.game);null!=s&&await(this.battleEncounterControllerManager.lookupController(s)?.appear()),null!=c&&await(this.eventEncounterControllerManager.lookupController(c)?.appear()),await this.startTurn()}async normalizeBoard(){const e=(0,i.allCardSlots)(this.game).filter((e=>this.isAutoFlippable(e))),t=e.map((e=>{const t=e.targetCard;if(null==t||t.visibleFaceIndex>0)return;return(0,s.cardFace)(t,!1).description})).filter(y.exists)[0];null!=t&&this.speaker.say(t),await Promise.all(e.map((async e=>{const t=e.targetCard;if(null==t)return;const r=this.cardControllerManager.lookupController(t);return null!=r?r.flip():void 0})))}async startTurn(e=3){const t=(0,i.pageCardSlots)(this.game),[r,o]=(0,i.pageDeck)(this.game);if(this.game.book.chapter.pagesRemaining<=0){const e=this.game.book.chapter.finalCard;t[Math.floor(t.length/2)].targetCard=e}else await Promise.all(t.map((async e=>{const t=r();if(t.length>0){const r=t[t.length-1];if(null!=r){e.targetCard=r,o(t.slice(0,-1));const n=this.cardControllerManager.lookupController(r);n?.flipUpToVertical(),await(0,l.delay)(0),await(n?.flipDownFromVertical())}}})));const a=this.game.playerHand;if(null!=a){const t=a.filter((e=>null==e.targetCard&&0===e.playedCards.length)),r=Math.min(e,t.length),o=this.game.playerCharacter;if(r>0&&null!=o){const e=o.deck.slice(-r),s=this.tableController.getPlayerDeckTablePosition();await(0,c.batch)((async()=>{await Promise.all(e.reverse().map((async(e,r)=>{const o=t[r],i=a.indexOf(o),c=this.tableController.getPlayerCardSlotTablePosition(i);await(this.cardControllerManager.lookupController(e)?.moveTo(...c.map(((e,t)=>e-s[t])).map((e=>`${e}vmin`)),n.Easing.Gentle)),o.targetCard=e})))})),o.deck=o.deck.slice(0,-r)}}await(0,l.delay)(300),await this.normalizeBoard()}async endTurn(e){const t=(0,i.gameEncounterBattle)(this.game);let r=null!=t&&t.monster.health<=0;r&&t&&await(this.battleEncounterControllerManager.lookupController(t)?.die());const o=(0,i.gameEncounterEvent)(this.game);null!=o&&await(this.eventEncounterControllerManager.lookupController(o)?.disappear());const n=(0,i.pageDeck)(this.game),s=(0,i.playerDeck)(this.game),l=async e=>{const t=this.game.playerHand.indexOf(e)>=0,r=e.targetCard;if(null!=r&&t&&r.visibleFaceIndex>0||null==s)return[];const o=this.cardSlotControllerManager.lookupController(e);o?.setForceUnrotate(!0);const a=e.playedCards;null!=r&&(await this.returnCardToDeck(r,e,t?s:n),e.targetCard=void 0),null!=s&&(await Promise.all(a.map((async t=>this.returnCardToDeck(t,e,s)))),e.playedCards=[]),o?.setForceUnrotate(!1)},d=this.game.playerCharacter,p=null==d||d.health<=0,u=(0,i.allCardSlots)(this.game).filter((t=>p||t!==e));if(await(0,c.batch)((async()=>{await Promise.all(u.flatMap(l))})),r){const e=this.game.book.spread;e?.type===a.BookSpreadType.Room&&(e.encounter=void 0)}return this.game.book.spread?.type===a.BookSpreadType.Room&&this.game.book.spread.encounter?.type===a.EncounterType.Event&&(this.game.book.spread.encounter=void 0),p&&await this.playerDeath(),{playerDead:p,finishEndTurn:async()=>{null!=e&&await l(e)}}}isAutoFlippable(e){const t=e.targetCard;if(null==t)return!1;const r=(0,s.cardFace)(t,!1),o=t.definition.faces[0],n=t.visibleFaceIndex>0,i=(0,s.calculateTargetCardEffectUsages)(o,e,this.cardControllerManager).cost.every((e=>e.used));return!i&&n&&r.type!==a.CardFaceType.Choice||i&&!n}async returnCardToDeck(e,t,r,o){const s=this.cardControllerManager.lookupController(e),i=this.game.playerHand.indexOf(t)>=0;s?.setElevated(!1);const c=e.definition.recycleTarget,l=c===a.RecycleTarget.DiscardDeckTop?o:r,d=i||e!==t.targetCard;if(d?e.visibleFaceIndex>0&&await(s?.flip()):(await(s?.flipUpToVertical()),e.visibleFaceIndex=0),null!=l){const[t,r]=l,o=t(),n=o.length,s=c===a.RecycleTarget.DrawDeckBottom?0:c===a.RecycleTarget.DrawDeckRandom?Math.floor(Math.random()*(n+1)):n;r([...o.slice(0,s),e,...o.slice(s)])}if(t.targetCard===e?t.targetCard=void 0:t.playedCards=t.playedCards.filter((t=>t!==e)),d){const e=this.tableController.getPlayerDeckTablePosition(),r=this.game.playerHand.indexOf(t),o=this.game.book.cardSlots.indexOf(t),a=r>=0?this.tableController.getPlayerCardSlotTablePosition(r):this.tableController.getBookCardSlotTablePosition(o);await(s?.moveFrom(...a.map(((t,r)=>t-e[r])).map((e=>`${e}vmin`)),n.Easing.Gentle,r<0?"rotateX(-90deg)":void 0))}}async playerDeath(){await this.navigation({type:f.NavigationTargetType.Death}),this.game.playerCharacter=void 0,(0,i.allCardSlots)(this.game).forEach((e=>{e.targetCard=void 0,e.playedCards=[]}))}}},{"model/domain":"hG1oc","./cards":"kFtME","./games":"3tjca","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","solid-js":"5rsr6","base/delay":"hGewO","data/player/initial":"iboxN","base/unreachable_error":"eQLwm","./encounters":"2BJdZ","components/card/card_controller":"eIxqM","components/navigation_target":"5PTDl","base/arrays":"c63XN","base/exists":"7izAI","data/chapters/ruins/chapter":"dOmiz","data/chapters/forest/chapter":"35iq2"}],iboxN:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"defaultPlayerCharacter",(()=>p));var n=e("model/domain"),a=e("./cards/might"),s=e("./cards/kick"),i=e("./cards/shield"),c=e("./cards/agilty"),l=e("./cards/dodge"),d=e("./cards/sword");const p=n.entityDescriptor.freeze({deck:[a.cardMight,s.cardKick,i.cardShield,a.cardMight,s.cardKick,c.cardAgility,l.cardDodge,d.cardSlash,a.cardMight],health:3,maxHealth:3})},{"model/domain":"hG1oc","./cards/might":"lWmYT","./cards/kick":"19rwr","./cards/shield":"2q8ti","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","./cards/agilty":"j9d7f","./cards/dodge":"htfKF","./cards/sword":"1nLoI"}],lWmYT:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"cardMight",(()=>l));var n=e("data/effects"),a=e("model/domain");const s={name:"might",description:void 0,type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,foreground:void 0,symbol:void 0,cost:[]},i={name:"might",description:"You brace for the next feat of strength.",type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Force,cost:[],benefit:[n.Force]},c={recycleTarget:a.RecycleTarget.DrawDeckTop,faces:[s,i]},l=a.cardDescriptor.freeze({definition:c,visibleFaceIndex:0})},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"19rwr":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"cardKick",(()=>l));var n=e("data/effects"),a=e("model/domain");const s={name:"kick",description:"You prepare to strike.",type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,symbol:void 0,foreground:void 0,cost:[n.Force]},i={name:"kick",description:"You deliver a swift kick.",type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Force,cost:[],benefit:[n.DamageUp]},c={recycleTarget:a.RecycleTarget.DrawDeckBottom,faces:[s,i]},l=a.cardDescriptor.freeze({definition:c,visibleFaceIndex:0})},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"2q8ti":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"cardShield",(()=>l));var n=e("data/effects"),a=e("model/domain");const s={name:"shield",description:"You grip your shield tightly.",type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,foreground:void 0,symbol:void 0,cost:[n.Force]},i={name:"shield",description:"You raise your shield.",type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Force,cost:[],benefit:[n.DamageDown]},c={recycleTarget:a.RecycleTarget.DrawDeckBottom,faces:[s,i]},l=a.cardDescriptor.freeze({definition:c,visibleFaceIndex:0})},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],j9d7f:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"cardAgility",(()=>l));var n=e("data/effects"),a=e("model/domain");const s={name:"agility",type:a.CardFaceType.ResourceBack,description:void 0,background:a.CardBackgroundType.Crosshatched,foreground:void 0,symbol:void 0,cost:[]},i={name:"agility",description:"You move with agility.",type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Finesse,cost:[],benefit:[n.Finesse]},c={recycleTarget:a.RecycleTarget.DrawDeckBottom,faces:[s,i]},l=a.cardDescriptor.freeze({definition:c,visibleFaceIndex:0})},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],htfKF:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"cardDodge",(()=>l));var n=e("data/effects"),a=e("model/domain");const s={name:"dodge",description:"You crouch in readiness.",type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,foreground:void 0,symbol:void 0,cost:[n.Finesse]},i={name:"dodge",description:"Cat like, you jump out of the way.",type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Finesse,cost:[],benefit:[n.DamageDown]},c={recycleTarget:a.RecycleTarget.DrawDeckBottom,faces:[s,i]},l=a.cardDescriptor.freeze({definition:c,visibleFaceIndex:0})},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"1nLoI":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"cardSlash",(()=>l));var n=e("data/effects"),a=e("model/domain");const s={name:"slash",description:"You become aware of the heft of your sword.",type:a.CardFaceType.ResourceBack,background:a.CardBackgroundType.Crosshatched,foreground:void 0,symbol:void 0,cost:[n.Force,n.Finesse]},i={name:"slash",description:"You swing the sturdy blade.",type:a.CardFaceType.Resource,background:a.CardBackgroundType.Clear,foreground:void 0,symbol:a.SymbolType.Finesse,cost:[],benefit:[n.DamageUp,n.DamageUp]},c={recycleTarget:a.RecycleTarget.DrawDeckBottom,faces:[s,i]},l=a.cardDescriptor.freeze({definition:c,visibleFaceIndex:0})},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"2BJdZ":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"hydrateEncounter",(()=>u));var n=e("base/arrays"),a=e("base/unreachable_error"),s=e("data/monsters/rat/initial"),i=e("data/monsters/troll/initial"),c=e("data/events/fountain/cards"),l=e("data/events/magic_tree/cards"),d=e("model/domain"),p=e("data/monsters/snail/initial");function u(e){switch(e.type){case d.EncounterType.Battle:const t=function(e){switch(e){case d.MonsterType.BigRat:return s.defaultRat;case d.MonsterType.Troll:return i.defaultTroll;case d.MonsterType.Snail:return p.defaultSnail;default:throw new(0,a.UnreachableError)(e)}}(e.monster),r=(0,n.arrayRandomize)(t.deck);return{type:e.type,monsterType:e.monster,monster:{...t,deck:r}};case d.EncounterType.Event:switch(e.event){case d.EventType.Fountain:return{type:d.EncounterType.Event,eventType:e.event,deck:(0,n.arrayRandomize)(c.cards).slice(0,2).concat([c.cardIgnore])};case d.EventType.MagicTree:return{type:d.EncounterType.Event,eventType:e.event,deck:(0,n.arrayRandomize)(l.cards).slice(0,3)};default:throw new(0,a.UnreachableError)(e.event)}default:throw new(0,a.UnreachableError)(e)}}},{"base/unreachable_error":"eQLwm","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","base/arrays":"c63XN","data/monsters/rat/initial":"fhIPE","data/monsters/troll/initial":"2Gfop","data/events/fountain/cards":"bOODI","data/events/magic_tree/cards":"ecSzl","data/monsters/snail/initial":"e4Drc"}],c63XN:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");function n(e){const t=[...e];for(let e=0;e<t.length;e++){const[e]=t.splice(Math.floor(Math.random()*t.length),1);t.push(e)}return t}o.defineInteropFlag(r),o.export(r,"arrayRandomize",(()=>n))},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],fhIPE:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"defaultRat",(()=>s));var n=e("model/domain"),a=e("./cards");const s=n.entityDescriptor.freeze({deck:a.cards,health:2,maxHealth:2})},{"model/domain":"hG1oc","./cards":"kT937","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],kT937:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"cardFrontRatBite",(()=>l)),o.export(r,"cardFrontRatScreech",(()=>d)),o.export(r,"cardFrontRatCower",(()=>p)),o.export(r,"cards",(()=>u));var n=e("data/effects"),a=e("model/domain");const s={name:"cornered",description:void 0,type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.Crosshatched,foreground:a.CardForegroundType.Rat,symbol:void 0,cost:[]},i={name:"rodent cunning",description:"You predict where the rat is going and intercept.",type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.Crosshatched,foreground:a.CardForegroundType.Rat,symbol:void 0,cost:[n.Mind]},c={name:"scurrying",description:"The rat is fast, but you are faster.",type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.Crosshatched,foreground:a.CardForegroundType.Rat,symbol:void 0,cost:[n.Finesse]},l={name:"bite",description:"The rat bares its teeth.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Rat,symbol:a.SymbolType.Finesse,cost:[n.DamageDown],benefit:[]},d={name:"screech",description:"It makes a terrifying noise.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Rat,symbol:a.SymbolType.Finesse,cost:[n.Force,n.Finesse,n.Mind],benefit:[]},p={name:"cower",description:"The rat backs away in fear.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Rat,symbol:a.SymbolType.Finesse,cost:[n.DamageUp],benefit:[]},u=[s,i,c].flatMap((e=>[l,d,p].map((t=>({faces:[e,t],recycleTarget:a.RecycleTarget.DrawDeckRandom}))))).map((e=>a.cardDescriptor.freeze({definition:e,visibleFaceIndex:0})))},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"2Gfop":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"defaultTroll",(()=>s));var n=e("model/domain"),a=e("./cards");const s=n.entityDescriptor.freeze({deck:a.cards,health:4,maxHealth:4})},{"model/domain":"hG1oc","./cards":"9deJ1","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"9deJ1":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"cardFrontTrollSmash",(()=>l)),o.export(r,"cardFrontTrollOdour",(()=>d)),o.export(r,"cardFrontTrollRegeneration",(()=>p)),o.export(r,"cards",(()=>u));var n=e("data/effects"),a=e("model/domain");const s={name:"aggression",description:void 0,type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.Crosshatched,foreground:a.CardForegroundType.Troll,symbol:void 0,cost:[]},i={name:"trolling",description:"The troll unwittingly telegraphs its next move.",type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.Crosshatched,foreground:a.CardForegroundType.Troll,symbol:void 0,cost:[n.Mind]},c={name:"retaliation",description:"The blow enrages the troll.",type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.Crosshatched,foreground:a.CardForegroundType.Troll,symbol:void 0,cost:[n.DamageUp]},l={name:"smash",description:"The troll slams you with a tree branch.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Troll,symbol:a.SymbolType.Force,cost:[n.DamageDown,n.DamageDown],benefit:[]},d={name:"trollish odour",description:"That thing reeks.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Troll,symbol:a.SymbolType.Force,cost:[n.Force,n.Force,n.Mind],benefit:[]},p={name:"regenerate",description:"The trolls wounds heal before your eyes!",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Troll,symbol:a.SymbolType.Force,cost:[n.DamageUp],benefit:[n.Healing]},u=[c,i,s].flatMap((e=>[l,d,p].map((t=>({faces:[e,t],recycleTarget:a.RecycleTarget.DrawDeckRandom}))))).map((e=>a.cardDescriptor.freeze({definition:e,visibleFaceIndex:0})))},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],bOODI:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"cardFrontFountainWater",(()=>l)),o.export(r,"cardFrontFountainPoison",(()=>d)),o.export(r,"cardFrontFountainHealing",(()=>p)),o.export(r,"cardFrontFountainYouth",(()=>u)),o.export(r,"cardFrontFountainIgnore",(()=>f)),o.export(r,"cards",(()=>m)),o.export(r,"cardIgnore",(()=>g));var n=e("data/effects"),a=e("model/domain");const s={name:"drink",description:"You recall something important.",type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.Crosshatched,foreground:a.CardForegroundType.Fountain,symbol:void 0,cost:[n.Mind]},i={name:"drink",description:"The magic enchoes in the fountain.",type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.Crosshatched,foreground:a.CardForegroundType.Fountain,symbol:void 0,cost:[n.Magic]},c={name:"ignore",description:void 0,type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.Crosshatched,foreground:a.CardForegroundType.Fountain,symbol:void 0,cost:[]},l={name:"water",description:"There's nothing special about this fountain.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Fountain,symbol:void 0,cost:[],benefit:[]},d={name:"poison",description:"The clear water tastes incredibly foul.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Fountain,symbol:void 0,cost:[n.PoisonDown],benefit:[]},p={name:"healing",description:"You feel restored.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Fountain,symbol:void 0,cost:[n.Healing],benefit:[]},u={name:"youth",description:"You feel youthful.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Fountain,symbol:void 0,cost:[n.AgeDown],benefit:[]},f={name:"ignore",description:"Best left alone.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Fountain,symbol:void 0,cost:[],benefit:[]},m=[s,i].flatMap((e=>[l,d,p,u].map((t=>({faces:[e,t],recycleTarget:a.RecycleTarget.DiscardDeckTop}))))).map((e=>a.cardDescriptor.freeze({definition:e,visibleFaceIndex:0}))),g=a.cardDescriptor.freeze({definition:{faces:[c,f],recycleTarget:a.RecycleTarget.DiscardDeckTop},visibleFaceIndex:0})},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],ecSzl:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"cardFrontMagicTreeGoldenApple",(()=>l)),o.export(r,"cardFrontMagicTreeGreenApple",(()=>d)),o.export(r,"cardFrontMagicTreeRedApple",(()=>p)),o.export(r,"cards",(()=>u));var n=e("data/effects"),a=e("model/domain");const s={name:"pick fruit",description:"You climb the tree and dislodge a juicy piece of fruit.",type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.Crosshatched,foreground:a.CardForegroundType.MagicTree,symbol:void 0,cost:[n.Finesse]},i={name:"shake tree",description:"You shake the tree until something falls down.",type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.Crosshatched,foreground:a.CardForegroundType.MagicTree,symbol:void 0,cost:[n.Force]},c={name:"gather fruit",description:"You espy unspoiled fruit resting upon the ground.",type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.Crosshatched,foreground:a.CardForegroundType.MagicTree,symbol:void 0,cost:[]},l={name:"golden apple",description:"The flavour is strange, yet familiar.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.MagicTree,symbol:void 0,cost:[n.AgeDown],benefit:[]},d={name:"green apple",description:"Surprisingly disappointing.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.MagicTree,symbol:void 0,cost:[],benefit:[]},p={name:"red apple",description:"You feel satisfied.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Fountain,symbol:void 0,cost:[n.Healing],benefit:[]},u=[i,c,s].flatMap((e=>[l,d,p].map((t=>({faces:[e,t],recycleTarget:a.RecycleTarget.DiscardDeckTop}))))).map((e=>a.cardDescriptor.freeze({definition:e,visibleFaceIndex:0})))},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],e4Drc:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"defaultSnail",(()=>s));var n=e("model/domain"),a=e("./cards");const s=n.entityDescriptor.freeze({deck:a.cards,health:1,maxHealth:1})},{"model/domain":"hG1oc","./cards":"k5LZg","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],k5LZg:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"cardFrontSnailBite",(()=>c)),o.export(r,"cardFrontSnailHide",(()=>l)),o.export(r,"cards",(()=>d));var n=e("data/effects"),a=e("model/domain");const s={name:"extend",description:void 0,type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.Crosshatched,foreground:a.CardForegroundType.Snail,symbol:void 0,cost:[]},i={name:"retract",description:"You knock the snail over.",type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.Crosshatched,foreground:a.CardForegroundType.Snail,symbol:void 0,cost:[n.DamageUp]},c={name:"bite",description:"The snail nips at you.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Snail,symbol:a.SymbolType.Force,cost:[n.DamageDown],benefit:[]},l={name:"hide",description:"The snail hides within its shell.",type:a.CardFaceType.Choice,choice:{type:a.ChoiceType.NextTurn},background:a.CardBackgroundType.Clear,foreground:a.CardForegroundType.Rat,symbol:a.SymbolType.Force,cost:[n.DamageUp,n.DamageUp],benefit:[]},d=[s,i].flatMap((e=>[c,l].map((t=>({faces:[e,t],recycleTarget:a.RecycleTarget.DrawDeckRandom}))))).map((e=>a.cardDescriptor.freeze({definition:e,visibleFaceIndex:0})))},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"35iq2":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"chapter",(()=>s));var n=e("model/domain"),a=e("./cards");const s=n.chapterDescriptor.freeze({type:n.ChapterType.Forest,deck:[...a.cards],pagesRemaining:10,finalCard:a.finalCard})},{"model/domain":"hG1oc","./cards":"9yciV","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"9yciV":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"cards",(()=>f)),o.export(r,"finalCard",(()=>h));var n=e("data/effects"),a=e("model/domain");const s={name:"shadowed path",description:"The path reveals itself.",type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.DarkenedForestPath,foreground:void 0,symbol:void 0,cost:[n.FireUp]},i={name:"overgrown path",description:"You clear the branches.",type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.DarkenedForestPath,foreground:void 0,symbol:void 0,cost:[n.Force]},c={name:"path",description:void 0,type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.ForestPath,foreground:void 0,symbol:void 0,cost:[]},l={name:"small clearing",description:"This way looks safe.",type:a.CardFaceType.Choice,background:a.CardBackgroundType.ForestPath,foreground:void 0,symbol:void 0,choice:{type:a.ChoiceType.NextPage,encounter:void 0},cost:[],benefit:[]},d={name:"a big snail",description:"The snail inches toward you.",type:a.CardFaceType.Choice,background:a.CardBackgroundType.ForestPath,foreground:a.CardForegroundType.Snail,symbol:void 0,choice:{type:a.ChoiceType.NextPage,encounter:{type:a.EncounterType.Battle,monster:a.MonsterType.Snail}},cost:[],benefit:[]},p={name:"thicket",description:"The thorns pull at your clothes.",type:a.CardFaceType.Choice,background:a.CardBackgroundType.ForestPath,foreground:a.CardForegroundType.Trap,symbol:void 0,choice:{type:a.ChoiceType.NextPage,encounter:void 0},cost:[n.Force],benefit:[]},u={name:"magic tree",description:"There's something unusual about this tree.",type:a.CardFaceType.Choice,background:a.CardBackgroundType.ForestPath,foreground:a.CardForegroundType.MagicTree,symbol:void 0,choice:{type:a.ChoiceType.NextPage,encounter:{type:a.EncounterType.Event,event:a.EventType.MagicTree}},cost:[],benefit:[]},f=[i,s,c].flatMap((e=>[l,d,p].map((t=>({recycleTarget:a.RecycleTarget.DrawDeckRandom,faces:[e,t]}))))).concat([{faces:[s,u],recycleTarget:a.RecycleTarget.DiscardDeckTop}]).map((e=>({definition:e,visibleFaceIndex:0}))),m={name:"cobbled road",description:"You stumble out of the forest, blinking in the sunlight.",type:a.CardFaceType.ChoiceBack,background:a.CardBackgroundType.DarkenedForestPath,foreground:void 0,symbol:void 0,cost:[]},g={name:"troll",description:"A vulgar oaf blocks your way. He looks at you, licking his lips.",type:a.CardFaceType.Choice,background:a.CardBackgroundType.ForestPath,foreground:void 0,symbol:void 0,choice:{type:a.ChoiceType.NextChapter,encounter:{type:a.EncounterType.Battle,monster:a.MonsterType.Troll},targetChapterIndex:1},cost:[],benefit:[]},h=a.cardDescriptor.freeze({definition:{faces:[m,g],recycleTarget:a.RecycleTarget.DiscardDeckTop},visibleFaceIndex:0})},{"data/effects":"7stQX","model/domain":"hG1oc","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"1ZOwu":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"createDeck",(()=>c));var n=e("solid-js/web"),a=e("solid-js"),s=e("./deck"),i=e("./deck_controller");function c(e,t){return{Component:function(){return(0,n.createComponent)(s.DeckComponent,{get children(){return(0,n.createComponent)(a.For,{get each(){return e()},children:e=>(0,n.createComponent)(t,{model:e})})}})},controller:new(0,i.DeckController)}}},{"solid-js/web":"33rlw","solid-js":"5rsr6","./deck":"8hCp5","./deck_controller":"kT6fC","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"8hCp5":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"DeckComponent",(()=>l));var n=e("solid-js/web"),a=e("solid-js"),s=e("./deck.module.scss"),i=o.interopDefault(s);const c=(0,n.template)("<div>");function l(e){return(()=>{const t=c();return(0,n.insert)(t,(0,n.createComponent)(a.For,{get each(){return(0,a.children)((()=>e.children)).toArray()},children:e=>(()=>{const t=c();return(0,n.insert)(t,e),(0,n.effect)((()=>(0,n.className)(t,i.default.card))),t})()})),(0,n.effect)((()=>(0,n.className)(t,i.default.deck))),t})()}},{"solid-js/web":"33rlw","solid-js":"5rsr6","./deck.module.scss":"9OUT6","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"9OUT6":[function(e,t,r){t.exports.deck="saLsXW_deck",t.exports.card="saLsXW_card"},{}],kT6fC:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"DeckController",(()=>n));class n{constructor(){}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],lXiSb:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"createStatusOverlay",(()=>l));var n=e("solid-js/web"),a=e("./status_overlay"),s=e("components/entity/health/entity_health"),i=e("components/narration/narration"),c=e("solid-js");function l(){return function(e){const t=(0,n.createComponent)(s.EntityHealth,{get health(){return e.playerCharacter.health},get maxHealth(){return e.playerCharacter.maxHealth}}),r=(0,c.createMemo)((()=>e.speaker.text?.split(" ")||[])),o=(0,c.createMemo)((()=>{const t=(e.speaker.text||"").substring(0,e.speaker.characterIndex);return Math.min(t.length,t.split(" ").length)})),l=(0,n.createComponent)(i.NarrationComponent,{get words(){return r()},get index(){return o()}});return(0,n.createComponent)(a.StatusOverlayComponent,{health:t,narration:l})}}},{"solid-js/web":"33rlw","./status_overlay":"i0scu","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","components/entity/health/entity_health":"k6NOx","components/narration/narration":"kSR6C","solid-js":"5rsr6"}],i0scu:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"StatusOverlayComponent",(()=>c));var n=e("solid-js/web"),a=e("./status_overlay.module.scss"),s=o.interopDefault(a);const i=(0,n.template)("<div><div><div></div></div><div>");function c(e){return(()=>{const t=i(),r=t.firstChild,o=r.firstChild,a=r.nextSibling;return(0,n.insert)(o,(()=>e.health)),(0,n.insert)(a,(()=>e.narration)),(0,n.effect)((e=>{const i=s.default.overlay,c=s.default["status-bar"],l=s.default["health-container"],d=s.default.narration;return i!==e._v$&&(0,n.className)(t,e._v$=i),c!==e._v$2&&(0,n.className)(r,e._v$2=c),l!==e._v$3&&(0,n.className)(o,e._v$3=l),d!==e._v$4&&(0,n.className)(a,e._v$4=d),e}),{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),t})()}},{"solid-js/web":"33rlw","./status_overlay.module.scss":"2hTNJ","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"2hTNJ":[function(e,t,r){t.exports.cardWidth="9",t.exports.cardHeight="12",t.exports.pageWidth="50",t.exports.pageHeight="70",t.exports.overlay="overlay_1607aa",t.exports["status-bar"]="status-bar_1607aa",t.exports["health-container"]="health-container_1607aa",t.exports.narration="narration_1607aa"},{}],k6NOx:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"EntityHealth",(()=>l));var n=e("solid-js/web"),a=e("solid-js"),s=e("./entity_health.module.scss"),i=o.interopDefault(s);const c=(0,n.template)("<div>");function l(e){return(()=>{const t=c();return(0,n.insert)(t,(0,n.createComponent)(a.Index,{get each(){return new Array(e.maxHealth).fill(0)},children:(t,r)=>(()=>{const t=c();return(0,n.effect)((o=>(0,n.classList)(t,{[i.default.health]:!0,[i.default.small]:e.small,[i.default.filled]:r<e.health},o))),t})()})),(0,n.effect)((()=>(0,n.className)(t,i.default.container))),t})()}},{"solid-js/web":"33rlw","solid-js":"5rsr6","./entity_health.module.scss":"4pCL6","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"4pCL6":[function(e,t,r){t.exports.container="AkI8aW_container",t.exports.health="AkI8aW_health",t.exports.filled="AkI8aW_filled",t.exports.small="AkI8aW_small"},{}],kSR6C:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"NarrationComponent",(()=>l));var n=e("solid-js/web"),a=e("./narration.module.scss"),s=o.interopDefault(a),i=e("solid-js");const c=(0,n.template)("<span> ");function l(e){return(0,n.createComponent)(i.For,{get each(){return e.words},children:(t,r)=>(()=>{const o=c(),a=o.firstChild;return(0,n.insert)(o,t,a),(0,n.effect)((t=>(0,n.classList)(o,{[s.default.word]:!0,[s.default.visible]:r()<e.index},t))),o})()})}},{"solid-js/web":"33rlw","./narration.module.scss":"kuQ2e","solid-js":"5rsr6","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],kuQ2e:[function(e,t,r){t.exports.visible="WAp4nG_visible",t.exports.word="WAp4nG_word"},{}],h8cfH:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"createEncounterBattleManger",(()=>c));var n=e("solid-js/web"),a=e("components/entity/create"),s=e("./encounter_battle"),i=e("components/component_manager");function c(){return new(0,i.ComponentManager)((function(e){const{controller:t,Component:r}=(0,a.createMonster)(e.monsterType);return{Component:function(){return(0,n.createComponent)(s.EncounterBattleComponent,{model:e,get children(){return(0,n.createComponent)(r,{})}})},controller:t}}))}},{"solid-js/web":"33rlw","components/entity/create":"6VgvT","./encounter_battle":"d02tT","components/component_manager":"e6kRp","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"6VgvT":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"createMonster",(()=>l));var n=e("base/unreachable_error"),a=e("model/domain"),s=e("./rat/create"),i=e("./troll/create"),c=e("./snail/create");function l(e){switch(e){case a.MonsterType.BigRat:return(0,s.createRatEntity)();case a.MonsterType.Troll:return(0,i.createTrollEntity)();case a.MonsterType.Snail:return(0,c.createSnailEntity)();default:throw new(0,n.UnreachableError)(e)}}},{"base/unreachable_error":"eQLwm","model/domain":"hG1oc","./rat/create":"e0TXQ","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","./troll/create":"kdRxv","./snail/create":"3ZEaP"}],e0TXQ:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"createRatEntity",(()=>c));var n=e("data/monsters/rat/cards"),a=e("../rigid/create"),s=e("../rigid/rigid_entity_controller"),i=e("../unicode/create");function c(){return(0,a.createRigidEntity)(new Map([[n.cardFrontRatBite,s.Animations.Attack],[n.cardFrontRatScreech,s.Animations.Special],[n.cardFrontRatCower,s.Animations.Block]]),(0,i.createUnicodeEntity)(""),void 0,!0)}},{"../rigid/create":"cR4Ik","../rigid/rigid_entity_controller":"azAeR","../unicode/create":"j37aC","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","data/monsters/rat/cards":"kT937"}],cR4Ik:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"createRigidEntity",(()=>c));var n=e("solid-js/web"),a=e("ui/animation/animation_manager"),s=e("./rigid_entity_controller"),i=e("./rigid_entity");e("solid-js");function c(e,t,r,o){const c=s.rigidEntityUI.create({activeAnimation:void 0,hidden:!0}),l=new(0,a.AnimationManager);return{controller:new(0,s.RigidEntityController)(l,e,s.Animations.Special,c,r),Component:function(){return(0,n.createComponent)(i.RigidEntityComponent,{animations:l,get hidden(){return c.hidden},get activeAnimation(){return c.activeAnimation},flipX:o,get children(){return(0,n.createComponent)(t,{})}})}}}},{"solid-js/web":"33rlw","ui/animation/animation_manager":"fbyYW","./rigid_entity_controller":"azAeR","./rigid_entity":"gfyby","solid-js":"5rsr6","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],azAeR:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"Animations",(()=>c)),o.export(r,"rigidEntityUI",(()=>l)),o.export(r,"RigidEntityController",(()=>d));var n=e("model/descriptor/record"),a=e("model/descriptor/literals"),s=e("model/descriptor/option"),i=e("solid-js");let c;!function(e){e[e.Appear=1]="Appear",e[e.Disappear=2]="Disappear",e[e.Attack=3]="Attack",e[e.Special=4]="Special",e[e.TakeDamage=5]="TakeDamage",e[e.Die=6]="Die",e[e.Block=7]="Block"}(c||(c={}));const l=(0,n.activeRecordDescriptor)({activeAnimation:(0,s.optionalDescriptor)(new(0,a.LiteralTypeDescriptor)),hidden:a.booleanDescriptor});class d{constructor(e,t,r,o,n){this.animations=e,this.actions=t,this.fallbackAnimation=r,this.rigidEntityUI=o,this.dynamicEntityController=n}async perform(e){const t=this.actions.get(e)||this.fallbackAnimation;await this.performAnimation(t,(()=>this.dynamicEntityController?.perform(e))),this.rigidEntityUI.activeAnimation=void 0}async appear(){await(0,i.batch)((()=>(this.rigidEntityUI.hidden=!1,this.performAnimation(1,(()=>this.dynamicEntityController?.appear()))))),this.rigidEntityUI.activeAnimation=void 0}async disappear(){await this.performAnimation(2,(()=>this.dynamicEntityController?.disappear())),(0,i.batch)((()=>{this.rigidEntityUI.hidden=!0,this.rigidEntityUI.activeAnimation=void 0}))}async die(){await this.performAnimation(6,(()=>this.dynamicEntityController?.die())),(0,i.batch)((()=>{this.rigidEntityUI.hidden=!0,this.rigidEntityUI.activeAnimation=void 0}))}async performAnimation(e,t){this.rigidEntityUI.activeAnimation=e,await Promise.all([null!=e&&this.animations.waitForAnimation(e),t()])}}},{"model/descriptor/record":"9b5Fs","model/descriptor/literals":"6SgZZ","model/descriptor/option":"c8pK3","solid-js":"5rsr6","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],gfyby:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"RigidEntityComponent",(()=>p));var n=e("solid-js/web"),a=e("./rigid_entity.module.scss"),s=o.interopDefault(a),i=e("./rigid_entity_controller"),c=e("solid-js"),l=e("base/unreachable_error");const d=(0,n.template)("<div><div>");function p(e){const[t,r]=(0,c.createSignal)(),o=()=>{switch(e.activeAnimation){case i.Animations.Appear:case i.Animations.Disappear:return s.default.appearAnimation;case i.Animations.Attack:return s.default.attackAnimation;case i.Animations.Die:return s.default.dieAnimation;case i.Animations.Special:return s.default.specialAnimation;case i.Animations.Block:return s.default.blockAnimation;case i.Animations.TakeDamage:case void 0:return"";default:throw new(0,l.UnreachableError)(e.activeAnimation)}},a=e.animations.createAnimationEndEventListener(t,(()=>[e.activeAnimation,o()]));return(()=>{const t=d(),o=t.firstChild;return(0,n.use)(r,t),(0,n.addEventListener)(t,"animationend",a),(0,n.insert)(o,(()=>e.children)),(0,n.effect)((r=>{const a={[s.default.entity]:!0,[s.default.hidden]:e.hidden,[s.default.idle]:null==e.activeAnimation,[s.default.appear]:e.activeAnimation===i.Animations.Appear||e.activeAnimation===i.Animations.Disappear,[s.default.reverse]:e.activeAnimation===i.Animations.Disappear,[s.default.attack]:e.activeAnimation===i.Animations.Attack,[s.default.die]:e.activeAnimation===i.Animations.Die,[s.default.block]:e.activeAnimation===i.Animations.Block,[s.default.special]:e.activeAnimation==i.Animations.Special},c={[s.default.inner]:!0,[s.default.flipX]:e.flipX};return r._v$=(0,n.classList)(t,a,r._v$),r._v$2=(0,n.classList)(o,c,r._v$2),r}),{_v$:void 0,_v$2:void 0}),t})()}},{"solid-js/web":"33rlw","./rigid_entity.module.scss":"3IDZa","./rigid_entity_controller":"azAeR","solid-js":"5rsr6","base/unreachable_error":"eQLwm","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"3IDZa":[function(e,t,r){t.exports.hidden="V5XGxa_hidden",t.exports.special="V5XGxa_special",t.exports.reverse="V5XGxa_reverse",t.exports.attack="V5XGxa_attack",t.exports.specialAnimation="V5XGxa_specialAnimation",t.exports.specialAnimation,t.exports.idleAnimation="V5XGxa_idleAnimation",t.exports.idleAnimation,t.exports.die="V5XGxa_die",t.exports.appearAnimation="V5XGxa_appearAnimation",t.exports.appearAnimation,t.exports.dieAnimation="V5XGxa_dieAnimation",t.exports.dieAnimation,t.exports.attackAnimation="V5XGxa_attackAnimation",t.exports.attackAnimation,t.exports.entity="V5XGxa_entity",t.exports.blockAnimation="V5XGxa_blockAnimation",t.exports.blockAnimation,t.exports.inner="V5XGxa_inner",t.exports.appear="V5XGxa_appear",t.exports.block="V5XGxa_block",t.exports.flipX="V5XGxa_flipX",t.exports.idle="V5XGxa_idle"},{}],j37aC:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"createUnicodeEntity",(()=>s));var n=e("solid-js/web"),a=e("./unicode_entity");function s(e,t){return function(){return(0,n.createComponent)(a.UnicodeEntityComponent,{unicode:e,fontSize:t})}}},{"solid-js/web":"33rlw","./unicode_entity":"kwS88","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],kwS88:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"UnicodeEntityComponent",(()=>c));var n=e("solid-js/web"),a=e("./unicode_entity.module.scss"),s=o.interopDefault(a);const i=(0,n.template)("<div>");function c(e){return(()=>{const t=i();return(0,n.insert)(t,(()=>e.unicode)),(0,n.effect)((r=>{const o=s.default.entity,a=e.fontSize&&{"font-size":e.fontSize};return o!==r._v$&&(0,n.className)(t,r._v$=o),r._v$2=(0,n.style)(t,a,r._v$2),r}),{_v$:void 0,_v$2:void 0}),t})()}},{"solid-js/web":"33rlw","./unicode_entity.module.scss":"hRnwJ","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],hRnwJ:[function(e,t,r){t.exports.cardWidth="9",t.exports.cardHeight="12",t.exports.pageWidth="50",t.exports.pageHeight="70",t.exports.entity="entity_6cc677"},{}],kdRxv:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"createTrollEntity",(()=>c));var n=e("data/monsters/troll/cards"),a=e("../rigid/create"),s=e("../rigid/rigid_entity_controller"),i=e("../unicode/create");function c(){return(0,a.createRigidEntity)(new Map([[n.cardFrontTrollSmash,s.Animations.Attack],[n.cardFrontTrollOdour,s.Animations.Special],[n.cardFrontTrollRegeneration,s.Animations.Block]]),(0,i.createUnicodeEntity)(""),void 0,!1)}},{"data/monsters/troll/cards":"9deJ1","../rigid/create":"cR4Ik","../rigid/rigid_entity_controller":"azAeR","../unicode/create":"j37aC","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"3ZEaP":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"createSnailEntity",(()=>c));var n=e("data/monsters/snail/cards"),a=e("../rigid/create"),s=e("../rigid/rigid_entity_controller"),i=e("../unicode/create");function c(){return(0,a.createRigidEntity)(new Map([[n.cardFrontSnailBite,s.Animations.Attack],[n.cardFrontSnailHide,s.Animations.Block]]),(0,i.createUnicodeEntity)(""),void 0,!0)}},{"data/monsters/snail/cards":"k5LZg","../rigid/create":"cR4Ik","../rigid/rigid_entity_controller":"azAeR","../unicode/create":"j37aC","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],d02tT:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"EncounterBattleComponent",(()=>l));var n=e("solid-js/web"),a=e("./encounter_battle.module.scss"),s=o.interopDefault(a),i=e("components/entity/health/entity_health");const c=(0,n.template)("<div>");function l(e){return(()=>{const t=c();return(0,n.insert)(t,(0,n.createComponent)(i.EntityHealth,{get health(){return e.model.monster.health},get maxHealth(){return e.model.monster.maxHealth}}),null),(0,n.insert)(t,(()=>e.children),null),(0,n.effect)((()=>(0,n.className)(t,s.default.container))),t})()}},{"solid-js/web":"33rlw","./encounter_battle.module.scss":"gKGEF","@parcel/transformer-js/src/esmodule-helpers.js":"k3151","components/entity/health/entity_health":"k6NOx"}],gKGEF:[function(e,t,r){t.exports.cardWidth="9",t.exports.cardHeight="12",t.exports.pageWidth="50",t.exports.pageHeight="70",t.exports.container="container_dde8a2"},{}],"6nTV1":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"createEncounterEventManger",(()=>p));var n=e("solid-js/web"),a=e("model/domain"),s=e("components/component_manager"),i=e("components/entity/fountain/create"),c=e("base/unreachable_error"),l=e("./encounter_event"),d=e("components/entity/magic_tree/create");function p(){return new(0,s.ComponentManager)((function(e){const{Component:t,controller:r}=function(e){switch(e.eventType){case a.EventType.Fountain:return(0,i.createFountainEntity)();case a.EventType.MagicTree:return(0,d.createMagicTreeEntity)();default:throw new(0,c.UnreachableError)(e.eventType)}}(e);return{Component:function(){return(0,n.createComponent)(l.EncounterEventComponent,{get children(){return(0,n.createComponent)(t,{})}})},controller:r}}))}},{"solid-js/web":"33rlw","model/domain":"hG1oc","components/component_manager":"e6kRp","components/entity/fountain/create":"bXF0b","base/unreachable_error":"eQLwm","./encounter_event":"5JPj0","components/entity/magic_tree/create":"gYTb3","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],bXF0b:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"createFountainEntity",(()=>s));var n=e("../rigid/create"),a=e("../unicode/create");function s(){return(0,n.createRigidEntity)(new Map([]),(0,a.createUnicodeEntity)(""),void 0,!1)}},{"../rigid/create":"cR4Ik","../unicode/create":"j37aC","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"5JPj0":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"EncounterEventComponent",(()=>c));var n=e("solid-js/web"),a=e("./encounter_event.module.scss"),s=o.interopDefault(a);const i=(0,n.template)("<div>");function c(e){return(()=>{const t=i();return(0,n.insert)(t,(()=>e.children)),(0,n.effect)((()=>(0,n.className)(t,s.default.container))),t})()}},{"solid-js/web":"33rlw","./encounter_event.module.scss":"6H3r8","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"6H3r8":[function(e,t,r){t.exports.cardWidth="9",t.exports.cardHeight="12",t.exports.pageWidth="50",t.exports.pageHeight="70",t.exports.container="container_f42fb8"},{}],gYTb3:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"createMagicTreeEntity",(()=>s));var n=e("../rigid/create"),a=e("../unicode/create");function s(){return(0,n.createRigidEntity)(new Map([]),(0,a.createUnicodeEntity)(""),void 0,!1)}},{"../rigid/create":"cR4Ik","../unicode/create":"j37aC","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],f4J0Y:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"createEncounter",(()=>s));var n=e("solid-js/web"),a=e("model/domain");e("solid-js");function s(e,t){const r={[a.EncounterType.Battle]:function(t){return(0,n.createComponent)(e.FactoryComponent,{get model(){return t.model}})},[a.EncounterType.Event]:function(e){return(0,n.createComponent)(t.FactoryComponent,{get model(){return e.model}})}};return function(e){return(0,n.createComponent)(n.Dynamic,{get component(){return r[e.model.type]},get model(){return e.model}})}}},{"solid-js/web":"33rlw","model/domain":"hG1oc","solid-js":"5rsr6","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"14Eqm":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"RenderingSpeaker",(()=>s));var n=e("solid-js"),a=e("base/delay");class s{constructor(e){this.splitter=e,this.previousPromise=Promise.resolve();const[t,r]=(0,n.createSignal)();this.textGetter=t,this.textSetter=r;const[o,a]=(0,n.createSignal)(0);this.characterIndexGetter=o,this.characterIndexSetter=a}say(e){return this.previousPromise=this.previousPromise.then((async()=>{(0,n.batch)((()=>{this.textSetter(e),this.characterIndexSetter(0)})),await this.splitter.say(e,(e=>{this.characterIndexSetter(e)})),await(0,a.delay)(200),this.characterIndexSetter(0),await(0,a.delay)(200)})),this.previousPromise}get characterIndex(){return this.characterIndexGetter()}get text(){return this.textGetter()}}},{"solid-js":"5rsr6","base/delay":"hGewO","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],i62HP:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"SpeechSynthesisWordSplitter",(()=>n));class n{constructor(e,t){this.speechSynthesis=e,this.fallback=t,this.cachedUtterances=new Map,e.onvoiceschanged=()=>this.cachedVoice=void 0}get voice(){return null==this.cachedVoice&&(this.cachedVoice=this.calculateVoice()),this.cachedVoice}calculateVoice(){const e=this.speechSynthesis?.getVoices();if(!e?.length)return;const t=e.filter((e=>"EN-GB"===e.lang.toUpperCase())),r=t.find((e=>e.name.toUpperCase().indexOf(" MALE")>=0));if(null!=r)return r;if(t.length>0)return t[0];const o=e.find((e=>e.default));return null!=o?o:e[0]}async say(e,t){const r=this.calculateUtterance(e);r&&this.speechSynthesis.speak(r),await this.fallback.say(e,t)}calculateUtterance(e){let t=this.cachedUtterances.get(e);if(null!=t)return t;const r=this.voice;return r?(t=new SpeechSynthesisUtterance(e),t.addEventListener("boundary",(e=>console.log(e))),t.rate=.9,t.pitch=.4,t.lang="en",t.voice=r,this.cachedUtterances.set(e,t),t):void 0}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"6sNch":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"DelayWordSplitter",(()=>a));var n=e("base/delay");class a{async say(e,t){const r=e.split(" ");let o=-1;for(const e of r){let r=e.length;e.endsWith(",")&&r++,e.endsWith(".")&&(r+=3),o+=e.length+1,t(o),await(0,n.delay)(100*r)}}}},{"base/delay":"hGewO","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"9fV2F":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"PoliteSpeaker",(()=>n));class n{constructor(e){this.speaker=e,this.lastSpoke=new Map}async say(e){const t=this.lastSpoke.get(e),r=Date.now();if(null==t||(r-t)/3e5>Math.random()+.2)return this.lastSpoke.set(e,r),this.speaker.say(e)}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}]},["4zTVb"],"4zTVb","parcelRequirefc40");
//# sourceMappingURL=index.8614d60b.js.map
