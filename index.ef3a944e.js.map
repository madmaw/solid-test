{"mappings":"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","sources":["src/index.tsx","node_modules/solid-js/web/dist/web.js","node_modules/solid-js/dist/solid.js","node_modules/@parcel/transformer-js/src/esmodule-helpers.js","src/components/table/create.tsx","src/components/table/table.tsx","src/components/table/table.module.scss","src/components/table/table_controller.ts","src/model/descriptor/literals.ts","src/model/descriptor/record.ts","src/ui/animation/animation_manager.ts","src/base/delay.ts","src/base/flattened_promise.ts","src/components/book/create.tsx","src/components/book/book.tsx","src/components/book/book.module.scss","src/components/book/book_controller.ts","src/model/descriptor/option.ts","src/model/domain.ts","src/model/descriptor/list.ts","src/model/descriptor/union.ts","src/components/card_slot/create.tsx","src/components/card_slot/card_slot.tsx","src/components/card_slot/card_slot.module.scss","src/rules/interaction_manager.ts","src/base/unreachable_error.ts","src/rules/cards.ts","src/rules/games.ts","src/components/card_slot/card_slots.tsx","src/components/card_slot/card_slots.module.scss","src/components/component_manager.tsx","src/components/card_slot/card_slot_controller.ts","src/components/card/create.tsx","src/components/card/card_controller.ts","src/components/card/card.tsx","src/components/card/card.module.scss","src/components/card/face/card_face.tsx","src/components/card/face/card_face.module.scss","src/components/effect/effect_strip.tsx","src/components/effect/effect_strip.module.scss","src/components/effect/effect.tsx","src/components/effect/effect.module.scss","src/components/card/face/card_face_description.tsx","src/components/card/face/card_face_description.module.scss","src/components/card/face/card_face_name.tsx","src/components/card/face/card_face_name.module.scss","src/components/page/create.tsx","src/components/page/page_controller.ts","src/components/page/page.tsx","src/components/page/toc/page_toc.tsx","src/components/page/blank/page_blank.tsx","src/ui/cutout/cutout.tsx","src/ui/cutout/cutout.module.scss","src/components/page/toc/page_toc.module.scss","src/components/page/room/page_room.tsx","src/components/page/room/page_room.module.scss","src/data/initial.ts","src/data/ruins/cards.ts","src/data/effects.ts","src/components/drag/create.tsx","src/components/drag/drag_overlay.tsx","src/components/drag/drag_overlay.module.scss","src/components/drag/drag_overlay_controller.ts","src/rules/game_manager.ts","src/data/player/initial.ts","src/data/player/cards/might.ts","src/data/player/cards/kick.ts","src/data/player/cards/shield.ts","src/rules/encounters.ts","src/data/rat/initial.ts","src/data/rat/cards.ts","src/components/deck/create.tsx","src/components/deck/deck.tsx","src/components/deck/deck.module.scss","src/components/deck/deck_controller.tsx","src/components/spread/overlay/create.tsx","src/components/spread/overlay/spread_overlay.tsx","src/components/spread/overlay/room/spread_overlay_room.tsx","src/components/spread/overlay/room/spread_overlay_room.module.scss","src/components/spread/overlay/blank/spread_overlay_blank.tsx","src/components/status/create.tsx","src/components/status/status_overlay.tsx","src/components/status/status_overlay.module.scss","src/components/encounter/battle/create.tsx","src/components/entity/create.tsx","src/components/entity/rat/create.tsx","src/components/entity/rigid/create.tsx","src/components/entity/rigid/rigid_entity_controller.ts","src/components/entity/rigid/rigid_entity.tsx","src/components/entity/rigid/rigid_entity.module.scss","src/components/entity/unicode/create.tsx","src/components/entity/unicode/unicode_entity.tsx","src/components/entity/unicode/unicode_entity.module.scss","src/components/encounter/battle/encounter_battle.tsx","src/components/encounter/battle/encounter_battle.module.scss"],"sourcesContent":["import { render } from \"solid-js/web\";\nimport { createTable } from \"components/table/create\";\nimport { View } from \"components/table/table_controller\";\nimport { createBook } from \"components/book/create\";\nimport { createCardSlotManager, createCardSlots } from \"components/card_slot/create\";\nimport { createCardManager } from \"components/card/create\";\nimport { createPageManager } from \"components/page/create\";\nimport { PageSide } from \"components/page/page_controller\";\nimport { initialGame } from \"data/initial\";\nimport { createSpreadOverlay } from \"components/spread/overlay/create\";\nimport { InteractionManager } from \"rules/interaction_manager\";\nimport { createDragOverlay } from \"components/drag/create\";\nimport { GameManager } from \"rules/game_manager\";\nimport { createDeck } from \"components/deck/create\";\nimport { createStatusOverlay } from \"components/status/create\";\nimport { createEncounter } from \"components/encounter/create\";\nimport { createEncounterBattleManger } from \"components/encounter/battle/create\";\nimport { gameEncounterBattle } from \"rules/games\";\nimport { createMemo } from \"solid-js\";\n\nwindow.onload = function () {\n  const app = document.getElementById('app')!;\n  const game = initialGame;\n  const cardManager = createCardManager(game);\n  const leftPageManager = createPageManager({\n    side: PageSide.Left,\n  });\n  const rightPageManager = createPageManager({\n    side: PageSide.Right,\n  });\n\n  const cardSlotManager = createCardSlotManager(\n    cardManager.FactoryComponent,\n    () => interactionManger,\n    game,\n  );\n\n  const {\n    Component: CardSlotsComponent,\n  } = createCardSlots(cardSlotManager.FactoryComponent);\n\n  const {\n    Component: SpreadOverlayComponent,\n  } = createSpreadOverlay({\n    CardSlotsComponent,\n  });\n\n  const StatusOverlayComponent = createStatusOverlay()\n\n  const {\n    Component: BookImpl,\n    controller: bookController,\n  } = createBook({\n    leftPageComponentManager: leftPageManager,\n    rightPageComponentManager: rightPageManager,\n    book: game.book,\n  });\n  const encounterBattleManager = createEncounterBattleManger();\n  const gameManager = new GameManager(game, bookController, cardManager, encounterBattleManager);\n  const interactionManger = new InteractionManager(gameManager, cardManager, cardSlotManager);\n  \n  window.addEventListener('pointermove', e => {\n    interactionManger.lastMousePosition = [e.clientX, e.clientY];\n  });\n\n  const {\n    Component: TableComponent,\n    controller: tableController,\n  } = createTable(interactionManger);\n\n  const onNavigate = async () => {\n    gameManager.nextPage(undefined);\n  };\n\n\n  const {\n    Component: PlayerDeck,\n  } = createDeck(() => game.playerCharacter?.deck, cardManager.FactoryComponent);\n\n  const onClickCover = async () => {\n    await tableController.setView(View.Tilted);\n    // bookController.showSpread(bookSpreadTableOfContentsDescriptor.create({\n    //   type: BookSpreadType.TableOfContents,\n    // }));\n    gameManager.createPlayer();\n    onNavigate();\n  };\n\n  function Hand() {\n    return <CardSlotsComponent model={game.playerHand}/>;\n  }\n\n  function SpreadOverlay() {\n    // <>{}</> is needed to re-render on game.book.spread changing\n    return (\n      <>\n        {\n          game.book.spread && <SpreadOverlayComponent model={game.book.spread}/>\n        }\n      </>\n    );\n  }\n\n  const { Component: DragOverlay } = createDragOverlay(\n    interactionManger,\n    cardManager.FactoryComponent,\n  );\n\n  function Book() {\n    const battle = createMemo(() => gameEncounterBattle(game));\n    return (\n      <BookImpl onClickCover={onClickCover}>\n        {battle() && <encounterBattleManager.FactoryComponent\n            model={battle()!}/>}\n      </BookImpl>\n    );\n  }\n\n  function StatusOverlay() {\n    // <>{}</> is needed to re-render on game.playerCharacter.spread changing\n    return (\n      <>\n        {\n          game.playerCharacter\n              && <StatusOverlayComponent playerCharacter={game.playerCharacter}/>\n        }\n      </>\n    );\n  }\n\n  render(() => (\n      <TableComponent\n          Book={Book}\n          Hand={Hand}\n          Deck={PlayerDeck}\n          SpreadOverlay={SpreadOverlay}\n          StatusOverlay={StatusOverlay}\n          DragOverlay={DragOverlay}\n      />\n  ), app);\n};\n","import { createRoot, createRenderEffect, sharedConfig, untrack, enableHydration, getOwner, createEffect, runWithOwner, createSignal, onCleanup, splitProps, createMemo, $DEVCOMP } from 'solid-js';\nexport { ErrorBoundary, For, Index, Match, Show, Suspense, SuspenseList, Switch, createComponent, createRenderEffect as effect, getOwner, createMemo as memo, mergeProps, untrack } from 'solid-js';\n\nconst booleans = [\"allowfullscreen\", \"async\", \"autofocus\", \"autoplay\", \"checked\", \"controls\", \"default\", \"disabled\", \"formnovalidate\", \"hidden\", \"indeterminate\", \"ismap\", \"loop\", \"multiple\", \"muted\", \"nomodule\", \"novalidate\", \"open\", \"playsinline\", \"readonly\", \"required\", \"reversed\", \"seamless\", \"selected\"];\nconst Properties = /*#__PURE__*/new Set([\"className\", \"value\", \"readOnly\", \"formNoValidate\", \"isMap\", \"noModule\", \"playsInline\", ...booleans]);\nconst ChildProperties = /*#__PURE__*/new Set([\"innerHTML\", \"textContent\", \"innerText\", \"children\"]);\nconst Aliases = /*#__PURE__*/Object.assign(Object.create(null), {\n  className: \"class\",\n  htmlFor: \"for\"\n});\nconst PropAliases = /*#__PURE__*/Object.assign(Object.create(null), {\n  class: \"className\",\n  formnovalidate: {\n    $: \"formNoValidate\",\n    BUTTON: 1,\n    INPUT: 1\n  },\n  ismap: {\n    $: \"isMap\",\n    IMG: 1\n  },\n  nomodule: {\n    $: \"noModule\",\n    SCRIPT: 1\n  },\n  playsinline: {\n    $: \"playsInline\",\n    VIDEO: 1\n  },\n  readonly: {\n    $: \"readOnly\",\n    INPUT: 1,\n    TEXTAREA: 1\n  }\n});\nfunction getPropAlias(prop, tagName) {\n  const a = PropAliases[prop];\n  return typeof a === \"object\" ? a[tagName] ? a[\"$\"] : undefined : a;\n}\nconst DelegatedEvents = /*#__PURE__*/new Set([\"beforeinput\", \"click\", \"dblclick\", \"contextmenu\", \"focusin\", \"focusout\", \"input\", \"keydown\", \"keyup\", \"mousedown\", \"mousemove\", \"mouseout\", \"mouseover\", \"mouseup\", \"pointerdown\", \"pointermove\", \"pointerout\", \"pointerover\", \"pointerup\", \"touchend\", \"touchmove\", \"touchstart\"]);\nconst SVGElements = /*#__PURE__*/new Set([\n\"altGlyph\", \"altGlyphDef\", \"altGlyphItem\", \"animate\", \"animateColor\", \"animateMotion\", \"animateTransform\", \"circle\", \"clipPath\", \"color-profile\", \"cursor\", \"defs\", \"desc\", \"ellipse\", \"feBlend\", \"feColorMatrix\", \"feComponentTransfer\", \"feComposite\", \"feConvolveMatrix\", \"feDiffuseLighting\", \"feDisplacementMap\", \"feDistantLight\", \"feFlood\", \"feFuncA\", \"feFuncB\", \"feFuncG\", \"feFuncR\", \"feGaussianBlur\", \"feImage\", \"feMerge\", \"feMergeNode\", \"feMorphology\", \"feOffset\", \"fePointLight\", \"feSpecularLighting\", \"feSpotLight\", \"feTile\", \"feTurbulence\", \"filter\", \"font\", \"font-face\", \"font-face-format\", \"font-face-name\", \"font-face-src\", \"font-face-uri\", \"foreignObject\", \"g\", \"glyph\", \"glyphRef\", \"hkern\", \"image\", \"line\", \"linearGradient\", \"marker\", \"mask\", \"metadata\", \"missing-glyph\", \"mpath\", \"path\", \"pattern\", \"polygon\", \"polyline\", \"radialGradient\", \"rect\",\n\"set\", \"stop\",\n\"svg\", \"switch\", \"symbol\", \"text\", \"textPath\",\n\"tref\", \"tspan\", \"use\", \"view\", \"vkern\"]);\nconst SVGNamespace = {\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\"\n};\nconst DOMElements = /*#__PURE__*/new Set([\"html\", \"base\", \"head\", \"link\", \"meta\", \"style\", \"title\", \"body\", \"address\", \"article\", \"aside\", \"footer\", \"header\", \"main\", \"nav\", \"section\", \"body\", \"blockquote\", \"dd\", \"div\", \"dl\", \"dt\", \"figcaption\", \"figure\", \"hr\", \"li\", \"ol\", \"p\", \"pre\", \"ul\", \"a\", \"abbr\", \"b\", \"bdi\", \"bdo\", \"br\", \"cite\", \"code\", \"data\", \"dfn\", \"em\", \"i\", \"kbd\", \"mark\", \"q\", \"rp\", \"rt\", \"ruby\", \"s\", \"samp\", \"small\", \"span\", \"strong\", \"sub\", \"sup\", \"time\", \"u\", \"var\", \"wbr\", \"area\", \"audio\", \"img\", \"map\", \"track\", \"video\", \"embed\", \"iframe\", \"object\", \"param\", \"picture\", \"portal\", \"source\", \"svg\", \"math\", \"canvas\", \"noscript\", \"script\", \"del\", \"ins\", \"caption\", \"col\", \"colgroup\", \"table\", \"tbody\", \"td\", \"tfoot\", \"th\", \"thead\", \"tr\", \"button\", \"datalist\", \"fieldset\", \"form\", \"input\", \"label\", \"legend\", \"meter\", \"optgroup\", \"option\", \"output\", \"progress\", \"select\", \"textarea\", \"details\", \"dialog\", \"menu\", \"summary\", \"details\", \"slot\", \"template\", \"acronym\", \"applet\", \"basefont\", \"bgsound\", \"big\", \"blink\", \"center\", \"content\", \"dir\", \"font\", \"frame\", \"frameset\", \"hgroup\", \"image\", \"keygen\", \"marquee\", \"menuitem\", \"nobr\", \"noembed\", \"noframes\", \"plaintext\", \"rb\", \"rtc\", \"shadow\", \"spacer\", \"strike\", \"tt\", \"xmp\", \"a\", \"abbr\", \"acronym\", \"address\", \"applet\", \"area\", \"article\", \"aside\", \"audio\", \"b\", \"base\", \"basefont\", \"bdi\", \"bdo\", \"bgsound\", \"big\", \"blink\", \"blockquote\", \"body\", \"br\", \"button\", \"canvas\", \"caption\", \"center\", \"cite\", \"code\", \"col\", \"colgroup\", \"content\", \"data\", \"datalist\", \"dd\", \"del\", \"details\", \"dfn\", \"dialog\", \"dir\", \"div\", \"dl\", \"dt\", \"em\", \"embed\", \"fieldset\", \"figcaption\", \"figure\", \"font\", \"footer\", \"form\", \"frame\", \"frameset\", \"head\", \"header\", \"hgroup\", \"hr\", \"html\", \"i\", \"iframe\", \"image\", \"img\", \"input\", \"ins\", \"kbd\", \"keygen\", \"label\", \"legend\", \"li\", \"link\", \"main\", \"map\", \"mark\", \"marquee\", \"menu\", \"menuitem\", \"meta\", \"meter\", \"nav\", \"nobr\", \"noembed\", \"noframes\", \"noscript\", \"object\", \"ol\", \"optgroup\", \"option\", \"output\", \"p\", \"param\", \"picture\", \"plaintext\", \"portal\", \"pre\", \"progress\", \"q\", \"rb\", \"rp\", \"rt\", \"rtc\", \"ruby\", \"s\", \"samp\", \"script\", \"section\", \"select\", \"shadow\", \"slot\", \"small\", \"source\", \"spacer\", \"span\", \"strike\", \"strong\", \"style\", \"sub\", \"summary\", \"sup\", \"table\", \"tbody\", \"td\", \"template\", \"textarea\", \"tfoot\", \"th\", \"thead\", \"time\", \"title\", \"tr\", \"track\", \"tt\", \"u\", \"ul\", \"var\", \"video\", \"wbr\", \"xmp\", \"input\"]);\n\nfunction reconcileArrays(parentNode, a, b) {\n  let bLength = b.length,\n    aEnd = a.length,\n    bEnd = bLength,\n    aStart = 0,\n    bStart = 0,\n    after = a[aEnd - 1].nextSibling,\n    map = null;\n  while (aStart < aEnd || bStart < bEnd) {\n    if (a[aStart] === b[bStart]) {\n      aStart++;\n      bStart++;\n      continue;\n    }\n    while (a[aEnd - 1] === b[bEnd - 1]) {\n      aEnd--;\n      bEnd--;\n    }\n    if (aEnd === aStart) {\n      const node = bEnd < bLength ? bStart ? b[bStart - 1].nextSibling : b[bEnd - bStart] : after;\n      while (bStart < bEnd) parentNode.insertBefore(b[bStart++], node);\n    } else if (bEnd === bStart) {\n      while (aStart < aEnd) {\n        if (!map || !map.has(a[aStart])) a[aStart].remove();\n        aStart++;\n      }\n    } else if (a[aStart] === b[bEnd - 1] && b[bStart] === a[aEnd - 1]) {\n      const node = a[--aEnd].nextSibling;\n      parentNode.insertBefore(b[bStart++], a[aStart++].nextSibling);\n      parentNode.insertBefore(b[--bEnd], node);\n      a[aEnd] = b[bEnd];\n    } else {\n      if (!map) {\n        map = new Map();\n        let i = bStart;\n        while (i < bEnd) map.set(b[i], i++);\n      }\n      const index = map.get(a[aStart]);\n      if (index != null) {\n        if (bStart < index && index < bEnd) {\n          let i = aStart,\n            sequence = 1,\n            t;\n          while (++i < aEnd && i < bEnd) {\n            if ((t = map.get(a[i])) == null || t !== index + sequence) break;\n            sequence++;\n          }\n          if (sequence > index - bStart) {\n            const node = a[aStart];\n            while (bStart < index) parentNode.insertBefore(b[bStart++], node);\n          } else parentNode.replaceChild(b[bStart++], a[aStart++]);\n        } else aStart++;\n      } else a[aStart++].remove();\n    }\n  }\n}\n\nconst $$EVENTS = \"_$DX_DELEGATE\";\nfunction render(code, element, init, options = {}) {\n  let disposer;\n  createRoot(dispose => {\n    disposer = dispose;\n    element === document ? code() : insert(element, code(), element.firstChild ? null : undefined, init);\n  }, options.owner);\n  return () => {\n    disposer();\n    element.textContent = \"\";\n  };\n}\nfunction template(html, isCE, isSVG) {\n  let node;\n  const create = () => {\n    const t = document.createElement(\"template\");\n    t.innerHTML = html;\n    return isSVG ? t.content.firstChild.firstChild : t.content.firstChild;\n  };\n  const fn = isCE ? () => (node || (node = create())).cloneNode(true) : () => untrack(() => document.importNode(node || (node = create()), true));\n  fn.cloneNode = fn;\n  return fn;\n}\nfunction delegateEvents(eventNames, document = window.document) {\n  const e = document[$$EVENTS] || (document[$$EVENTS] = new Set());\n  for (let i = 0, l = eventNames.length; i < l; i++) {\n    const name = eventNames[i];\n    if (!e.has(name)) {\n      e.add(name);\n      document.addEventListener(name, eventHandler);\n    }\n  }\n}\nfunction clearDelegatedEvents(document = window.document) {\n  if (document[$$EVENTS]) {\n    for (let name of document[$$EVENTS].keys()) document.removeEventListener(name, eventHandler);\n    delete document[$$EVENTS];\n  }\n}\nfunction setAttribute(node, name, value) {\n  if (value == null) node.removeAttribute(name);else node.setAttribute(name, value);\n}\nfunction setAttributeNS(node, namespace, name, value) {\n  if (value == null) node.removeAttributeNS(namespace, name);else node.setAttributeNS(namespace, name, value);\n}\nfunction className(node, value) {\n  if (value == null) node.removeAttribute(\"class\");else node.className = value;\n}\nfunction addEventListener(node, name, handler, delegate) {\n  if (delegate) {\n    if (Array.isArray(handler)) {\n      node[`$$${name}`] = handler[0];\n      node[`$$${name}Data`] = handler[1];\n    } else node[`$$${name}`] = handler;\n  } else if (Array.isArray(handler)) {\n    const handlerFn = handler[0];\n    node.addEventListener(name, handler[0] = e => handlerFn.call(node, handler[1], e));\n  } else node.addEventListener(name, handler);\n}\nfunction classList(node, value, prev = {}) {\n  const classKeys = Object.keys(value || {}),\n    prevKeys = Object.keys(prev);\n  let i, len;\n  for (i = 0, len = prevKeys.length; i < len; i++) {\n    const key = prevKeys[i];\n    if (!key || key === \"undefined\" || value[key]) continue;\n    toggleClassKey(node, key, false);\n    delete prev[key];\n  }\n  for (i = 0, len = classKeys.length; i < len; i++) {\n    const key = classKeys[i],\n      classValue = !!value[key];\n    if (!key || key === \"undefined\" || prev[key] === classValue || !classValue) continue;\n    toggleClassKey(node, key, true);\n    prev[key] = classValue;\n  }\n  return prev;\n}\nfunction style(node, value, prev) {\n  if (!value) return prev ? setAttribute(node, \"style\") : value;\n  const nodeStyle = node.style;\n  if (typeof value === \"string\") return nodeStyle.cssText = value;\n  typeof prev === \"string\" && (nodeStyle.cssText = prev = undefined);\n  prev || (prev = {});\n  value || (value = {});\n  let v, s;\n  for (s in prev) {\n    value[s] == null && nodeStyle.removeProperty(s);\n    delete prev[s];\n  }\n  for (s in value) {\n    v = value[s];\n    if (v !== prev[s]) {\n      nodeStyle.setProperty(s, v);\n      prev[s] = v;\n    }\n  }\n  return prev;\n}\nfunction spread(node, props = {}, isSVG, skipChildren) {\n  const prevProps = {};\n  if (!skipChildren) {\n    createRenderEffect(() => prevProps.children = insertExpression(node, props.children, prevProps.children));\n  }\n  createRenderEffect(() => props.ref && props.ref(node));\n  createRenderEffect(() => assign(node, props, isSVG, true, prevProps, true));\n  return prevProps;\n}\nfunction dynamicProperty(props, key) {\n  const src = props[key];\n  Object.defineProperty(props, key, {\n    get() {\n      return src();\n    },\n    enumerable: true\n  });\n  return props;\n}\nfunction innerHTML(parent, content) {\n  !sharedConfig.context && (parent.innerHTML = content);\n}\nfunction use(fn, element, arg) {\n  return untrack(() => fn(element, arg));\n}\nfunction insert(parent, accessor, marker, initial) {\n  if (marker !== undefined && !initial) initial = [];\n  if (typeof accessor !== \"function\") return insertExpression(parent, accessor, initial, marker);\n  createRenderEffect(current => insertExpression(parent, accessor(), current, marker), initial);\n}\nfunction assign(node, props, isSVG, skipChildren, prevProps = {}, skipRef = false) {\n  props || (props = {});\n  for (const prop in prevProps) {\n    if (!(prop in props)) {\n      if (prop === \"children\") continue;\n      prevProps[prop] = assignProp(node, prop, null, prevProps[prop], isSVG, skipRef);\n    }\n  }\n  for (const prop in props) {\n    if (prop === \"children\") {\n      if (!skipChildren) insertExpression(node, props.children);\n      continue;\n    }\n    const value = props[prop];\n    prevProps[prop] = assignProp(node, prop, value, prevProps[prop], isSVG, skipRef);\n  }\n}\nfunction hydrate$1(code, element, options = {}) {\n  sharedConfig.completed = globalThis._$HY.completed;\n  sharedConfig.events = globalThis._$HY.events;\n  sharedConfig.load = globalThis._$HY.load;\n  sharedConfig.gather = root => gatherHydratable(element, root);\n  sharedConfig.registry = new Map();\n  sharedConfig.context = {\n    id: options.renderId || \"\",\n    count: 0\n  };\n  gatherHydratable(element, options.renderId);\n  const dispose = render(code, element, [...element.childNodes], options);\n  sharedConfig.context = null;\n  return dispose;\n}\nfunction getNextElement(template) {\n  let node, key;\n  if (!sharedConfig.context || !(node = sharedConfig.registry.get(key = getHydrationKey()))) {\n    if (sharedConfig.context) console.warn(\"Unable to find DOM nodes for hydration key:\", key);\n    if (!template) throw new Error(\"Unrecoverable Hydration Mismatch. No template for key: \" + key);\n    return template();\n  }\n  if (sharedConfig.completed) sharedConfig.completed.add(node);\n  sharedConfig.registry.delete(key);\n  return node;\n}\nfunction getNextMatch(el, nodeName) {\n  while (el && el.localName !== nodeName) el = el.nextSibling;\n  return el;\n}\nfunction getNextMarker(start) {\n  let end = start,\n    count = 0,\n    current = [];\n  if (sharedConfig.context) {\n    while (end) {\n      if (end.nodeType === 8) {\n        const v = end.nodeValue;\n        if (v === \"#\") count++;else if (v === \"/\") {\n          if (count === 0) return [end, current];\n          count--;\n        }\n      }\n      current.push(end);\n      end = end.nextSibling;\n    }\n  }\n  return [end, current];\n}\nfunction runHydrationEvents() {\n  if (sharedConfig.events && !sharedConfig.events.queued) {\n    queueMicrotask(() => {\n      const {\n        completed,\n        events\n      } = sharedConfig;\n      events.queued = false;\n      while (events.length) {\n        const [el, e] = events[0];\n        if (!completed.has(el)) return;\n        eventHandler(e);\n        events.shift();\n      }\n    });\n    sharedConfig.events.queued = true;\n  }\n}\nfunction toPropertyName(name) {\n  return name.toLowerCase().replace(/-([a-z])/g, (_, w) => w.toUpperCase());\n}\nfunction toggleClassKey(node, key, value) {\n  const classNames = key.trim().split(/\\s+/);\n  for (let i = 0, nameLen = classNames.length; i < nameLen; i++) node.classList.toggle(classNames[i], value);\n}\nfunction assignProp(node, prop, value, prev, isSVG, skipRef) {\n  let isCE, isProp, isChildProp, propAlias, forceProp;\n  if (prop === \"style\") return style(node, value, prev);\n  if (prop === \"classList\") return classList(node, value, prev);\n  if (value === prev) return prev;\n  if (prop === \"ref\") {\n    if (!skipRef) value(node);\n  } else if (prop.slice(0, 3) === \"on:\") {\n    const e = prop.slice(3);\n    prev && node.removeEventListener(e, prev);\n    value && node.addEventListener(e, value);\n  } else if (prop.slice(0, 10) === \"oncapture:\") {\n    const e = prop.slice(10);\n    prev && node.removeEventListener(e, prev, true);\n    value && node.addEventListener(e, value, true);\n  } else if (prop.slice(0, 2) === \"on\") {\n    const name = prop.slice(2).toLowerCase();\n    const delegate = DelegatedEvents.has(name);\n    if (!delegate && prev) {\n      const h = Array.isArray(prev) ? prev[0] : prev;\n      node.removeEventListener(name, h);\n    }\n    if (delegate || value) {\n      addEventListener(node, name, value, delegate);\n      delegate && delegateEvents([name]);\n    }\n  } else if (prop.slice(0, 5) === \"attr:\") {\n    setAttribute(node, prop.slice(5), value);\n  } else if ((forceProp = prop.slice(0, 5) === \"prop:\") || (isChildProp = ChildProperties.has(prop)) || !isSVG && ((propAlias = getPropAlias(prop, node.tagName)) || (isProp = Properties.has(prop))) || (isCE = node.nodeName.includes(\"-\"))) {\n    if (forceProp) {\n      prop = prop.slice(5);\n      isProp = true;\n    }\n    if (prop === \"class\" || prop === \"className\") className(node, value);else if (isCE && !isProp && !isChildProp) node[toPropertyName(prop)] = value;else node[propAlias || prop] = value;\n  } else {\n    const ns = isSVG && prop.indexOf(\":\") > -1 && SVGNamespace[prop.split(\":\")[0]];\n    if (ns) setAttributeNS(node, ns, prop, value);else setAttribute(node, Aliases[prop] || prop, value);\n  }\n  return value;\n}\nfunction eventHandler(e) {\n  const key = `$$${e.type}`;\n  let node = e.composedPath && e.composedPath()[0] || e.target;\n  if (e.target !== node) {\n    Object.defineProperty(e, \"target\", {\n      configurable: true,\n      value: node\n    });\n  }\n  Object.defineProperty(e, \"currentTarget\", {\n    configurable: true,\n    get() {\n      return node || document;\n    }\n  });\n  if (sharedConfig.registry && !sharedConfig.done) sharedConfig.done = _$HY.done = true;\n  while (node) {\n    const handler = node[key];\n    if (handler && !node.disabled) {\n      const data = node[`${key}Data`];\n      data !== undefined ? handler.call(node, data, e) : handler.call(node, e);\n      if (e.cancelBubble) return;\n    }\n    node = node._$host || node.parentNode || node.host;\n  }\n}\nfunction insertExpression(parent, value, current, marker, unwrapArray) {\n  if (sharedConfig.context) {\n    !current && (current = [...parent.childNodes]);\n    let cleaned = [];\n    for (let i = 0; i < current.length; i++) {\n      const node = current[i];\n      if (node.nodeType === 8 && node.data.slice(0, 2) === \"!$\") node.remove();else cleaned.push(node);\n    }\n    current = cleaned;\n  }\n  while (typeof current === \"function\") current = current();\n  if (value === current) return current;\n  const t = typeof value,\n    multi = marker !== undefined;\n  parent = multi && current[0] && current[0].parentNode || parent;\n  if (t === \"string\" || t === \"number\") {\n    if (sharedConfig.context) return current;\n    if (t === \"number\") value = value.toString();\n    if (multi) {\n      let node = current[0];\n      if (node && node.nodeType === 3) {\n        node.data = value;\n      } else node = document.createTextNode(value);\n      current = cleanChildren(parent, current, marker, node);\n    } else {\n      if (current !== \"\" && typeof current === \"string\") {\n        current = parent.firstChild.data = value;\n      } else current = parent.textContent = value;\n    }\n  } else if (value == null || t === \"boolean\") {\n    if (sharedConfig.context) return current;\n    current = cleanChildren(parent, current, marker);\n  } else if (t === \"function\") {\n    createRenderEffect(() => {\n      let v = value();\n      while (typeof v === \"function\") v = v();\n      current = insertExpression(parent, v, current, marker);\n    });\n    return () => current;\n  } else if (Array.isArray(value)) {\n    const array = [];\n    const currentArray = current && Array.isArray(current);\n    if (normalizeIncomingArray(array, value, current, unwrapArray)) {\n      createRenderEffect(() => current = insertExpression(parent, array, current, marker, true));\n      return () => current;\n    }\n    if (sharedConfig.context) {\n      if (!array.length) return current;\n      for (let i = 0; i < array.length; i++) {\n        if (array[i].parentNode) return current = array;\n      }\n    }\n    if (array.length === 0) {\n      current = cleanChildren(parent, current, marker);\n      if (multi) return current;\n    } else if (currentArray) {\n      if (current.length === 0) {\n        appendNodes(parent, array, marker);\n      } else reconcileArrays(parent, current, array);\n    } else {\n      current && cleanChildren(parent);\n      appendNodes(parent, array);\n    }\n    current = array;\n  } else if (value instanceof Node) {\n    if (sharedConfig.context && value.parentNode) return current = multi ? [value] : value;\n    if (Array.isArray(current)) {\n      if (multi) return current = cleanChildren(parent, current, marker, value);\n      cleanChildren(parent, current, null, value);\n    } else if (current == null || current === \"\" || !parent.firstChild) {\n      parent.appendChild(value);\n    } else parent.replaceChild(value, parent.firstChild);\n    current = value;\n  } else console.warn(`Unrecognized value. Skipped inserting`, value);\n  return current;\n}\nfunction normalizeIncomingArray(normalized, array, current, unwrap) {\n  let dynamic = false;\n  for (let i = 0, len = array.length; i < len; i++) {\n    let item = array[i],\n      prev = current && current[i];\n    if (item instanceof Node) {\n      normalized.push(item);\n    } else if (item == null || item === true || item === false) ; else if (Array.isArray(item)) {\n      dynamic = normalizeIncomingArray(normalized, item, prev) || dynamic;\n    } else if ((typeof item) === \"function\") {\n      if (unwrap) {\n        while (typeof item === \"function\") item = item();\n        dynamic = normalizeIncomingArray(normalized, Array.isArray(item) ? item : [item], Array.isArray(prev) ? prev : [prev]) || dynamic;\n      } else {\n        normalized.push(item);\n        dynamic = true;\n      }\n    } else {\n      const value = String(item);\n      if (prev && prev.nodeType === 3) {\n        prev.data = value;\n        normalized.push(prev);\n      } else normalized.push(document.createTextNode(value));\n    }\n  }\n  return dynamic;\n}\nfunction appendNodes(parent, array, marker = null) {\n  for (let i = 0, len = array.length; i < len; i++) parent.insertBefore(array[i], marker);\n}\nfunction cleanChildren(parent, current, marker, replacement) {\n  if (marker === undefined) return parent.textContent = \"\";\n  const node = replacement || document.createTextNode(\"\");\n  if (current.length) {\n    let inserted = false;\n    for (let i = current.length - 1; i >= 0; i--) {\n      const el = current[i];\n      if (node !== el) {\n        const isParent = el.parentNode === parent;\n        if (!inserted && !i) isParent ? parent.replaceChild(node, el) : parent.insertBefore(node, marker);else isParent && el.remove();\n      } else inserted = true;\n    }\n  } else parent.insertBefore(node, marker);\n  return [node];\n}\nfunction gatherHydratable(element, root) {\n  const templates = element.querySelectorAll(`*[data-hk]`);\n  for (let i = 0; i < templates.length; i++) {\n    const node = templates[i];\n    const key = node.getAttribute(\"data-hk\");\n    if ((!root || key.startsWith(root)) && !sharedConfig.registry.has(key)) sharedConfig.registry.set(key, node);\n  }\n}\nfunction getHydrationKey() {\n  const hydrate = sharedConfig.context;\n  return `${hydrate.id}${hydrate.count++}`;\n}\nfunction NoHydration(props) {\n  return sharedConfig.context ? undefined : props.children;\n}\nfunction Hydration(props) {\n  return props.children;\n}\nfunction voidFn() {}\n\nfunction throwInBrowser(func) {\n  const err = new Error(`${func.name} is not supported in the browser, returning undefined`);\n  console.error(err);\n}\nfunction renderToString(fn, options) {\n  throwInBrowser(renderToString);\n}\nfunction renderToStringAsync(fn, options) {\n  throwInBrowser(renderToStringAsync);\n}\nfunction renderToStream(fn, options) {\n  throwInBrowser(renderToStream);\n}\nfunction ssr(template, ...nodes) {}\nfunction ssrElement(name, props, children, needsId) {}\nfunction ssrClassList(value) {}\nfunction ssrStyle(value) {}\nfunction ssrAttribute(key, value) {}\nfunction ssrHydrationKey() {}\nfunction resolveSSRNode(node) {}\nfunction escape(html) {}\nfunction ssrSpread(props, isSVG, skipChildren) {}\n\nconst isServer = false;\nconst isDev = false;\nconst SVG_NAMESPACE = \"http://www.w3.org/2000/svg\";\nfunction createElement(tagName, isSVG = false) {\n  return isSVG ? document.createElementNS(SVG_NAMESPACE, tagName) : document.createElement(tagName);\n}\nconst hydrate = (...args) => {\n  enableHydration();\n  return hydrate$1(...args);\n};\nfunction Portal(props) {\n  const {\n      useShadow\n    } = props,\n    marker = document.createTextNode(\"\"),\n    mount = () => props.mount || document.body,\n    owner = getOwner();\n  let content;\n  let hydrating = !!sharedConfig.context;\n  createEffect(() => {\n    if (hydrating) getOwner().user = hydrating = false;\n    content || (content = runWithOwner(owner, () => props.children));\n    const el = mount();\n    if (el instanceof HTMLHeadElement) {\n      const [clean, setClean] = createSignal(false);\n      const cleanup = () => setClean(true);\n      createRoot(dispose => insert(el, () => !clean() ? content : dispose(), null));\n      onCleanup(cleanup);\n    } else {\n      const container = createElement(props.isSVG ? \"g\" : \"div\", props.isSVG),\n        renderRoot = useShadow && container.attachShadow ? container.attachShadow({\n          mode: \"open\"\n        }) : container;\n      Object.defineProperty(container, \"_$host\", {\n        get() {\n          return marker.parentNode;\n        },\n        configurable: true\n      });\n      insert(renderRoot, content);\n      el.appendChild(container);\n      props.ref && props.ref(container);\n      onCleanup(() => el.removeChild(container));\n    }\n  }, undefined, {\n    render: !hydrating\n  });\n  return marker;\n}\nfunction Dynamic(props) {\n  const [p, others] = splitProps(props, [\"component\"]);\n  const cached = createMemo(() => p.component);\n  return createMemo(() => {\n    const component = cached();\n    switch (typeof component) {\n      case \"function\":\n        Object.assign(component, {\n          [$DEVCOMP]: true\n        });\n        return untrack(() => component(others));\n      case \"string\":\n        const isSvg = SVGElements.has(component);\n        const el = sharedConfig.context ? getNextElement() : createElement(component, isSvg);\n        spread(el, others, isSvg);\n        return el;\n    }\n  });\n}\n\nexport { Aliases, voidFn as Assets, ChildProperties, DOMElements, DelegatedEvents, Dynamic, Hydration, voidFn as HydrationScript, NoHydration, Portal, Properties, SVGElements, SVGNamespace, addEventListener, assign, classList, className, clearDelegatedEvents, delegateEvents, dynamicProperty, escape, voidFn as generateHydrationScript, voidFn as getAssets, getHydrationKey, getNextElement, getNextMarker, getNextMatch, getPropAlias, hydrate, innerHTML, insert, isDev, isServer, render, renderToStream, renderToString, renderToStringAsync, resolveSSRNode, runHydrationEvents, setAttribute, setAttributeNS, spread, ssr, ssrAttribute, ssrClassList, ssrElement, ssrHydrationKey, ssrSpread, ssrStyle, style, template, use, voidFn as useAssets };\n","let taskIdCounter = 1,\n  isCallbackScheduled = false,\n  isPerformingWork = false,\n  taskQueue = [],\n  currentTask = null,\n  shouldYieldToHost = null,\n  yieldInterval = 5,\n  deadline = 0,\n  maxYieldInterval = 300,\n  scheduleCallback = null,\n  scheduledCallback = null;\nconst maxSigned31BitInt = 1073741823;\nfunction setupScheduler() {\n  const channel = new MessageChannel(),\n    port = channel.port2;\n  scheduleCallback = () => port.postMessage(null);\n  channel.port1.onmessage = () => {\n    if (scheduledCallback !== null) {\n      const currentTime = performance.now();\n      deadline = currentTime + yieldInterval;\n      const hasTimeRemaining = true;\n      try {\n        const hasMoreWork = scheduledCallback(hasTimeRemaining, currentTime);\n        if (!hasMoreWork) {\n          scheduledCallback = null;\n        } else port.postMessage(null);\n      } catch (error) {\n        port.postMessage(null);\n        throw error;\n      }\n    }\n  };\n  if (navigator && navigator.scheduling && navigator.scheduling.isInputPending) {\n    const scheduling = navigator.scheduling;\n    shouldYieldToHost = () => {\n      const currentTime = performance.now();\n      if (currentTime >= deadline) {\n        if (scheduling.isInputPending()) {\n          return true;\n        }\n        return currentTime >= maxYieldInterval;\n      } else {\n        return false;\n      }\n    };\n  } else {\n    shouldYieldToHost = () => performance.now() >= deadline;\n  }\n}\nfunction enqueue(taskQueue, task) {\n  function findIndex() {\n    let m = 0;\n    let n = taskQueue.length - 1;\n    while (m <= n) {\n      const k = n + m >> 1;\n      const cmp = task.expirationTime - taskQueue[k].expirationTime;\n      if (cmp > 0) m = k + 1;else if (cmp < 0) n = k - 1;else return k;\n    }\n    return m;\n  }\n  taskQueue.splice(findIndex(), 0, task);\n}\nfunction requestCallback(fn, options) {\n  if (!scheduleCallback) setupScheduler();\n  let startTime = performance.now(),\n    timeout = maxSigned31BitInt;\n  if (options && options.timeout) timeout = options.timeout;\n  const newTask = {\n    id: taskIdCounter++,\n    fn,\n    startTime,\n    expirationTime: startTime + timeout\n  };\n  enqueue(taskQueue, newTask);\n  if (!isCallbackScheduled && !isPerformingWork) {\n    isCallbackScheduled = true;\n    scheduledCallback = flushWork;\n    scheduleCallback();\n  }\n  return newTask;\n}\nfunction cancelCallback(task) {\n  task.fn = null;\n}\nfunction flushWork(hasTimeRemaining, initialTime) {\n  isCallbackScheduled = false;\n  isPerformingWork = true;\n  try {\n    return workLoop(hasTimeRemaining, initialTime);\n  } finally {\n    currentTask = null;\n    isPerformingWork = false;\n  }\n}\nfunction workLoop(hasTimeRemaining, initialTime) {\n  let currentTime = initialTime;\n  currentTask = taskQueue[0] || null;\n  while (currentTask !== null) {\n    if (currentTask.expirationTime > currentTime && (!hasTimeRemaining || shouldYieldToHost())) {\n      break;\n    }\n    const callback = currentTask.fn;\n    if (callback !== null) {\n      currentTask.fn = null;\n      const didUserCallbackTimeout = currentTask.expirationTime <= currentTime;\n      callback(didUserCallbackTimeout);\n      currentTime = performance.now();\n      if (currentTask === taskQueue[0]) {\n        taskQueue.shift();\n      }\n    } else taskQueue.shift();\n    currentTask = taskQueue[0] || null;\n  }\n  return currentTask !== null;\n}\n\nconst sharedConfig = {\n  context: undefined,\n  registry: undefined\n};\nfunction setHydrateContext(context) {\n  sharedConfig.context = context;\n}\nfunction nextHydrateContext() {\n  return {\n    ...sharedConfig.context,\n    id: `${sharedConfig.context.id}${sharedConfig.context.count++}-`,\n    count: 0\n  };\n}\n\nconst equalFn = (a, b) => a === b;\nconst $PROXY = Symbol(\"solid-proxy\");\nconst $TRACK = Symbol(\"solid-track\");\nconst $DEVCOMP = Symbol(\"solid-dev-component\");\nconst signalOptions = {\n  equals: equalFn\n};\nlet ERROR = null;\nlet runEffects = runQueue;\nconst STALE = 1;\nconst PENDING = 2;\nconst UNOWNED = {\n  owned: null,\n  cleanups: null,\n  context: null,\n  owner: null\n};\nconst NO_INIT = {};\nvar Owner = null;\nlet Transition = null;\nlet Scheduler = null;\nlet ExternalSourceFactory = null;\nlet Listener = null;\nlet Updates = null;\nlet Effects = null;\nlet ExecCount = 0;\nconst [transPending, setTransPending] = /*@__PURE__*/createSignal(false);\nfunction createRoot(fn, detachedOwner) {\n  const listener = Listener,\n    owner = Owner,\n    unowned = fn.length === 0,\n    root = unowned ? UNOWNED : {\n      owned: null,\n      cleanups: null,\n      context: null,\n      owner: detachedOwner === undefined ? owner : detachedOwner\n    },\n    updateFn = unowned ? fn : () => fn(() => untrack(() => cleanNode(root)));\n  Owner = root;\n  Listener = null;\n  try {\n    return runUpdates(updateFn, true);\n  } finally {\n    Listener = listener;\n    Owner = owner;\n  }\n}\nfunction createSignal(value, options) {\n  options = options ? Object.assign({}, signalOptions, options) : signalOptions;\n  const s = {\n    value,\n    observers: null,\n    observerSlots: null,\n    comparator: options.equals || undefined\n  };\n  const setter = value => {\n    if (typeof value === \"function\") {\n      if (Transition && Transition.running && Transition.sources.has(s)) value = value(s.tValue);else value = value(s.value);\n    }\n    return writeSignal(s, value);\n  };\n  return [readSignal.bind(s), setter];\n}\nfunction createComputed(fn, value, options) {\n  const c = createComputation(fn, value, true, STALE);\n  if (Scheduler && Transition && Transition.running) Updates.push(c);else updateComputation(c);\n}\nfunction createRenderEffect(fn, value, options) {\n  const c = createComputation(fn, value, false, STALE);\n  if (Scheduler && Transition && Transition.running) Updates.push(c);else updateComputation(c);\n}\nfunction createEffect(fn, value, options) {\n  runEffects = runUserEffects;\n  const c = createComputation(fn, value, false, STALE),\n    s = SuspenseContext && lookup(Owner, SuspenseContext.id);\n  if (s) c.suspense = s;\n  if (!options || !options.render) c.user = true;\n  Effects ? Effects.push(c) : updateComputation(c);\n}\nfunction createReaction(onInvalidate, options) {\n  let fn;\n  const c = createComputation(() => {\n      fn ? fn() : untrack(onInvalidate);\n      fn = undefined;\n    }, undefined, false, 0),\n    s = SuspenseContext && lookup(Owner, SuspenseContext.id);\n  if (s) c.suspense = s;\n  c.user = true;\n  return tracking => {\n    fn = tracking;\n    updateComputation(c);\n  };\n}\nfunction createMemo(fn, value, options) {\n  options = options ? Object.assign({}, signalOptions, options) : signalOptions;\n  const c = createComputation(fn, value, true, 0);\n  c.observers = null;\n  c.observerSlots = null;\n  c.comparator = options.equals || undefined;\n  if (Scheduler && Transition && Transition.running) {\n    c.tState = STALE;\n    Updates.push(c);\n  } else updateComputation(c);\n  return readSignal.bind(c);\n}\nfunction createResource(pSource, pFetcher, pOptions) {\n  let source;\n  let fetcher;\n  let options;\n  if (arguments.length === 2 && typeof pFetcher === \"object\" || arguments.length === 1) {\n    source = true;\n    fetcher = pSource;\n    options = pFetcher || {};\n  } else {\n    source = pSource;\n    fetcher = pFetcher;\n    options = pOptions || {};\n  }\n  let pr = null,\n    initP = NO_INIT,\n    id = null,\n    loadedUnderTransition = false,\n    scheduled = false,\n    resolved = (\"initialValue\" in options),\n    dynamic = typeof source === \"function\" && createMemo(source);\n  const contexts = new Set(),\n    [value, setValue] = (options.storage || createSignal)(options.initialValue),\n    [error, setError] = createSignal(undefined),\n    [track, trigger] = createSignal(undefined, {\n      equals: false\n    }),\n    [state, setState] = createSignal(resolved ? \"ready\" : \"unresolved\");\n  if (sharedConfig.context) {\n    id = `${sharedConfig.context.id}${sharedConfig.context.count++}`;\n    let v;\n    if (options.ssrLoadFrom === \"initial\") initP = options.initialValue;else if (sharedConfig.load && (v = sharedConfig.load(id))) initP = v[0];\n  }\n  function loadEnd(p, v, error, key) {\n    if (pr === p) {\n      pr = null;\n      resolved = true;\n      if ((p === initP || v === initP) && options.onHydrated) queueMicrotask(() => options.onHydrated(key, {\n        value: v\n      }));\n      initP = NO_INIT;\n      if (Transition && p && loadedUnderTransition) {\n        Transition.promises.delete(p);\n        loadedUnderTransition = false;\n        runUpdates(() => {\n          Transition.running = true;\n          completeLoad(v, error);\n        }, false);\n      } else completeLoad(v, error);\n    }\n    return v;\n  }\n  function completeLoad(v, err) {\n    runUpdates(() => {\n      if (err === undefined) setValue(() => v);\n      setState(err !== undefined ? \"errored\" : \"ready\");\n      setError(err);\n      for (const c of contexts.keys()) c.decrement();\n      contexts.clear();\n    }, false);\n  }\n  function read() {\n    const c = SuspenseContext && lookup(Owner, SuspenseContext.id),\n      v = value(),\n      err = error();\n    if (err !== undefined && !pr) throw err;\n    if (Listener && !Listener.user && c) {\n      createComputed(() => {\n        track();\n        if (pr) {\n          if (c.resolved && Transition && loadedUnderTransition) Transition.promises.add(pr);else if (!contexts.has(c)) {\n            c.increment();\n            contexts.add(c);\n          }\n        }\n      });\n    }\n    return v;\n  }\n  function load(refetching = true) {\n    if (refetching !== false && scheduled) return;\n    scheduled = false;\n    const lookup = dynamic ? dynamic() : source;\n    loadedUnderTransition = Transition && Transition.running;\n    if (lookup == null || lookup === false) {\n      loadEnd(pr, untrack(value));\n      return;\n    }\n    if (Transition && pr) Transition.promises.delete(pr);\n    const p = initP !== NO_INIT ? initP : untrack(() => fetcher(lookup, {\n      value: value(),\n      refetching\n    }));\n    if (typeof p !== \"object\" || !(p && \"then\" in p)) {\n      loadEnd(pr, p, undefined, lookup);\n      return p;\n    }\n    pr = p;\n    scheduled = true;\n    queueMicrotask(() => scheduled = false);\n    runUpdates(() => {\n      setState(resolved ? \"refreshing\" : \"pending\");\n      trigger();\n    }, false);\n    return p.then(v => loadEnd(p, v, undefined, lookup), e => loadEnd(p, undefined, castError(e), lookup));\n  }\n  Object.defineProperties(read, {\n    state: {\n      get: () => state()\n    },\n    error: {\n      get: () => error()\n    },\n    loading: {\n      get() {\n        const s = state();\n        return s === \"pending\" || s === \"refreshing\";\n      }\n    },\n    latest: {\n      get() {\n        if (!resolved) return read();\n        const err = error();\n        if (err && !pr) throw err;\n        return value();\n      }\n    }\n  });\n  if (dynamic) createComputed(() => load(false));else load(false);\n  return [read, {\n    refetch: load,\n    mutate: setValue\n  }];\n}\nfunction createDeferred(source, options) {\n  let t,\n    timeout = options ? options.timeoutMs : undefined;\n  const node = createComputation(() => {\n    if (!t || !t.fn) t = requestCallback(() => setDeferred(() => node.value), timeout !== undefined ? {\n      timeout\n    } : undefined);\n    return source();\n  }, undefined, true);\n  const [deferred, setDeferred] = createSignal(node.value, options);\n  updateComputation(node);\n  setDeferred(() => node.value);\n  return deferred;\n}\nfunction createSelector(source, fn = equalFn, options) {\n  const subs = new Map();\n  const node = createComputation(p => {\n    const v = source();\n    for (const [key, val] of subs.entries()) if (fn(key, v) !== fn(key, p)) {\n      for (const c of val.values()) {\n        c.state = STALE;\n        if (c.pure) Updates.push(c);else Effects.push(c);\n      }\n    }\n    return v;\n  }, undefined, true, STALE);\n  updateComputation(node);\n  return key => {\n    const listener = Listener;\n    if (listener) {\n      let l;\n      if (l = subs.get(key)) l.add(listener);else subs.set(key, l = new Set([listener]));\n      onCleanup(() => {\n        l.delete(listener);\n        !l.size && subs.delete(key);\n      });\n    }\n    return fn(key, Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value);\n  };\n}\nfunction batch(fn) {\n  return runUpdates(fn, false);\n}\nfunction untrack(fn) {\n  if (Listener === null) return fn();\n  const listener = Listener;\n  Listener = null;\n  try {\n    return fn();\n  } finally {\n    Listener = listener;\n  }\n}\nfunction on(deps, fn, options) {\n  const isArray = Array.isArray(deps);\n  let prevInput;\n  let defer = options && options.defer;\n  return prevValue => {\n    let input;\n    if (isArray) {\n      input = Array(deps.length);\n      for (let i = 0; i < deps.length; i++) input[i] = deps[i]();\n    } else input = deps();\n    if (defer) {\n      defer = false;\n      return undefined;\n    }\n    const result = untrack(() => fn(input, prevInput, prevValue));\n    prevInput = input;\n    return result;\n  };\n}\nfunction onMount(fn) {\n  createEffect(() => untrack(fn));\n}\nfunction onCleanup(fn) {\n  if (Owner === null) ;else if (Owner.cleanups === null) Owner.cleanups = [fn];else Owner.cleanups.push(fn);\n  return fn;\n}\nfunction catchError(fn, handler) {\n  ERROR || (ERROR = Symbol(\"error\"));\n  Owner = createComputation(undefined, undefined, true);\n  Owner.context = {\n    [ERROR]: [handler]\n  };\n  if (Transition && Transition.running) Transition.sources.add(Owner);\n  try {\n    return fn();\n  } catch (err) {\n    handleError(err);\n  } finally {\n    Owner = Owner.owner;\n  }\n}\nfunction onError(fn) {\n  ERROR || (ERROR = Symbol(\"error\"));\n  if (Owner === null) ;else if (Owner.context === null) Owner.context = {\n    [ERROR]: [fn]\n  };else if (!Owner.context[ERROR]) Owner.context[ERROR] = [fn];else Owner.context[ERROR].push(fn);\n}\nfunction getListener() {\n  return Listener;\n}\nfunction getOwner() {\n  return Owner;\n}\nfunction runWithOwner(o, fn) {\n  const prev = Owner;\n  const prevListener = Listener;\n  Owner = o;\n  Listener = null;\n  try {\n    return runUpdates(fn, true);\n  } catch (err) {\n    handleError(err);\n  } finally {\n    Owner = prev;\n    Listener = prevListener;\n  }\n}\nfunction enableScheduling(scheduler = requestCallback) {\n  Scheduler = scheduler;\n}\nfunction startTransition(fn) {\n  if (Transition && Transition.running) {\n    fn();\n    return Transition.done;\n  }\n  const l = Listener;\n  const o = Owner;\n  return Promise.resolve().then(() => {\n    Listener = l;\n    Owner = o;\n    let t;\n    if (Scheduler || SuspenseContext) {\n      t = Transition || (Transition = {\n        sources: new Set(),\n        effects: [],\n        promises: new Set(),\n        disposed: new Set(),\n        queue: new Set(),\n        running: true\n      });\n      t.done || (t.done = new Promise(res => t.resolve = res));\n      t.running = true;\n    }\n    runUpdates(fn, false);\n    Listener = Owner = null;\n    return t ? t.done : undefined;\n  });\n}\nfunction useTransition() {\n  return [transPending, startTransition];\n}\nfunction resumeEffects(e) {\n  Effects.push.apply(Effects, e);\n  e.length = 0;\n}\nfunction createContext(defaultValue, options) {\n  const id = Symbol(\"context\");\n  return {\n    id,\n    Provider: createProvider(id),\n    defaultValue\n  };\n}\nfunction useContext(context) {\n  let ctx;\n  return (ctx = lookup(Owner, context.id)) !== undefined ? ctx : context.defaultValue;\n}\nfunction children(fn) {\n  const children = createMemo(fn);\n  const memo = createMemo(() => resolveChildren(children()));\n  memo.toArray = () => {\n    const c = memo();\n    return Array.isArray(c) ? c : c != null ? [c] : [];\n  };\n  return memo;\n}\nlet SuspenseContext;\nfunction getSuspenseContext() {\n  return SuspenseContext || (SuspenseContext = createContext({}));\n}\nfunction enableExternalSource(factory) {\n  if (ExternalSourceFactory) {\n    const oldFactory = ExternalSourceFactory;\n    ExternalSourceFactory = (fn, trigger) => {\n      const oldSource = oldFactory(fn, trigger);\n      const source = factory(x => oldSource.track(x), trigger);\n      return {\n        track: x => source.track(x),\n        dispose() {\n          source.dispose();\n          oldSource.dispose();\n        }\n      };\n    };\n  } else {\n    ExternalSourceFactory = factory;\n  }\n}\nfunction readSignal() {\n  const runningTransition = Transition && Transition.running;\n  if (this.sources && (runningTransition ? this.tState : this.state)) {\n    if ((runningTransition ? this.tState : this.state) === STALE) updateComputation(this);else {\n      const updates = Updates;\n      Updates = null;\n      runUpdates(() => lookUpstream(this), false);\n      Updates = updates;\n    }\n  }\n  if (Listener) {\n    const sSlot = this.observers ? this.observers.length : 0;\n    if (!Listener.sources) {\n      Listener.sources = [this];\n      Listener.sourceSlots = [sSlot];\n    } else {\n      Listener.sources.push(this);\n      Listener.sourceSlots.push(sSlot);\n    }\n    if (!this.observers) {\n      this.observers = [Listener];\n      this.observerSlots = [Listener.sources.length - 1];\n    } else {\n      this.observers.push(Listener);\n      this.observerSlots.push(Listener.sources.length - 1);\n    }\n  }\n  if (runningTransition && Transition.sources.has(this)) return this.tValue;\n  return this.value;\n}\nfunction writeSignal(node, value, isComp) {\n  let current = Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value;\n  if (!node.comparator || !node.comparator(current, value)) {\n    if (Transition) {\n      const TransitionRunning = Transition.running;\n      if (TransitionRunning || !isComp && Transition.sources.has(node)) {\n        Transition.sources.add(node);\n        node.tValue = value;\n      }\n      if (!TransitionRunning) node.value = value;\n    } else node.value = value;\n    if (node.observers && node.observers.length) {\n      runUpdates(() => {\n        for (let i = 0; i < node.observers.length; i += 1) {\n          const o = node.observers[i];\n          const TransitionRunning = Transition && Transition.running;\n          if (TransitionRunning && Transition.disposed.has(o)) continue;\n          if (TransitionRunning ? !o.tState : !o.state) {\n            if (o.pure) Updates.push(o);else Effects.push(o);\n            if (o.observers) markDownstream(o);\n          }\n          if (!TransitionRunning) o.state = STALE;else o.tState = STALE;\n        }\n        if (Updates.length > 10e5) {\n          Updates = [];\n          if (false) ;\n          throw new Error();\n        }\n      }, false);\n    }\n  }\n  return value;\n}\nfunction updateComputation(node) {\n  if (!node.fn) return;\n  cleanNode(node);\n  const owner = Owner,\n    listener = Listener,\n    time = ExecCount;\n  Listener = Owner = node;\n  runComputation(node, Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value, time);\n  if (Transition && !Transition.running && Transition.sources.has(node)) {\n    queueMicrotask(() => {\n      runUpdates(() => {\n        Transition && (Transition.running = true);\n        Listener = Owner = node;\n        runComputation(node, node.tValue, time);\n        Listener = Owner = null;\n      }, false);\n    });\n  }\n  Listener = listener;\n  Owner = owner;\n}\nfunction runComputation(node, value, time) {\n  let nextValue;\n  try {\n    nextValue = node.fn(value);\n  } catch (err) {\n    if (node.pure) {\n      if (Transition && Transition.running) {\n        node.tState = STALE;\n        node.tOwned && node.tOwned.forEach(cleanNode);\n        node.tOwned = undefined;\n      } else {\n        node.state = STALE;\n        node.owned && node.owned.forEach(cleanNode);\n        node.owned = null;\n      }\n    }\n    node.updatedAt = time + 1;\n    return handleError(err);\n  }\n  if (!node.updatedAt || node.updatedAt <= time) {\n    if (node.updatedAt != null && \"observers\" in node) {\n      writeSignal(node, nextValue, true);\n    } else if (Transition && Transition.running && node.pure) {\n      Transition.sources.add(node);\n      node.tValue = nextValue;\n    } else node.value = nextValue;\n    node.updatedAt = time;\n  }\n}\nfunction createComputation(fn, init, pure, state = STALE, options) {\n  const c = {\n    fn,\n    state: state,\n    updatedAt: null,\n    owned: null,\n    sources: null,\n    sourceSlots: null,\n    cleanups: null,\n    value: init,\n    owner: Owner,\n    context: null,\n    pure\n  };\n  if (Transition && Transition.running) {\n    c.state = 0;\n    c.tState = state;\n  }\n  if (Owner === null) ;else if (Owner !== UNOWNED) {\n    if (Transition && Transition.running && Owner.pure) {\n      if (!Owner.tOwned) Owner.tOwned = [c];else Owner.tOwned.push(c);\n    } else {\n      if (!Owner.owned) Owner.owned = [c];else Owner.owned.push(c);\n    }\n  }\n  if (ExternalSourceFactory) {\n    const [track, trigger] = createSignal(undefined, {\n      equals: false\n    });\n    const ordinary = ExternalSourceFactory(c.fn, trigger);\n    onCleanup(() => ordinary.dispose());\n    const triggerInTransition = () => startTransition(trigger).then(() => inTransition.dispose());\n    const inTransition = ExternalSourceFactory(c.fn, triggerInTransition);\n    c.fn = x => {\n      track();\n      return Transition && Transition.running ? inTransition.track(x) : ordinary.track(x);\n    };\n  }\n  return c;\n}\nfunction runTop(node) {\n  const runningTransition = Transition && Transition.running;\n  if ((runningTransition ? node.tState : node.state) === 0) return;\n  if ((runningTransition ? node.tState : node.state) === PENDING) return lookUpstream(node);\n  if (node.suspense && untrack(node.suspense.inFallback)) return node.suspense.effects.push(node);\n  const ancestors = [node];\n  while ((node = node.owner) && (!node.updatedAt || node.updatedAt < ExecCount)) {\n    if (runningTransition && Transition.disposed.has(node)) return;\n    if (runningTransition ? node.tState : node.state) ancestors.push(node);\n  }\n  for (let i = ancestors.length - 1; i >= 0; i--) {\n    node = ancestors[i];\n    if (runningTransition) {\n      let top = node,\n        prev = ancestors[i + 1];\n      while ((top = top.owner) && top !== prev) {\n        if (Transition.disposed.has(top)) return;\n      }\n    }\n    if ((runningTransition ? node.tState : node.state) === STALE) {\n      updateComputation(node);\n    } else if ((runningTransition ? node.tState : node.state) === PENDING) {\n      const updates = Updates;\n      Updates = null;\n      runUpdates(() => lookUpstream(node, ancestors[0]), false);\n      Updates = updates;\n    }\n  }\n}\nfunction runUpdates(fn, init) {\n  if (Updates) return fn();\n  let wait = false;\n  if (!init) Updates = [];\n  if (Effects) wait = true;else Effects = [];\n  ExecCount++;\n  try {\n    const res = fn();\n    completeUpdates(wait);\n    return res;\n  } catch (err) {\n    if (!wait) Effects = null;\n    Updates = null;\n    handleError(err);\n  }\n}\nfunction completeUpdates(wait) {\n  if (Updates) {\n    if (Scheduler && Transition && Transition.running) scheduleQueue(Updates);else runQueue(Updates);\n    Updates = null;\n  }\n  if (wait) return;\n  let res;\n  if (Transition) {\n    if (!Transition.promises.size && !Transition.queue.size) {\n      const sources = Transition.sources;\n      const disposed = Transition.disposed;\n      Effects.push.apply(Effects, Transition.effects);\n      res = Transition.resolve;\n      for (const e of Effects) {\n        \"tState\" in e && (e.state = e.tState);\n        delete e.tState;\n      }\n      Transition = null;\n      runUpdates(() => {\n        for (const d of disposed) cleanNode(d);\n        for (const v of sources) {\n          v.value = v.tValue;\n          if (v.owned) {\n            for (let i = 0, len = v.owned.length; i < len; i++) cleanNode(v.owned[i]);\n          }\n          if (v.tOwned) v.owned = v.tOwned;\n          delete v.tValue;\n          delete v.tOwned;\n          v.tState = 0;\n        }\n        setTransPending(false);\n      }, false);\n    } else if (Transition.running) {\n      Transition.running = false;\n      Transition.effects.push.apply(Transition.effects, Effects);\n      Effects = null;\n      setTransPending(true);\n      return;\n    }\n  }\n  const e = Effects;\n  Effects = null;\n  if (e.length) runUpdates(() => runEffects(e), false);\n  if (res) res();\n}\nfunction runQueue(queue) {\n  for (let i = 0; i < queue.length; i++) runTop(queue[i]);\n}\nfunction scheduleQueue(queue) {\n  for (let i = 0; i < queue.length; i++) {\n    const item = queue[i];\n    const tasks = Transition.queue;\n    if (!tasks.has(item)) {\n      tasks.add(item);\n      Scheduler(() => {\n        tasks.delete(item);\n        runUpdates(() => {\n          Transition.running = true;\n          runTop(item);\n        }, false);\n        Transition && (Transition.running = false);\n      });\n    }\n  }\n}\nfunction runUserEffects(queue) {\n  let i,\n    userLength = 0;\n  for (i = 0; i < queue.length; i++) {\n    const e = queue[i];\n    if (!e.user) runTop(e);else queue[userLength++] = e;\n  }\n  if (sharedConfig.context) setHydrateContext();\n  for (i = 0; i < userLength; i++) runTop(queue[i]);\n}\nfunction lookUpstream(node, ignore) {\n  const runningTransition = Transition && Transition.running;\n  if (runningTransition) node.tState = 0;else node.state = 0;\n  for (let i = 0; i < node.sources.length; i += 1) {\n    const source = node.sources[i];\n    if (source.sources) {\n      const state = runningTransition ? source.tState : source.state;\n      if (state === STALE) {\n        if (source !== ignore && (!source.updatedAt || source.updatedAt < ExecCount)) runTop(source);\n      } else if (state === PENDING) lookUpstream(source, ignore);\n    }\n  }\n}\nfunction markDownstream(node) {\n  const runningTransition = Transition && Transition.running;\n  for (let i = 0; i < node.observers.length; i += 1) {\n    const o = node.observers[i];\n    if (runningTransition ? !o.tState : !o.state) {\n      if (runningTransition) o.tState = PENDING;else o.state = PENDING;\n      if (o.pure) Updates.push(o);else Effects.push(o);\n      o.observers && markDownstream(o);\n    }\n  }\n}\nfunction cleanNode(node) {\n  let i;\n  if (node.sources) {\n    while (node.sources.length) {\n      const source = node.sources.pop(),\n        index = node.sourceSlots.pop(),\n        obs = source.observers;\n      if (obs && obs.length) {\n        const n = obs.pop(),\n          s = source.observerSlots.pop();\n        if (index < obs.length) {\n          n.sourceSlots[s] = index;\n          obs[index] = n;\n          source.observerSlots[index] = s;\n        }\n      }\n    }\n  }\n  if (Transition && Transition.running && node.pure) {\n    if (node.tOwned) {\n      for (i = node.tOwned.length - 1; i >= 0; i--) cleanNode(node.tOwned[i]);\n      delete node.tOwned;\n    }\n    reset(node, true);\n  } else if (node.owned) {\n    for (i = node.owned.length - 1; i >= 0; i--) cleanNode(node.owned[i]);\n    node.owned = null;\n  }\n  if (node.cleanups) {\n    for (i = node.cleanups.length - 1; i >= 0; i--) node.cleanups[i]();\n    node.cleanups = null;\n  }\n  if (Transition && Transition.running) node.tState = 0;else node.state = 0;\n  node.context = null;\n}\nfunction reset(node, top) {\n  if (!top) {\n    node.tState = 0;\n    Transition.disposed.add(node);\n  }\n  if (node.owned) {\n    for (let i = 0; i < node.owned.length; i++) reset(node.owned[i]);\n  }\n}\nfunction castError(err) {\n  if (err instanceof Error) return err;\n  return new Error(typeof err === \"string\" ? err : \"Unknown error\", {\n    cause: err\n  });\n}\nfunction runErrors(fns, err) {\n  for (const f of fns) f(err);\n}\nfunction handleError(err) {\n  const fns = ERROR && lookup(Owner, ERROR);\n  if (!fns) throw err;\n  const error = castError(err);\n  if (Effects) Effects.push({\n    fn() {\n      runErrors(fns, error);\n    },\n    state: STALE\n  });else runErrors(fns, error);\n}\nfunction lookup(owner, key) {\n  return owner ? owner.context && owner.context[key] !== undefined ? owner.context[key] : lookup(owner.owner, key) : undefined;\n}\nfunction resolveChildren(children) {\n  if (typeof children === \"function\" && !children.length) return resolveChildren(children());\n  if (Array.isArray(children)) {\n    const results = [];\n    for (let i = 0; i < children.length; i++) {\n      const result = resolveChildren(children[i]);\n      Array.isArray(result) ? results.push.apply(results, result) : results.push(result);\n    }\n    return results;\n  }\n  return children;\n}\nfunction createProvider(id, options) {\n  return function provider(props) {\n    let res;\n    createRenderEffect(() => res = untrack(() => {\n      Owner.context = {\n        [id]: props.value\n      };\n      return children(() => props.children);\n    }), undefined);\n    return res;\n  };\n}\n\nfunction observable(input) {\n  return {\n    subscribe(observer) {\n      if (!(observer instanceof Object) || observer == null) {\n        throw new TypeError(\"Expected the observer to be an object.\");\n      }\n      const handler = typeof observer === \"function\" ? observer : observer.next && observer.next.bind(observer);\n      if (!handler) {\n        return {\n          unsubscribe() {}\n        };\n      }\n      const dispose = createRoot(disposer => {\n        createEffect(() => {\n          const v = input();\n          untrack(() => handler(v));\n        });\n        return disposer;\n      });\n      if (getOwner()) onCleanup(dispose);\n      return {\n        unsubscribe() {\n          dispose();\n        }\n      };\n    },\n    [Symbol.observable || \"@@observable\"]() {\n      return this;\n    }\n  };\n}\nfunction from(producer) {\n  const [s, set] = createSignal(undefined, {\n    equals: false\n  });\n  if (\"subscribe\" in producer) {\n    const unsub = producer.subscribe(v => set(() => v));\n    onCleanup(() => \"unsubscribe\" in unsub ? unsub.unsubscribe() : unsub());\n  } else {\n    const clean = producer(set);\n    onCleanup(clean);\n  }\n  return s;\n}\n\nconst FALLBACK = Symbol(\"fallback\");\nfunction dispose(d) {\n  for (let i = 0; i < d.length; i++) d[i]();\n}\nfunction mapArray(list, mapFn, options = {}) {\n  let items = [],\n    mapped = [],\n    disposers = [],\n    len = 0,\n    indexes = mapFn.length > 1 ? [] : null;\n  onCleanup(() => dispose(disposers));\n  return () => {\n    let newItems = list() || [],\n      i,\n      j;\n    newItems[$TRACK];\n    return untrack(() => {\n      let newLen = newItems.length,\n        newIndices,\n        newIndicesNext,\n        temp,\n        tempdisposers,\n        tempIndexes,\n        start,\n        end,\n        newEnd,\n        item;\n      if (newLen === 0) {\n        if (len !== 0) {\n          dispose(disposers);\n          disposers = [];\n          items = [];\n          mapped = [];\n          len = 0;\n          indexes && (indexes = []);\n        }\n        if (options.fallback) {\n          items = [FALLBACK];\n          mapped[0] = createRoot(disposer => {\n            disposers[0] = disposer;\n            return options.fallback();\n          });\n          len = 1;\n        }\n      }\n      else if (len === 0) {\n        mapped = new Array(newLen);\n        for (j = 0; j < newLen; j++) {\n          items[j] = newItems[j];\n          mapped[j] = createRoot(mapper);\n        }\n        len = newLen;\n      } else {\n        temp = new Array(newLen);\n        tempdisposers = new Array(newLen);\n        indexes && (tempIndexes = new Array(newLen));\n        for (start = 0, end = Math.min(len, newLen); start < end && items[start] === newItems[start]; start++);\n        for (end = len - 1, newEnd = newLen - 1; end >= start && newEnd >= start && items[end] === newItems[newEnd]; end--, newEnd--) {\n          temp[newEnd] = mapped[end];\n          tempdisposers[newEnd] = disposers[end];\n          indexes && (tempIndexes[newEnd] = indexes[end]);\n        }\n        newIndices = new Map();\n        newIndicesNext = new Array(newEnd + 1);\n        for (j = newEnd; j >= start; j--) {\n          item = newItems[j];\n          i = newIndices.get(item);\n          newIndicesNext[j] = i === undefined ? -1 : i;\n          newIndices.set(item, j);\n        }\n        for (i = start; i <= end; i++) {\n          item = items[i];\n          j = newIndices.get(item);\n          if (j !== undefined && j !== -1) {\n            temp[j] = mapped[i];\n            tempdisposers[j] = disposers[i];\n            indexes && (tempIndexes[j] = indexes[i]);\n            j = newIndicesNext[j];\n            newIndices.set(item, j);\n          } else disposers[i]();\n        }\n        for (j = start; j < newLen; j++) {\n          if (j in temp) {\n            mapped[j] = temp[j];\n            disposers[j] = tempdisposers[j];\n            if (indexes) {\n              indexes[j] = tempIndexes[j];\n              indexes[j](j);\n            }\n          } else mapped[j] = createRoot(mapper);\n        }\n        mapped = mapped.slice(0, len = newLen);\n        items = newItems.slice(0);\n      }\n      return mapped;\n    });\n    function mapper(disposer) {\n      disposers[j] = disposer;\n      if (indexes) {\n        const [s, set] = createSignal(j);\n        indexes[j] = set;\n        return mapFn(newItems[j], s);\n      }\n      return mapFn(newItems[j]);\n    }\n  };\n}\nfunction indexArray(list, mapFn, options = {}) {\n  let items = [],\n    mapped = [],\n    disposers = [],\n    signals = [],\n    len = 0,\n    i;\n  onCleanup(() => dispose(disposers));\n  return () => {\n    const newItems = list() || [];\n    newItems[$TRACK];\n    return untrack(() => {\n      if (newItems.length === 0) {\n        if (len !== 0) {\n          dispose(disposers);\n          disposers = [];\n          items = [];\n          mapped = [];\n          len = 0;\n          signals = [];\n        }\n        if (options.fallback) {\n          items = [FALLBACK];\n          mapped[0] = createRoot(disposer => {\n            disposers[0] = disposer;\n            return options.fallback();\n          });\n          len = 1;\n        }\n        return mapped;\n      }\n      if (items[0] === FALLBACK) {\n        disposers[0]();\n        disposers = [];\n        items = [];\n        mapped = [];\n        len = 0;\n      }\n      for (i = 0; i < newItems.length; i++) {\n        if (i < items.length && items[i] !== newItems[i]) {\n          signals[i](() => newItems[i]);\n        } else if (i >= items.length) {\n          mapped[i] = createRoot(mapper);\n        }\n      }\n      for (; i < items.length; i++) {\n        disposers[i]();\n      }\n      len = signals.length = disposers.length = newItems.length;\n      items = newItems.slice(0);\n      return mapped = mapped.slice(0, len);\n    });\n    function mapper(disposer) {\n      disposers[i] = disposer;\n      const [s, set] = createSignal(newItems[i]);\n      signals[i] = set;\n      return mapFn(s, i);\n    }\n  };\n}\n\nlet hydrationEnabled = false;\nfunction enableHydration() {\n  hydrationEnabled = true;\n}\nfunction createComponent(Comp, props) {\n  if (hydrationEnabled) {\n    if (sharedConfig.context) {\n      const c = sharedConfig.context;\n      setHydrateContext(nextHydrateContext());\n      const r = untrack(() => Comp(props || {}));\n      setHydrateContext(c);\n      return r;\n    }\n  }\n  return untrack(() => Comp(props || {}));\n}\nfunction trueFn() {\n  return true;\n}\nconst propTraps = {\n  get(_, property, receiver) {\n    if (property === $PROXY) return receiver;\n    return _.get(property);\n  },\n  has(_, property) {\n    if (property === $PROXY) return true;\n    return _.has(property);\n  },\n  set: trueFn,\n  deleteProperty: trueFn,\n  getOwnPropertyDescriptor(_, property) {\n    return {\n      configurable: true,\n      enumerable: true,\n      get() {\n        return _.get(property);\n      },\n      set: trueFn,\n      deleteProperty: trueFn\n    };\n  },\n  ownKeys(_) {\n    return _.keys();\n  }\n};\nfunction resolveSource(s) {\n  return !(s = typeof s === \"function\" ? s() : s) ? {} : s;\n}\nfunction mergeProps(...sources) {\n  let proxy = false;\n  for (let i = 0; i < sources.length; i++) {\n    const s = sources[i];\n    proxy = proxy || !!s && $PROXY in s;\n    sources[i] = typeof s === \"function\" ? (proxy = true, createMemo(s)) : s;\n  }\n  if (proxy) {\n    return new Proxy({\n      get(property) {\n        for (let i = sources.length - 1; i >= 0; i--) {\n          const v = resolveSource(sources[i])[property];\n          if (v !== undefined) return v;\n        }\n      },\n      has(property) {\n        for (let i = sources.length - 1; i >= 0; i--) {\n          if (property in resolveSource(sources[i])) return true;\n        }\n        return false;\n      },\n      keys() {\n        const keys = [];\n        for (let i = 0; i < sources.length; i++) keys.push(...Object.keys(resolveSource(sources[i])));\n        return [...new Set(keys)];\n      }\n    }, propTraps);\n  }\n  const target = {};\n  for (let i = sources.length - 1; i >= 0; i--) {\n    if (sources[i]) {\n      const descriptors = Object.getOwnPropertyDescriptors(sources[i]);\n      for (const key in descriptors) {\n        if (key in target) continue;\n        Object.defineProperty(target, key, {\n          enumerable: true,\n          get() {\n            for (let i = sources.length - 1; i >= 0; i--) {\n              const v = (sources[i] || {})[key];\n              if (v !== undefined) return v;\n            }\n          }\n        });\n      }\n    }\n  }\n  return target;\n}\nfunction splitProps(props, ...keys) {\n  const blocked = new Set(keys.flat());\n  if ($PROXY in props) {\n    const res = keys.map(k => {\n      return new Proxy({\n        get(property) {\n          return k.includes(property) ? props[property] : undefined;\n        },\n        has(property) {\n          return k.includes(property) && property in props;\n        },\n        keys() {\n          return k.filter(property => property in props);\n        }\n      }, propTraps);\n    });\n    res.push(new Proxy({\n      get(property) {\n        return blocked.has(property) ? undefined : props[property];\n      },\n      has(property) {\n        return blocked.has(property) ? false : property in props;\n      },\n      keys() {\n        return Object.keys(props).filter(k => !blocked.has(k));\n      }\n    }, propTraps));\n    return res;\n  }\n  const descriptors = Object.getOwnPropertyDescriptors(props);\n  keys.push(Object.keys(descriptors).filter(k => !blocked.has(k)));\n  return keys.map(k => {\n    const clone = {};\n    for (let i = 0; i < k.length; i++) {\n      const key = k[i];\n      if (!(key in props)) continue;\n      Object.defineProperty(clone, key, descriptors[key] ? descriptors[key] : {\n        get() {\n          return props[key];\n        },\n        set() {\n          return true;\n        },\n        enumerable: true\n      });\n    }\n    return clone;\n  });\n}\nfunction lazy(fn) {\n  let comp;\n  let p;\n  const wrap = props => {\n    const ctx = sharedConfig.context;\n    if (ctx) {\n      const [s, set] = createSignal();\n      (p || (p = fn())).then(mod => {\n        setHydrateContext(ctx);\n        set(() => mod.default);\n        setHydrateContext();\n      });\n      comp = s;\n    } else if (!comp) {\n      const [s] = createResource(() => (p || (p = fn())).then(mod => mod.default));\n      comp = s;\n    }\n    let Comp;\n    return createMemo(() => (Comp = comp()) && untrack(() => {\n      if (false) ;\n      if (!ctx) return Comp(props);\n      const c = sharedConfig.context;\n      setHydrateContext(ctx);\n      const r = Comp(props);\n      setHydrateContext(c);\n      return r;\n    }));\n  };\n  wrap.preload = () => p || ((p = fn()).then(mod => comp = () => mod.default), p);\n  return wrap;\n}\nlet counter = 0;\nfunction createUniqueId() {\n  const ctx = sharedConfig.context;\n  return ctx ? `${ctx.id}${ctx.count++}` : `cl-${counter++}`;\n}\n\nconst narrowedError = name => `Stale read from <${name}>.`;\nfunction For(props) {\n  const fallback = \"fallback\" in props && {\n    fallback: () => props.fallback\n  };\n  return createMemo(mapArray(() => props.each, props.children, fallback || undefined));\n}\nfunction Index(props) {\n  const fallback = \"fallback\" in props && {\n    fallback: () => props.fallback\n  };\n  return createMemo(indexArray(() => props.each, props.children, fallback || undefined));\n}\nfunction Show(props) {\n  const keyed = props.keyed;\n  const condition = createMemo(() => props.when, undefined, {\n    equals: (a, b) => keyed ? a === b : !a === !b\n  });\n  return createMemo(() => {\n    const c = condition();\n    if (c) {\n      const child = props.children;\n      const fn = typeof child === \"function\" && child.length > 0;\n      return fn ? untrack(() => child(keyed ? c : () => {\n        if (!untrack(condition)) throw narrowedError(\"Show\");\n        return props.when;\n      })) : child;\n    }\n    return props.fallback;\n  }, undefined, undefined);\n}\nfunction Switch(props) {\n  let keyed = false;\n  const equals = (a, b) => a[0] === b[0] && (keyed ? a[1] === b[1] : !a[1] === !b[1]) && a[2] === b[2];\n  const conditions = children(() => props.children),\n    evalConditions = createMemo(() => {\n      let conds = conditions();\n      if (!Array.isArray(conds)) conds = [conds];\n      for (let i = 0; i < conds.length; i++) {\n        const c = conds[i].when;\n        if (c) {\n          keyed = !!conds[i].keyed;\n          return [i, c, conds[i]];\n        }\n      }\n      return [-1];\n    }, undefined, {\n      equals\n    });\n  return createMemo(() => {\n    const [index, when, cond] = evalConditions();\n    if (index < 0) return props.fallback;\n    const c = cond.children;\n    const fn = typeof c === \"function\" && c.length > 0;\n    return fn ? untrack(() => c(keyed ? when : () => {\n      if (untrack(evalConditions)[0] !== index) throw narrowedError(\"Match\");\n      return cond.when;\n    })) : c;\n  }, undefined, undefined);\n}\nfunction Match(props) {\n  return props;\n}\nlet Errors;\nfunction resetErrorBoundaries() {\n  Errors && [...Errors].forEach(fn => fn());\n}\nfunction ErrorBoundary(props) {\n  let err;\n  let v;\n  if (sharedConfig.context && sharedConfig.load && (v = sharedConfig.load(sharedConfig.context.id + sharedConfig.context.count))) err = v[0];\n  const [errored, setErrored] = createSignal(err, undefined);\n  Errors || (Errors = new Set());\n  Errors.add(setErrored);\n  onCleanup(() => Errors.delete(setErrored));\n  return createMemo(() => {\n    let e;\n    if (e = errored()) {\n      const f = props.fallback;\n      return typeof f === \"function\" && f.length ? untrack(() => f(e, () => setErrored())) : f;\n    }\n    return catchError(() => props.children, setErrored);\n  }, undefined, undefined);\n}\n\nconst suspenseListEquals = (a, b) => a.showContent === b.showContent && a.showFallback === b.showFallback;\nconst SuspenseListContext = createContext();\nfunction SuspenseList(props) {\n  let [wrapper, setWrapper] = createSignal(() => ({\n      inFallback: false\n    })),\n    show;\n  const listContext = useContext(SuspenseListContext);\n  const [registry, setRegistry] = createSignal([]);\n  if (listContext) {\n    show = listContext.register(createMemo(() => wrapper()().inFallback));\n  }\n  const resolved = createMemo(prev => {\n    const reveal = props.revealOrder,\n      tail = props.tail,\n      {\n        showContent = true,\n        showFallback = true\n      } = show ? show() : {},\n      reg = registry(),\n      reverse = reveal === \"backwards\";\n    if (reveal === \"together\") {\n      const all = reg.every(inFallback => !inFallback());\n      const res = reg.map(() => ({\n        showContent: all && showContent,\n        showFallback\n      }));\n      res.inFallback = !all;\n      return res;\n    }\n    let stop = false;\n    let inFallback = prev.inFallback;\n    const res = [];\n    for (let i = 0, len = reg.length; i < len; i++) {\n      const n = reverse ? len - i - 1 : i,\n        s = reg[n]();\n      if (!stop && !s) {\n        res[n] = {\n          showContent,\n          showFallback\n        };\n      } else {\n        const next = !stop;\n        if (next) inFallback = true;\n        res[n] = {\n          showContent: next,\n          showFallback: !tail || next && tail === \"collapsed\" ? showFallback : false\n        };\n        stop = true;\n      }\n    }\n    if (!stop) inFallback = false;\n    res.inFallback = inFallback;\n    return res;\n  }, {\n    inFallback: false\n  });\n  setWrapper(() => resolved);\n  return createComponent(SuspenseListContext.Provider, {\n    value: {\n      register: inFallback => {\n        let index;\n        setRegistry(registry => {\n          index = registry.length;\n          return [...registry, inFallback];\n        });\n        return createMemo(() => resolved()[index], undefined, {\n          equals: suspenseListEquals\n        });\n      }\n    },\n    get children() {\n      return props.children;\n    }\n  });\n}\nfunction Suspense(props) {\n  let counter = 0,\n    show,\n    ctx,\n    p,\n    flicker,\n    error;\n  const [inFallback, setFallback] = createSignal(false),\n    SuspenseContext = getSuspenseContext(),\n    store = {\n      increment: () => {\n        if (++counter === 1) setFallback(true);\n      },\n      decrement: () => {\n        if (--counter === 0) setFallback(false);\n      },\n      inFallback,\n      effects: [],\n      resolved: false\n    },\n    owner = getOwner();\n  if (sharedConfig.context && sharedConfig.load) {\n    const key = sharedConfig.context.id + sharedConfig.context.count;\n    let ref = sharedConfig.load(key);\n    if (ref && (p = ref[0]) && p !== \"$$f\") {\n      if (typeof p !== \"object\" || !(\"then\" in p)) p = Promise.resolve(p);\n      const [s, set] = createSignal(undefined, {\n        equals: false\n      });\n      flicker = s;\n      p.then(err => {\n        if (err || sharedConfig.done) {\n          err && (error = err);\n          return set();\n        }\n        sharedConfig.gather(key);\n        setHydrateContext(ctx);\n        set();\n        setHydrateContext();\n      });\n    }\n  }\n  const listContext = useContext(SuspenseListContext);\n  if (listContext) show = listContext.register(store.inFallback);\n  let dispose;\n  onCleanup(() => dispose && dispose());\n  return createComponent(SuspenseContext.Provider, {\n    value: store,\n    get children() {\n      return createMemo(() => {\n        if (error) throw error;\n        ctx = sharedConfig.context;\n        if (flicker) {\n          flicker();\n          return flicker = undefined;\n        }\n        if (ctx && p === \"$$f\") setHydrateContext();\n        const rendered = createMemo(() => props.children);\n        return createMemo(prev => {\n          const inFallback = store.inFallback(),\n            {\n              showContent = true,\n              showFallback = true\n            } = show ? show() : {};\n          if ((!inFallback || p && p !== \"$$f\") && showContent) {\n            store.resolved = true;\n            dispose && dispose();\n            dispose = ctx = p = undefined;\n            resumeEffects(store.effects);\n            return rendered();\n          }\n          if (!showFallback) return;\n          if (dispose) return prev;\n          return createRoot(disposer => {\n            dispose = disposer;\n            if (ctx) {\n              setHydrateContext({\n                id: ctx.id + \"f\",\n                count: 0\n              });\n              ctx = undefined;\n            }\n            return props.fallback;\n          }, owner);\n        });\n      });\n    }\n  });\n}\n\nconst DEV = undefined;\n\nexport { $DEVCOMP, $PROXY, $TRACK, DEV, ErrorBoundary, For, Index, Match, Show, Suspense, SuspenseList, Switch, batch, cancelCallback, catchError, children, createComponent, createComputed, createContext, createDeferred, createEffect, createMemo, createReaction, createRenderEffect, createResource, createRoot, createSelector, createSignal, createUniqueId, enableExternalSource, enableHydration, enableScheduling, equalFn, from, getListener, getOwner, indexArray, lazy, mapArray, mergeProps, observable, on, onCleanup, onError, onMount, requestCallback, resetErrorBoundaries, runWithOwner, sharedConfig, splitProps, startTransition, untrack, useContext, useTransition };\n","exports.interopDefault = function (a) {\n  return a && a.__esModule ? a : {default: a};\n};\n\nexports.defineInteropFlag = function (a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n};\n\nexports.exportAll = function (source, dest) {\n  Object.keys(source).forEach(function (key) {\n    if (key === 'default' || key === '__esModule' || dest.hasOwnProperty(key)) {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function () {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n};\n\nexports.export = function (dest, destName, get) {\n  Object.defineProperty(dest, destName, {\n    enumerable: true,\n    get: get,\n  });\n};\n","import { Component } from \"solid-js\";\nimport { TableComponent } from \"./table\";\nimport { Animations, TableController, View, tableUIDescriptor } from \"./table_controller\";\nimport { AnimationManager } from \"ui/animation/animation_manager\";\nimport { InteractionManager } from \"rules/interaction_manager\";\n\nexport function createTable(interactionManager: InteractionManager) {\n  const tableUI = tableUIDescriptor.create({\n    view: View.TopDownBookCentered,\n  })\n  const animations = new AnimationManager<Animations>(); \n  const controller = new TableController(tableUI, animations);\n  function onDragCancel() {\n    interactionManager.clearDrag();\n  }\n\n  function Component(props: {\n    Book: Component,\n    Hand: Component,\n    Deck: Component,\n    SpreadOverlay: Component,\n    DragOverlay: Component,\n    StatusOverlay: Component,\n  }) {\n    return (\n      <TableComponent\n          Book={props.Book}\n          Hand={props.Hand}\n          Deck={props.Deck}\n          SpreadOverlay={props.SpreadOverlay}\n          StatusOverlay={props.StatusOverlay}\n          DragOverlay={props.DragOverlay}\n          view={tableUI.view} \n          animations={animations}\n          onDragCancel={onDragCancel}\n          dragging={interactionManager.dragging}\n      />\n    );\n  }\n\n  return {\n    Component,\n    controller,\n  };\n}","import { Component, createSignal } from \"solid-js\";\nimport styles from './table.module.scss';\nimport { Animations, View } from \"./table_controller\";\nimport { AnimationManager } from \"ui/animation/animation_manager\";\n\nexport function TableComponent(props: {\n  Book: Component,\n  Hand: Component,\n  Deck: Component,\n  SpreadOverlay: Component,\n  StatusOverlay: Component,\n  DragOverlay: Component,\n  view: View,\n  animations: AnimationManager<Animations>,\n  onDragCancel: () => void,\n  dragging: boolean,\n}) {\n  const [tableRef, setTableRef] = createSignal<HTMLDivElement>();\n  return (\n    <div class={styles.container}>\n      <div\n          classList={{\n            [styles.room]: true,\n            [styles.dragging]: props.dragging,\n          }}\n          onPointerUp={props.onDragCancel}\n      >\n        <div\n            classList={{\n              [styles.table]: true,\n              [styles.tilted]: props.view === View.Tilted,\n              [styles.topDown]: props.view === View.TopDown,\n              [styles.topDownBookCentered]: props.view === View.TopDownBookCentered,\n            }}\n            onTransitionEnd={props.animations.createTransitionEndEventListener(\n              tableRef,\n              () => props.view\n            )}\n            ref={setTableRef}>\n          <div class={styles.book}>\n            <props.Book/>\n          </div>\n          <div class={styles['spread-overlay']}>\n            <props.SpreadOverlay/>\n          </div>\n          <div class={styles.deck}>\n            <props.Deck/>\n          </div>\n          <div class={styles.hand}>\n            <props.Hand/>\n          </div>\n        </div>\n      </div>\n      <div class={styles['status-overlay']}>\n        <props.StatusOverlay/>\n      </div>\n      <div class={styles['drag-overlay']}>\n        <props.DragOverlay/>\n      </div>\n    </div>\n  );\n}\n","@use 'components/constants.module.scss';\n\n$tableWidth: min(100vw, 100vh);\n$tableHeight: calc($tableWidth * 1.3);\n\n$bookWidth: constants.$pageWidth;\n$bookHeight: constants.$pageHeight;\n$bookTop: 10%;\n\n$handSlotTop: 8%;\n$handSlotWidth: calc($tableWidth / 3);\n$handSlotHeight: constants.$cardHeight;\n\n$tableColor: #763F13;\n$tableColorDark: #221100;\n\n.container {\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n}\n\n.room {\n  position: absolute;\n  perspective: calc($tableWidth);\n  perspective-origin: 50% 50%;\n  width: 100%;\n  height: 100%;\n  transform-style: preserve-3d;  \n}\n\n.room * {\n  transform-style: preserve-3d;\n}\n\n.room.dragging {\n  cursor: grabbing;\n}\n\n.table {\n  background: $tableColor;\n  position: absolute;\n  width: $tableWidth;\n  height: $tableHeight;\n  transform-origin: calc($tableWidth/2) $tableHeight;\n  transition: transform 1s ease-in-out;\n  pointer-events: all;\n  bottom: 0;\n  left: calc((100vw - $tableWidth)/2);\n}\n\n.table.topDown {\n  background: $tableColorDark;\n  transform:\n      rotateX(20deg)\n      translate(0, calc($bookHeight))\n      translateZ(calc(-1 * $tableWidth));\n}\n\n.table.topDownBookCentered {\n  // TODO gradients aren't transitionable, but an overlay with opacity is...\n  background: linear-gradient($tableColorDark, $tableColor);\n  transform:\n      rotateX(20deg)\n      translate(calc(-1 * ($bookWidth / 2)), calc($tableHeight - $bookHeight - $bookTop - $handSlotTop))\n      translateZ(calc($tableHeight/4))\n      ;\n}\n\n.table.tilted {\n  // TODO gradients aren't transitionable, but an overlay with opacity is...\n  background: linear-gradient($tableColorDark, $tableColor);\n  transform:\n      translateZ(calc($tableHeight * .8))\n      translate(0, 0)\n      rotateX(constants.$tableTiltAngle)\n      ;\n}\n\n.book {\n  position: absolute;\n  top: $bookTop;\n  left: 50%;\n  width: $bookWidth;\n  height: $bookHeight;\n  background-color: brown;\n}\n\n.hand {\n  position: absolute;\n  display: flex;\n  top: calc($bookTop + $bookHeight + $handSlotTop);\n  left: calc((100% - $handSlotWidth) / 2);\n  width: $handSlotWidth;\n  height: $handSlotHeight;\n}\n\n.deck {\n  position: absolute;\n  top: calc($bookTop + $bookHeight + $handSlotTop);\n  left: calc(50% - $bookWidth * .8);\n  width: constants.$cardWidth;\n  height: constants.$cardHeight;\n}\n\n.spread-overlay {\n  position: absolute;\n  top: calc($bookTop + $bookHeight);\n  left: calc($tableWidth/2 - $bookWidth/2);\n  width: calc($bookWidth);\n  height: constants.$cardHeight;\n  transform: translateZ(calc(constants.$cardHeight * 3)) rotateX(constants.$tableTiltCorrectionAngle);\n  transform-origin: top;\n}\n\n.drag-overlay, .status-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\n","import { AnimationManager } from \"ui/animation/animation_manager\";\nimport { LiteralTypeDescriptor } from \"model/descriptor/literals\";\nimport { activeRecordDescriptor } from \"model/descriptor/record\";\n\nexport const enum View {\n  TopDown = 0,\n  TopDownBookCentered = 1,\n  Tilted = 2,\n};\n\nexport type Animations = View;\n\nconst viewDescriptor = new LiteralTypeDescriptor<View>();\n\nexport const tableUIDescriptor = activeRecordDescriptor({\n  view: viewDescriptor,\n});\n\nexport type TableUI = typeof tableUIDescriptor.aMutable;\nexport type TableUIState = typeof tableUIDescriptor.aState;\n\nexport class TableController {\n\n  constructor(\n    private readonly tableUI: TableUI,\n    private readonly animations: AnimationManager<Animations>,\n  ) {\n  }\n\n  async setView(view: View) {\n    if (this.tableUI.view !== view) {\n      this.tableUI.view = view;\n      return this.animations.waitForAnimation(view);\n    }\n  }\n}\n","import { Component } from \"solid-js\";\nimport { TypeDescriptor } from \"./types\";\n\nexport class LiteralTypeDescriptor<LiteralType> implements TypeDescriptor<LiteralType, LiteralType> {\n\n  constructor() { }\n\n  aState!: LiteralType;\n\n  aMutable!: LiteralType;\n\n  create(s: LiteralType): LiteralType {\n    return s;\n  }\n\n  snapshot(m: LiteralType): LiteralType {\n    return m;\n  }\n\n  freeze(s: LiteralType): LiteralType {\n    return s;\n  }\n}\n\n\nexport const numberDescriptor = new LiteralTypeDescriptor<number>();\n\nexport const stringDescriptor = new LiteralTypeDescriptor<string>();\n\nexport const booleanDescriptor = new LiteralTypeDescriptor<boolean>();\n\nexport const componentDescriptor = new LiteralTypeDescriptor<Component>();\n","import { createSignal, Signal } from \"solid-js\";\nimport { TypeDescriptor, TypeDescriptors } from \"./types\";\n\ntype Mutable = {\n  __aMutable: true,\n};\n\ntype State = {\n  __aMutable?: never,\n};\n\n\ntype RecordState<\n  Attributes extends TypeDescriptors,\n> = { [K in keyof Attributes]: Attributes[K]['aState'] } & State;\n\ntype RecordMutable<\n  Attributes extends TypeDescriptors,\n> = { [K in keyof Attributes]: Attributes[K]['aMutable'] } & Mutable;\n\n\ntype RecordStateWithNoMutables<\n  Attributes extends TypeDescriptors,\n> = { [K in keyof Attributes]: Attributes[K]['aState'] & State };\n\n\nclass ValueRecordTypeDescriptor<AttributeTypeDescriptors extends TypeDescriptors>\n  implements TypeDescriptor<RecordState<AttributeTypeDescriptors>, RecordMutable<AttributeTypeDescriptors>> {\n  constructor(private readonly attributeTypes: AttributeTypeDescriptors) { }\n\n  aState!: Readonly<RecordState<AttributeTypeDescriptors>>;\n\n  aMutable!: Readonly<RecordMutable<AttributeTypeDescriptors>>;\n\n  create(s: RecordStateWithNoMutables<AttributeTypeDescriptors>): RecordMutable<AttributeTypeDescriptors> {\n    const mutable: RecordMutable<AttributeTypeDescriptors> = {} as any;\n    for (let key in this.attributeTypes) {\n      const attributeType = this.attributeTypes[key];\n      const value = s[key];\n      const valueMutable = attributeType.create(value);\n      mutable[key] = valueMutable;\n    }\n    return mutable;\n  }\n\n  snapshot(m: RecordMutable<AttributeTypeDescriptors>): RecordState<AttributeTypeDescriptors> {\n    const snapshot: RecordState<AttributeTypeDescriptors> = {} as any;\n    for (let key in this.attributeTypes) {\n      const attributeType = this.attributeTypes[key];\n      const value = m[key];\n      const valueMutable = attributeType.snapshot(value);\n      snapshot[key] = valueMutable;\n    }\n    return snapshot;\n  }\n\n  freeze(s: RecordState<AttributeTypeDescriptors>): RecordState<AttributeTypeDescriptors> {\n    const snapshot: RecordState<AttributeTypeDescriptors> = {} as any;\n    for (let key in this.attributeTypes) {\n      const attributeType = this.attributeTypes[key];\n      const value = s[key];\n      const valueMutable = attributeType.freeze(value);\n      snapshot[key] = valueMutable;\n    }\n    return Object.freeze(snapshot);    \n  }\n\n}\n\nexport function valueRecordDescriptor<AttributeTypeDescriptors extends TypeDescriptors>(\n  attributeTypes: AttributeTypeDescriptors,\n) {\n  return new ValueRecordTypeDescriptor(attributeTypes);\n}\n\ntype ActiveRecordTarget<\n  AttributeTypeDescriptors extends TypeDescriptors\n> = { [K in keyof AttributeTypeDescriptors]: Signal<AttributeTypeDescriptors[K]['aMutable']> };\n\nclass ActiveRecordProxyHandler<AttributeTypeDescriptors extends TypeDescriptors>\n  implements ProxyHandler<ActiveRecordTarget<AttributeTypeDescriptors>> {\n  constructor() {\n\n  }\n\n  get(target: ActiveRecordTarget<AttributeTypeDescriptors>, p: string) {\n    return target[p]?.[0]?.();\n  }\n\n  set(target: ActiveRecordTarget<AttributeTypeDescriptors>, p: string, newValue: any): boolean {\n    const signal = target[p]?.[1];\n    signal?.(newValue);\n    return signal != null;\n  }\n}\n\nclass ActiveRecordTypeDescriptor<AttributeTypeDescriptors extends TypeDescriptors>\n  implements TypeDescriptor<RecordState<AttributeTypeDescriptors>, RecordMutable<AttributeTypeDescriptors>> {\n  constructor(private readonly attributeTypes: AttributeTypeDescriptors) { }\n\n  aState!: Readonly<RecordState<AttributeTypeDescriptors>>;\n\n  aMutable!: RecordMutable<AttributeTypeDescriptors>;\n\n  create(s: RecordState<AttributeTypeDescriptors>): RecordMutable<AttributeTypeDescriptors> {\n\n    const target: ActiveRecordTarget<AttributeTypeDescriptors> = {} as any;\n    for (let key in this.attributeTypes) {\n      const attributeType = this.attributeTypes[key];\n      const value = s[key];\n      const valueMutable = attributeType.create(value);\n      target[key] = createSignal(valueMutable);\n    }\n    return new Proxy(target, new ActiveRecordProxyHandler()) as RecordMutable<AttributeTypeDescriptors>;\n  }\n\n  snapshot(m: RecordMutable<AttributeTypeDescriptors>): RecordState<AttributeTypeDescriptors> {\n    const snapshot: RecordState<AttributeTypeDescriptors> = {} as any;\n    for (let key in this.attributeTypes) {\n      const attributeType = this.attributeTypes[key];\n      const value = m[key];\n      const valueMutable = attributeType.snapshot(value);\n      snapshot[key] = valueMutable;\n    }\n    return snapshot;\n  }\n\n  freeze(s: RecordState<AttributeTypeDescriptors>): RecordState<AttributeTypeDescriptors> {\n    const snapshot: RecordState<AttributeTypeDescriptors> = {} as any;\n    for (let key in this.attributeTypes) {\n      const attributeType = this.attributeTypes[key];\n      const value = s[key];\n      const valueMutable = attributeType.snapshot(value);\n      snapshot[key] = valueMutable;\n    }\n    return Object.freeze(snapshot);    \n  }\n}\n\nexport function activeRecordDescriptor<AttributeTypeDescriptors extends TypeDescriptors>(\n  attributeTypes: AttributeTypeDescriptors,\n) {\n  return new ActiveRecordTypeDescriptor(attributeTypes);\n}","import { Accessor } from \"solid-js\";\nimport { delay } from \"../../base/delay\";\nimport { FlattenedPromise, createFlattenedPromise } from \"../../base/flattened_promise\";\n\nexport class AnimationCanceledError extends Error {\n\n}\n\nexport class AnimationManager<T> {\n  private animations: Map<T, FlattenedPromise<void>> = new Map();\n\n  constructor() {\n\n  }\n\n  waitForAnimation(t: T, timeoutMillis: number = 1000): Promise<void> {\n    this.maybeCancelAnimation(t);\n    const animation = createFlattenedPromise<void>();\n    this.animations.set(t, animation);\n    return Promise.race([animation.promise, delay(timeoutMillis)]);\n  }\n\n  maybeCancelAnimation(t: T) {\n    const flattenedPromise = this.animations.get(t);\n    if (flattenedPromise) {\n      flattenedPromise.reject(new AnimationCanceledError());\n      this.animations.delete(t);\n    }\n  }\n\n  maybeCompleteAnimation(t: T) {\n    const flattenedPromise = this.animations.get(t);\n    if (flattenedPromise) {\n      flattenedPromise.resolve();\n      this.animations.delete(t);\n    }\n  }\n\n  createAnimationEndEventListener(\n      ref: Accessor<EventTarget | undefined>,\n      animationIdAndName: Accessor<[T, string]>,\n  ) {\n    return (e: AnimationEvent) => {\n      const [id, name] = animationIdAndName();\n      if (e.target != null && ref() === e.target && e.animationName === name) {\n        this.maybeCompleteAnimation(id);\n      }\n    };\n  }\n\n  createTransitionEndEventListener(\n    ref: Accessor<EventTarget | undefined>,\n    animationId: Accessor<T>,\n    ) {\n    return (e: TransitionEvent) => {\n      if (e.target != null && ref() === e.target) {\n        this.maybeCompleteAnimation(animationId());\n      }\n    };\n  }\n\n  createCutoutPoppedUpOrDownCallback(\n    poppedUpValue: T,\n    poppedDownValue: T = poppedUpValue,\n  ) {\n    return (poppedUp: boolean) => {\n      this.maybeCompleteAnimation(poppedUp ? poppedUpValue : poppedDownValue);\n    };\n  }\n}\n","import { createFlattenedPromise } from \"./flattened_promise\";\n\nexport function delay(milliseconds: number): Promise<void> {\n  const { promise, resolve } = createFlattenedPromise<void>();\n  setTimeout(resolve, milliseconds);\n  return promise;\n}","export type FlattenedPromise<T> = {\n  promise: Promise<T>;\n  reject: (e: unknown) => void;\n  resolve: (t: T) => void;\n}\n\nexport function createFlattenedPromise<T>(): FlattenedPromise<T> {\n  let _resolve: (t: T) => void;\n  let _reject: (e: unknown) => void;\n  const promise = new Promise<T>((resolve, reject) => {\n    _resolve = resolve;\n    _reject = reject;\n  });\n  return {\n    promise,\n    resolve: (t: T) => _resolve(t),\n    reject: (e: unknown) => _reject(e), \n  };\n}","import { Book, BookSpread } from \"model/domain\";\nimport { BookComponent, PagePair } from \"./book\";\nimport { Animations, BookController, PageComponentManager, bookUIDescriptor } from \"./book_controller\";\nimport { AnimationManager } from \"ui/animation/animation_manager\";\nimport { ParentProps } from \"solid-js\";\n\nexport function createBook({\n  leftPageComponentManager,\n  rightPageComponentManager,\n  book,\n}: {\n  leftPageComponentManager: PageComponentManager,\n  rightPageComponentManager: PageComponentManager,\n  book: Book,\n}) {\n  function renderPagePair(spread: BookSpread | undefined): PagePair | undefined {\n    if (spread == null) {\n      return;\n    }\n    return [\n      <leftPageComponentManager.FactoryComponent model={spread}/>,\n      <rightPageComponentManager.FactoryComponent model={spread}/>\n    ];\n  }\n  \n  const animations = new AnimationManager<Animations>();\n  const bookUI = bookUIDescriptor.create({\n    previousSpread: undefined,\n    turnLeftToRight: true,\n  });\n  const controller = new BookController(\n    book,\n    bookUI,\n    animations,\n    [leftPageComponentManager, rightPageComponentManager],\n  );\n\n  const Component = (props: ParentProps<{ onClickCover: () => void }>) => {\n    return (\n      <BookComponent\n          animations={animations}\n          previousPages={renderPagePair(bookUI.previousSpread)}\n          currentPages={renderPagePair(book.spread)}\n          onClickCover={props.onClickCover}>\n        {props.children}\n      </BookComponent>\n    );\n  };\n\n  return {\n    Component,\n    controller,\n  };\n}\n\n","import { For, JSX, JSXElement, ParentProps, createSignal } from 'solid-js';\nimport styles from './book.module.scss'\nimport { AnimationManager } from 'ui/animation/animation_manager';\nimport { Animations } from './book_controller';\n\nconst FAKE_PAGE_COUNT = 64;\n\nexport type PagePair = [JSXElement, JSXElement];\n\nexport function PageComponent(props: ParentProps<{\n  z: number,\n  onClick?: () => void,\n  // TODO: find correct typing for style\n  style?: JSX.CSSProperties,\n}>) {\n  return (\n    <div class={styles.page} onClick={props.onClick} style={{\n      transform: `translateZ(${props.z}px)`,\n      ...props.style\n    }}>\n      {props.children}\n    </div>\n  );\n}\n\nexport function BookComponent(props: ParentProps<{\n  animations: AnimationManager<Animations>,\n  previousPages: PagePair | undefined,\n  currentPages: PagePair | undefined,\n  onClickCover?: () => void,\n}>) {\n  const [spineRef, setSpineRef] = createSignal<HTMLDivElement>();\n  return (\n    <div class={styles.container}>\n      <div class={styles.book}>\n        {/* Back half */}\n        <PageComponent z={-0.5 - FAKE_PAGE_COUNT / 2}/>\n\n        <For each={[...Array(FAKE_PAGE_COUNT / 2).keys()]}>\n          {page =>\n            // `FAKE_PAGE_COUNT / 2 - 1` is just so DOM order matches physical order but its pretty ugly, can probably just use `z-index`\n            <PageComponent z={-1.5 - (FAKE_PAGE_COUNT / 2 - 1 - page)} />\n          }\n          </For>\n\n        {/* Right page */}\n        <PageComponent z={-0.5}>\n          {props.currentPages?.[1]}\n        </PageComponent>\n\n        <div\n            classList={{\n              [styles.spine]: true,\n              [styles.open]: props.currentPages != null,\n            }}\n            onAnimationEnd={props.animations.createAnimationEndEventListener(\n              spineRef,\n              () => ['turn', styles.openAnimation],\n            )}\n            ref={setSpineRef}>\n          {/* Left page */}\n          <PageComponent z={0.5}>\n            {/* The left page has been rotated so we have to rotate its contents back */}\n            <div style={{ transform: 'rotateY(180deg)' }}>\n              {props.currentPages?.[0]}\n            </div>\n          </PageComponent>\n\n          {/* Front half */}\n          <For each={[...Array(FAKE_PAGE_COUNT / 2).keys()]}>\n            {page =>\n              <PageComponent z={1.5 + page} />\n            }\n          </For>\n\n          <PageComponent z={0.5 + FAKE_PAGE_COUNT / 2} onClick={props.onClickCover}>\n            <h1>GRAND TERMINUS</h1>\n          </PageComponent>\n        </div>\n        {props.children && (\n          <div class={styles.spread}>\n            {props.children}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n",".container {\n  //display: flex;\n  position: absolute;\n  // align-items: center;\n  // justify-content: center;\n  width: 100%;\n  height: 100%;\n  transform: translateZ(32px);\n}\n\n.book {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  /* TODO: use an animation to center book */\n  transition: transform 1s;\n  will-change: transform;\n}\n\n.spread {\n  width: 200%;\n  margin-left: -100%;\n  height: 100%; \n}\n\n.spine {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  transform-origin: left;\n}\n\n.page {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  transform-origin: left bottom;\n  background: ghostwhite;\n  box-shadow: rgba(0, 0, 0, 0.15) 0px 1.95px 0px;\n  background: linear-gradient(90deg, gainsboro 0%, ghostwhite 5%);\n}\n\n.page:last-child {\n  background: darkslategray;\n  color: white;\n  text-align: center;\n}\n\n.open {\n  animation-name: openAnimation;\n  animation-duration: .5s;\n  animation-timing-function: ease-in;\n  // NOTE\n  // rather than rely on filling forward, I saw a talk \n  // internally at Canva where the speaker recommended having the final\n  // state in your class, and animating from the old state to the final state.\n  // I think it's more robust or something\n  animation-fill-mode: forwards;\n}\n\n@keyframes openAnimation {\n  from {\n    transform: rotateY(0deg);\n  }\n\n  to {\n    transform: rotateY(-180deg);\n  }\n}","import { ComponentManager } from \"components/component_manager\";\nimport { PageController } from \"components/page/page_controller\";\nimport { booleanDescriptor } from \"model/descriptor/literals\";\nimport { optionalDescriptor } from \"model/descriptor/option\";\nimport { activeRecordDescriptor } from \"model/descriptor/record\";\nimport { Book, BookSpread, bookSpreadDescriptor } from \"model/domain\";\nimport { batch } from \"solid-js\";\nimport { AnimationManager } from \"ui/animation/animation_manager\";\n\nexport type Animations = 'turn';\n\nexport type PageComponentManager = ComponentManager<BookSpread, PageController>;\n\nexport const bookUIDescriptor = activeRecordDescriptor({\n  previousSpread: optionalDescriptor(bookSpreadDescriptor),\n  turnLeftToRight: booleanDescriptor,\n});\n\nexport type BookUI = typeof bookUIDescriptor.aMutable;\nexport type BookUIState = typeof bookUIDescriptor.aState;\n\nexport class BookController {\n  constructor(\n    private readonly book: Book,\n    private readonly bookUI: BookUI,\n    private animations: AnimationManager<Animations>,\n    private pageComponentManagers: readonly PageComponentManager[],\n  ) { }\n\n  async showSpread(spread: BookSpread | undefined, turnLeftToRight: boolean = false) {\n    if (spread != this.book.spread) {\n      const previousSpread = this.book.spread;\n      if (previousSpread != null) {\n        await Promise.all(\n          this.pageComponentManagers.map(\n            m => m.lookupController(previousSpread)?.popDown()\n          )\n        );\n      }\n      batch(() => {\n        this.bookUI.previousSpread = this.book.spread;\n        this.bookUI.turnLeftToRight = turnLeftToRight;\n        this.book.spread = spread;\n      });\n      await this.animations.waitForAnimation('turn');\n      if (spread != null) {\n        await Promise.all(\n          this.pageComponentManagers.map(m => m.lookupController(spread)?.popUp())\n        );\n      }\n    }\n  }\n}\n","import { TypeDescriptor } from \"./types\";\n\ntype OptionalState<MandatoryTypeDescriptor extends TypeDescriptor> =\n  MandatoryTypeDescriptor['aState'] | undefined;\n\ntype OptionalMutable<MandatoryTypeDescriptor extends TypeDescriptor> =\n  MandatoryTypeDescriptor['aMutable'] | undefined;\n\nclass OptionalTypeDescriptor<MandatoryTypeDescriptor extends TypeDescriptor>\n  implements TypeDescriptor<OptionalState<MandatoryTypeDescriptor>, OptionalMutable<MandatoryTypeDescriptor>> {\n  constructor(private readonly mandatoryTypeDescriptor: MandatoryTypeDescriptor) { }\n\n  aState!: MandatoryTypeDescriptor['aState'] | undefined;\n\n  aMutable!: MandatoryTypeDescriptor['aMutable'] | undefined;\n\n  create(s: OptionalState<MandatoryTypeDescriptor>): OptionalMutable<MandatoryTypeDescriptor> {\n    return s != null ? this.mandatoryTypeDescriptor.create(s) : undefined;\n  }\n\n  snapshot(m: OptionalMutable<MandatoryTypeDescriptor>): OptionalState<MandatoryTypeDescriptor> {\n    return m != null ? this.mandatoryTypeDescriptor.snapshot(m) : undefined;\n  }\n\n  freeze(s: OptionalState<MandatoryTypeDescriptor>): OptionalState<MandatoryTypeDescriptor> {\n    return s != null ? this.mandatoryTypeDescriptor.freeze(s) : undefined;\n  }\n}\n\nexport function optionalDescriptor<MandatoryTypeDescriptor extends TypeDescriptor>(\n  mandatoryTypeDescriptor: MandatoryTypeDescriptor,\n) {\n  return new OptionalTypeDescriptor(mandatoryTypeDescriptor);\n}\n","import { listDescriptor } from \"./descriptor/list\";\nimport { LiteralTypeDescriptor, numberDescriptor } from \"./descriptor/literals\";\nimport { optionalDescriptor } from \"./descriptor/option\";\nimport { activeRecordDescriptor } from \"./descriptor/record\";\nimport { discriminatingUnionDescriptor } from \"./descriptor/union\";\n\nexport const enum SymbolType {\n  // force resource\n  Force = 1,\n  // finesse resource\n  Finesse,\n  // magic resource (fey?)\n  Magic,\n  // fire damage/light\n  Fire,\n  // take pysical damage/heal\n  Damage,\n  // get older/younger\n  Age,\n  // draw a card/put a card back\n  Draw,\n}\n\nexport const enum EffectDirection {\n  Up = 1,\n  Down,\n}\n\nexport type Effect = {\n  readonly symbol: SymbolType,\n  readonly direction: EffectDirection,\n};\n\nexport const enum CardBackgroundType {\n  Crosshatched = 1,\n  Clear,\n  Door,\n  Passageway,\n}\n\nexport const enum CardForegroundType {\n  Rat = 1,\n  Trap,\n  Fountain,\n}\n\nexport const enum CardFaceType {\n  Resource = 1,\n  ResourceBack,\n  Choice,\n  ChoiceBack,\n}\n\nexport const enum ChoiceType {\n  NextTurn = 1,\n  NextPage,\n  NextChapter,\n}\n\nexport type ChoiceNextTurn = {\n  readonly type: ChoiceType.NextTurn,\n};\n\nexport const enum EncounterType {\n  Battle = 1,\n  Event,\n};\n\nexport const enum MonsterType {\n  BigRat = 1,\n};\n\nexport const enum EventType {\n  Fountain = 1,\n}\n\nexport type EncounterBattleDefinition = {\n  readonly type: EncounterType.Battle,\n  readonly monster: MonsterType,\n};\n\nexport type EncounterEventDefinition = {\n  readonly type: EncounterType.Event,\n  readonly event: EventType,\n};\n\nexport type EncounterDefinition = EncounterBattleDefinition | EncounterEventDefinition;\n\nexport type ChoiceNextPage = {\n  readonly type: ChoiceType.NextPage,\n  readonly encounter: EncounterDefinition | undefined,\n};\n\nexport type ChoiceNextChapter = {\n  readonly type: ChoiceType.NextChapter,\n};\n\nexport type Choice = ChoiceNextTurn | ChoiceNextPage | ChoiceNextChapter;\n\n\ntype CardFaceCommon = {\n  readonly name: string,\n  readonly background: CardBackgroundType,\n  readonly foreground: CardForegroundType | undefined,\n  readonly cost: readonly Effect[],\n};\n\nexport type CardFrontResource = CardFaceCommon & {\n  readonly description: string,\n  readonly type: CardFaceType.Resource,\n  readonly benefit: readonly Effect[],\n};\n\nexport type CardBackResource = CardFaceCommon & {\n  readonly type: CardFaceType.ResourceBack,\n};\n\nexport type CardFrontChoice = CardFaceCommon & {\n  readonly type: CardFaceType.Choice,\n  readonly benefit: readonly Effect[],\n  readonly choice: Choice,\n};\n\nexport type CardBackChoice = CardFaceCommon & {\n  readonly type: CardFaceType.ChoiceBack,\n};\n\nexport type CardFace = \n    | CardFrontChoice\n    | CardBackChoice\n    | CardFrontResource\n    | CardBackResource;\n\nexport const enum RecycleTarget {\n  DrawDeckTop = 1,\n  DrawDeckBottom,\n  DrawDeckRandom,\n  DiscardDeckTop,\n}\n\nexport type CardDefinition = {\n  // TODO: not required for room/event cards (maybe?)\n  readonly recycleTarget: RecycleTarget,\n  readonly faces: readonly CardFace[],\n};\n\nexport const cardDescriptor = activeRecordDescriptor({\n  definition: new LiteralTypeDescriptor<CardDefinition>(),\n  visibleFaceIndex: numberDescriptor,\n});\n\nexport const cardSlotDescriptor = activeRecordDescriptor({\n  targetCard: optionalDescriptor(cardDescriptor),\n  playedCards: listDescriptor(cardDescriptor),\n});\n\n// a \"spread\" is two pages viewed together\nexport const enum BookSpreadType {\n  TableOfContents = 1,\n  Room,\n}\n\nexport const bookSpreadTableOfContentsDescriptor = activeRecordDescriptor({\n  type: new LiteralTypeDescriptor<BookSpreadType.TableOfContents>(),\n});\n\nexport const deckDescriptor = listDescriptor(cardDescriptor);\n\nexport const entityDescriptor = activeRecordDescriptor({\n  health: numberDescriptor,\n  maxHealth: numberDescriptor,\n  deck: deckDescriptor,\n});\n\nexport const encounterBattleDescriptor = activeRecordDescriptor({\n  type: new LiteralTypeDescriptor<EncounterType.Battle>(),\n  monster: entityDescriptor,\n  monsterType: new LiteralTypeDescriptor<MonsterType>(),\n});\n\nexport const encounterEventDescriptor = activeRecordDescriptor({\n  type: new LiteralTypeDescriptor<EncounterType.Event>(),\n  eventType: new LiteralTypeDescriptor<EventType>(),\n});\n\nexport const encounterDescriptor = discriminatingUnionDescriptor(\n  {\n    [EncounterType.Battle]: encounterBattleDescriptor,\n    [EncounterType.Event]: encounterEventDescriptor,\n  },\n  s => s.type,\n  m => m.type,  \n);\n\nexport const bookSpreadRoomDescriptor = activeRecordDescriptor({\n  type: new LiteralTypeDescriptor<BookSpreadType.Room>(),\n  cardSlots: listDescriptor(cardSlotDescriptor),\n  encounter: optionalDescriptor(encounterDescriptor),\n});\n\nexport const bookSpreadDescriptor = discriminatingUnionDescriptor(\n  {\n    [BookSpreadType.TableOfContents]: bookSpreadTableOfContentsDescriptor,\n    [BookSpreadType.Room]: bookSpreadRoomDescriptor,\n  },\n  s => s.type,\n  m => m.type,\n);\n\nexport const enum ChapterType {\n  Ruins = 1,\n}\n\nexport const chapterDescriptor = activeRecordDescriptor({\n  type: new LiteralTypeDescriptor<ChapterType>(),\n  deck: deckDescriptor,\n});\n\nexport const bookDescriptor = activeRecordDescriptor({\n  // undefined == closed\n  spread: optionalDescriptor(bookSpreadDescriptor),\n  chapter: chapterDescriptor,\n});\n\nexport const gameDescriptor = activeRecordDescriptor({\n  book: bookDescriptor,\n  playerCharacter: optionalDescriptor(entityDescriptor),\n  playerHand: listDescriptor(cardSlotDescriptor),\n});\n\nexport type Card = typeof cardDescriptor.aMutable;\nexport type CardState = typeof cardDescriptor.aState;\nexport type CardSlot = typeof cardSlotDescriptor.aMutable;\nexport type CardSlotState = typeof cardSlotDescriptor.aState;\nexport type BookSpreadTableOfContents = typeof bookSpreadTableOfContentsDescriptor.aMutable;\nexport type BookSpreadTableOfContentsState = typeof bookSpreadTableOfContentsDescriptor.aState;\nexport type BookSpreadRoom = typeof bookSpreadRoomDescriptor.aMutable;\nexport type BookSpreadRoomState = typeof bookSpreadRoomDescriptor.aState;\nexport type BookSpread = typeof bookSpreadDescriptor.aMutable;\nexport type BookSpreadState = typeof bookSpreadDescriptor.aState;\nexport type EncounterBattle = typeof encounterBattleDescriptor.aMutable;\nexport type EncounterBattleState = typeof encounterBattleDescriptor.aState;\nexport type EncounterEvent = typeof encounterEventDescriptor.aMutable;\nexport type EncounterEventState = typeof encounterEventDescriptor.aState;\nexport type Encounter = typeof encounterDescriptor.aMutable;\nexport type EncounterState = typeof encounterDescriptor.aState;\nexport type Book = typeof bookDescriptor.aMutable;\nexport type BookState = typeof bookDescriptor.aState;\nexport type Deck = typeof deckDescriptor.aMutable;\nexport type DeckState = typeof deckDescriptor.aState;\nexport type Entity = typeof entityDescriptor.aMutable;\nexport type EntityState = typeof entityDescriptor.aState;\nexport type Game = typeof gameDescriptor.aMutable;\nexport type GameState = typeof gameDescriptor.aState;\n","import { TypeDescriptor } from \"./types\";\n\ntype ListState<\n  ElementTypeDescriptor extends TypeDescriptor,\n> = readonly ElementTypeDescriptor['aState'][];\n\ntype ListMutable<\n  ElementTypeDescriptor extends TypeDescriptor,\n> = readonly ElementTypeDescriptor['aMutable'][];\n\n\nclass ListTypeDescriptor<ElementTypeDescriptor extends TypeDescriptor>\n  implements TypeDescriptor<ListState<ElementTypeDescriptor>, ListMutable<ElementTypeDescriptor>> {\n\n  constructor(private readonly elementTypeDescriptor: ElementTypeDescriptor) { }\n\n  aState!: ListState<ElementTypeDescriptor>;\n\n  aMutable!: ListMutable<ElementTypeDescriptor>;\n\n  create(s: ListState<ElementTypeDescriptor>): ListMutable<ElementTypeDescriptor> {\n    return s.map(v => this.elementTypeDescriptor.create(v));\n  }\n\n  snapshot(m: ListMutable<ElementTypeDescriptor>): ListState<ElementTypeDescriptor> {\n    return m.map(v => this.elementTypeDescriptor.snapshot(v));\n  }\n\n  freeze(s: ListState<ElementTypeDescriptor>): ListState<ElementTypeDescriptor> {\n    return Object.freeze(s.map(v => this.elementTypeDescriptor.freeze(v)));\n  }\n}\n\nexport function listDescriptor<ElementTypeDescriptor extends TypeDescriptor,>(elementTypeDescriptor: ElementTypeDescriptor) {\n  return new ListTypeDescriptor(elementTypeDescriptor);\n}","import { TypeDescriptor } from \"./types\";\n\ntype Types = { [k: string]: TypeDescriptor };\n\ntype OneStateOf<C extends Types> = C[keyof C]['aState'];\ntype OneMutableOf<C extends Types> = C[keyof C]['aMutable'];\n\nclass DiscriminatingUnionTypeDescriptor<C extends Types> implements TypeDescriptor<OneStateOf<C>, OneMutableOf<C>> {\n  constructor(\n    private readonly cases: C,\n    private readonly discriminatorState: (s: OneStateOf<C>) => keyof C,\n    private readonly discriminatorMutable: (m: OneMutableOf<C>) => keyof C,\n  ) {\n  }\n\n  aState!: OneStateOf<C>;\n\n  aMutable!: OneMutableOf<C>;\n\n  create(s: OneStateOf<C>): OneMutableOf<C> {\n    const type = this.discriminatorState(s);\n    return this.cases[type].create(s);\n  }\n\n  snapshot(m: OneMutableOf<C>): OneStateOf<C> {\n    const type = this.discriminatorMutable(m);\n    return this.cases[type].snapshot(m);\n  }\n\n  freeze(s: OneStateOf<C>): OneMutableOf<C> {\n    const type = this.discriminatorState(s);\n    return this.cases[type].freeze(s);\n  }\n}\n\nexport function discriminatingUnionDescriptor<C extends Types>(\n  cases: C,\n  discriminatorState: (s: OneStateOf<C>) => keyof C,\n  discriminatorMutable: (m: OneMutableOf<C>) => keyof C,\n) {\n  return new DiscriminatingUnionTypeDescriptor(cases, discriminatorState, discriminatorMutable);\n}\n","import { Card, CardSlot, Game } from \"model/domain\";\nimport { CardSlotComponent as CardSlotComponentImpl } from \"./card_slot\";\nimport { CardSlotsComponent } from \"./card_slots\";\nimport { Accessor, Component, For } from \"solid-js\";\nimport { ComponentManager } from \"components/component_manager\";\nimport { CardSlotController, cardSlotUIDescriptor } from \"./card_slot_controller\";\nimport { InteractionManager } from \"rules/interaction_manager\";\n\nexport function createCardSlots(\n  CardSlotComponent: Component<{ model: CardSlot }>,\n) {\n  const Component = (props : {\n    model: readonly CardSlot[],\n  }) => {\n    return (\n      <CardSlotsComponent\n          CardSlotComponent={CardSlotComponent}\n          cardSlots={props.model}/>\n    );\n  };\n  return {\n    Component,\n  };\n}\n\nexport function createCardSlotManager(\n    CardComponent: Component<{ model: Card }>,\n    interactionManager: Accessor<InteractionManager>,\n    game: Game,\n) {\n  function createCardSlot(cardSlot: CardSlot) {\n    const cardSlotUI = cardSlotUIDescriptor.create({\n      targetCardHidden: false,\n    });\n    const controller = new CardSlotController(cardSlotUI);\n    function internalOnDragStart() {\n      interactionManager().startDrag(cardSlot);\n    } \n    function internalOnDrop() {\n      interactionManager().drop(cardSlot);\n    }\n    function internalOnClick() {\n      interactionManager().click(cardSlot);\n    }\n    \n    function Component() {\n      return (\n          <CardSlotComponentImpl\n              targetCard={cardSlot.targetCard\n                  && !cardSlotUI.targetCardHidden\n                  && <CardComponent\n                      model={cardSlot.targetCard}\n                  />\n              }\n              targetInteraction={interactionManager().allowedInteraction(cardSlot)}\n              onDragStart={internalOnDragStart}\n              onDrop={internalOnDrop}\n              onClick={internalOnClick}\n              bordered={game.playerHand.indexOf(cardSlot) >= 0}\n              used={cardSlot.targetCard == null && cardSlot.playedCards.length > 0}\n          >\n            <For each={cardSlot.playedCards}>\n              {card => {\n                return <CardComponent model={card}/>\n              }}\n            </For>\n          </CardSlotComponentImpl>\n      );\n    }\n    return {\n      controller,\n      Component,\n    };\n  };\n  return new ComponentManager(createCardSlot);\n}\n","import { Interaction } from 'rules/interaction_manager';\nimport styles from './card_slot.module.scss';\nimport { For, JSX, ParentProps, children } from \"solid-js\";\n\nconst interactionStyles: Record<Interaction, string> = Object.freeze({\n  [Interaction.None]: styles.none,\n  [Interaction.Drag]: styles.draggable,\n  [Interaction.Activate]: styles.clickable,\n  [Interaction.Disabled]: styles.immovable,\n  [Interaction.NoDrop]: styles['no-drop'],\n  [Interaction.Drop]: styles.drop,\n  [Interaction.Dragging]: styles.dragging,\n  [Interaction.LongPress]: styles['long-press'],\n});\n\nexport function CardSlotComponent(props: ParentProps<{\n  targetCard: JSX.Element,\n  targetInteraction: Interaction,\n  bordered: boolean,\n  onDragStart: () => void,\n  onDrop: () => void,\n  onClick: () => void,\n  used: boolean,\n}>) {\n  return (\n    <div\n        class={styles.container}\n        onPointerUp={props.onDrop}>\n      <div\n          classList={{ \n            [styles['target-card']]: true,\n            [interactionStyles[props.targetInteraction]]: true,\n            [styles.bordered]: props.bordered\n          }}\n          onPointerDown={props.onDragStart}\n          onClick={props.onClick}>\n        {props.targetCard}\n      </div>\n      <div classList={{\n        [styles['played-cards']]: true,\n        [styles.used]: props.used,\n      }}>\n        <For each={children(() => props.children).toArray()}>\n          {child => (\n            <div\n                classList={{\n                  [styles['played-card']]: true,\n                  [styles.used]: props.used,\n                }}\n            >{child}</div>\n          )}\n        </For>\n      </div>\n    </div>\n  );\n}\n","@use '../constants.module.scss';\n\n$usedAnimationDuration: 400ms;\n\n.container {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-items: start;\n  height: calc(constants.$cardHeight * 2.5);\n  gap: 2%;\n}\n\n.target-card {\n  width: constants.$cardWidth;\n  height: constants.$cardHeight;\n}\n\n.target-card.bordered {\n  border: .1vw solid #422;\n  border-radius: constants.$cardBorderRadius;\n}\n\n.target-card.none {\n  cursor: default;\n}\n\n.target-card.draggable {\n  cursor: grab;\n}\n\n.target-card.dragging {\n  cursor: grabbing;\n}\n\n.target-card.clickable {\n  cursor: pointer;\n}\n\n.target-card.immovable {\n  cursor: not-allowed;\n}\n\n.target-card.no-drop {\n  cursor: no-drop;\n}\n\n.target-card.drop {\n  cursor: pointer;\n}\n\n.target-card.long-press {\n  cursor: pointer;\n}\n\n.target-card.long-pressing {\n  cursor: grabbing;\n}\n\n.played-cards {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-items: start;\n  transform-origin: calc(constants.$cardWidth/2) calc(constants.$cardHeight/2);\n  transition: transform $usedAnimationDuration ease-in-out;\n}\n\n.played-cards.used {\n  transform: translateY(calc(constants.$cardHeight/-1)) rotateZ(90deg);\n}\n\n.played-card {\n  margin-bottom: calc(-.75 * constants.$cardHeight);\n  transition: margin-bottom $usedAnimationDuration ease-in-out;\n}\n\n.played-card.used {\n  margin-bottom: calc(-1 * constants.$cardHeight);\n}\n\n@for $i from 1 through 3 {\n  .played-card:nth-child(#{$i}) {\n    transform: translateZ(calc(#{$i}vw * 0.2));\n  }\n}\n\n\n","import { UnreachableError } from \"base/unreachable_error\";\nimport { CardController } from \"components/card/card_controller\";\nimport { ControllerManger } from \"components/component_manager\";\nimport { Card, CardFaceType, CardSlot } from \"model/domain\";\nimport { Accessor, Setter, batch, createSignal } from \"solid-js\";\nimport { cardFace } from \"./cards\";\nimport { GameManager } from \"./game_manager\";\nimport { CardSlotController } from \"components/card_slot/card_slot_controller\";\nimport { delay } from \"base/delay\";\n\nexport const enum Interaction {\n  None = 1,\n  Activate,\n  Drag,\n  Dragging,\n  Drop,\n  NoDrop,\n  LongPress,\n  Disabled,\n}\n\ntype DragState = [Card, CardSlot] | undefined;\ntype MousePosition = [number, number] | undefined;\ntype LongPress = CardSlot | undefined;\n\nexport class InteractionManager {\n  private readonly dragged: Accessor<DragState>;\n  private readonly setDragged: Setter<DragState>;\n  private readonly mousePosition: Accessor<MousePosition>;\n  private readonly setMousePosition: Setter<MousePosition>;\n  private readonly longPress: Accessor<LongPress>;\n  private readonly setLongPress: Setter<LongPress>;\n  private lastAnimation: Promise<void> = Promise.resolve();\n\n  constructor(\n      private gameManager: GameManager,\n      private cardManager: ControllerManger<Card, CardController>,\n      private cardSlotManager: ControllerManger<CardSlot, CardSlotController>,\n  ) {\n    const [dragged, setDragged] = createSignal<DragState>()\n    this.dragged = dragged;\n    this.setDragged = setDragged;\n    const [mousePosition, setMousePosition] = createSignal<MousePosition>();\n    this.mousePosition = mousePosition;\n    this.setMousePosition = setMousePosition;\n    const [longPress, setLongPress] = createSignal<LongPress>();\n    this.longPress = longPress;\n    this.setLongPress = setLongPress;\n  }\n\n  get dragging() {\n    return this.dragged() != null;\n  }\n\n  get lastMousePosition() {\n    return this.mousePosition();\n  }\n\n  set lastMousePosition(mousePosition: MousePosition) {\n    this.setMousePosition(mousePosition);\n  }\n\n  get draggedCard() {\n    return this.dragged()?.[0];\n  }\n\n  allowedInteraction(\n    targetCardSlot: CardSlot | undefined,\n  ): Interaction {\n    const dragged = this.dragged();\n    const targetCard = targetCardSlot?.targetCard;\n    if (dragged != null) {\n      const [_, draggedCardSlot] = dragged;\n      if (targetCardSlot == draggedCardSlot) {\n        return Interaction.Dragging;\n      }\n      if (targetCard != null) {\n        // can drop \n        return Interaction.Drop;\n      }\n      return Interaction.NoDrop;\n    }\n    if (targetCard == null) {\n      return Interaction.None;\n    }\n\n    const targetFace = cardFace(\n      targetCard,\n      !!this.cardManager.lookupController(targetCard)?.isPeeking()\n    );\n    switch (targetFace.type) {\n      case CardFaceType.Choice:\n        return Interaction.Activate;\n      case CardFaceType.ChoiceBack:\n        return Interaction.Activate;\n      case CardFaceType.Resource:\n        return Interaction.Drag;\n      case CardFaceType.ResourceBack:\n        return Interaction.LongPress;\n      default:\n        throw new UnreachableError(targetFace);\n    }\n  }\n\n  click(cardSlot: CardSlot) {\n    return this.politelyAnimate(async () => {\n      if (cardSlot.targetCard != null) {\n        return this.gameManager.chooseCard(cardSlot.targetCard);\n      }  \n    });\n  }\n\n  startDrag(cardSlot: CardSlot) {\n    return this.politelyAnimate(async () => {\n      const interaction = this.allowedInteraction(cardSlot);\n      const targetCard = cardSlot.targetCard;\n      if (targetCard != null) {\n        if (interaction === Interaction.Drag) {\n          batch(() => {\n            this.cardSlotManager.lookupController(cardSlot)?.setTargetCardHidden(true);\n            this.setDragged([targetCard, cardSlot]);\n          });  \n        } else if (interaction === Interaction.LongPress) {\n          if (this.longPress() == null) {\n            await this.cardManager.lookupController(targetCard)?.flipTemporarily(true);\n            this.setLongPress(cardSlot);\n          }\n        }\n      }  \n    });\n  }\n\n  clearDrag() {\n    return this.politelyAnimate(async () => {\n      const dragged = this.dragged();\n      if (dragged) {\n        const [draggedCard, draggedCardSlot] = dragged;\n        batch(() => {\n          draggedCardSlot.targetCard = draggedCard;\n          this.cardSlotManager.lookupController(draggedCardSlot)?.setTargetCardHidden(false);\n          this.setDragged();\n        });  \n      }\n      const longPress = this.longPress();\n      if (longPress) {\n        const cardSlot = longPress;\n        this.setLongPress();\n        if (cardSlot.targetCard) {\n          await this.cardManager.lookupController(cardSlot.targetCard)?.flipTemporarily(false);\n        }            \n      }  \n    });\n  }\n\n  drop(targetCardSlot: CardSlot) {\n    return this.politelyAnimate(async () => {\n      const dragged = this.dragged();\n      if (dragged) {\n        const [draggedCard, draggedCardSlot] = dragged;\n        const interaction = this.allowedInteraction(targetCardSlot);\n        if (draggedCardSlot != targetCardSlot && interaction == Interaction.Drop) {\n          batch(() => {\n            targetCardSlot.playedCards = [...targetCardSlot.playedCards, draggedCard];\n            draggedCardSlot.targetCard = undefined;\n            this.setDragged();\n          });  \n          this.gameManager.normalizeBoard();\n        } else {\n          batch(() =>{\n            draggedCardSlot.targetCard = draggedCard;\n            this.setDragged();\n          });\n        }\n        this.cardSlotManager.lookupController(draggedCardSlot)?.setTargetCardHidden(false);\n      }  \n    });\n  }\n\n  private politelyAnimate(action: () => Promise<void>): Promise<void> {\n    this.lastAnimation = this.lastAnimation\n        // prevent errors from breaking this permanently\n        .catch(e => console.warn(e))\n        .then(action)\n        // add a delay to ensure a render happens between state changes\n        .then(() => delay(0));\n    return this.lastAnimation;\n  }\n}\n\n","export class UnreachableError extends Error {\n  constructor(value: never) {\n    super();\n  }\n}\n","import { Card, CardFaceType, CardSlot, Effect, Game } from \"model/domain\";\nimport { allCardSlots } from \"./games\";\nimport { UnreachableError } from \"base/unreachable_error\";\nimport { ControllerManger } from \"components/component_manager\";\nimport { CardController } from \"components/card/card_controller\";\n\nexport function cardFace(card: Card, peeking: boolean) {\n  const faces = card.definition.faces; \n  return faces[(card.visibleFaceIndex + (peeking ? 1 : 0))%faces.length];\n}\n\nexport type EffectUsage = {\n  effect: Effect,\n  used: boolean,\n};\n\nexport type EffectUsages = {\n  cost: readonly EffectUsage[],\n  benefit: readonly EffectUsage[],\n};\n\nexport function calculateCardEffects(card: Card, cardControllerManger: ControllerManger<Card, CardController> | undefined): {\n  cost: readonly Effect[],\n  benefit: readonly Effect[],\n} {\n  const face = cardFace(card, !!cardControllerManger?.lookupController(card)?.isPeeking());\n  switch (face.type) {\n    case CardFaceType.Resource:\n      return {\n        cost: face.cost,\n        benefit: face.benefit,\n      };\n    case CardFaceType.Choice:\n      return {\n        cost: face.cost,\n        benefit: face.benefit,\n      };\n    case CardFaceType.ResourceBack:\n      return {\n        cost: face.cost,\n        benefit: [],\n      };\n    case CardFaceType.ChoiceBack:\n      return {\n        cost: face.cost,\n        benefit: [],\n      };\n    default: \n      throw new UnreachableError(face);\n  }\n}\n\nexport function calculateCardEffectUsages(game: Game, card: Card, cardControllerManger: ControllerManger<Card, CardController> | undefined): EffectUsages {\n\n  const cardSlots = allCardSlots(game);\n\n  // find the slot\n  const cardSlot = cardSlots.find(cardSlot => {\n    return cardSlot.targetCard === card\n        || cardSlot.playedCards.some(c => c === card);\n  });\n\n  // if the card isn't in a slot return the values are unused\n  if (cardSlot == null || cardSlot.targetCard == null) {\n    const {\n      cost,\n      benefit\n    } = calculateCardEffects(card, cardControllerManger);\n  \n    return {\n      cost: cost.map(effect => ({\n        effect,\n        used: cardSlot != null,\n      })),\n      benefit: benefit.map(effect => ({\n        effect,\n        used: cardSlot != null,\n      })),\n    };\n  }\n\n  if (card === cardSlot.targetCard) {\n    // it's the target card\n    return calculateTargetCardEffectUsages(cardSlot, cardControllerManger);\n  } else {\n    // it's a played card\n    const { cost: targetCardCost } = calculateCardEffects(cardSlot.targetCard, undefined);\n    const remainingCosts = targetCardCost.reduce((acc, effect) => {\n      const count = acc.get(effect) || 0;\n      acc.set(effect, count + 1);\n      return acc;\n    }, new Map<Effect, number>);\n    // iterate through until we find our card\n    for(const playedCard of cardSlot.playedCards) {\n      const { cost: playedCardCost, benefit: playedCardBenefit } = calculateCardEffects(playedCard, undefined);\n      const playedCardBenefitUsages = playedCardBenefit.map(effect => {\n        const remainingCost = remainingCosts.get(effect) || 0;\n        remainingCosts.set(effect, remainingCost - 1);\n        return {\n          effect,\n          used: remainingCost > 0,\n        };\n      });\n\n      if (playedCard === card) {\n        const playedCardCostUsages = playedCardCost.map(effect => ({\n          effect,\n          used: true,\n        }));\n        return {\n          cost: playedCardCostUsages,\n          benefit: playedCardBenefitUsages,\n        }\n      }\n    }\n  }\n  // should never happen\n  return {\n    cost: [],\n    benefit: [],\n  };\n}\n\nexport function calculateTargetCardEffectUsages(cardSlot: CardSlot, cardControllerManger: ControllerManger<Card, CardController> | undefined): EffectUsages {\n  const playedCardEffectTotals = calculatePlayedCardEffectTotals(cardSlot, cardControllerManger);\n  const targetCard = cardSlot.targetCard;\n  if (targetCard == null) {\n    return {\n      cost: [],\n      benefit: [],\n    };\n  }\n  const { cost, benefit } = calculateCardEffects(targetCard, cardControllerManger);\n  const costUsages = cost.map<EffectUsage>(effect => {\n    const total = playedCardEffectTotals.get(effect) || 0;\n    playedCardEffectTotals.set(effect, total - 1);\n    return {\n      effect,\n      used: total > 0,\n    };\n  }) || [];\n  const benefitUsages = benefit.map(effect => ({\n    effect,\n    used: false,\n  }));\n  return {\n    cost: costUsages,\n    benefit: benefitUsages,\n  };\n}\n\nfunction calculatePlayedCardEffectTotals(cardSlot: CardSlot, cardControllerManger: ControllerManger<Card, CardController> | undefined): Map<Effect, number> {\n  return cardSlot.playedCards.reduce((acc, card) => {\n    const face = cardFace(card, !!cardControllerManger?.lookupController(card)?.isPeeking());\n    if (face.type === CardFaceType.Resource) {\n      return face.benefit.reduce((acc, effect) => {\n        const count = acc.get(effect) || 0;\n        acc.set(effect, count+1);\n        return acc;\n      }, acc);\n    }\n    return acc;\n  }, new Map<Effect, number>());\n}\n","import { BookSpreadType, CardSlot, Deck, DeckState, EncounterBattle, EncounterType, Game } from \"model/domain\";\n\nexport function allCardSlots(game: Game): readonly CardSlot[] {\n  return [...game.playerHand, ...pageCardSlots(game)]\n}\n\nexport function pageCardSlots(game: Game): readonly CardSlot[] {\n  const spread = game.book.spread;\n  return spread?.type === BookSpreadType.Room\n      ? spread.cardSlots\n      : [];\n}\n\nexport type DeckHolder = [() => Deck, (deck: Deck) => void];\n\nexport function pageDeck(game: Game): DeckHolder {\n  const spread = game.book.spread;\n  if (spread?.type === BookSpreadType.Room) {\n    if (spread.encounter?.type === EncounterType.Battle) {\n      const monster = spread.encounter.monster;\n      return [\n        () => monster.deck,\n        deck => monster.deck = deck,\n      ];\n    }\n  }\n  // return the chapter deck\n  return [\n    () => game.book.chapter.deck,\n    deck => game.book.chapter.deck = deck,\n  ];\n}\n\nexport function playerDeck(game: Game): DeckHolder | undefined {\n  const playerCharacter = game.playerCharacter;\n  return playerCharacter && [\n    () => playerCharacter.deck,\n    deck => playerCharacter.deck = deck,\n  ];\n}\n\nexport function randomizeDeck(deck: DeckState): DeckState {\n  const mutableDeck = [...deck];\n  for (let i=0; i<mutableDeck.length; i++) {\n    const [card] = mutableDeck.splice(Math.floor(Math.random() * mutableDeck.length), 1);\n    mutableDeck.push(card);\n  }\n  return mutableDeck;\n}\n\nexport function gameEncounterBattle(game: Game): EncounterBattle | undefined {\n  const spread = game.book.spread;\n  if (spread?.type === BookSpreadType.Room) {\n    if (spread.encounter?.type === EncounterType.Battle) {\n      return spread.encounter;\n    }\n  }\n}","import { Component, For } from 'solid-js';\nimport styles from './card_slots.module.scss';\nimport { CardSlot } from 'model/domain';\n\nexport function CardSlotsComponent(props: {\n  cardSlots: readonly CardSlot[],\n  CardSlotComponent: Component<{ model: CardSlot }>,\n}) {\n  return (\n    <div class={styles.container}>\n      <For each={props.cardSlots}>\n        {cardSlot => (\n          <props.CardSlotComponent model={cardSlot}/>\n        )}\n      </For>\n    </div>\n  );\n}\n",".container {\n  display: flex;\n  justify-content: stretch;\n  width: 100%;\n  height: 100%;\n}","import { Component } from \"solid-js\"\n\nexport type ComponentAndController<ComponentProps, Controller> = {\n  controller: Controller,\n  Component: Component<ComponentProps>,\n};\n\nexport interface ControllerManger<Model extends object, Controller> {\n  lookupController(model: Model): Controller | undefined;\n}\n\nexport class ComponentManager<Model extends object, Controller, ComponentProps = {}>\n    implements ControllerManger<Model, Controller>{\n  private cache = new WeakMap<Model, ComponentAndController<ComponentProps, Controller>>();\n\n  readonly FactoryComponent = (props: { model: Model } & ComponentProps) => {\n    const Component = this.lookupOrCreateComponent(props.model);\n    return <Component {...props}/>;\n  };\n\n  constructor(\n    private readonly factory: (model: Model) => ComponentAndController<ComponentProps, Controller>\n  ) {}\n\n  private lookupOrCreate(model: Model): ComponentAndController<ComponentProps, Controller> {\n    let result = this.cache.get(model);\n    if (result == null) {\n      result = this.factory(model);\n      this.cache.set(model, result);\n    }\n    return result;\n  }\n\n  lookupOrCreateComponent(model: Model): Component<ComponentProps> {\n    return this.lookupOrCreate(model).Component;\n  }\n\n  lookupController(model: Model): Controller | undefined {\n    return this.cache.get(model)?.controller;\n  }\n}","import { booleanDescriptor } from \"model/descriptor/literals\";\nimport { activeRecordDescriptor } from \"model/descriptor/record\";\n\nexport const cardSlotUIDescriptor = activeRecordDescriptor({\n  targetCardHidden: booleanDescriptor,\n});\n\nexport type CardSlotUI = typeof cardSlotUIDescriptor.aMutable;\nexport type CardSlotUIState = typeof cardSlotUIDescriptor.aState;\n\nexport class CardSlotController {\n  constructor(private readonly cardSlotUI: CardSlotUI) {\n  }\n\n  setTargetCardHidden(hidden: boolean) {\n    this.cardSlotUI.targetCardHidden = hidden;\n  }\n}","import { Card, Game } from \"model/domain\";\nimport { Animations, CardController, FlipState, cardUIDescriptor } from \"./card_controller\";\nimport { AnimationManager } from \"ui/animation/animation_manager\";\nimport { CardComponent } from \"./card\";\nimport { CardFaceComponent } from \"./face/card_face\";\nimport { ComponentManager } from \"components/component_manager\";\nimport { createMemo } from \"solid-js\";\nimport { calculateCardEffectUsages, cardFace } from \"rules/cards\";\n\nexport function createCardManager(game: Game) {\n  function createCard(card: Card) {\n    const animations = new AnimationManager<Animations>();\n    const cardUI = cardUIDescriptor.create({\n      flipState: FlipState.Flat,\n      peeking: false,\n    });\n\n    function Component() {\n\n      const usage = createMemo(() => {\n        return calculateCardEffectUsages(game, card, cardManager);\n      });\n  \n      return (\n        <CardComponent\n            flipState={cardUI.flipState}\n            elevated={cardUI.peeking || cardUI.flipState === FlipState.FlippingUpToVertical}\n            animations={animations}>\n          <CardFaceComponent\n              face={cardFace(card, cardUI.peeking)}\n              definition={card.definition}\n              cost={usage().cost}\n              benefit={usage().benefit}\n          />\n        </CardComponent>\n      );\n    }\n  \n    const controller = new CardController(card, cardUI, animations);\n  \n    return {\n      Component,\n      controller,\n    };\n  };\n  const cardManager = new ComponentManager(createCard);\n  return cardManager;\n}\n","import { AnimationManager } from \"ui/animation/animation_manager\";\nimport { LiteralTypeDescriptor, booleanDescriptor } from \"model/descriptor/literals\";\nimport { activeRecordDescriptor } from \"model/descriptor/record\";\nimport { Card} from \"model/domain\";\nimport { batch } from \"solid-js\";\n\nexport const enum FlipState {\n  Flat = 1,\n  FlippingUpToVertical,\n  FlippingDownFromVertical,\n}\n\nexport type Animations = FlipState;\n\nexport const cardUIDescriptor = activeRecordDescriptor({\n  flipState: new LiteralTypeDescriptor<FlipState>(),\n  peeking: booleanDescriptor,  \n});\n\nexport type CardUI = typeof cardUIDescriptor.aMutable;\nexport type CardUIState = typeof cardUIDescriptor.aState;\n\nexport class CardController {\n  constructor(\n    private readonly card: Card,\n    private readonly cardUI: CardUI,\n    private readonly animations: AnimationManager<Animations>,\n  ) {}\n\n  async flip(): Promise<void> {\n    await this.internalFlip(() => {\n      this.card.visibleFaceIndex = (this.card.visibleFaceIndex + 1) % this.card.definition.faces.length;\n    })\n  }\n\n  async flipTemporarily(peeking: boolean): Promise<void> {\n    await this.internalFlip(() => {\n      this.cardUI.peeking = peeking;\n    });\n  }\n\n  isPeeking() {\n    return this.cardUI.peeking;\n  }\n\n  private async internalFlip(doFlip: () => void) {\n    this.cardUI.flipState = FlipState.FlippingUpToVertical;\n    await this.animations.waitForAnimation(FlipState.FlippingUpToVertical);\n    batch(() => {\n      doFlip();\n      this.cardUI.flipState = FlipState.FlippingDownFromVertical;\n    });\n    await this.animations.waitForAnimation(FlipState.FlippingDownFromVertical);\n    this.cardUI.flipState = FlipState.Flat;\n  }\n}\n","import { Animations, FlipState } from \"./card_controller\";\nimport styles from './card.module.scss';\nimport { ParentProps, createSignal } from \"solid-js\";\nimport { AnimationManager } from \"ui/animation/animation_manager\";\n\nexport type CardProps = ParentProps<{\n  flipState: FlipState,\n  elevated: boolean,\n  animations: AnimationManager<Animations>,\n}>;\n\nexport function CardComponent(props: CardProps) {\n  const [cardRef, setCardRef] = createSignal<HTMLDivElement>();\n  return (\n    <div\n        classList={{\n          [styles.card]: true,\n          [styles.elevated]: props.elevated,\n        }}>\n      <div\n          classList={{\n              [styles.rotate]: true,\n              [styles.flat]: props.flipState === FlipState.Flat,\n              [styles.flippingUpToVertical]: props.flipState === FlipState.FlippingUpToVertical,\n              [styles.flippingDownFromVertical]: props.flipState === FlipState.FlippingDownFromVertical,\n          }}\n          onTransitionEnd={props.animations.createTransitionEndEventListener(\n            cardRef,\n            () => props.flipState,\n          )}\n          ref={setCardRef}\n      >\n        <div classList={{\n            [styles.scale]: true,\n            [styles.flat]: props.flipState === FlipState.Flat,\n            [styles.flippingUpToVertical]: props.flipState === FlipState.FlippingUpToVertical,\n            [styles.flippingDownFromVertical]: props.flipState === FlipState.FlippingDownFromVertical,\n        }}>\n          {props.children}\n        </div>\n      </div>\n    </div>\n  );\n}\n","@use 'components/constants.module.scss';\n\n$flipAnimationDuration: 200ms;\n\n.card {\n  width: constants.$cardWidth;\n  height: constants.$cardHeight;\n  transform-origin: center;\n  transform: translateZ(0);\n  transition: transform $flipAnimationDuration ease-in-out;\n}\n\n.card.elevated {\n  transform: translateZ(calc(constants.$cardWidth/2));\n}\n\n.rotate {\n  transform: rotateY(0);\n  transition: none;\n}\n\n.rotate.flippingUpToVertical {\n  transform: rotateY(90deg);\n  transition: transform calc($flipAnimationDuration/2) ease-in;\n  transition-delay: $flipAnimationDuration;\n}\n\n.rotate.flippingDownFromVertical {\n  transform: rotateY(180deg);\n  transition: transform calc($flipAnimationDuration/2) ease-out;\n}\n\n.scale {\n  transition: none;\n}\n\n.scale.flat, .scale.flippingUpToVertical {\n  transform: scaleX(1);\n}\n\n.scale.flippingDownFromVertical {\n  transform: scaleX(-1);\n}","import { CardBackgroundType, CardDefinition, CardFace, CardForegroundType } from \"model/domain\";\nimport styles from './card_face.module.scss';\nimport { EffectUsage } from \"rules/cards\";\nimport { EffectStripComponent } from \"components/effect/effect_strip\";\nimport { CardFaceDescriptionComponent } from \"./card_face_description\";\nimport { CardFaceNameComponent } from \"./card_face_name\";\n\n\ntype CardFaceProps = {\n  face: CardFace\n  definition: CardDefinition,\n};\n\nexport function CardFaceComponent(props: CardFaceProps & {\n  cost: readonly EffectUsage[],\n  benefit: readonly EffectUsage[],\n}) {\n  return (\n    <div classList={{\n      [styles['card-face']]: true,\n      // backgrounds\n      [styles.background]: true,\n      [styles.clear]: props.face.background === CardBackgroundType.Clear,\n      [styles.crosshatched]: props.face.background === CardBackgroundType.Crosshatched,\n      [styles.door]: props.face.background === CardBackgroundType.Door,\n      [styles.passageway]: props.face.background === CardBackgroundType.Passageway,\n      // foregrounds\n      [styles.foreground]: props.face.foreground != null,\n      [styles.rat]: props.face.foreground === CardForegroundType.Rat,\n      [styles.trap]: props.face.foreground === CardForegroundType.Trap,\n      [styles.fountain]: props.face.foreground === CardForegroundType.Fountain,\n    }}>\n      <EffectStripComponent effects={props.benefit}/>\n      <CardFaceDescriptionComponent>\n        <CardFaceNameComponent name={props.face.name}/>\n      </CardFaceDescriptionComponent>\n      <EffectStripComponent effects={props.cost}/>\n    </div>\n  );\n}\n","@use '../../constants.module.scss';\n\n.card-face {\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  border-radius: constants.$cardBorderRadius;\n  border-width: .1vh;\n  border-style: solid;  \n  box-sizing: border-box;\n  color: white;\n  text-shadow: black 0 0 .5vw;\n  border-color: #222;\n}\n\n.card-face.background.clear {\n  background-color: #335;\n}\n\n.card-face.background.door {\n  background-color: #533;\n}\n\n.card-face.background.crosshatched {\n  background-color: #444;\n}\n\n.card-face.background.passageway {\n  background-color: #353;\n}\n\n.card-face.foreground::before {\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  filter: grayscale(1);\n  opacity: .5;\n  position: absolute;\n  text-align: center;\n  vertical-align: middle;\n  font-size: calc(constants.$cardWidth/2);\n  line-height: constants.$cardHeight;\n}\n\n.card-face.foreground.rat::before {\n  content: '🐀';\n}\n\n.card-face.foreground.trap::before {\n  content: '🪤';\n}\n\n.card-face.foreground.fountain::before {\n  content: '⛲';\n}","import styles from './effect_strip.module.scss';\nimport { For } from \"solid-js\";\nimport { EffectComponent } from \"./effect\";\nimport { EffectUsage } from \"rules/cards\";\n\nexport function EffectStripComponent(props: {\n  effects?: readonly EffectUsage[],\n}) {\n  return (\n    <div class={styles.container}>\n      <For each={props.effects}>\n        {effect => (<EffectComponent effect={effect.effect} used={effect.used}/>)}\n      </For>\n    </div>\n  );\n}",".container {\n  width: 100%;\n  height: 1vw;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n}","import { Effect, EffectDirection, SymbolType } from \"model/domain\";\nimport styles from './effect.module.scss';\n\nconst ResourceSymbols: Record<SymbolType, string> = {\n  [SymbolType.Force]: 'A',\n  [SymbolType.Finesse]: 'P',\n  [SymbolType.Magic]: 'V',\n  [SymbolType.Damage]: 'W',\n  [SymbolType.Age]: 'Q',\n  [SymbolType.Fire]: 'M',\n  [SymbolType.Draw]: 'G',\n};\n\nexport function EffectComponent(props: {\n  effect: Effect,\n  used: boolean,\n}) {\n  return (\n    <div classList={{\n      [styles.container]: true,\n      [styles.down]: props.effect.direction === EffectDirection.Down,\n      [styles.used]: props.used,\n    }}>\n      {ResourceSymbols[props.effect.symbol]}\n    </div>\n  );\n}\n",".container {\n  font-size: 1vw;\n  text-align: center;\n  vertical-align: middle;\n  overflow: hidden;\n  width: 1vw;\n  height: 1vw;\n  opacity: 1;\n  transition: filter 1000ms ease-in-out;\n  color: red;\n}\n\n.container.down {\n  transform: scaleY(-1);\n  transform-origin: center;\n}\n\n.container.used {\n  filter: grayscale(1);\n}","import { ParentProps } from \"solid-js\";\nimport styles from './card_face_description.module.scss';\n\nexport function CardFaceDescriptionComponent(props: ParentProps<{}>) {\n  return (\n    <div class={styles.container}>\n      {props.children}\n    </div>\n  );\n}",".container {\n  flex: 1;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n}\n\n","import styles from './card_face_name.module.scss';\n\nexport function CardFaceNameComponent(props: {\n  name: string,\n}) {\n  return (<div class={styles.container}>{props.name}</div>);\n}","@use 'components/constants.module.scss';\n\n.container {\n  font-size: calc(constants.$cardHeight/7);\n  text-align: center;\n  vertical-align: middle;\n  font-weight: bold;\n  text-transform: capitalize;\n}\n","import { BookSpread } from \"model/domain\";\nimport { Animations, PageController, PageSide, pageUIDescriptor } from \"./page_controller\";\nimport { AnimationManager } from \"ui/animation/animation_manager\";\nimport { PageComponent } from \"./page\";\nimport { ComponentManager } from \"components/component_manager\";\n\nexport function createPageManager({\n  side,\n}: {\n  side: PageSide, \n}) {\n  // might need a different controller per spread type?\n  function createPage(spread: BookSpread) {\n    const animations = new AnimationManager<Animations>();\n    const pageUI = pageUIDescriptor.create({\n      popped: false,\n    });\n    const controller = new PageController(pageUI, animations);\n      \n    const Component = () => (\n      <PageComponent\n          animations={animations}\n          pageUI={pageUI}\n          side={side}\n          spread={spread}/>\n    );\n  \n    return {\n      controller,\n      Component,\n    }\n  }\n  return new ComponentManager(createPage);\n}\n","import { booleanDescriptor } from \"model/descriptor/literals\";\nimport { activeRecordDescriptor } from \"model/descriptor/record\";\nimport { createEffect } from \"solid-js\";\nimport { AnimationManager } from \"ui/animation/animation_manager\";\n\nexport const enum PageSide {\n  Left = 1,\n  Right,\n}\n\nexport type Animations = 'pop-up' | 'pop-down';\n\nexport const pageUIDescriptor = activeRecordDescriptor({\n  popped: booleanDescriptor,\n});\n\nexport type PageUI = typeof pageUIDescriptor.aMutable;\nexport type PageUIState = typeof pageUIDescriptor.aState;\n\nexport class PageController {\n\n  constructor(\n    private readonly pageUI: PageUI,\n    private readonly animations: AnimationManager<Animations>,\n  ) {\n  }\n\n  popUp() {\n    this.pageUI.popped = true;\n    return this.animations.waitForAnimation('pop-up');\n  }\n\n  popDown() {\n    this.pageUI.popped = false;\n    return this.animations.waitForAnimation('pop-down');\n  }\n}\n","import { BookSpread, BookSpreadRoom, BookSpreadTableOfContents, BookSpreadType } from \"model/domain\";\nimport { Component } from \"solid-js\";\nimport { Animations, PageSide, PageUI } from \"./page_controller\";\nimport { Dynamic } from \"solid-js/web\";\nimport { PageToCComponent } from \"./toc/page_toc\";\nimport { PageRoomComponent } from \"./room/page_room\";\nimport { AnimationManager } from \"ui/animation/animation_manager\";\n\nexport type PageProps<T extends BookSpread = BookSpread> = {\n  animations: AnimationManager<Animations>\n  spread: T,\n  pageUI: PageUI,\n  side: PageSide,\n};\n\nconst pageComponents: { [K in BookSpreadType]: Component<PageProps>} = {\n  [BookSpreadType.Room]: function (props: PageProps) {\n    return <PageRoomComponent\n        animations={props.animations}\n        spread={props.spread as BookSpreadRoom}\n        pageUI={props.pageUI}\n        side={props.side}/>;\n  },\n  [BookSpreadType.TableOfContents]: function (props: PageProps) {\n    return <PageToCComponent\n        animations={props.animations}\n        spread={props.spread as BookSpreadTableOfContents}\n        pageUI={props.pageUI}\n        side={props.side}/>\n  },\n}\n\nexport function PageComponent(props: PageProps) {\n  return (\n    <Dynamic\n        component={pageComponents[props.spread.type]}\n        animations={props.animations}\n        spread={props.spread}\n        pageUI={props.pageUI}\n        side={props.side}/>\n  )\n}\n\n\n","import { BookSpreadTableOfContents, BookSpreadType } from \"model/domain\";\nimport { PageProps } from \"../page\";\nimport { PageSide } from \"../page_controller\";\nimport { Component } from \"solid-js\";\nimport { PageBlankComponent } from \"../blank/page_blank\";\nimport { Dynamic } from \"solid-js/web\";\nimport { Cutout } from \"ui/cutout/cutout\";\nimport styles from './page_toc.module.scss';\n\ntype PageToCProps = PageProps<BookSpreadTableOfContents>;\n\nconst sideComponents: { [K in PageSide]: Component<PageToCProps>} = {\n  [PageSide.Left]:PageBlankComponent,\n  [PageSide.Right]: function (props: PageToCProps) {\n    return <PageTocRightComponent\n        animations={props.animations}\n        pageUI={props.pageUI}\n        side={props.side}\n        spread={props.spread}/>\n  },\n}\n\n\nexport function PageToCComponent(props: PageToCProps) {\n  return (\n    <Dynamic\n      component={sideComponents[props.side]} animations={props.animations}\n      pageUI={props.pageUI}\n      side={props.side}\n      spread={props.spread}\n    />\n  );\n}\n\nfunction PageTocRightComponent(props: PageToCProps) {\n  return (\n    <div class={styles.toc}>\n      <Cutout\n          class={styles.row}\n          up={props.pageUI.popped}\n          onPoppedUpOrDown={props.animations.createCutoutPoppedUpOrDownCallback('pop-up', 'pop-down')}>\n        <h1>GRAND TERMINUS</h1>\n      </Cutout>\n      <Cutout\n          class={styles.row}\n          up={props.pageUI.popped}\n          onPoppedUpOrDown={props.animations.createCutoutPoppedUpOrDownCallback('pop-up', 'pop-down')}>\n        <button>\n          <h2>Begin Origin</h2>\n        </button>\n      </Cutout>\n    </div >  \n  );\n}\n","export function PageBlankComponent() {\n  return null;\n}","import { JSX, ParentProps, createEffect } from 'solid-js';\nimport styles from './cutout.module.scss';\n\nexport type CutoutProps = ParentProps<{\n  style?: JSX.CSSProperties,\n  class?: string,\n  up: boolean,\n  onPoppedUpOrDown?: (up: boolean) => void,\n}>;\n\n// TODO: find correct typing for style\nexport function Cutout(props: CutoutProps) {\n  let cutoutRef: HTMLDivElement | undefined;\n  const onTransitionEnd = function(e: TransitionEvent) {\n    if (e.target === cutoutRef) {\n      props.onPoppedUpOrDown?.(props.up);\n    }\n  };  \n\n  return (\n    <div\n        ref={cutoutRef}\n        class={props.class}\n        classList={{\n          [styles.cutout]: true,\n          [styles.up]: props.up,\n        }}\n        style={props.style}\n        onTransitionEnd={onTransitionEnd}\n    >\n      {props.children}\n    </div>\n  );\n}\n","@use 'components/constants.module.scss';\n\n\n.cutout {\n  transform-origin: bottom;\n  transform: rotateX(0deg);\n  transition-property: transform;\n  transition-duration: 300ms;\n  transition-timing-function: ease-in;\n}\n\n.cutout.up {\n  transform: rotateX(constants.$tableTiltCorrectionAngle);\n  transition-duration: 300ms;\n  transition-timing-function: cubic-bezier(.47,1.64,.41,.8);\n}\n\n// .cutout.down {\n// }\n\n// @keyframes popupAnimation {\n//   from {\n//     transform: rotateX(0deg) scaleY(1);\n//   }\n\n//   to {\n//     transform: rotateX(popupAngle) scaleY(1);    \n//   }\n// }\n\n// @keyframes popdownAnimation {\n//   from {\n//     transform: rotateX(popupAngle) scaleY(1);    \n//   }\n\n//   to {\n//     transform: rotateX(0deg) scaleY(1);\n//   }\n// }",".toc {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n}\n\n.row {\n  flex: 0;\n}","import { BookSpreadRoom } from \"model/domain\";\nimport { PageProps } from \"../page\";\nimport styles from './page_room.module.scss';\nimport { Cutout, CutoutProps } from \"ui/cutout/cutout\";\nimport { For } from \"solid-js\";\n\ntype TestCutout = {\n  leftPercent: number,\n  topPercent: number,\n  widthPercent: number,\n  heightPercent: number,\n  color: string,\n}\n\nfunction TestCutoutComponent(props: Pick<CutoutProps, 'onPoppedUpOrDown' | 'up'> & {\n  cutout: TestCutout,\n}) {\n  return (\n    // Since cutout rotates the div we need to either apply the translation before the rotation in the same style, or parent it in another element that translates it like this\n    \n    <Cutout\n        up={props.up}\n        style={{\n          top: `${props.cutout.topPercent}%`,\n          left: `${props.cutout.leftPercent}%`,\n          width: `${props.cutout.widthPercent}%`,\n          height: `${props.cutout.heightPercent}%`,\n          \"transition-delay\": `${(100 - props.cutout.topPercent) * 10}ms`,\n          position: 'absolute', \n        }}\n        onPoppedUpOrDown={props.onPoppedUpOrDown}>\n      <div\n          class={styles.testCutout}\n          style={{\n            background: props.cutout.color,\n          }}/>\n    </Cutout>\n  );\n}\n\n\nexport function PageRoomComponent(props: PageProps<BookSpreadRoom>) {\n  const onPoppedUpOrDown = props.animations.createCutoutPoppedUpOrDownCallback(\n    'pop-up',\n    'pop-down'\n  );\n  const cutouts = new Array(3 + Math.floor(Math.random() * 30)).fill(0).map<TestCutout>(() => {\n    const widthPercent = Math.random() * 5 + 3;\n    const heightPercent = Math.pow(Math.random(), 2) * 15 + 5;\n    const leftPercent = Math.random() * (100 - widthPercent);\n    const topPercent = Math.random() * (100 - heightPercent);\n    return {\n      topPercent,\n      leftPercent,\n      widthPercent,\n      heightPercent, \n      color: `#${Math.floor(Math.random() * 16777215).toString(16)}`,\n    };\n  });\n  return (\n    <div\n        class={styles.room}\n        style={{\n          background: `#${Math.floor(Math.random() * 16777215).toString(16)}`\n        }}>\n      <For each={cutouts}>\n        {cutout => (\n          <TestCutoutComponent\n              up={props.pageUI.popped}\n              onPoppedUpOrDown={onPoppedUpOrDown}\n              cutout={cutout}/>\n        )}\n      </For>\n    </div>\n  );\n\n}\n",".room {\n  width: 100%;\n  height: 100%;\n}\n\n.testCutout {\n  width: 100%;\n  height: 100%;\n  transform-origin: bottom;\n}","import { ChapterType, gameDescriptor } from \"model/domain\";\nimport { cards } from \"./ruins/cards\";\n\nexport const initialGame = gameDescriptor.create({\n  book: {\n    spread: undefined,\n    chapter: {\n      type: ChapterType.Ruins,\n      deck: [\n        ...cards,\n        ...cards,\n      ],\n    }\n  },\n  playerCharacter: undefined,\n  playerHand: new Array(6).fill(0).map(() => ({\n    targetCard: undefined,\n    playedCards: [],\n  })),\n});\n","import { DamageDown, DamageUp } from \"data/effects\";\nimport { CardBackgroundType, CardFaceType, RecycleTarget, ChoiceType, EncounterType, MonsterType, EventType, CardState, CardForegroundType, CardBackChoice, CardFrontChoice, CardDefinition } from \"model/domain\";\n\nconst cardBackJammedDoor: CardBackChoice = {\n  name: 'jammed door',\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.Door,\n  foreground: undefined,\n  cost: [DamageUp],\n};\nconst cardBackDoor: CardBackChoice = {\n  name: 'door',\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.Door,\n  foreground: undefined,\n  cost: [],\n};\nconst cardFrontEmpty: CardFrontChoice = {\n  name: 'empty passage',\n  type: CardFaceType.Choice,\n  background: CardBackgroundType.Passageway,\n  foreground: undefined,\n  choice: {\n    type: ChoiceType.NextPage,\n    encounter: undefined,\n  },\n  cost: [],\n  benefit: [],\n};\nconst cardFrontRat: CardFrontChoice = {\n  name: 'a big rat',\n  type: CardFaceType.Choice,\n  background: CardBackgroundType.Passageway,\n  foreground: CardForegroundType.Rat,\n  choice: {\n    type: ChoiceType.NextPage,\n    encounter: {\n      type: EncounterType.Battle,\n      monster: MonsterType.BigRat,\n    },\n  },\n  cost: [],\n  benefit: [],\n};\nconst cardFrontTrapped: CardFrontChoice = {\n  name: 'trapped hallway',\n  type: CardFaceType.Choice,\n  background: CardBackgroundType.Passageway,\n  foreground: CardForegroundType.Trap,\n  choice: {\n    type: ChoiceType.NextPage,\n    encounter: undefined,\n  },\n  cost: [DamageDown],\n  benefit: [],\n};\nconst cardFrontFountain: CardFrontChoice = {\n  name: 'fountain',\n  type: CardFaceType.Choice,\n  background: CardBackgroundType.Passageway,\n  foreground: CardForegroundType.Fountain,\n  choice: {\n    type: ChoiceType.NextPage,\n    encounter: {\n      type: EncounterType.Event,\n      event: EventType.Fountain,\n    },\n  },\n  cost: [],\n  benefit: [],\n};\n\nexport const cards = [\n  cardBackDoor,\n  cardBackJammedDoor,\n].flatMap(back => {\n  return [\n    cardFrontEmpty,\n    cardFrontRat,\n    cardFrontTrapped,\n    cardFrontFountain,\n  ].map<CardDefinition>(front => {\n    return {\n      recycleTarget: RecycleTarget.DiscardDeckTop,\n      faces: [back, front],\n    };\n  });\n}).map<CardState>(definition => ({\n  definition,\n  visibleFaceIndex: 0,\n}));\n","import { Effect, EffectDirection, SymbolType } from \"model/domain\";\n\nexport const ForceUp: Effect = {\n  direction: EffectDirection.Up,\n  symbol: SymbolType.Force,\n};\n\nexport const ForceDown: Effect = {\n  direction: EffectDirection.Down,\n  symbol: SymbolType.Force,\n};\n\nexport const FinesseUp: Effect = {\n  direction: EffectDirection.Up,\n  symbol: SymbolType.Finesse,\n};\n\nexport const FinesseDown: Effect = {\n  direction: EffectDirection.Down,\n  symbol: SymbolType.Finesse,\n};\n\nexport const MagicUp: Effect = {\n  direction: EffectDirection.Up,\n  symbol: SymbolType.Magic,\n};\n\nexport const MagicDown: Effect = {\n  direction: EffectDirection.Down,\n  symbol: SymbolType.Magic,\n};\n\nexport const DamageUp: Effect = {\n  direction: EffectDirection.Up,\n  symbol: SymbolType.Damage,\n};\n\nexport const DamageDown: Effect = {\n  direction: EffectDirection.Down,\n  symbol: SymbolType.Damage,\n};\n\nexport const FireUp: Effect = {\n  direction: EffectDirection.Up,\n  symbol: SymbolType.Fire,\n};\n\nexport const FireDown: Effect = {\n  direction: EffectDirection.Down,\n  symbol: SymbolType.Fire,\n};\n\nexport const AgeUp: Effect = {\n  direction: EffectDirection.Up,\n  symbol: SymbolType.Age,\n};\n\nexport const AgeDown: Effect = {\n  direction: EffectDirection.Down,\n  symbol: SymbolType.Age,\n};\n","import { InteractionManager } from \"rules/interaction_manager\";\nimport { DragOverlay } from \"./drag_overlay\";\nimport { DragOverlayController } from \"./drag_overlay_controller\";\nimport { Component } from \"solid-js\";\nimport { Card } from \"model/domain\";\n\nexport function createDragOverlay(\n  interactionManager: InteractionManager,\n  CardComponent: Component<{ model: Card }>,\n) {\n  const controller = new DragOverlayController();\n  function Card() {\n    return (\n      <>\n        {\n          interactionManager.draggedCard\n              && <CardComponent model={interactionManager.draggedCard}/>            \n        }\n      </>\n    );\n  }\n\n  function Component() {\n    return (\n      <>\n        {\n          interactionManager.lastMousePosition && (\n            <DragOverlay\n                cx={interactionManager.lastMousePosition[0]}\n                cy={interactionManager.lastMousePosition[1]}\n                Card={Card}\n            />\n          )\n        }\n      </>\n    );\n  }\n\n  return {\n    controller, \n    Component,\n  };\n}","import { Component } from 'solid-js';\nimport styles from './drag_overlay.module.scss';\n\nexport function DragOverlay(props: {\n  cx: number,\n  cy: number,\n  Card: Component,\n}) {\n  return (\n    <div class={styles.drag} style={{\n      transform: `translate(${props.cx}px, ${props.cy}px)`\n    }}>\n      <div class={styles['scale-up']}>\n        <props.Card/> \n      </div>\n    </div>\n  )\n}\n","@use 'components/constants.module.scss';\n\n.drag {\n  position: absolute;\n  width: constants.$cardWidth;\n  height: constants.$cardHeight;\n  margin-left: calc(constants.$cardWidth/-2);\n  margin-top: calc(constants.$cardHeight * -1);\n}\n\n.scale-up { \n  transform: scale(2.5);\n}","export class DragOverlayController {\n  \n}\n","import { CardController } from \"components/card/card_controller\";\nimport { ControllerManger } from \"components/component_manager\";\nimport { BookSpreadType, Card, CardFaceType, CardSlot, ChoiceType, Encounter, EncounterBattle, EncounterDefinition, Game, RecycleTarget, bookSpreadRoomDescriptor, cardDescriptor, cardSlotDescriptor, entityDescriptor } from \"model/domain\";\nimport { calculateTargetCardEffectUsages, cardFace } from \"./cards\";\nimport { DeckHolder, allCardSlots, gameEncounterBattle, pageCardSlots, pageDeck, playerDeck } from \"./games\";\nimport { batch } from \"solid-js\";\nimport { delay } from \"base/delay\";\nimport { BookController } from \"components/book/book_controller\";\nimport { defaultPlayerCharacter } from \"data/player/initial\";\nimport { UnreachableError } from \"base/unreachable_error\";\nimport { hydrateEncounter } from \"./encounters\";\nimport { EntityController } from \"components/entity/entity_controller\";\n\nexport class GameManager {\n  constructor(\n    private readonly game: Game,\n    private readonly bookController: BookController,\n    private readonly cardControllerManger: ControllerManger<Card, CardController>,\n    private readonly battleEncounterControllerManager: ControllerManger<EncounterBattle, EntityController>, \n  ) {\n    \n  }\n\n  async chooseCard(card: Card) {\n    const originalFace = cardFace(card, false);\n    if (originalFace.type === CardFaceType.ChoiceBack) {\n      await this.cardControllerManger.lookupController(card)?.flip();\n      await delay(500);\n      // TODO apply effects\n    }\n    const battle = gameEncounterBattle(this.game);\n    if (battle != null) {\n      const face = cardFace(card, false);\n      await this.battleEncounterControllerManager.lookupController(battle)?.perform(face);\n    }\n    const face = cardFace(card, false);\n    if (face.type === CardFaceType.Choice) {\n      const choice = face.choice;\n      switch (choice.type) {\n        case ChoiceType.NextChapter:\n          // TODO\n          return this.nextPage(undefined);\n        case ChoiceType.NextPage:\n          return this.nextPage(choice.encounter);\n        case ChoiceType.NextTurn:\n          // TODO\n          await this.endTurn();\n          return this.startTurn();\n        default:\n          throw new UnreachableError(choice);\n      }\n    }\n  }\n\n  async applyTargetCardEffects(cardSlot: CardSlot) {\n    const targetCard = cardSlot.targetCard;\n    if (targetCard == null) {\n      return;\n    }\n    const usages = calculateTargetCardEffectUsages(cardSlot, undefined);\n    for (const usage of usages.cost) {\n      if (!usage.used) {\n        \n      }\n    }\n  }\n\n  async createPlayer() {\n    this.game.playerCharacter = entityDescriptor.create(defaultPlayerCharacter);\n  }\n\n  async nextPage(encounter: EncounterDefinition | undefined) {\n    await this.endTurn();\n    const spread = bookSpreadRoomDescriptor.create({\n      type: BookSpreadType.Room,\n      encounter: encounter && hydrateEncounter(encounter),\n      cardSlots: new Array(3).fill(0).map(() => cardSlotDescriptor.freeze({\n        targetCard: undefined,\n        playedCards: [],\n      })),\n    });\n    await this.bookController.showSpread(spread);\n    const battleEncounter = gameEncounterBattle(this.game);\n    if (battleEncounter != null) {\n      await this.battleEncounterControllerManager\n          .lookupController(battleEncounter)\n          ?.appear();\n    }\n    await this.startTurn();\n  }\n\n  async normalizeBoard() {\n    const cardSlots = allCardSlots(this.game);\n    const flippableCardSlots = cardSlots\n        .filter(cardSlot => this.isAutoFlippable(cardSlot));\n    // flip any paid for cards\n    await Promise.all(flippableCardSlots.map(async cardSlot => {\n      const targetCard = cardSlot.targetCard;\n      if (targetCard == null) {\n        return;\n      }\n      const controller = this.cardControllerManger.lookupController(targetCard);\n      if (controller == null) {\n        return;\n      }\n      return controller.flip();\n    }));\n  }\n\n  async startTurn(draw = 3) {\n    const cardSlots = pageCardSlots(this.game);\n    const [pageDeckGetter, pageDeckSetter] = pageDeck(this.game);\n    cardSlots.forEach(cardSlot => {\n      const deck = pageDeckGetter();\n      if (deck.length > 0) {\n        cardSlot.targetCard = deck[deck.length - 1];\n        pageDeckSetter(deck.slice(0, -1));  \n      }\n    });\n\n    const playerHand = this.game.playerHand;\n    if (playerHand != null) {\n      const availableSlots = playerHand.filter(\n        slot => slot.targetCard == null && slot.playedCards.length === 0,\n      );\n      const availableDraw = Math.min(draw, availableSlots.length);\n      const playerCharacter = this.game.playerCharacter;\n      if (availableDraw > 0 && playerCharacter != null) {\n        // NOTE: be careful not to remove above check because -0 == 0\n        // in the below slide operations\n        const drawnCards = playerCharacter.deck.slice(-availableDraw);\n        batch(() => {\n          playerCharacter.deck = playerCharacter.deck.slice(0, -availableDraw);\n          drawnCards.reverse().forEach((card, i) => {\n            const cardSlot = availableSlots[i];\n            cardSlot.targetCard = card;\n          });\n        });    \n      }\n    }\n    // a delay (can be zero) is necessary so free cards render in their\n    // face down state before auto-flipping\n    await delay(500);\n    await this.normalizeBoard();\n  }\n\n  async endTurn() {\n    // place all loose cards back in the deck\n    const pageDeckHolder = pageDeck(this.game);\n    const playerDeckHolder = playerDeck(this.game);\n    const cardSlots = allCardSlots(this.game);\n    await batch<Promise<void>>(async () => {\n      await Promise.all(cardSlots.flatMap(async cardSlot => {\n        const inPlayerHand = this.game.playerHand.indexOf(cardSlot) >= 0;\n        if (cardSlot.targetCard != null && inPlayerHand) {\n          return [];\n        }\n        const playedCards = cardSlot.playedCards;\n        cardSlot.playedCards = [];\n        const targetCard = cardSlot.targetCard;\n        if (!inPlayerHand && targetCard != null) {\n          // TODO parallelise this promise\n          await this.returnCardToDeck(targetCard, pageDeckHolder);\n          cardSlot.targetCard = undefined;\n        }\n        if (playerDeckHolder != null) {\n          await Promise.all(playedCards.map(async card => {\n            // TODO player discard deck\n            return this.returnCardToDeck(card, playerDeckHolder);\n          }));  \n        }\n        return;\n      }));\n    });\n  }\n\n  private isAutoFlippable(cardSlot: CardSlot): boolean {\n    const targetCard = cardSlot.targetCard;\n    if (targetCard == null) {\n      return false;\n    }\n    const targetFace = cardFace(\n        targetCard,\n        !!this.cardControllerManger.lookupController(targetCard)?.isPeeking(),\n    );\n    if (targetFace.type !== CardFaceType.ChoiceBack && targetFace.type !== CardFaceType.ResourceBack) {\n      return false;\n    }\n    return calculateTargetCardEffectUsages(cardSlot, this.cardControllerManger).cost.every(c => c.used);\n  }\n\n  private async returnCardToDeck(\n    card: Card,\n    drawDeck: DeckHolder,\n    discardDeck?: DeckHolder,\n  ) {\n    if (card.visibleFaceIndex > 0) {\n      await this.cardControllerManger.lookupController(card)?.flip();\n    }\n    // TODO animate to target deck\n    const recycleTarget = card.definition.recycleTarget;\n    const targetDeck = recycleTarget === RecycleTarget.DiscardDeckTop\n        ? discardDeck\n        : drawDeck;\n    if (targetDeck != null) {\n      const [getDeck, setDeck] = targetDeck;\n      const deck = getDeck();\n      const deckLength = deck.length;\n      const index = recycleTarget === RecycleTarget.DrawDeckBottom\n          ? 0\n          : recycleTarget === RecycleTarget.DrawDeckRandom\n              ? Math.floor(Math.random() * (deckLength + 1))\n              : deckLength\n      setDeck([...deck.slice(0, index), card, ...deck.slice(index)]);\n    }\n  }\n}\n\n\n","import { entityDescriptor } from \"model/domain\";\nimport { cardMight } from \"./cards/might\";\nimport { cardKick } from \"./cards/kick\";\nimport { cardShield } from \"./cards/shield\";\n\nexport const defaultPlayerCharacter = entityDescriptor.freeze({\n  deck: [\n    cardMight,\n    cardKick,\n    cardShield,\n    cardMight,\n    cardMight,\n    cardMight,\n    cardKick,\n  ],\n  health: 3,\n  maxHealth: 3,\n});","import { ForceUp } from \"data/effects\";\nimport { CardBackResource, CardBackgroundType, CardDefinition, CardFaceType, CardFrontResource, RecycleTarget, cardDescriptor } from \"model/domain\";\n\nconst cardBackMight: CardBackResource = {\n  name: 'might',\n  type: CardFaceType.ResourceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: undefined,\n  cost: [],\n};\nconst cardFrontMight: CardFrontResource = {\n  name: 'might',\n  description: 'You brace for the next feat of strength.',\n  type: CardFaceType.Resource,\n  background: CardBackgroundType.Clear,\n  foreground: undefined,\n  cost: [],\n  benefit: [ForceUp],\n};\nconst cardTypeMight: CardDefinition = {\n  recycleTarget: RecycleTarget.DrawDeckTop,\n  faces: [cardBackMight, cardFrontMight],\n};\n\nexport const cardMight = cardDescriptor.freeze({\n  definition: cardTypeMight,\n  visibleFaceIndex: 0,\n});\n","import { DamageUp, ForceUp } from \"data/effects\";\nimport { CardBackResource, CardBackgroundType, CardDefinition, CardFaceType, CardFrontResource, RecycleTarget, cardDescriptor } from \"model/domain\";\n\nconst cardBackKick: CardBackResource = {\n  name: 'kick',\n  type: CardFaceType.ResourceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: undefined,\n  cost: [ForceUp],\n};\nconst cardFrontKick: CardFrontResource = {\n  name: 'kick',\n  description: 'A swift kick.',\n  type: CardFaceType.Resource,\n  background: CardBackgroundType.Clear,\n  foreground: undefined,\n  cost: [ForceUp],\n  benefit: [DamageUp],\n};\nconst cardTypeKick: CardDefinition = {\n  recycleTarget: RecycleTarget.DrawDeckRandom,\n  faces: [cardBackKick, cardFrontKick],\n};\nexport const cardKick = cardDescriptor.freeze({\n  definition: cardTypeKick,\n  visibleFaceIndex: 0,\n});\n","import { DamageDown, ForceUp } from \"data/effects\";\nimport { CardBackResource, CardBackgroundType, CardDefinition, CardFaceType, CardFrontResource, RecycleTarget, cardDescriptor } from \"model/domain\";\n\nconst cardBackShield: CardBackResource = {\n  name: 'shield',\n  type: CardFaceType.ResourceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: undefined,\n  cost: [ForceUp, ForceUp],\n};\nconst cardFrontShield: CardFrontResource = {\n  name: 'shield',\n  description: 'You cower behind your shield',\n  type: CardFaceType.Resource,\n  background: CardBackgroundType.Clear,\n  foreground: undefined,\n  cost: [],\n  benefit: [DamageDown],\n};\nconst cardTypeShield: CardDefinition = {\n  recycleTarget: RecycleTarget.DrawDeckBottom,\n  faces: [cardBackShield, cardFrontShield],\n};\nexport const cardShield = cardDescriptor.freeze({\n  definition: cardTypeShield,\n  visibleFaceIndex: 0,\n});\n","import { UnreachableError } from \"base/unreachable_error\";\nimport { defaultRat } from \"data/rat/initial\";\nimport { EncounterDefinition, EncounterState, EncounterType, EntityState, MonsterType } from \"model/domain\";\nimport { randomizeDeck } from \"./games\";\n\nfunction hydrateMonster(monster: MonsterType): EntityState {\n  switch (monster) {\n    case MonsterType.BigRat:\n      return defaultRat;\n    default:\n      throw new UnreachableError(monster);\n  }\n}\n\nexport function hydrateEncounter(encounter: EncounterDefinition): EncounterState {\n  switch (encounter.type) {\n    case EncounterType.Battle:\n      const monster = hydrateMonster(encounter.monster);\n      const deck = randomizeDeck(monster.deck);\n      return {\n        type: encounter.type,\n        monsterType: encounter.monster,\n        monster: {\n          ...monster,\n          deck,\n        },\n      };\n    case EncounterType.Event:\n      return {\n        type: EncounterType.Event,\n        eventType: encounter.event,\n      };\n    default:\n      throw new UnreachableError(encounter);\n  }\n}\n","import { entityDescriptor } from \"model/domain\";\nimport { cards } from \"./cards\";\n\nexport const defaultRat = entityDescriptor.freeze({\n  deck: cards,\n  health: 2,\n  maxHealth: 2,\n});","import { DamageDown, DamageUp, FinesseUp, FireUp, ForceDown } from \"data/effects\";\nimport { CardBackChoice, CardBackgroundType, CardDefinition, CardFaceType, CardForegroundType, CardFrontChoice, ChoiceType, RecycleTarget, cardDescriptor } from \"model/domain\";\n\nconst cardBackRatBeligerence: CardBackChoice = {\n  name: 'cornered',\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: CardForegroundType.Rat,\n  cost: [],\n};\nconst cardBackRatFurtiveMovement: CardBackChoice = {\n  name: 'furtive squeak',\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: CardForegroundType.Rat,\n  // TODO observation\n  cost: [FireUp],\n};\nconst cardBackRatScurrying: CardBackChoice = {\n  name: 'scurrying',\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: CardForegroundType.Rat,\n  cost: [FinesseUp],\n};\n\nexport const cardFrontRatBite: CardFrontChoice = {\n  name: 'bite',\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextTurn,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: CardForegroundType.Rat,\n  cost: [DamageDown],\n  benefit: [],\n};\nexport const cardFrontRatScreech: CardFrontChoice = {\n  name: 'screech',\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextTurn,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: CardForegroundType.Rat,\n  cost: [ForceDown, ForceDown],\n  benefit: [],\n};\nexport const cardFrontRatCower: CardFrontChoice = {\n  name: 'cower',\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextTurn,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: CardForegroundType.Rat,\n  cost: [DamageUp],\n  benefit: [],\n};\n\nexport const cards = [\n  cardBackRatBeligerence, \n  cardBackRatFurtiveMovement, \n  cardBackRatScurrying,\n].flatMap(cardBack => {\n  return [\n    cardFrontRatBite,\n    cardFrontRatScreech,\n    cardFrontRatCower,\n  ].map<CardDefinition>(cardFace => {\n    return {\n      faces: [cardBack, cardFace],\n      recycleTarget: RecycleTarget.DrawDeckRandom,\n    };\n  });\n}).map(definition => {\n  return cardDescriptor.freeze({\n    definition,\n    visibleFaceIndex: 0,\n  });\n})\n","import { Card, Deck } from \"model/domain\";\nimport { Accessor, Component, For } from \"solid-js\";\nimport { DeckComponent } from \"./deck\";\nimport { DeckController } from \"./deck_controller\";\n\nexport function createDeck(deck: Accessor<Deck | undefined>, CardComponent: Component<{ model: Card }>) {\n\n  const controller = new DeckController();\n\n  function Component() {\n    return (\n      <DeckComponent>\n        <For each={deck()}>\n          {card => (\n            <CardComponent model={card}/>\n          )}\n        </For>\n      </DeckComponent>\n    );\n  }\n\n  return {\n    Component,\n    controller,\n  }\n}\n","import { For, ParentProps, children } from \"solid-js\";\nimport styles from './deck.module.scss';\n\nexport function DeckComponent(props: ParentProps<{}>) {\n  return (\n    <div class={styles.deck}>\n      <For each={children(() => props.children).toArray()}>\n        {\n          child => (\n            <div class={styles.card}>{child}</div>\n          )\n        }\n      </For>\n    </div>\n  );\n}\n",".deck {\n  width: 100%;\n  height: 100%;\n}\n\n.card {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n\n@for $i from 1 through 30 {\n  .card:nth-child(#{$i}) {\n    transform: translateZ(calc(#{$i}vw * 0.2));\n  }\n}\n","export class DeckController {\n  constructor() {\n    \n  }\n}\n","import { SpreadOverlayComponent } from \"./spread_overlay\";\nimport { Component } from \"solid-js\";\nimport { BookSpread, CardSlot } from \"model/domain\";\n\nexport function createSpreadOverlay({\n  CardSlotsComponent,\n}: {\n  CardSlotsComponent: Component<{ model: readonly CardSlot[] }>,\n}) {\n  function Component(props: { model: BookSpread }) {\n    return (\n        <SpreadOverlayComponent\n            CardSlotsComponent={CardSlotsComponent}\n            spread={props.model}\n        />\n    );\n  };\n\n  return {\n    Component,\n  }\n}","import { BookSpread, BookSpreadRoom, BookSpreadType, CardSlot } from \"model/domain\";\nimport { Component } from \"solid-js\";\nimport { Dynamic } from \"solid-js/web\";\nimport { SpreadOverlayRoomComponent } from \"./room/spread_overlay_room\";\nimport { SpreadOverlayBlankComponent } from \"./blank/spread_overlay_blank\";\n\nexport type SpreadOverlayProps<T extends BookSpread = BookSpread> = {\n  spread: T,\n  CardSlotsComponent: Component<{ model: readonly CardSlot[] }>,\n};\n\nconst spreadComponents: { [K in BookSpreadType]: Component<SpreadOverlayProps>} = {\n  [BookSpreadType.Room]: function (props: SpreadOverlayProps) {\n    return <SpreadOverlayRoomComponent\n        spread={props.spread as BookSpreadRoom}\n        CardSlotsComponent={props.CardSlotsComponent}/>;\n  },\n  [BookSpreadType.TableOfContents]: SpreadOverlayBlankComponent,\n}\n\nexport function SpreadOverlayComponent(props: SpreadOverlayProps) {\n  return (\n    <Dynamic\n        component={spreadComponents[props.spread.type]} \n        spread={props.spread}\n        CardSlotsComponent={props.CardSlotsComponent}/>\n  )\n}","import { BookSpreadRoom } from \"model/domain\";\nimport { SpreadOverlayProps } from \"../spread_overlay\";\nimport styles from './spread_overlay_room.module.scss';\n\nexport function SpreadOverlayRoomComponent(props: SpreadOverlayProps<BookSpreadRoom>) {\n  return (\n    <div class={styles.container}>\n      <props.CardSlotsComponent model={props.spread.cardSlots}/>\n    </div>\n  );\n}",".container {\n  display: flex;\n  width: 100%;\n  height: 100%;\n  align-items: center;\n}\n","export function SpreadOverlayBlankComponent() {\n  return null;\n}","import { Entity } from \"model/domain\";\nimport { StatusOverlayComponent } from \"./status_overlay\";\n\nexport function createStatusOverlay() {\n  return function(props: {\n    playerCharacter: Entity,\n  }) {\n    return (\n      <StatusOverlayComponent\n          health={props.playerCharacter.health}\n          maxHealth={props.playerCharacter.maxHealth}\n      />\n    );\n  };\n}","import { Index } from 'solid-js';\nimport styles from './status_overlay.module.scss';\n\nexport function StatusOverlayComponent(props: {\n  health: number,\n  maxHealth: number,\n}) {\n  return (\n    <div class={styles.overlay}>\n      <div class={styles['status-bar']}>\n        <div class={styles['health-container']}>\n          <Index each={new Array(props.maxHealth).fill(0)}>\n            {(_, index) => (\n              <div classList={{\n                [styles.health]: true,\n                [styles.filled]: index < props.health,\n              }}/>\n            )}\n          </Index>\n        </div>\n      </div>\n    </div>\n  )\n}","$padding: min(2vw, 2vh);\n$healthBox: min(4vw, 4vh);\n\n.overlay {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n\n.status-bar {\n  position: absolute;\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n  top: 0;\n  padding: padding;\n  box-sizing: border-box;\n}\n\n.health-container {\n  flex: 1;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: start;\n}\n\n.health {\n  width: $healthBox;\n  height: $healthBox;\n  font-size: $healthBox;\n  text-align: center;\n  color: white;\n}\n\n.health::after {\n  content: '♡';\n}\n\n.health.filled::after {\n  content: '♥';\n}","import { createMonster } from \"components/entity/create\";\nimport { EncounterBattle } from \"model/domain\";\nimport { EncounterBattleComponent } from \"./encounter_battle\";\nimport { ComponentManager } from \"components/component_manager\";\n\nexport function createEncounterBattleManger() {\n  function createEncounterBattle(encounter: EncounterBattle) {\n    const {\n      controller,\n      Component: MonsterComponent,\n    } = createMonster(encounter.monsterType);\n  \n    function Component() {\n      return (\n        <EncounterBattleComponent model={encounter}>\n          <MonsterComponent/>\n        </EncounterBattleComponent>\n      );\n    }\n  \n    return {\n      Component,\n      // TODO might want a way to animate the health in and out\n      controller,\n    }\n  }\n  \n  const encounterBattleManger = new ComponentManager(createEncounterBattle);\n  return encounterBattleManger;\n  \n}\n\n","import { UnreachableError } from \"base/unreachable_error\";\nimport { MonsterType } from \"model/domain\";\nimport { createRatEntity } from \"./rat/create\";\n\nexport function createMonster(monster: MonsterType) {\n  switch(monster) {\n    case MonsterType.BigRat:\n      return createRatEntity();\n    default:\n      throw new UnreachableError(monster);\n  }\n}","import { cardFrontRatBite, cardFrontRatCower } from \"data/rat/cards\";\nimport { createRigidEntity } from \"../rigid/create\";\nimport { Animations } from \"../rigid/rigid_entity_controller\";\nimport { createUnicodeEntity } from \"../unicode/create\";\n\nexport function createRatEntity() {\n  \n  return createRigidEntity(\n    new Map([\n      [cardFrontRatBite, Animations.Attack],\n      //[cardFrontRatCower, Animations.]\n    ]),\n    createUnicodeEntity('🐀'),\n    undefined,\n    true,\n  );\n}\n","import { AnimationManager } from \"ui/animation/animation_manager\";\nimport { Animations, RigidEntityController, rigidEntityUI } from \"./rigid_entity_controller\";\nimport { CardFace } from \"model/domain\";\nimport { RigidEntityComponent } from \"./rigid_entity\";\nimport { Component } from \"solid-js\";\nimport { EntityController } from \"../entity_controller\";\n\nexport function createRigidEntity(\n  actions: Map<CardFace, Animations>,\n  EntityComponent: Component,\n  entityController: EntityController | undefined,\n  flipX: boolean,\n) {\n  const ui = rigidEntityUI.create({\n    activeAnimation: undefined,\n    hidden: true,\n  });\n  const animations = new AnimationManager<Animations>();\n  const controller = new RigidEntityController(\n    animations,\n    actions,\n    Animations.Special, \n    ui,\n    entityController,\n  );\n  function Component() {\n    return (\n      <RigidEntityComponent\n          animations={animations}\n          hidden={ui.hidden}\n          activeAnimation={ui.activeAnimation}\n          flipX={flipX}>\n        <EntityComponent/>\n      </RigidEntityComponent>\n    );\n  }\n  return {\n    controller,\n    Component,\n  }\n}","import { AnimationManager } from \"ui/animation/animation_manager\";\nimport { EntityController } from \"../entity_controller\";\nimport { CardFace } from \"model/domain\";\nimport { activeRecordDescriptor } from \"model/descriptor/record\";\nimport { LiteralTypeDescriptor, booleanDescriptor } from \"model/descriptor/literals\";\nimport { optionalDescriptor } from \"model/descriptor/option\";\nimport { batch } from \"solid-js\";\n\nexport const enum Animations {\n  Appear = 1,\n  Attack,\n  Special,\n  TakeDamage,\n  Die,\n};\n\nexport const rigidEntityUI = activeRecordDescriptor({\n  activeAnimation: optionalDescriptor(new LiteralTypeDescriptor<Animations>()),\n  hidden: booleanDescriptor,\n});\n\nexport type RigidEntityUI = typeof rigidEntityUI.aMutable;\nexport type RigidiEntityUIState = typeof rigidEntityUI.aState;\n\nexport class RigidEntityController implements EntityController {\n  constructor(\n    private readonly animations: AnimationManager<Animations>,\n    private readonly actions: Map<CardFace, Animations>,\n    private readonly fallbackAnimation: Animations | undefined,\n    private readonly rigidEntityUI: RigidEntityUI,\n    private readonly dynamicEntityController: EntityController | undefined,\n  ) {\n\n  }\n\n  async perform(face: CardFace) {\n    const animation = this.actions.get(face) || this.fallbackAnimation;\n    await this.performAnimation(\n      animation,\n      () => this.dynamicEntityController?.perform(face),\n    );\n    this.rigidEntityUI.activeAnimation = undefined;\n  }\n\n  async appear() {\n    await batch(() => {\n      this.rigidEntityUI.hidden = false;\n      return this.performAnimation(\n        Animations.Appear,\n        () => this.dynamicEntityController?.appear(),\n      );  \n    });\n    this.rigidEntityUI.activeAnimation = undefined;\n  }\n\n  async die() {\n    return this.performAnimation(\n      Animations.Die,\n      () => this.dynamicEntityController?.die(),\n    );\n  }\n\n  private async performAnimation(\n    animation: Animations | undefined,\n    dynamicAnimation: () => Promise<void> | undefined,\n  ) {\n    this.rigidEntityUI.activeAnimation = animation;\n    await Promise.all([\n      animation != null && this.animations.waitForAnimation(animation),\n      dynamicAnimation(),\n    ]);\n  }\n}\n","import { AnimationManager } from 'ui/animation/animation_manager';\nimport styles from './rigid_entity.module.scss';\nimport { Animations } from './rigid_entity_controller';\nimport { ParentProps, createSignal } from 'solid-js';\nimport { UnreachableError } from 'base/unreachable_error';\n\nexport function RigidEntityComponent(props: ParentProps<{\n  animations: AnimationManager<Animations>,\n  activeAnimation: Animations | undefined,\n  hidden: boolean,\n  flipX: boolean,\n}>) {\n  const [ref, setRef] = createSignal<HTMLDivElement>();\n  const animationName = () => {\n    switch (props.activeAnimation) {\n      case Animations.Appear:\n        return styles.appearAnimation;\n      case Animations.Attack:\n        return styles.attackAnimation;\n      case Animations.Die:\n      case Animations.Special:\n      case Animations.TakeDamage:\n      case undefined:\n        return '';\n      default:\n        throw new UnreachableError(props.activeAnimation)\n    }\n  };\n  // TODO this sucks\n  const onAnimationEnd = props.animations.createAnimationEndEventListener(ref, () => [props.activeAnimation!, animationName()]);\n  return (\n    <div\n        classList={{\n          [styles.entity]: true,\n          [styles.hidden]: props.hidden,\n          [styles.idle]: props.activeAnimation == null,\n          [styles.appear]: props.activeAnimation === Animations.Appear,\n          [styles.attack]: props.activeAnimation === Animations.Attack,\n        }}\n        onAnimationEnd={onAnimationEnd}\n        ref={setRef}>\n      <div\n          classList={{\n            [styles.inner]: true,\n            [styles.flipX]: props.flipX,\n          }}>\n        {props.children}\n      </div>\n    </div>\n  );\n}",".entity {\n  transform-origin: center;\n}\n\n.entity.hidden {\n  visibility: hidden;\n}\n\n.entity.idle {\n  animation-name: idleAnimation;\n  animation-iteration-count: infinite;\n  animation-duration: 3s;\n  animation-timing-function: ease-in-out;\n  animation-direction: alternate;\n  transform-origin: bottom;\n}\n\n@keyframes idleAnimation {\n  from {\n    transform: scaleY(1);\n  }\n\n  to {\n    transform: scaleY(1.1);\n  }\n}\n\n.entity.appear {\n  animation-name: appearAnimation;\n  animation-fill-mode: forwards;\n  animation-timing-function: ease-out;\n  animation-duration: 300ms;\n}\n\n@keyframes appearAnimation {\n  from {\n    transform: skewX(90deg) scaleX(0);\n  }\n\n  to {\n    transform: skewX(0) scaleX(1);\n  }\n}\n\n.entity.attack {\n  animation-name: attackAnimation;\n  animation-timing-function: ease-in;\n  animation-direction: alternate;\n  animation-duration: 150ms;\n  animation-iteration-count: 2;\n}\n\n@keyframes attackAnimation {\n  from {\n    transform: translateX(0);\n  }\n\n  to {\n    transform: translateX(20%);\n  }\n}\n\n.inner.flipX {\n  transform: scaleX(-1);\n}","import { UnicodeEntityComponent } from \"./unicode_entity\";\n\nexport function createUnicodeEntity(unicode: string) {\n  return function() {\n    return <UnicodeEntityComponent unicode={unicode}/>;\n  }\n}\n","import styles from './unicode_entity.module.scss';\n\nexport function UnicodeEntityComponent(props: {\n  unicode: string,\n}) {\n  return (\n    <div class={styles.entity}>{props.unicode}</div>\n  );\n}","@use 'components/constants.module.scss';\n\n.entity {\n  font-size: calc(constants.$pageWidth/2);\n}","import { EncounterBattle } from \"model/domain\";\nimport { ParentProps } from \"solid-js\";\nimport styles from './encounter_battle.module.scss';\n\nexport function EncounterBattleComponent(props: ParentProps<{ model: EncounterBattle }>) {\n  return (\n    <div class={styles.container}>\n      {props.children}\n    </div>\n  )\n}\n","@use 'components/constants.module.scss';\n\n.container {\n  position: absolute;\n  bottom: 15%;\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  transform-origin: bottom center;\n  transform: rotateX(constants.$tableTiltCorrectionAngle);\n}"],"names":["_create","require","_tableController","_create1","_create2","_create3","_create4","_pageController","_initial","_create5","_interactionManager","_create6","_gameManager","_create7","_create8","_create9","_games","_solidJs","window","onload","app","document","getElementById","game","initialGame","cardManager","createCardManager","leftPageManager","createPageManager","side","PageSide","Left","rightPageManager","Right","cardSlotManager","createCardSlotManager","FactoryComponent","interactionManger","Component","CardSlotsComponent","createCardSlots","SpreadOverlayComponent","createSpreadOverlay","StatusOverlayComponent","createStatusOverlay","BookImpl","controller","bookController","createBook","leftPageComponentManager","rightPageComponentManager","book","encounterBattleManager","createEncounterBattleManger","gameManager","GameManager","InteractionManager","addEventListener","e","lastMousePosition","clientX","clientY","TableComponent","tableController","createTable","PlayerDeck","createDeck","playerCharacter","deck","onClickCover","async","setView","View","Tilted","createPlayer","nextPage","undefined","onNavigate","Hand","_$createComponent","model","playerHand","SpreadOverlay","_$memo","_c$","spread","DragOverlay","createDragOverlay","Book","battle","createMemo","gameEncounterBattle","children","StatusOverlay","_c$2","render","Deck","parcelHelpers","export","exports","ErrorBoundary","For","Index","Match","Show","Suspense","SuspenseList","Switch","createComponent","createRenderEffect","getOwner","mergeProps","untrack","Aliases","voidFn","ChildProperties","DOMElements","DelegatedEvents","Dynamic","Hydration","NoHydration","Portal","Properties","SVGElements","SVGNamespace","assign","classList","className","clearDelegatedEvents","delegateEvents","dynamicProperty","escape","getHydrationKey","getNextElement","getNextMarker","getNextMatch","getPropAlias","hydrate","innerHTML","insert","isDev","isServer","renderToStream","renderToString","renderToStringAsync","resolveSSRNode","runHydrationEvents","setAttribute","setAttributeNS","ssr","ssrAttribute","ssrClassList","ssrElement","ssrHydrationKey","ssrSpread","ssrStyle","style","template","use","Set","Object","create","htmlFor","PropAliases","class","formnovalidate","$","BUTTON","INPUT","ismap","IMG","nomodule","SCRIPT","playsinline","VIDEO","readonly","TEXTAREA","prop","tagName","a","xlink","xml","$$EVENTS","code","element","init","options","disposer","createRoot","dispose","firstChild","owner","textContent","html","isCE","isSVG","node","t","createElement","content","fn","cloneNode","importNode","eventNames","document1","i","l","length","name","has","add","eventHandler","keys","removeEventListener","value","removeAttribute","namespace","removeAttributeNS","handler","delegate","Array","isArray","handlerFn","call","prev","classKeys","prevKeys","len","key","toggleClassKey","classValue","nodeStyle","cssText","v","s","removeProperty","setProperty","props","skipChildren","prevProps","insertExpression","ref","src","defineProperty","get","enumerable","parent","sharedConfig","context","arg","accessor","marker","initial","current","skipRef","assignProp","registry","console","warn","Error","completed","delete","el","nodeName","localName","nextSibling","start","end","count","nodeType","nodeValue","push","events","queued","queueMicrotask","shift","classNames","trim","split","nameLen","toggle","isProp","isChildProp","propAlias","forceProp","slice","toLowerCase","h","includes","replace","_","w","toUpperCase","ns","indexOf","type","composedPath","target","configurable","done","_$HY","disabled","data","cancelBubble","_$host","parentNode","host","unwrapArray","childNodes","cleaned","remove","multi","toString","createTextNode","cleanChildren","array","currentArray","normalizeIncomingArray","appendNodes","b","bLength","aEnd","bEnd","aStart","bStart","after","map","insertBefore","Map","set","index","sequence","replaceChild","reconcileArrays","Node","appendChild","normalized","unwrap","dynamic","item","String","replacement","inserted","isParent","gatherHydratable","root","templates","querySelectorAll","getAttribute","startsWith","id","throwInBrowser","func","err","error","nodes","needsId","SVG_NAMESPACE","createElementNS","args","enableHydration","globalThis","load","gather","renderId","hydrate$1","useShadow","hydrating","createEffect","user","runWithOwner","mount","body","HTMLHeadElement","clean","setClean","createSignal","cleanup","onCleanup","container","renderRoot","attachShadow","mode","removeChild","p","others","splitProps","cached","component","$DEVCOMP","isSvg","$PROXY","$TRACK","DEV","batch","cancelCallback","catchError","createComputed","createContext","createDeferred","createReaction","createResource","createSelector","createUniqueId","enableExternalSource","enableScheduling","equalFn","from","getListener","indexArray","lazy","mapArray","observable","on","onError","onMount","requestCallback","resetErrorBoundaries","startTransition","useContext","useTransition","taskIdCounter","isCallbackScheduled","isPerformingWork","taskQueue","currentTask","shouldYieldToHost","yieldInterval","deadline","maxYieldInterval","scheduleCallback","scheduledCallback","maxSigned31BitInt","channel","MessageChannel","port","port2","postMessage","port1","onmessage","currentTime","performance","now","hasTimeRemaining","navigator","scheduling","isInputPending","setupScheduler","startTime","timeout","newTask","expirationTime","task","splice","m","n","k","cmp","findIndex","enqueue","flushWork","initialTime","callback","workLoop","setHydrateContext","Symbol","signalOptions","equals","ERROR","runEffects","runQueue","STALE","PENDING","UNOWNED","owned","cleanups","NO_INIT","Owner","Transition","Scheduler","ExternalSourceFactory","Listener","Updates","Effects","ExecCount","transPending","setTransPending","detachedOwner","listener","unowned","updateFn","cleanNode","runUpdates","observers","observerSlots","comparator","readSignal","bind","running","sources","tValue","writeSignal","c","createComputation","updateComputation","runUserEffects","SuspenseContext","lookup","suspense","onInvalidate","tracking","tState","pSource","pFetcher","pOptions","source","fetcher","arguments","pr","initP","loadedUnderTransition","scheduled","resolved","contexts","setValue","storage","initialValue","setError","track","trigger","state","setState","ssrLoadFrom","loadEnd","onHydrated","promises","completeLoad","decrement","clear","read","increment","refetching","then","castError","defineProperties","loading","latest","refetch","mutate","timeoutMs","setDeferred","deferred","subs","val","entries","values","pure","size","deps","prevInput","defer","prevValue","input","result","handleError","o","prevListener","scheduler","Promise","resolve","effects","disposed","queue","res","defaultValue","Provider","createProvider","ctx","memo","resolveChildren","toArray","getSuspenseContext","factory","oldFactory","oldSource","x","runningTransition","this","updates","lookUpstream","sSlot","sourceSlots","isComp","TransitionRunning","markDownstream","time","runComputation","nextValue","tOwned","forEach","updatedAt","ordinary","triggerInTransition","inTransition","runTop","inFallback","ancestors","top","wait","tasks","scheduleQueue","apply","d","completeUpdates","userLength","ignore","pop","obs","reset","cause","runErrors","fns","f","results","subscribe","observer","TypeError","next","unsubscribe","producer","unsub","FALLBACK","list","mapFn","items","mapped","disposers","indexes","j","newItems","newIndices","newIndicesNext","temp","tempdisposers","tempIndexes","newEnd","newLen","fallback","mapper","Math","min","signals","hydrationEnabled","Comp","r","trueFn","propTraps","property","receiver","deleteProperty","getOwnPropertyDescriptor","ownKeys","resolveSource","proxy","Proxy","descriptors","getOwnPropertyDescriptors","blocked","flat","filter","clone","comp","wrap","mod","default","preload","counter","narrowedError","each","keyed","condition","when","child","conditions","evalConditions","conds","cond","Errors","errored","setErrored","suspenseListEquals","showContent","showFallback","SuspenseListContext","show","wrapper","setWrapper","listContext","setRegistry","register","reveal","revealOrder","tail","reg","reverse","all","every","stop","flicker","setFallback","store","rendered","interopDefault","__esModule","defineInteropFlag","exportAll","dest","hasOwnProperty","destName","_table","_animationManager","interactionManager","tableUI","tableUIDescriptor","view","TopDownBookCentered","animations","AnimationManager","onDragCancel","clearDrag","dragging","TableController","_tableModuleScss","tableRef","setTableRef","_el$","_tmpl$","_el$2","_el$3","_el$4","_el$5","_el$6","_el$7","_el$8","_el$9","_$addEventListener","_$use","createTransitionEndEventListener","_$insert","_$effect","_p$","_v$","styles","_v$2","room","_v$3","table","tilted","topDown","TopDown","topDownBookCentered","_v$4","_v$5","_v$6","_v$7","hand","_v$8","_v$9","_$className","_$classList","_$delegateEvents","module","_literals","_record","viewDescriptor","LiteralTypeDescriptor","activeRecordDescriptor","constructor","waitForAnimation","numberDescriptor","stringDescriptor","booleanDescriptor","componentDescriptor","snapshot","freeze","valueRecordDescriptor","ValueRecordTypeDescriptor","attributeTypes","mutable","attributeType","valueMutable","ActiveRecordProxyHandler","newValue","signal","ActiveRecordTypeDescriptor","AnimationCanceledError","_delay","_flattenedPromise","timeoutMillis","maybeCancelAnimation","animation","createFlattenedPromise","race","promise","delay","flattenedPromise","reject","maybeCompleteAnimation","createAnimationEndEventListener","animationIdAndName","animationName","animationId","createCutoutPoppedUpOrDownCallback","poppedUpValue","poppedDownValue","poppedUp","milliseconds","setTimeout","_resolve","_reject","_book","_bookController","renderPagePair","bookUI","bookUIDescriptor","previousSpread","turnLeftToRight","BookComponent","previousPages","currentPages","BookController","PageComponent","_bookModuleScss","FAKE_PAGE_COUNT","onClick","page","transform","z","_$style","spineRef","setSpineRef","_tmpl$3","openAnimation","_tmpl$2","spine","open","_option","_domain","optionalDescriptor","bookSpreadDescriptor","pageComponentManagers","lookupController","popDown","popUp","OptionalTypeDescriptor","mandatoryTypeDescriptor","cardDescriptor","cardSlotDescriptor","bookSpreadTableOfContentsDescriptor","deckDescriptor","entityDescriptor","encounterBattleDescriptor","encounterEventDescriptor","encounterDescriptor","bookSpreadRoomDescriptor","chapterDescriptor","bookDescriptor","gameDescriptor","_list","_union","SymbolType","EffectDirection","CardBackgroundType","CardForegroundType","CardFaceType","ChoiceType","EncounterType","MonsterType","EventType","RecycleTarget","Force","Finesse","Magic","Fire","Damage","Age","Draw","Up","Down","Crosshatched","Clear","Door","Passageway","Rat","Trap","Fountain","Resource","ResourceBack","Choice","ChoiceBack","NextTurn","NextPage","NextChapter","Battle","Event","BigRat","DrawDeckTop","DrawDeckBottom","DrawDeckRandom","DiscardDeckTop","definition","visibleFaceIndex","targetCard","playedCards","listDescriptor","BookSpreadType","TableOfContents","Room","health","maxHealth","monster","monsterType","eventType","discriminatingUnionDescriptor","cardSlots","encounter","ChapterType","Ruins","chapter","ListTypeDescriptor","elementTypeDescriptor","DiscriminatingUnionTypeDescriptor","cases","discriminatorState","discriminatorMutable","_cardSlot","_cardSlots","_componentManager","_cardSlotController","CardSlotComponent","CardComponent","ComponentManager","cardSlot","cardSlotUI","cardSlotUIDescriptor","targetCardHidden","internalOnDragStart","startDrag","internalOnDrop","drop","internalOnClick","click","CardSlotController","CardSlotComponentImpl","targetInteraction","allowedInteraction","onDragStart","onDrop","bordered","used","card","_cardSlotModuleScss","interactionStyles","Interaction","None","none","Drag","draggable","Activate","clickable","Disabled","immovable","NoDrop","Drop","Dragging","LongPress","_$p","_unreachableError","_cards","lastAnimation","dragged","setDragged","mousePosition","setMousePosition","longPress","setLongPress","draggedCard","targetCardSlot","draggedCardSlot","targetFace","cardFace","isPeeking","UnreachableError","politelyAnimate","chooseCard","interaction","setTargetCardHidden","flipTemporarily","normalizeBoard","action","catch","super","calculateCardEffects","calculateCardEffectUsages","calculateTargetCardEffectUsages","peeking","faces","cardControllerManger","face","cost","benefit","allCardSlots","find","some","effect","targetCardCost","remainingCosts","reduce","acc","playedCard","playedCardCost","playedCardBenefit","playedCardBenefitUsages","remainingCost","playedCardEffectTotals","calculatePlayedCardEffectTotals","total","pageCardSlots","pageDeck","playerDeck","randomizeDeck","mutableDeck","floor","random","_cardSlotsModuleScss","cache","WeakMap","lookupOrCreateComponent","lookupOrCreate","hidden","_cardController","_card","_cardFace","cardUI","cardUIDescriptor","flipState","FlipState","Flat","usage","elevated","FlippingUpToVertical","CardFaceComponent","CardController","FlippingDownFromVertical","internalFlip","doFlip","_cardModuleScss","cardRef","setCardRef","rotate","flippingUpToVertical","flippingDownFromVertical","scale","_cardFaceModuleScss","_effectStrip","_cardFaceDescription","_cardFaceName","EffectStripComponent","CardFaceDescriptionComponent","CardFaceNameComponent","background","crosshatched","door","passageway","foreground","rat","trap","fountain","_effectStripModuleScss","_effect","EffectComponent","_effectModuleScss","ResourceSymbols","symbol","down","direction","_cardFaceDescriptionModuleScss","_cardFaceNameModuleScss","_page","pageUI","pageUIDescriptor","popped","PageController","_pageToc","_pageRoom","pageComponents","PageRoomComponent","PageToCComponent","_pageBlank","_cutout","_pageTocModuleScss","sideComponents","PageBlankComponent","PageTocRightComponent","Cutout","row","up","onPoppedUpOrDown","toc","_cutoutModuleScss","cutoutRef","onTransitionEnd","_ref$","cutout","_pageRoomModuleScss","TestCutoutComponent","topPercent","left","leftPercent","width","widthPercent","height","heightPercent","position","testCutout","color","cutouts","fill","pow","cards","_effects","cardBackJammedDoor","DamageUp","cardBackDoor","cardFrontEmpty","choice","cardFrontRat","cardFrontTrapped","DamageDown","cardFrontFountain","event","flatMap","back","front","recycleTarget","ForceUp","ForceDown","FinesseUp","FinesseDown","MagicUp","MagicDown","FireUp","FireDown","AgeUp","AgeDown","_dragOverlay","_dragOverlayController","Card","DragOverlayController","cx","cy","_dragOverlayModuleScss","drag","_encounters","battleEncounterControllerManager","flip","perform","endTurn","startTurn","usages","defaultPlayerCharacter","hydrateEncounter","showSpread","battleEncounter","appear","flippableCardSlots","isAutoFlippable","draw","pageDeckGetter","pageDeckSetter","availableSlots","slot","availableDraw","drawnCards","pageDeckHolder","playerDeckHolder","inPlayerHand","returnCardToDeck","drawDeck","discardDeck","targetDeck","getDeck","setDeck","deckLength","_might","_kick","_shield","cardMight","cardKick","cardShield","cardBackMight","cardFrontMight","description","cardTypeMight","cardBackKick","cardFrontKick","cardTypeKick","cardBackShield","cardFrontShield","cardTypeShield","defaultRat","hydrateMonster","cardFrontRatBite","cardFrontRatScreech","cardFrontRatCower","cardBackRatBeligerence","cardBackRatFurtiveMovement","cardBackRatScurrying","cardBack","_deck","_deckController","DeckComponent","DeckController","_deckModuleScss","_spreadOverlay","_spreadOverlayRoom","_spreadOverlayBlank","spreadComponents","SpreadOverlayRoomComponent","SpreadOverlayBlankComponent","_spreadOverlayRoomModuleScss","_statusOverlay","_statusOverlayModuleScss","filled","overlay","_encounterBattle","MonsterComponent","createMonster","EncounterBattleComponent","createRatEntity","_rigidEntityController","createRigidEntity","Animations","Attack","createUnicodeEntity","_rigidEntity","actions","EntityComponent","entityController","flipX","ui","rigidEntityUI","activeAnimation","RigidEntityController","Special","RigidEntityComponent","Appear","TakeDamage","Die","fallbackAnimation","dynamicEntityController","performAnimation","die","dynamicAnimation","_rigidEntityModuleScss","setRef","appearAnimation","attackAnimation","onAnimationEnd","entity","idle","attack","inner","_unicodeEntity","unicode","UnicodeEntityComponent","_unicodeEntityModuleScss","_encounterBattleModuleScss"],"version":3,"file":"index.ef3a944e.js.map"}