{"mappings":"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","sources":["src/index.tsx","node_modules/solid-js/web/dist/web.js","node_modules/solid-js/dist/solid.js","node_modules/@parcel/transformer-js/src/esmodule-helpers.js","src/components/table/create.tsx","src/components/table/table.tsx","src/components/table/table.module.scss","src/components/table/table_controller.ts","src/model/descriptor/literals.ts","src/model/descriptor/record.ts","src/ui/animation/animation_manager.ts","src/base/delay.ts","src/base/flattened_promise.ts","src/components/book/create.tsx","src/components/book/book.tsx","src/components/book/book.module.scss","src/components/book/book_controller.ts","src/model/descriptor/option.ts","src/model/domain.ts","src/model/descriptor/list.ts","src/model/descriptor/union.ts","src/components/book/cover/chrononomicon.tsx","src/components/book/cover/chrononomicon.module.scss","src/components/page/page_controller.ts","src/components/card_slot/create.tsx","src/components/card_slot/card_slot.tsx","src/components/card_slot/card_slot.module.scss","src/rules/interaction_manager.ts","src/base/unreachable_error.ts","src/rules/cards.ts","src/rules/games.ts","src/base/arrays.ts","src/components/card_slot/card_slots.tsx","src/components/card_slot/card_slots.module.scss","src/components/component_manager.tsx","src/components/card_slot/card_slot_controller.ts","src/components/card/create.tsx","src/components/card/card_controller.ts","src/components/card/card.tsx","src/components/card/card.module.scss","src/components/card/face/card_face.tsx","src/components/card/face/card_face.module.scss","src/components/effect/effect_strip.tsx","src/components/effect/effect_strip.module.scss","src/components/effect/effect.tsx","src/components/effect/effect.module.scss","src/components/symbol/symbol.tsx","src/components/symbol/damage.svg.tsx","src/components/symbol/finesse.svg.tsx","src/components/symbol/finesse.svg.module.scss","src/components/symbol/force.svg.tsx","src/components/symbol/force.svg.module.scss","src/components/symbol/mind.svg.tsx","src/components/symbol/mind.svg.module.scss","src/components/symbol/symbol.svg.tsx","src/components/symbol/symbol.module.scss","src/components/card/face/card_face_description.tsx","src/components/card/face/card_face_description.module.scss","src/components/card/face/card_face_name.tsx","src/components/card/face/card_face_name.module.scss","src/components/page/create.tsx","src/components/page/toc/create.tsx","src/components/page/toc/toc_page.tsx","src/components/page/blank/page_blank.tsx","src/components/page/toc/page_toc.module.scss","src/components/navigation_target.ts","src/components/page/room/create.tsx","src/components/page/room/room_page_controller.ts","src/base/max_by.ts","src/components/page/room/room_page.tsx","src/components/page/room/room_page.module.scss","src/components/constants.module.scss","src/components/scenery/rigid/create.tsx","src/components/scenery/rigid/rigid_scenery_controller.ts","src/components/scenery/rigid/rigid_scenery.tsx","src/components/scenery/rigid/rigid_scenery.module.scss","src/base/exists.ts","src/components/scenery/unicode/create.tsx","src/components/scenery/unicode/unicode_scenery.tsx","src/components/scenery/unicode/unicode_scenery_controller.ts","src/components/page/death/create.tsx","src/components/page/death/death_page.tsx","src/components/page/death/death_page.module.scss","src/data/initial.ts","src/data/chapters/ruins/chapter.ts","src/data/chapters/ruins/cards.ts","src/data/effects.ts","src/data/events/shrine/cards.ts","src/components/drag/create.tsx","src/components/drag/drag_overlay.tsx","src/components/drag/drag_overlay.module.scss","src/components/drag/drag_overlay_controller.ts","src/rules/game_manager.ts","src/data/player/initial.ts","src/data/items/force.ts","src/data/items/finesse.ts","src/data/items/dodge.ts","src/data/items/kick.ts","src/data/items/mind.ts","src/rules/encounters.ts","src/data/monsters/rat/initial.ts","src/data/monsters/rat/cards.ts","src/data/monsters/troll/initial.ts","src/data/monsters/troll/cards.ts","src/data/events/fountain/cards.ts","src/data/events/magic_tree/cards.ts","src/data/monsters/snail/initial.ts","src/data/monsters/snail/cards.ts","src/data/events/mushroom/cards.ts","src/data/items/cards.ts","src/data/items/headbutt.ts","src/data/items/shield.ts","src/data/items/torch.ts","src/data/monsters/rooster/initial.ts","src/data/monsters/rooster/cards.ts","src/data/monsters/dummy/initial.ts","src/data/monsters/dummy/cards.ts","src/data/chapters/forest/chapter.ts","src/data/chapters/forest/cards.ts","src/data/chapters/prelude/chapter.ts","src/data/chapters/prelude/cards.ts","src/data/items/sword.ts","src/data/chapters/store/chapter.ts","src/data/chapters/store/cards.ts","src/components/deck/create.tsx","src/components/deck/deck.tsx","src/components/deck/deck.module.scss","src/components/deck/deck_controller.tsx","src/components/status/create.tsx","src/components/status/status_overlay.tsx","src/components/status/status_overlay.module.scss","src/components/entity/health/entity_health.tsx","src/components/entity/health/entity_health.module.scss","src/components/narration/narration.tsx","src/components/narration/narration.module.scss","src/components/entity/age/entity_age.tsx","src/components/entity/age/entity_age.module.scss","src/components/encounter/battle/create.tsx","src/components/entity/create.tsx","src/components/entity/rat/create.tsx","src/components/entity/rigid/create.tsx","src/components/entity/rigid/rigid_entity_controller.ts","src/components/entity/rigid/rigid_entity.tsx","src/components/entity/rigid/rigid_entity.module.scss","src/components/entity/unicode/create.tsx","src/components/entity/unicode/unicode_entity.tsx","src/components/entity/unicode/unicode_entity.module.scss","src/components/entity/troll/create.tsx","src/components/entity/snail/create.tsx","src/components/entity/rooster/create.tsx","src/components/entity/dummy/create.tsx","src/components/encounter/battle/encounter_battle.tsx","src/components/encounter/battle/encounter_battle.module.scss","src/components/encounter/event/create.tsx","src/components/entity/fountain/create.tsx","src/components/encounter/event/encounter_event.tsx","src/components/encounter/event/encounter_event.module.scss","src/components/entity/magic_tree/create.tsx","src/components/entity/mushroom/create.tsx","src/components/entity/shrine/create.tsx","src/components/entity/treasure/create.tsx","src/components/entity/shop/create.tsx","src/components/encounter/create.tsx","src/ui/speaker/rendering_speaker.ts","src/ui/speaker/speech_synthesis_word_splitter.ts","src/ui/speaker/delay_word_splitter.ts","src/ui/speaker/polite_speaker.ts"],"sourcesContent":["import { render } from \"solid-js/web\";\nimport { createTable } from \"components/table/create\";\nimport { View } from \"components/table/table_controller\";\nimport { createBook } from \"components/book/create\";\nimport { createCardSlotManager, createCardSlots } from \"components/card_slot/create\";\nimport { createCardManager } from \"components/card/create\";\nimport { createPageManager } from \"components/page/create\";\nimport { initialGame } from \"data/initial\";\nimport { InteractionManager } from \"rules/interaction_manager\";\nimport { createDragOverlay } from \"components/drag/create\";\nimport { GameManager } from \"rules/game_manager\";\nimport { createDeck } from \"components/deck/create\";\nimport { createStatusOverlay } from \"components/status/create\";\nimport { createEncounterBattleManger } from \"components/encounter/battle/create\";\nimport { gameEncounterBattle, gameEncounterEvent } from \"rules/games\";\nimport { createMemo } from \"solid-js\";\nimport { BookSpreadType, bookSpreadDeathDescriptor, bookSpreadTableOfContentsDescriptor } from \"model/domain\";\nimport { NavigationTarget, NavigationTargetType } from \"components/navigation_target\";\nimport { UnreachableError } from \"base/unreachable_error\";\nimport { createEncounterEventManger } from \"components/encounter/event/create\";\nimport { createEncounter } from \"components/encounter/create\";\nimport { RenderingSpeaker } from \"ui/speaker/rendering_speaker\";\nimport { SpeechSynthesisWordSplitter } from \"ui/speaker/speech_synthesis_word_splitter\";\nimport { DelayWordSplitter } from \"ui/speaker/delay_word_splitter\";\nimport { PoliteSpeaker } from \"ui/speaker/polite_speaker\";\n\nwindow.onload = function () {\n  const backgroundMusic = document.getElementById('bgm') as HTMLAudioElement | null;\n  backgroundMusic?.pause();\n\n  const wordSplitter = new SpeechSynthesisWordSplitter(\n      window.speechSynthesis,\n      new DelayWordSplitter(),\n  );\n  const renderingSpeaker = new RenderingSpeaker(wordSplitter);\n  const speaker = new PoliteSpeaker(renderingSpeaker);\n  \n\n  const app = document.getElementById('app')!;\n  const game = initialGame;\n  const cardManager = createCardManager(game);\n\n  const navigation = async (to: NavigationTarget): Promise<void> => {\n    switch (to.type) {\n      case NavigationTargetType.ToC:\n        await tableController.setView(View.TopDown);\n        return bookController.showSpread(bookSpreadTableOfContentsDescriptor.create({\n          type: BookSpreadType.TableOfContents,\n          unlockedChapters: 0,\n        }), true);\n      case NavigationTargetType.Chapter:\n        if (backgroundMusic != null && backgroundMusic.paused) {\n          backgroundMusic.volume = .8;\n          backgroundMusic.play();\n        }\n        await tableController.setView(View.Tilted);\n        gameManager.maybeCreatePlayer();\n        gameManager.createChapter(to.chapterIndex);\n        return gameManager.nextPage(undefined, undefined);\n      case NavigationTargetType.Death:\n        if (backgroundMusic != null && backgroundMusic.paused) {\n          backgroundMusic.pause();\n        }\n        await bookController.showSpread(bookSpreadDeathDescriptor.create({\n          type: BookSpreadType.Death,\n        }));\n        return tableController.setView(View.TopDown);\n      default:\n        throw new UnreachableError(to);\n    }\n  };\n\n\n  const pageComponentManager = createPageManager(\n    navigation,\n    game,\n  );\n\n  const cardSlotManager = createCardSlotManager(\n    cardManager.FactoryComponent,\n    () => interactionManger,\n    game,\n  );\n\n  const {\n    Component: CardSlotsComponent,\n  } = createCardSlots(cardSlotManager.FactoryComponent);\n\n  const StatusOverlayComponent = createStatusOverlay()\n\n  const {\n    Component: BookImpl,\n    controller: bookController,\n  } = createBook({\n    pageComponentManager,\n    book: game.book,\n  });\n\n  const {\n    Component: TableComponent,\n    controller: tableController,\n  } = createTable();\n\n  const encounterBattleManager = createEncounterBattleManger();\n  const encounterEventManager = createEncounterEventManger();\n  const Encounter = createEncounter(encounterBattleManager, encounterEventManager);\n  const gameManager = new GameManager(\n      speaker,\n      game,\n      navigation,\n      tableController,\n      bookController,\n      cardManager,\n      cardSlotManager,\n      encounterBattleManager,\n      encounterEventManager,\n  );\n  const interactionManger = new InteractionManager(\n      game,\n      gameManager,\n      cardManager,\n      cardSlotManager,\n  );\n  \n  window.addEventListener('pointermove', e => {\n    if (interactionManger.dragging) {\n      interactionManger.lastMousePosition = [e.clientX, e.clientY];\n    }\n  });\n  window.addEventListener('mousemove', e => {\n    const dx = (e.clientX - window.innerWidth/2)*2/window.innerWidth;\n    const dy = (e.clientY - window.innerHeight/2)*2/window.innerHeight;\n    tableController.look(Math.pow(dx, 3)/2, Math.pow(dy, 3)/2);\n  });\n\n  const {\n    Component: PlayerDeck,\n  } = createDeck(() => game.playerCharacter?.deck, cardManager.FactoryComponent);\n\n  function Hand() {\n    return <CardSlotsComponent model={game.playerHand}/>;\n  }\n\n  function SpreadOverlay() {\n    // <>{}</> is needed to re-render on game.book.spread changing\n    return (\n      <>\n        {\n          game.book.spread && <CardSlotsComponent model={game.book.cardSlots}/>\n        }\n      </>\n    );\n  }\n\n  const { Component: DragOverlay } = createDragOverlay(\n    interactionManger,\n    cardManager.FactoryComponent,\n  );\n\n  function Book() {\n    const encounter = createMemo(() => gameEncounterBattle(game) || gameEncounterEvent(game));\n    return (\n      <BookImpl>\n        {encounter() && <Encounter model={encounter()!}/>}\n      </BookImpl>\n    );\n  }\n\n  function StatusOverlay() {\n    // <>{}</> is needed to re-render on game.playerCharacter.spread changing\n    return (\n      <>\n        {\n          game.playerCharacter\n              && <StatusOverlayComponent\n                      playerCharacter={game.playerCharacter}\n                      speaker={renderingSpeaker}/>\n        }\n      </>\n    );\n  }\n\n  render(() => (\n      <DragOverlay>\n        <TableComponent\n            Book={Book}\n            Hand={Hand}\n            Deck={PlayerDeck}\n            SpreadOverlay={SpreadOverlay}\n            StatusOverlay={StatusOverlay}\n        />\n      </DragOverlay>\n  ), app);\n\n  // TODO load assets\n  setTimeout(async () => {\n    navigation({\n      type: NavigationTargetType.ToC,\n    });\n  }, 2000);\n};\n","import { createRoot, createRenderEffect, sharedConfig, untrack, enableHydration, getOwner, createEffect, runWithOwner, createSignal, onCleanup, splitProps, createMemo, $DEVCOMP } from 'solid-js';\nexport { ErrorBoundary, For, Index, Match, Show, Suspense, SuspenseList, Switch, createComponent, createRenderEffect as effect, getOwner, createMemo as memo, mergeProps, untrack } from 'solid-js';\n\nconst booleans = [\"allowfullscreen\", \"async\", \"autofocus\", \"autoplay\", \"checked\", \"controls\", \"default\", \"disabled\", \"formnovalidate\", \"hidden\", \"indeterminate\", \"ismap\", \"loop\", \"multiple\", \"muted\", \"nomodule\", \"novalidate\", \"open\", \"playsinline\", \"readonly\", \"required\", \"reversed\", \"seamless\", \"selected\"];\nconst Properties = /*#__PURE__*/new Set([\"className\", \"value\", \"readOnly\", \"formNoValidate\", \"isMap\", \"noModule\", \"playsInline\", ...booleans]);\nconst ChildProperties = /*#__PURE__*/new Set([\"innerHTML\", \"textContent\", \"innerText\", \"children\"]);\nconst Aliases = /*#__PURE__*/Object.assign(Object.create(null), {\n  className: \"class\",\n  htmlFor: \"for\"\n});\nconst PropAliases = /*#__PURE__*/Object.assign(Object.create(null), {\n  class: \"className\",\n  formnovalidate: {\n    $: \"formNoValidate\",\n    BUTTON: 1,\n    INPUT: 1\n  },\n  ismap: {\n    $: \"isMap\",\n    IMG: 1\n  },\n  nomodule: {\n    $: \"noModule\",\n    SCRIPT: 1\n  },\n  playsinline: {\n    $: \"playsInline\",\n    VIDEO: 1\n  },\n  readonly: {\n    $: \"readOnly\",\n    INPUT: 1,\n    TEXTAREA: 1\n  }\n});\nfunction getPropAlias(prop, tagName) {\n  const a = PropAliases[prop];\n  return typeof a === \"object\" ? a[tagName] ? a[\"$\"] : undefined : a;\n}\nconst DelegatedEvents = /*#__PURE__*/new Set([\"beforeinput\", \"click\", \"dblclick\", \"contextmenu\", \"focusin\", \"focusout\", \"input\", \"keydown\", \"keyup\", \"mousedown\", \"mousemove\", \"mouseout\", \"mouseover\", \"mouseup\", \"pointerdown\", \"pointermove\", \"pointerout\", \"pointerover\", \"pointerup\", \"touchend\", \"touchmove\", \"touchstart\"]);\nconst SVGElements = /*#__PURE__*/new Set([\n\"altGlyph\", \"altGlyphDef\", \"altGlyphItem\", \"animate\", \"animateColor\", \"animateMotion\", \"animateTransform\", \"circle\", \"clipPath\", \"color-profile\", \"cursor\", \"defs\", \"desc\", \"ellipse\", \"feBlend\", \"feColorMatrix\", \"feComponentTransfer\", \"feComposite\", \"feConvolveMatrix\", \"feDiffuseLighting\", \"feDisplacementMap\", \"feDistantLight\", \"feFlood\", \"feFuncA\", \"feFuncB\", \"feFuncG\", \"feFuncR\", \"feGaussianBlur\", \"feImage\", \"feMerge\", \"feMergeNode\", \"feMorphology\", \"feOffset\", \"fePointLight\", \"feSpecularLighting\", \"feSpotLight\", \"feTile\", \"feTurbulence\", \"filter\", \"font\", \"font-face\", \"font-face-format\", \"font-face-name\", \"font-face-src\", \"font-face-uri\", \"foreignObject\", \"g\", \"glyph\", \"glyphRef\", \"hkern\", \"image\", \"line\", \"linearGradient\", \"marker\", \"mask\", \"metadata\", \"missing-glyph\", \"mpath\", \"path\", \"pattern\", \"polygon\", \"polyline\", \"radialGradient\", \"rect\",\n\"set\", \"stop\",\n\"svg\", \"switch\", \"symbol\", \"text\", \"textPath\",\n\"tref\", \"tspan\", \"use\", \"view\", \"vkern\"]);\nconst SVGNamespace = {\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\"\n};\nconst DOMElements = /*#__PURE__*/new Set([\"html\", \"base\", \"head\", \"link\", \"meta\", \"style\", \"title\", \"body\", \"address\", \"article\", \"aside\", \"footer\", \"header\", \"main\", \"nav\", \"section\", \"body\", \"blockquote\", \"dd\", \"div\", \"dl\", \"dt\", \"figcaption\", \"figure\", \"hr\", \"li\", \"ol\", \"p\", \"pre\", \"ul\", \"a\", \"abbr\", \"b\", \"bdi\", \"bdo\", \"br\", \"cite\", \"code\", \"data\", \"dfn\", \"em\", \"i\", \"kbd\", \"mark\", \"q\", \"rp\", \"rt\", \"ruby\", \"s\", \"samp\", \"small\", \"span\", \"strong\", \"sub\", \"sup\", \"time\", \"u\", \"var\", \"wbr\", \"area\", \"audio\", \"img\", \"map\", \"track\", \"video\", \"embed\", \"iframe\", \"object\", \"param\", \"picture\", \"portal\", \"source\", \"svg\", \"math\", \"canvas\", \"noscript\", \"script\", \"del\", \"ins\", \"caption\", \"col\", \"colgroup\", \"table\", \"tbody\", \"td\", \"tfoot\", \"th\", \"thead\", \"tr\", \"button\", \"datalist\", \"fieldset\", \"form\", \"input\", \"label\", \"legend\", \"meter\", \"optgroup\", \"option\", \"output\", \"progress\", \"select\", \"textarea\", \"details\", \"dialog\", \"menu\", \"summary\", \"details\", \"slot\", \"template\", \"acronym\", \"applet\", \"basefont\", \"bgsound\", \"big\", \"blink\", \"center\", \"content\", \"dir\", \"font\", \"frame\", \"frameset\", \"hgroup\", \"image\", \"keygen\", \"marquee\", \"menuitem\", \"nobr\", \"noembed\", \"noframes\", \"plaintext\", \"rb\", \"rtc\", \"shadow\", \"spacer\", \"strike\", \"tt\", \"xmp\", \"a\", \"abbr\", \"acronym\", \"address\", \"applet\", \"area\", \"article\", \"aside\", \"audio\", \"b\", \"base\", \"basefont\", \"bdi\", \"bdo\", \"bgsound\", \"big\", \"blink\", \"blockquote\", \"body\", \"br\", \"button\", \"canvas\", \"caption\", \"center\", \"cite\", \"code\", \"col\", \"colgroup\", \"content\", \"data\", \"datalist\", \"dd\", \"del\", \"details\", \"dfn\", \"dialog\", \"dir\", \"div\", \"dl\", \"dt\", \"em\", \"embed\", \"fieldset\", \"figcaption\", \"figure\", \"font\", \"footer\", \"form\", \"frame\", \"frameset\", \"head\", \"header\", \"hgroup\", \"hr\", \"html\", \"i\", \"iframe\", \"image\", \"img\", \"input\", \"ins\", \"kbd\", \"keygen\", \"label\", \"legend\", \"li\", \"link\", \"main\", \"map\", \"mark\", \"marquee\", \"menu\", \"menuitem\", \"meta\", \"meter\", \"nav\", \"nobr\", \"noembed\", \"noframes\", \"noscript\", \"object\", \"ol\", \"optgroup\", \"option\", \"output\", \"p\", \"param\", \"picture\", \"plaintext\", \"portal\", \"pre\", \"progress\", \"q\", \"rb\", \"rp\", \"rt\", \"rtc\", \"ruby\", \"s\", \"samp\", \"script\", \"section\", \"select\", \"shadow\", \"slot\", \"small\", \"source\", \"spacer\", \"span\", \"strike\", \"strong\", \"style\", \"sub\", \"summary\", \"sup\", \"table\", \"tbody\", \"td\", \"template\", \"textarea\", \"tfoot\", \"th\", \"thead\", \"time\", \"title\", \"tr\", \"track\", \"tt\", \"u\", \"ul\", \"var\", \"video\", \"wbr\", \"xmp\", \"input\"]);\n\nfunction reconcileArrays(parentNode, a, b) {\n  let bLength = b.length,\n    aEnd = a.length,\n    bEnd = bLength,\n    aStart = 0,\n    bStart = 0,\n    after = a[aEnd - 1].nextSibling,\n    map = null;\n  while (aStart < aEnd || bStart < bEnd) {\n    if (a[aStart] === b[bStart]) {\n      aStart++;\n      bStart++;\n      continue;\n    }\n    while (a[aEnd - 1] === b[bEnd - 1]) {\n      aEnd--;\n      bEnd--;\n    }\n    if (aEnd === aStart) {\n      const node = bEnd < bLength ? bStart ? b[bStart - 1].nextSibling : b[bEnd - bStart] : after;\n      while (bStart < bEnd) parentNode.insertBefore(b[bStart++], node);\n    } else if (bEnd === bStart) {\n      while (aStart < aEnd) {\n        if (!map || !map.has(a[aStart])) a[aStart].remove();\n        aStart++;\n      }\n    } else if (a[aStart] === b[bEnd - 1] && b[bStart] === a[aEnd - 1]) {\n      const node = a[--aEnd].nextSibling;\n      parentNode.insertBefore(b[bStart++], a[aStart++].nextSibling);\n      parentNode.insertBefore(b[--bEnd], node);\n      a[aEnd] = b[bEnd];\n    } else {\n      if (!map) {\n        map = new Map();\n        let i = bStart;\n        while (i < bEnd) map.set(b[i], i++);\n      }\n      const index = map.get(a[aStart]);\n      if (index != null) {\n        if (bStart < index && index < bEnd) {\n          let i = aStart,\n            sequence = 1,\n            t;\n          while (++i < aEnd && i < bEnd) {\n            if ((t = map.get(a[i])) == null || t !== index + sequence) break;\n            sequence++;\n          }\n          if (sequence > index - bStart) {\n            const node = a[aStart];\n            while (bStart < index) parentNode.insertBefore(b[bStart++], node);\n          } else parentNode.replaceChild(b[bStart++], a[aStart++]);\n        } else aStart++;\n      } else a[aStart++].remove();\n    }\n  }\n}\n\nconst $$EVENTS = \"_$DX_DELEGATE\";\nfunction render(code, element, init, options = {}) {\n  let disposer;\n  createRoot(dispose => {\n    disposer = dispose;\n    element === document ? code() : insert(element, code(), element.firstChild ? null : undefined, init);\n  }, options.owner);\n  return () => {\n    disposer();\n    element.textContent = \"\";\n  };\n}\nfunction template(html, isCE, isSVG) {\n  let node;\n  const create = () => {\n    const t = document.createElement(\"template\");\n    t.innerHTML = html;\n    return isSVG ? t.content.firstChild.firstChild : t.content.firstChild;\n  };\n  const fn = isCE ? () => (node || (node = create())).cloneNode(true) : () => untrack(() => document.importNode(node || (node = create()), true));\n  fn.cloneNode = fn;\n  return fn;\n}\nfunction delegateEvents(eventNames, document = window.document) {\n  const e = document[$$EVENTS] || (document[$$EVENTS] = new Set());\n  for (let i = 0, l = eventNames.length; i < l; i++) {\n    const name = eventNames[i];\n    if (!e.has(name)) {\n      e.add(name);\n      document.addEventListener(name, eventHandler);\n    }\n  }\n}\nfunction clearDelegatedEvents(document = window.document) {\n  if (document[$$EVENTS]) {\n    for (let name of document[$$EVENTS].keys()) document.removeEventListener(name, eventHandler);\n    delete document[$$EVENTS];\n  }\n}\nfunction setAttribute(node, name, value) {\n  if (value == null) node.removeAttribute(name);else node.setAttribute(name, value);\n}\nfunction setAttributeNS(node, namespace, name, value) {\n  if (value == null) node.removeAttributeNS(namespace, name);else node.setAttributeNS(namespace, name, value);\n}\nfunction className(node, value) {\n  if (value == null) node.removeAttribute(\"class\");else node.className = value;\n}\nfunction addEventListener(node, name, handler, delegate) {\n  if (delegate) {\n    if (Array.isArray(handler)) {\n      node[`$$${name}`] = handler[0];\n      node[`$$${name}Data`] = handler[1];\n    } else node[`$$${name}`] = handler;\n  } else if (Array.isArray(handler)) {\n    const handlerFn = handler[0];\n    node.addEventListener(name, handler[0] = e => handlerFn.call(node, handler[1], e));\n  } else node.addEventListener(name, handler);\n}\nfunction classList(node, value, prev = {}) {\n  const classKeys = Object.keys(value || {}),\n    prevKeys = Object.keys(prev);\n  let i, len;\n  for (i = 0, len = prevKeys.length; i < len; i++) {\n    const key = prevKeys[i];\n    if (!key || key === \"undefined\" || value[key]) continue;\n    toggleClassKey(node, key, false);\n    delete prev[key];\n  }\n  for (i = 0, len = classKeys.length; i < len; i++) {\n    const key = classKeys[i],\n      classValue = !!value[key];\n    if (!key || key === \"undefined\" || prev[key] === classValue || !classValue) continue;\n    toggleClassKey(node, key, true);\n    prev[key] = classValue;\n  }\n  return prev;\n}\nfunction style(node, value, prev) {\n  if (!value) return prev ? setAttribute(node, \"style\") : value;\n  const nodeStyle = node.style;\n  if (typeof value === \"string\") return nodeStyle.cssText = value;\n  typeof prev === \"string\" && (nodeStyle.cssText = prev = undefined);\n  prev || (prev = {});\n  value || (value = {});\n  let v, s;\n  for (s in prev) {\n    value[s] == null && nodeStyle.removeProperty(s);\n    delete prev[s];\n  }\n  for (s in value) {\n    v = value[s];\n    if (v !== prev[s]) {\n      nodeStyle.setProperty(s, v);\n      prev[s] = v;\n    }\n  }\n  return prev;\n}\nfunction spread(node, props = {}, isSVG, skipChildren) {\n  const prevProps = {};\n  if (!skipChildren) {\n    createRenderEffect(() => prevProps.children = insertExpression(node, props.children, prevProps.children));\n  }\n  createRenderEffect(() => props.ref && props.ref(node));\n  createRenderEffect(() => assign(node, props, isSVG, true, prevProps, true));\n  return prevProps;\n}\nfunction dynamicProperty(props, key) {\n  const src = props[key];\n  Object.defineProperty(props, key, {\n    get() {\n      return src();\n    },\n    enumerable: true\n  });\n  return props;\n}\nfunction innerHTML(parent, content) {\n  !sharedConfig.context && (parent.innerHTML = content);\n}\nfunction use(fn, element, arg) {\n  return untrack(() => fn(element, arg));\n}\nfunction insert(parent, accessor, marker, initial) {\n  if (marker !== undefined && !initial) initial = [];\n  if (typeof accessor !== \"function\") return insertExpression(parent, accessor, initial, marker);\n  createRenderEffect(current => insertExpression(parent, accessor(), current, marker), initial);\n}\nfunction assign(node, props, isSVG, skipChildren, prevProps = {}, skipRef = false) {\n  props || (props = {});\n  for (const prop in prevProps) {\n    if (!(prop in props)) {\n      if (prop === \"children\") continue;\n      prevProps[prop] = assignProp(node, prop, null, prevProps[prop], isSVG, skipRef);\n    }\n  }\n  for (const prop in props) {\n    if (prop === \"children\") {\n      if (!skipChildren) insertExpression(node, props.children);\n      continue;\n    }\n    const value = props[prop];\n    prevProps[prop] = assignProp(node, prop, value, prevProps[prop], isSVG, skipRef);\n  }\n}\nfunction hydrate$1(code, element, options = {}) {\n  sharedConfig.completed = globalThis._$HY.completed;\n  sharedConfig.events = globalThis._$HY.events;\n  sharedConfig.load = globalThis._$HY.load;\n  sharedConfig.gather = root => gatherHydratable(element, root);\n  sharedConfig.registry = new Map();\n  sharedConfig.context = {\n    id: options.renderId || \"\",\n    count: 0\n  };\n  gatherHydratable(element, options.renderId);\n  const dispose = render(code, element, [...element.childNodes], options);\n  sharedConfig.context = null;\n  return dispose;\n}\nfunction getNextElement(template) {\n  let node, key;\n  if (!sharedConfig.context || !(node = sharedConfig.registry.get(key = getHydrationKey()))) {\n    if (sharedConfig.context) console.warn(\"Unable to find DOM nodes for hydration key:\", key);\n    if (!template) throw new Error(\"Unrecoverable Hydration Mismatch. No template for key: \" + key);\n    return template();\n  }\n  if (sharedConfig.completed) sharedConfig.completed.add(node);\n  sharedConfig.registry.delete(key);\n  return node;\n}\nfunction getNextMatch(el, nodeName) {\n  while (el && el.localName !== nodeName) el = el.nextSibling;\n  return el;\n}\nfunction getNextMarker(start) {\n  let end = start,\n    count = 0,\n    current = [];\n  if (sharedConfig.context) {\n    while (end) {\n      if (end.nodeType === 8) {\n        const v = end.nodeValue;\n        if (v === \"#\") count++;else if (v === \"/\") {\n          if (count === 0) return [end, current];\n          count--;\n        }\n      }\n      current.push(end);\n      end = end.nextSibling;\n    }\n  }\n  return [end, current];\n}\nfunction runHydrationEvents() {\n  if (sharedConfig.events && !sharedConfig.events.queued) {\n    queueMicrotask(() => {\n      const {\n        completed,\n        events\n      } = sharedConfig;\n      events.queued = false;\n      while (events.length) {\n        const [el, e] = events[0];\n        if (!completed.has(el)) return;\n        eventHandler(e);\n        events.shift();\n      }\n    });\n    sharedConfig.events.queued = true;\n  }\n}\nfunction toPropertyName(name) {\n  return name.toLowerCase().replace(/-([a-z])/g, (_, w) => w.toUpperCase());\n}\nfunction toggleClassKey(node, key, value) {\n  const classNames = key.trim().split(/\\s+/);\n  for (let i = 0, nameLen = classNames.length; i < nameLen; i++) node.classList.toggle(classNames[i], value);\n}\nfunction assignProp(node, prop, value, prev, isSVG, skipRef) {\n  let isCE, isProp, isChildProp, propAlias, forceProp;\n  if (prop === \"style\") return style(node, value, prev);\n  if (prop === \"classList\") return classList(node, value, prev);\n  if (value === prev) return prev;\n  if (prop === \"ref\") {\n    if (!skipRef) value(node);\n  } else if (prop.slice(0, 3) === \"on:\") {\n    const e = prop.slice(3);\n    prev && node.removeEventListener(e, prev);\n    value && node.addEventListener(e, value);\n  } else if (prop.slice(0, 10) === \"oncapture:\") {\n    const e = prop.slice(10);\n    prev && node.removeEventListener(e, prev, true);\n    value && node.addEventListener(e, value, true);\n  } else if (prop.slice(0, 2) === \"on\") {\n    const name = prop.slice(2).toLowerCase();\n    const delegate = DelegatedEvents.has(name);\n    if (!delegate && prev) {\n      const h = Array.isArray(prev) ? prev[0] : prev;\n      node.removeEventListener(name, h);\n    }\n    if (delegate || value) {\n      addEventListener(node, name, value, delegate);\n      delegate && delegateEvents([name]);\n    }\n  } else if (prop.slice(0, 5) === \"attr:\") {\n    setAttribute(node, prop.slice(5), value);\n  } else if ((forceProp = prop.slice(0, 5) === \"prop:\") || (isChildProp = ChildProperties.has(prop)) || !isSVG && ((propAlias = getPropAlias(prop, node.tagName)) || (isProp = Properties.has(prop))) || (isCE = node.nodeName.includes(\"-\"))) {\n    if (forceProp) {\n      prop = prop.slice(5);\n      isProp = true;\n    }\n    if (prop === \"class\" || prop === \"className\") className(node, value);else if (isCE && !isProp && !isChildProp) node[toPropertyName(prop)] = value;else node[propAlias || prop] = value;\n  } else {\n    const ns = isSVG && prop.indexOf(\":\") > -1 && SVGNamespace[prop.split(\":\")[0]];\n    if (ns) setAttributeNS(node, ns, prop, value);else setAttribute(node, Aliases[prop] || prop, value);\n  }\n  return value;\n}\nfunction eventHandler(e) {\n  const key = `$$${e.type}`;\n  let node = e.composedPath && e.composedPath()[0] || e.target;\n  if (e.target !== node) {\n    Object.defineProperty(e, \"target\", {\n      configurable: true,\n      value: node\n    });\n  }\n  Object.defineProperty(e, \"currentTarget\", {\n    configurable: true,\n    get() {\n      return node || document;\n    }\n  });\n  if (sharedConfig.registry && !sharedConfig.done) sharedConfig.done = _$HY.done = true;\n  while (node) {\n    const handler = node[key];\n    if (handler && !node.disabled) {\n      const data = node[`${key}Data`];\n      data !== undefined ? handler.call(node, data, e) : handler.call(node, e);\n      if (e.cancelBubble) return;\n    }\n    node = node._$host || node.parentNode || node.host;\n  }\n}\nfunction insertExpression(parent, value, current, marker, unwrapArray) {\n  if (sharedConfig.context) {\n    !current && (current = [...parent.childNodes]);\n    let cleaned = [];\n    for (let i = 0; i < current.length; i++) {\n      const node = current[i];\n      if (node.nodeType === 8 && node.data.slice(0, 2) === \"!$\") node.remove();else cleaned.push(node);\n    }\n    current = cleaned;\n  }\n  while (typeof current === \"function\") current = current();\n  if (value === current) return current;\n  const t = typeof value,\n    multi = marker !== undefined;\n  parent = multi && current[0] && current[0].parentNode || parent;\n  if (t === \"string\" || t === \"number\") {\n    if (sharedConfig.context) return current;\n    if (t === \"number\") value = value.toString();\n    if (multi) {\n      let node = current[0];\n      if (node && node.nodeType === 3) {\n        node.data = value;\n      } else node = document.createTextNode(value);\n      current = cleanChildren(parent, current, marker, node);\n    } else {\n      if (current !== \"\" && typeof current === \"string\") {\n        current = parent.firstChild.data = value;\n      } else current = parent.textContent = value;\n    }\n  } else if (value == null || t === \"boolean\") {\n    if (sharedConfig.context) return current;\n    current = cleanChildren(parent, current, marker);\n  } else if (t === \"function\") {\n    createRenderEffect(() => {\n      let v = value();\n      while (typeof v === \"function\") v = v();\n      current = insertExpression(parent, v, current, marker);\n    });\n    return () => current;\n  } else if (Array.isArray(value)) {\n    const array = [];\n    const currentArray = current && Array.isArray(current);\n    if (normalizeIncomingArray(array, value, current, unwrapArray)) {\n      createRenderEffect(() => current = insertExpression(parent, array, current, marker, true));\n      return () => current;\n    }\n    if (sharedConfig.context) {\n      if (!array.length) return current;\n      for (let i = 0; i < array.length; i++) {\n        if (array[i].parentNode) return current = array;\n      }\n    }\n    if (array.length === 0) {\n      current = cleanChildren(parent, current, marker);\n      if (multi) return current;\n    } else if (currentArray) {\n      if (current.length === 0) {\n        appendNodes(parent, array, marker);\n      } else reconcileArrays(parent, current, array);\n    } else {\n      current && cleanChildren(parent);\n      appendNodes(parent, array);\n    }\n    current = array;\n  } else if (value instanceof Node) {\n    if (sharedConfig.context && value.parentNode) return current = multi ? [value] : value;\n    if (Array.isArray(current)) {\n      if (multi) return current = cleanChildren(parent, current, marker, value);\n      cleanChildren(parent, current, null, value);\n    } else if (current == null || current === \"\" || !parent.firstChild) {\n      parent.appendChild(value);\n    } else parent.replaceChild(value, parent.firstChild);\n    current = value;\n  } else console.warn(`Unrecognized value. Skipped inserting`, value);\n  return current;\n}\nfunction normalizeIncomingArray(normalized, array, current, unwrap) {\n  let dynamic = false;\n  for (let i = 0, len = array.length; i < len; i++) {\n    let item = array[i],\n      prev = current && current[i];\n    if (item instanceof Node) {\n      normalized.push(item);\n    } else if (item == null || item === true || item === false) ; else if (Array.isArray(item)) {\n      dynamic = normalizeIncomingArray(normalized, item, prev) || dynamic;\n    } else if ((typeof item) === \"function\") {\n      if (unwrap) {\n        while (typeof item === \"function\") item = item();\n        dynamic = normalizeIncomingArray(normalized, Array.isArray(item) ? item : [item], Array.isArray(prev) ? prev : [prev]) || dynamic;\n      } else {\n        normalized.push(item);\n        dynamic = true;\n      }\n    } else {\n      const value = String(item);\n      if (prev && prev.nodeType === 3) {\n        prev.data = value;\n        normalized.push(prev);\n      } else normalized.push(document.createTextNode(value));\n    }\n  }\n  return dynamic;\n}\nfunction appendNodes(parent, array, marker = null) {\n  for (let i = 0, len = array.length; i < len; i++) parent.insertBefore(array[i], marker);\n}\nfunction cleanChildren(parent, current, marker, replacement) {\n  if (marker === undefined) return parent.textContent = \"\";\n  const node = replacement || document.createTextNode(\"\");\n  if (current.length) {\n    let inserted = false;\n    for (let i = current.length - 1; i >= 0; i--) {\n      const el = current[i];\n      if (node !== el) {\n        const isParent = el.parentNode === parent;\n        if (!inserted && !i) isParent ? parent.replaceChild(node, el) : parent.insertBefore(node, marker);else isParent && el.remove();\n      } else inserted = true;\n    }\n  } else parent.insertBefore(node, marker);\n  return [node];\n}\nfunction gatherHydratable(element, root) {\n  const templates = element.querySelectorAll(`*[data-hk]`);\n  for (let i = 0; i < templates.length; i++) {\n    const node = templates[i];\n    const key = node.getAttribute(\"data-hk\");\n    if ((!root || key.startsWith(root)) && !sharedConfig.registry.has(key)) sharedConfig.registry.set(key, node);\n  }\n}\nfunction getHydrationKey() {\n  const hydrate = sharedConfig.context;\n  return `${hydrate.id}${hydrate.count++}`;\n}\nfunction NoHydration(props) {\n  return sharedConfig.context ? undefined : props.children;\n}\nfunction Hydration(props) {\n  return props.children;\n}\nfunction voidFn() {}\n\nfunction throwInBrowser(func) {\n  const err = new Error(`${func.name} is not supported in the browser, returning undefined`);\n  console.error(err);\n}\nfunction renderToString(fn, options) {\n  throwInBrowser(renderToString);\n}\nfunction renderToStringAsync(fn, options) {\n  throwInBrowser(renderToStringAsync);\n}\nfunction renderToStream(fn, options) {\n  throwInBrowser(renderToStream);\n}\nfunction ssr(template, ...nodes) {}\nfunction ssrElement(name, props, children, needsId) {}\nfunction ssrClassList(value) {}\nfunction ssrStyle(value) {}\nfunction ssrAttribute(key, value) {}\nfunction ssrHydrationKey() {}\nfunction resolveSSRNode(node) {}\nfunction escape(html) {}\nfunction ssrSpread(props, isSVG, skipChildren) {}\n\nconst isServer = false;\nconst isDev = false;\nconst SVG_NAMESPACE = \"http://www.w3.org/2000/svg\";\nfunction createElement(tagName, isSVG = false) {\n  return isSVG ? document.createElementNS(SVG_NAMESPACE, tagName) : document.createElement(tagName);\n}\nconst hydrate = (...args) => {\n  enableHydration();\n  return hydrate$1(...args);\n};\nfunction Portal(props) {\n  const {\n      useShadow\n    } = props,\n    marker = document.createTextNode(\"\"),\n    mount = () => props.mount || document.body,\n    owner = getOwner();\n  let content;\n  let hydrating = !!sharedConfig.context;\n  createEffect(() => {\n    if (hydrating) getOwner().user = hydrating = false;\n    content || (content = runWithOwner(owner, () => props.children));\n    const el = mount();\n    if (el instanceof HTMLHeadElement) {\n      const [clean, setClean] = createSignal(false);\n      const cleanup = () => setClean(true);\n      createRoot(dispose => insert(el, () => !clean() ? content : dispose(), null));\n      onCleanup(cleanup);\n    } else {\n      const container = createElement(props.isSVG ? \"g\" : \"div\", props.isSVG),\n        renderRoot = useShadow && container.attachShadow ? container.attachShadow({\n          mode: \"open\"\n        }) : container;\n      Object.defineProperty(container, \"_$host\", {\n        get() {\n          return marker.parentNode;\n        },\n        configurable: true\n      });\n      insert(renderRoot, content);\n      el.appendChild(container);\n      props.ref && props.ref(container);\n      onCleanup(() => el.removeChild(container));\n    }\n  }, undefined, {\n    render: !hydrating\n  });\n  return marker;\n}\nfunction Dynamic(props) {\n  const [p, others] = splitProps(props, [\"component\"]);\n  const cached = createMemo(() => p.component);\n  return createMemo(() => {\n    const component = cached();\n    switch (typeof component) {\n      case \"function\":\n        Object.assign(component, {\n          [$DEVCOMP]: true\n        });\n        return untrack(() => component(others));\n      case \"string\":\n        const isSvg = SVGElements.has(component);\n        const el = sharedConfig.context ? getNextElement() : createElement(component, isSvg);\n        spread(el, others, isSvg);\n        return el;\n    }\n  });\n}\n\nexport { Aliases, voidFn as Assets, ChildProperties, DOMElements, DelegatedEvents, Dynamic, Hydration, voidFn as HydrationScript, NoHydration, Portal, Properties, SVGElements, SVGNamespace, addEventListener, assign, classList, className, clearDelegatedEvents, delegateEvents, dynamicProperty, escape, voidFn as generateHydrationScript, voidFn as getAssets, getHydrationKey, getNextElement, getNextMarker, getNextMatch, getPropAlias, hydrate, innerHTML, insert, isDev, isServer, render, renderToStream, renderToString, renderToStringAsync, resolveSSRNode, runHydrationEvents, setAttribute, setAttributeNS, spread, ssr, ssrAttribute, ssrClassList, ssrElement, ssrHydrationKey, ssrSpread, ssrStyle, style, template, use, voidFn as useAssets };\n","let taskIdCounter = 1,\n  isCallbackScheduled = false,\n  isPerformingWork = false,\n  taskQueue = [],\n  currentTask = null,\n  shouldYieldToHost = null,\n  yieldInterval = 5,\n  deadline = 0,\n  maxYieldInterval = 300,\n  scheduleCallback = null,\n  scheduledCallback = null;\nconst maxSigned31BitInt = 1073741823;\nfunction setupScheduler() {\n  const channel = new MessageChannel(),\n    port = channel.port2;\n  scheduleCallback = () => port.postMessage(null);\n  channel.port1.onmessage = () => {\n    if (scheduledCallback !== null) {\n      const currentTime = performance.now();\n      deadline = currentTime + yieldInterval;\n      const hasTimeRemaining = true;\n      try {\n        const hasMoreWork = scheduledCallback(hasTimeRemaining, currentTime);\n        if (!hasMoreWork) {\n          scheduledCallback = null;\n        } else port.postMessage(null);\n      } catch (error) {\n        port.postMessage(null);\n        throw error;\n      }\n    }\n  };\n  if (navigator && navigator.scheduling && navigator.scheduling.isInputPending) {\n    const scheduling = navigator.scheduling;\n    shouldYieldToHost = () => {\n      const currentTime = performance.now();\n      if (currentTime >= deadline) {\n        if (scheduling.isInputPending()) {\n          return true;\n        }\n        return currentTime >= maxYieldInterval;\n      } else {\n        return false;\n      }\n    };\n  } else {\n    shouldYieldToHost = () => performance.now() >= deadline;\n  }\n}\nfunction enqueue(taskQueue, task) {\n  function findIndex() {\n    let m = 0;\n    let n = taskQueue.length - 1;\n    while (m <= n) {\n      const k = n + m >> 1;\n      const cmp = task.expirationTime - taskQueue[k].expirationTime;\n      if (cmp > 0) m = k + 1;else if (cmp < 0) n = k - 1;else return k;\n    }\n    return m;\n  }\n  taskQueue.splice(findIndex(), 0, task);\n}\nfunction requestCallback(fn, options) {\n  if (!scheduleCallback) setupScheduler();\n  let startTime = performance.now(),\n    timeout = maxSigned31BitInt;\n  if (options && options.timeout) timeout = options.timeout;\n  const newTask = {\n    id: taskIdCounter++,\n    fn,\n    startTime,\n    expirationTime: startTime + timeout\n  };\n  enqueue(taskQueue, newTask);\n  if (!isCallbackScheduled && !isPerformingWork) {\n    isCallbackScheduled = true;\n    scheduledCallback = flushWork;\n    scheduleCallback();\n  }\n  return newTask;\n}\nfunction cancelCallback(task) {\n  task.fn = null;\n}\nfunction flushWork(hasTimeRemaining, initialTime) {\n  isCallbackScheduled = false;\n  isPerformingWork = true;\n  try {\n    return workLoop(hasTimeRemaining, initialTime);\n  } finally {\n    currentTask = null;\n    isPerformingWork = false;\n  }\n}\nfunction workLoop(hasTimeRemaining, initialTime) {\n  let currentTime = initialTime;\n  currentTask = taskQueue[0] || null;\n  while (currentTask !== null) {\n    if (currentTask.expirationTime > currentTime && (!hasTimeRemaining || shouldYieldToHost())) {\n      break;\n    }\n    const callback = currentTask.fn;\n    if (callback !== null) {\n      currentTask.fn = null;\n      const didUserCallbackTimeout = currentTask.expirationTime <= currentTime;\n      callback(didUserCallbackTimeout);\n      currentTime = performance.now();\n      if (currentTask === taskQueue[0]) {\n        taskQueue.shift();\n      }\n    } else taskQueue.shift();\n    currentTask = taskQueue[0] || null;\n  }\n  return currentTask !== null;\n}\n\nconst sharedConfig = {\n  context: undefined,\n  registry: undefined\n};\nfunction setHydrateContext(context) {\n  sharedConfig.context = context;\n}\nfunction nextHydrateContext() {\n  return {\n    ...sharedConfig.context,\n    id: `${sharedConfig.context.id}${sharedConfig.context.count++}-`,\n    count: 0\n  };\n}\n\nconst equalFn = (a, b) => a === b;\nconst $PROXY = Symbol(\"solid-proxy\");\nconst $TRACK = Symbol(\"solid-track\");\nconst $DEVCOMP = Symbol(\"solid-dev-component\");\nconst signalOptions = {\n  equals: equalFn\n};\nlet ERROR = null;\nlet runEffects = runQueue;\nconst STALE = 1;\nconst PENDING = 2;\nconst UNOWNED = {\n  owned: null,\n  cleanups: null,\n  context: null,\n  owner: null\n};\nconst NO_INIT = {};\nvar Owner = null;\nlet Transition = null;\nlet Scheduler = null;\nlet ExternalSourceFactory = null;\nlet Listener = null;\nlet Updates = null;\nlet Effects = null;\nlet ExecCount = 0;\nconst [transPending, setTransPending] = /*@__PURE__*/createSignal(false);\nfunction createRoot(fn, detachedOwner) {\n  const listener = Listener,\n    owner = Owner,\n    unowned = fn.length === 0,\n    root = unowned ? UNOWNED : {\n      owned: null,\n      cleanups: null,\n      context: null,\n      owner: detachedOwner === undefined ? owner : detachedOwner\n    },\n    updateFn = unowned ? fn : () => fn(() => untrack(() => cleanNode(root)));\n  Owner = root;\n  Listener = null;\n  try {\n    return runUpdates(updateFn, true);\n  } finally {\n    Listener = listener;\n    Owner = owner;\n  }\n}\nfunction createSignal(value, options) {\n  options = options ? Object.assign({}, signalOptions, options) : signalOptions;\n  const s = {\n    value,\n    observers: null,\n    observerSlots: null,\n    comparator: options.equals || undefined\n  };\n  const setter = value => {\n    if (typeof value === \"function\") {\n      if (Transition && Transition.running && Transition.sources.has(s)) value = value(s.tValue);else value = value(s.value);\n    }\n    return writeSignal(s, value);\n  };\n  return [readSignal.bind(s), setter];\n}\nfunction createComputed(fn, value, options) {\n  const c = createComputation(fn, value, true, STALE);\n  if (Scheduler && Transition && Transition.running) Updates.push(c);else updateComputation(c);\n}\nfunction createRenderEffect(fn, value, options) {\n  const c = createComputation(fn, value, false, STALE);\n  if (Scheduler && Transition && Transition.running) Updates.push(c);else updateComputation(c);\n}\nfunction createEffect(fn, value, options) {\n  runEffects = runUserEffects;\n  const c = createComputation(fn, value, false, STALE),\n    s = SuspenseContext && lookup(Owner, SuspenseContext.id);\n  if (s) c.suspense = s;\n  if (!options || !options.render) c.user = true;\n  Effects ? Effects.push(c) : updateComputation(c);\n}\nfunction createReaction(onInvalidate, options) {\n  let fn;\n  const c = createComputation(() => {\n      fn ? fn() : untrack(onInvalidate);\n      fn = undefined;\n    }, undefined, false, 0),\n    s = SuspenseContext && lookup(Owner, SuspenseContext.id);\n  if (s) c.suspense = s;\n  c.user = true;\n  return tracking => {\n    fn = tracking;\n    updateComputation(c);\n  };\n}\nfunction createMemo(fn, value, options) {\n  options = options ? Object.assign({}, signalOptions, options) : signalOptions;\n  const c = createComputation(fn, value, true, 0);\n  c.observers = null;\n  c.observerSlots = null;\n  c.comparator = options.equals || undefined;\n  if (Scheduler && Transition && Transition.running) {\n    c.tState = STALE;\n    Updates.push(c);\n  } else updateComputation(c);\n  return readSignal.bind(c);\n}\nfunction createResource(pSource, pFetcher, pOptions) {\n  let source;\n  let fetcher;\n  let options;\n  if (arguments.length === 2 && typeof pFetcher === \"object\" || arguments.length === 1) {\n    source = true;\n    fetcher = pSource;\n    options = pFetcher || {};\n  } else {\n    source = pSource;\n    fetcher = pFetcher;\n    options = pOptions || {};\n  }\n  let pr = null,\n    initP = NO_INIT,\n    id = null,\n    loadedUnderTransition = false,\n    scheduled = false,\n    resolved = (\"initialValue\" in options),\n    dynamic = typeof source === \"function\" && createMemo(source);\n  const contexts = new Set(),\n    [value, setValue] = (options.storage || createSignal)(options.initialValue),\n    [error, setError] = createSignal(undefined),\n    [track, trigger] = createSignal(undefined, {\n      equals: false\n    }),\n    [state, setState] = createSignal(resolved ? \"ready\" : \"unresolved\");\n  if (sharedConfig.context) {\n    id = `${sharedConfig.context.id}${sharedConfig.context.count++}`;\n    let v;\n    if (options.ssrLoadFrom === \"initial\") initP = options.initialValue;else if (sharedConfig.load && (v = sharedConfig.load(id))) initP = v[0];\n  }\n  function loadEnd(p, v, error, key) {\n    if (pr === p) {\n      pr = null;\n      resolved = true;\n      if ((p === initP || v === initP) && options.onHydrated) queueMicrotask(() => options.onHydrated(key, {\n        value: v\n      }));\n      initP = NO_INIT;\n      if (Transition && p && loadedUnderTransition) {\n        Transition.promises.delete(p);\n        loadedUnderTransition = false;\n        runUpdates(() => {\n          Transition.running = true;\n          completeLoad(v, error);\n        }, false);\n      } else completeLoad(v, error);\n    }\n    return v;\n  }\n  function completeLoad(v, err) {\n    runUpdates(() => {\n      if (err === undefined) setValue(() => v);\n      setState(err !== undefined ? \"errored\" : \"ready\");\n      setError(err);\n      for (const c of contexts.keys()) c.decrement();\n      contexts.clear();\n    }, false);\n  }\n  function read() {\n    const c = SuspenseContext && lookup(Owner, SuspenseContext.id),\n      v = value(),\n      err = error();\n    if (err !== undefined && !pr) throw err;\n    if (Listener && !Listener.user && c) {\n      createComputed(() => {\n        track();\n        if (pr) {\n          if (c.resolved && Transition && loadedUnderTransition) Transition.promises.add(pr);else if (!contexts.has(c)) {\n            c.increment();\n            contexts.add(c);\n          }\n        }\n      });\n    }\n    return v;\n  }\n  function load(refetching = true) {\n    if (refetching !== false && scheduled) return;\n    scheduled = false;\n    const lookup = dynamic ? dynamic() : source;\n    loadedUnderTransition = Transition && Transition.running;\n    if (lookup == null || lookup === false) {\n      loadEnd(pr, untrack(value));\n      return;\n    }\n    if (Transition && pr) Transition.promises.delete(pr);\n    const p = initP !== NO_INIT ? initP : untrack(() => fetcher(lookup, {\n      value: value(),\n      refetching\n    }));\n    if (typeof p !== \"object\" || !(p && \"then\" in p)) {\n      loadEnd(pr, p, undefined, lookup);\n      return p;\n    }\n    pr = p;\n    scheduled = true;\n    queueMicrotask(() => scheduled = false);\n    runUpdates(() => {\n      setState(resolved ? \"refreshing\" : \"pending\");\n      trigger();\n    }, false);\n    return p.then(v => loadEnd(p, v, undefined, lookup), e => loadEnd(p, undefined, castError(e), lookup));\n  }\n  Object.defineProperties(read, {\n    state: {\n      get: () => state()\n    },\n    error: {\n      get: () => error()\n    },\n    loading: {\n      get() {\n        const s = state();\n        return s === \"pending\" || s === \"refreshing\";\n      }\n    },\n    latest: {\n      get() {\n        if (!resolved) return read();\n        const err = error();\n        if (err && !pr) throw err;\n        return value();\n      }\n    }\n  });\n  if (dynamic) createComputed(() => load(false));else load(false);\n  return [read, {\n    refetch: load,\n    mutate: setValue\n  }];\n}\nfunction createDeferred(source, options) {\n  let t,\n    timeout = options ? options.timeoutMs : undefined;\n  const node = createComputation(() => {\n    if (!t || !t.fn) t = requestCallback(() => setDeferred(() => node.value), timeout !== undefined ? {\n      timeout\n    } : undefined);\n    return source();\n  }, undefined, true);\n  const [deferred, setDeferred] = createSignal(node.value, options);\n  updateComputation(node);\n  setDeferred(() => node.value);\n  return deferred;\n}\nfunction createSelector(source, fn = equalFn, options) {\n  const subs = new Map();\n  const node = createComputation(p => {\n    const v = source();\n    for (const [key, val] of subs.entries()) if (fn(key, v) !== fn(key, p)) {\n      for (const c of val.values()) {\n        c.state = STALE;\n        if (c.pure) Updates.push(c);else Effects.push(c);\n      }\n    }\n    return v;\n  }, undefined, true, STALE);\n  updateComputation(node);\n  return key => {\n    const listener = Listener;\n    if (listener) {\n      let l;\n      if (l = subs.get(key)) l.add(listener);else subs.set(key, l = new Set([listener]));\n      onCleanup(() => {\n        l.delete(listener);\n        !l.size && subs.delete(key);\n      });\n    }\n    return fn(key, Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value);\n  };\n}\nfunction batch(fn) {\n  return runUpdates(fn, false);\n}\nfunction untrack(fn) {\n  if (Listener === null) return fn();\n  const listener = Listener;\n  Listener = null;\n  try {\n    return fn();\n  } finally {\n    Listener = listener;\n  }\n}\nfunction on(deps, fn, options) {\n  const isArray = Array.isArray(deps);\n  let prevInput;\n  let defer = options && options.defer;\n  return prevValue => {\n    let input;\n    if (isArray) {\n      input = Array(deps.length);\n      for (let i = 0; i < deps.length; i++) input[i] = deps[i]();\n    } else input = deps();\n    if (defer) {\n      defer = false;\n      return undefined;\n    }\n    const result = untrack(() => fn(input, prevInput, prevValue));\n    prevInput = input;\n    return result;\n  };\n}\nfunction onMount(fn) {\n  createEffect(() => untrack(fn));\n}\nfunction onCleanup(fn) {\n  if (Owner === null) ;else if (Owner.cleanups === null) Owner.cleanups = [fn];else Owner.cleanups.push(fn);\n  return fn;\n}\nfunction catchError(fn, handler) {\n  ERROR || (ERROR = Symbol(\"error\"));\n  Owner = createComputation(undefined, undefined, true);\n  Owner.context = {\n    [ERROR]: [handler]\n  };\n  if (Transition && Transition.running) Transition.sources.add(Owner);\n  try {\n    return fn();\n  } catch (err) {\n    handleError(err);\n  } finally {\n    Owner = Owner.owner;\n  }\n}\nfunction onError(fn) {\n  ERROR || (ERROR = Symbol(\"error\"));\n  if (Owner === null) ;else if (Owner.context === null) Owner.context = {\n    [ERROR]: [fn]\n  };else if (!Owner.context[ERROR]) Owner.context[ERROR] = [fn];else Owner.context[ERROR].push(fn);\n}\nfunction getListener() {\n  return Listener;\n}\nfunction getOwner() {\n  return Owner;\n}\nfunction runWithOwner(o, fn) {\n  const prev = Owner;\n  const prevListener = Listener;\n  Owner = o;\n  Listener = null;\n  try {\n    return runUpdates(fn, true);\n  } catch (err) {\n    handleError(err);\n  } finally {\n    Owner = prev;\n    Listener = prevListener;\n  }\n}\nfunction enableScheduling(scheduler = requestCallback) {\n  Scheduler = scheduler;\n}\nfunction startTransition(fn) {\n  if (Transition && Transition.running) {\n    fn();\n    return Transition.done;\n  }\n  const l = Listener;\n  const o = Owner;\n  return Promise.resolve().then(() => {\n    Listener = l;\n    Owner = o;\n    let t;\n    if (Scheduler || SuspenseContext) {\n      t = Transition || (Transition = {\n        sources: new Set(),\n        effects: [],\n        promises: new Set(),\n        disposed: new Set(),\n        queue: new Set(),\n        running: true\n      });\n      t.done || (t.done = new Promise(res => t.resolve = res));\n      t.running = true;\n    }\n    runUpdates(fn, false);\n    Listener = Owner = null;\n    return t ? t.done : undefined;\n  });\n}\nfunction useTransition() {\n  return [transPending, startTransition];\n}\nfunction resumeEffects(e) {\n  Effects.push.apply(Effects, e);\n  e.length = 0;\n}\nfunction createContext(defaultValue, options) {\n  const id = Symbol(\"context\");\n  return {\n    id,\n    Provider: createProvider(id),\n    defaultValue\n  };\n}\nfunction useContext(context) {\n  let ctx;\n  return (ctx = lookup(Owner, context.id)) !== undefined ? ctx : context.defaultValue;\n}\nfunction children(fn) {\n  const children = createMemo(fn);\n  const memo = createMemo(() => resolveChildren(children()));\n  memo.toArray = () => {\n    const c = memo();\n    return Array.isArray(c) ? c : c != null ? [c] : [];\n  };\n  return memo;\n}\nlet SuspenseContext;\nfunction getSuspenseContext() {\n  return SuspenseContext || (SuspenseContext = createContext({}));\n}\nfunction enableExternalSource(factory) {\n  if (ExternalSourceFactory) {\n    const oldFactory = ExternalSourceFactory;\n    ExternalSourceFactory = (fn, trigger) => {\n      const oldSource = oldFactory(fn, trigger);\n      const source = factory(x => oldSource.track(x), trigger);\n      return {\n        track: x => source.track(x),\n        dispose() {\n          source.dispose();\n          oldSource.dispose();\n        }\n      };\n    };\n  } else {\n    ExternalSourceFactory = factory;\n  }\n}\nfunction readSignal() {\n  const runningTransition = Transition && Transition.running;\n  if (this.sources && (runningTransition ? this.tState : this.state)) {\n    if ((runningTransition ? this.tState : this.state) === STALE) updateComputation(this);else {\n      const updates = Updates;\n      Updates = null;\n      runUpdates(() => lookUpstream(this), false);\n      Updates = updates;\n    }\n  }\n  if (Listener) {\n    const sSlot = this.observers ? this.observers.length : 0;\n    if (!Listener.sources) {\n      Listener.sources = [this];\n      Listener.sourceSlots = [sSlot];\n    } else {\n      Listener.sources.push(this);\n      Listener.sourceSlots.push(sSlot);\n    }\n    if (!this.observers) {\n      this.observers = [Listener];\n      this.observerSlots = [Listener.sources.length - 1];\n    } else {\n      this.observers.push(Listener);\n      this.observerSlots.push(Listener.sources.length - 1);\n    }\n  }\n  if (runningTransition && Transition.sources.has(this)) return this.tValue;\n  return this.value;\n}\nfunction writeSignal(node, value, isComp) {\n  let current = Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value;\n  if (!node.comparator || !node.comparator(current, value)) {\n    if (Transition) {\n      const TransitionRunning = Transition.running;\n      if (TransitionRunning || !isComp && Transition.sources.has(node)) {\n        Transition.sources.add(node);\n        node.tValue = value;\n      }\n      if (!TransitionRunning) node.value = value;\n    } else node.value = value;\n    if (node.observers && node.observers.length) {\n      runUpdates(() => {\n        for (let i = 0; i < node.observers.length; i += 1) {\n          const o = node.observers[i];\n          const TransitionRunning = Transition && Transition.running;\n          if (TransitionRunning && Transition.disposed.has(o)) continue;\n          if (TransitionRunning ? !o.tState : !o.state) {\n            if (o.pure) Updates.push(o);else Effects.push(o);\n            if (o.observers) markDownstream(o);\n          }\n          if (!TransitionRunning) o.state = STALE;else o.tState = STALE;\n        }\n        if (Updates.length > 10e5) {\n          Updates = [];\n          if (false) ;\n          throw new Error();\n        }\n      }, false);\n    }\n  }\n  return value;\n}\nfunction updateComputation(node) {\n  if (!node.fn) return;\n  cleanNode(node);\n  const owner = Owner,\n    listener = Listener,\n    time = ExecCount;\n  Listener = Owner = node;\n  runComputation(node, Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value, time);\n  if (Transition && !Transition.running && Transition.sources.has(node)) {\n    queueMicrotask(() => {\n      runUpdates(() => {\n        Transition && (Transition.running = true);\n        Listener = Owner = node;\n        runComputation(node, node.tValue, time);\n        Listener = Owner = null;\n      }, false);\n    });\n  }\n  Listener = listener;\n  Owner = owner;\n}\nfunction runComputation(node, value, time) {\n  let nextValue;\n  try {\n    nextValue = node.fn(value);\n  } catch (err) {\n    if (node.pure) {\n      if (Transition && Transition.running) {\n        node.tState = STALE;\n        node.tOwned && node.tOwned.forEach(cleanNode);\n        node.tOwned = undefined;\n      } else {\n        node.state = STALE;\n        node.owned && node.owned.forEach(cleanNode);\n        node.owned = null;\n      }\n    }\n    node.updatedAt = time + 1;\n    return handleError(err);\n  }\n  if (!node.updatedAt || node.updatedAt <= time) {\n    if (node.updatedAt != null && \"observers\" in node) {\n      writeSignal(node, nextValue, true);\n    } else if (Transition && Transition.running && node.pure) {\n      Transition.sources.add(node);\n      node.tValue = nextValue;\n    } else node.value = nextValue;\n    node.updatedAt = time;\n  }\n}\nfunction createComputation(fn, init, pure, state = STALE, options) {\n  const c = {\n    fn,\n    state: state,\n    updatedAt: null,\n    owned: null,\n    sources: null,\n    sourceSlots: null,\n    cleanups: null,\n    value: init,\n    owner: Owner,\n    context: null,\n    pure\n  };\n  if (Transition && Transition.running) {\n    c.state = 0;\n    c.tState = state;\n  }\n  if (Owner === null) ;else if (Owner !== UNOWNED) {\n    if (Transition && Transition.running && Owner.pure) {\n      if (!Owner.tOwned) Owner.tOwned = [c];else Owner.tOwned.push(c);\n    } else {\n      if (!Owner.owned) Owner.owned = [c];else Owner.owned.push(c);\n    }\n  }\n  if (ExternalSourceFactory) {\n    const [track, trigger] = createSignal(undefined, {\n      equals: false\n    });\n    const ordinary = ExternalSourceFactory(c.fn, trigger);\n    onCleanup(() => ordinary.dispose());\n    const triggerInTransition = () => startTransition(trigger).then(() => inTransition.dispose());\n    const inTransition = ExternalSourceFactory(c.fn, triggerInTransition);\n    c.fn = x => {\n      track();\n      return Transition && Transition.running ? inTransition.track(x) : ordinary.track(x);\n    };\n  }\n  return c;\n}\nfunction runTop(node) {\n  const runningTransition = Transition && Transition.running;\n  if ((runningTransition ? node.tState : node.state) === 0) return;\n  if ((runningTransition ? node.tState : node.state) === PENDING) return lookUpstream(node);\n  if (node.suspense && untrack(node.suspense.inFallback)) return node.suspense.effects.push(node);\n  const ancestors = [node];\n  while ((node = node.owner) && (!node.updatedAt || node.updatedAt < ExecCount)) {\n    if (runningTransition && Transition.disposed.has(node)) return;\n    if (runningTransition ? node.tState : node.state) ancestors.push(node);\n  }\n  for (let i = ancestors.length - 1; i >= 0; i--) {\n    node = ancestors[i];\n    if (runningTransition) {\n      let top = node,\n        prev = ancestors[i + 1];\n      while ((top = top.owner) && top !== prev) {\n        if (Transition.disposed.has(top)) return;\n      }\n    }\n    if ((runningTransition ? node.tState : node.state) === STALE) {\n      updateComputation(node);\n    } else if ((runningTransition ? node.tState : node.state) === PENDING) {\n      const updates = Updates;\n      Updates = null;\n      runUpdates(() => lookUpstream(node, ancestors[0]), false);\n      Updates = updates;\n    }\n  }\n}\nfunction runUpdates(fn, init) {\n  if (Updates) return fn();\n  let wait = false;\n  if (!init) Updates = [];\n  if (Effects) wait = true;else Effects = [];\n  ExecCount++;\n  try {\n    const res = fn();\n    completeUpdates(wait);\n    return res;\n  } catch (err) {\n    if (!wait) Effects = null;\n    Updates = null;\n    handleError(err);\n  }\n}\nfunction completeUpdates(wait) {\n  if (Updates) {\n    if (Scheduler && Transition && Transition.running) scheduleQueue(Updates);else runQueue(Updates);\n    Updates = null;\n  }\n  if (wait) return;\n  let res;\n  if (Transition) {\n    if (!Transition.promises.size && !Transition.queue.size) {\n      const sources = Transition.sources;\n      const disposed = Transition.disposed;\n      Effects.push.apply(Effects, Transition.effects);\n      res = Transition.resolve;\n      for (const e of Effects) {\n        \"tState\" in e && (e.state = e.tState);\n        delete e.tState;\n      }\n      Transition = null;\n      runUpdates(() => {\n        for (const d of disposed) cleanNode(d);\n        for (const v of sources) {\n          v.value = v.tValue;\n          if (v.owned) {\n            for (let i = 0, len = v.owned.length; i < len; i++) cleanNode(v.owned[i]);\n          }\n          if (v.tOwned) v.owned = v.tOwned;\n          delete v.tValue;\n          delete v.tOwned;\n          v.tState = 0;\n        }\n        setTransPending(false);\n      }, false);\n    } else if (Transition.running) {\n      Transition.running = false;\n      Transition.effects.push.apply(Transition.effects, Effects);\n      Effects = null;\n      setTransPending(true);\n      return;\n    }\n  }\n  const e = Effects;\n  Effects = null;\n  if (e.length) runUpdates(() => runEffects(e), false);\n  if (res) res();\n}\nfunction runQueue(queue) {\n  for (let i = 0; i < queue.length; i++) runTop(queue[i]);\n}\nfunction scheduleQueue(queue) {\n  for (let i = 0; i < queue.length; i++) {\n    const item = queue[i];\n    const tasks = Transition.queue;\n    if (!tasks.has(item)) {\n      tasks.add(item);\n      Scheduler(() => {\n        tasks.delete(item);\n        runUpdates(() => {\n          Transition.running = true;\n          runTop(item);\n        }, false);\n        Transition && (Transition.running = false);\n      });\n    }\n  }\n}\nfunction runUserEffects(queue) {\n  let i,\n    userLength = 0;\n  for (i = 0; i < queue.length; i++) {\n    const e = queue[i];\n    if (!e.user) runTop(e);else queue[userLength++] = e;\n  }\n  if (sharedConfig.context) setHydrateContext();\n  for (i = 0; i < userLength; i++) runTop(queue[i]);\n}\nfunction lookUpstream(node, ignore) {\n  const runningTransition = Transition && Transition.running;\n  if (runningTransition) node.tState = 0;else node.state = 0;\n  for (let i = 0; i < node.sources.length; i += 1) {\n    const source = node.sources[i];\n    if (source.sources) {\n      const state = runningTransition ? source.tState : source.state;\n      if (state === STALE) {\n        if (source !== ignore && (!source.updatedAt || source.updatedAt < ExecCount)) runTop(source);\n      } else if (state === PENDING) lookUpstream(source, ignore);\n    }\n  }\n}\nfunction markDownstream(node) {\n  const runningTransition = Transition && Transition.running;\n  for (let i = 0; i < node.observers.length; i += 1) {\n    const o = node.observers[i];\n    if (runningTransition ? !o.tState : !o.state) {\n      if (runningTransition) o.tState = PENDING;else o.state = PENDING;\n      if (o.pure) Updates.push(o);else Effects.push(o);\n      o.observers && markDownstream(o);\n    }\n  }\n}\nfunction cleanNode(node) {\n  let i;\n  if (node.sources) {\n    while (node.sources.length) {\n      const source = node.sources.pop(),\n        index = node.sourceSlots.pop(),\n        obs = source.observers;\n      if (obs && obs.length) {\n        const n = obs.pop(),\n          s = source.observerSlots.pop();\n        if (index < obs.length) {\n          n.sourceSlots[s] = index;\n          obs[index] = n;\n          source.observerSlots[index] = s;\n        }\n      }\n    }\n  }\n  if (Transition && Transition.running && node.pure) {\n    if (node.tOwned) {\n      for (i = node.tOwned.length - 1; i >= 0; i--) cleanNode(node.tOwned[i]);\n      delete node.tOwned;\n    }\n    reset(node, true);\n  } else if (node.owned) {\n    for (i = node.owned.length - 1; i >= 0; i--) cleanNode(node.owned[i]);\n    node.owned = null;\n  }\n  if (node.cleanups) {\n    for (i = node.cleanups.length - 1; i >= 0; i--) node.cleanups[i]();\n    node.cleanups = null;\n  }\n  if (Transition && Transition.running) node.tState = 0;else node.state = 0;\n  node.context = null;\n}\nfunction reset(node, top) {\n  if (!top) {\n    node.tState = 0;\n    Transition.disposed.add(node);\n  }\n  if (node.owned) {\n    for (let i = 0; i < node.owned.length; i++) reset(node.owned[i]);\n  }\n}\nfunction castError(err) {\n  if (err instanceof Error) return err;\n  return new Error(typeof err === \"string\" ? err : \"Unknown error\", {\n    cause: err\n  });\n}\nfunction runErrors(fns, err) {\n  for (const f of fns) f(err);\n}\nfunction handleError(err) {\n  const fns = ERROR && lookup(Owner, ERROR);\n  if (!fns) throw err;\n  const error = castError(err);\n  if (Effects) Effects.push({\n    fn() {\n      runErrors(fns, error);\n    },\n    state: STALE\n  });else runErrors(fns, error);\n}\nfunction lookup(owner, key) {\n  return owner ? owner.context && owner.context[key] !== undefined ? owner.context[key] : lookup(owner.owner, key) : undefined;\n}\nfunction resolveChildren(children) {\n  if (typeof children === \"function\" && !children.length) return resolveChildren(children());\n  if (Array.isArray(children)) {\n    const results = [];\n    for (let i = 0; i < children.length; i++) {\n      const result = resolveChildren(children[i]);\n      Array.isArray(result) ? results.push.apply(results, result) : results.push(result);\n    }\n    return results;\n  }\n  return children;\n}\nfunction createProvider(id, options) {\n  return function provider(props) {\n    let res;\n    createRenderEffect(() => res = untrack(() => {\n      Owner.context = {\n        [id]: props.value\n      };\n      return children(() => props.children);\n    }), undefined);\n    return res;\n  };\n}\n\nfunction observable(input) {\n  return {\n    subscribe(observer) {\n      if (!(observer instanceof Object) || observer == null) {\n        throw new TypeError(\"Expected the observer to be an object.\");\n      }\n      const handler = typeof observer === \"function\" ? observer : observer.next && observer.next.bind(observer);\n      if (!handler) {\n        return {\n          unsubscribe() {}\n        };\n      }\n      const dispose = createRoot(disposer => {\n        createEffect(() => {\n          const v = input();\n          untrack(() => handler(v));\n        });\n        return disposer;\n      });\n      if (getOwner()) onCleanup(dispose);\n      return {\n        unsubscribe() {\n          dispose();\n        }\n      };\n    },\n    [Symbol.observable || \"@@observable\"]() {\n      return this;\n    }\n  };\n}\nfunction from(producer) {\n  const [s, set] = createSignal(undefined, {\n    equals: false\n  });\n  if (\"subscribe\" in producer) {\n    const unsub = producer.subscribe(v => set(() => v));\n    onCleanup(() => \"unsubscribe\" in unsub ? unsub.unsubscribe() : unsub());\n  } else {\n    const clean = producer(set);\n    onCleanup(clean);\n  }\n  return s;\n}\n\nconst FALLBACK = Symbol(\"fallback\");\nfunction dispose(d) {\n  for (let i = 0; i < d.length; i++) d[i]();\n}\nfunction mapArray(list, mapFn, options = {}) {\n  let items = [],\n    mapped = [],\n    disposers = [],\n    len = 0,\n    indexes = mapFn.length > 1 ? [] : null;\n  onCleanup(() => dispose(disposers));\n  return () => {\n    let newItems = list() || [],\n      i,\n      j;\n    newItems[$TRACK];\n    return untrack(() => {\n      let newLen = newItems.length,\n        newIndices,\n        newIndicesNext,\n        temp,\n        tempdisposers,\n        tempIndexes,\n        start,\n        end,\n        newEnd,\n        item;\n      if (newLen === 0) {\n        if (len !== 0) {\n          dispose(disposers);\n          disposers = [];\n          items = [];\n          mapped = [];\n          len = 0;\n          indexes && (indexes = []);\n        }\n        if (options.fallback) {\n          items = [FALLBACK];\n          mapped[0] = createRoot(disposer => {\n            disposers[0] = disposer;\n            return options.fallback();\n          });\n          len = 1;\n        }\n      }\n      else if (len === 0) {\n        mapped = new Array(newLen);\n        for (j = 0; j < newLen; j++) {\n          items[j] = newItems[j];\n          mapped[j] = createRoot(mapper);\n        }\n        len = newLen;\n      } else {\n        temp = new Array(newLen);\n        tempdisposers = new Array(newLen);\n        indexes && (tempIndexes = new Array(newLen));\n        for (start = 0, end = Math.min(len, newLen); start < end && items[start] === newItems[start]; start++);\n        for (end = len - 1, newEnd = newLen - 1; end >= start && newEnd >= start && items[end] === newItems[newEnd]; end--, newEnd--) {\n          temp[newEnd] = mapped[end];\n          tempdisposers[newEnd] = disposers[end];\n          indexes && (tempIndexes[newEnd] = indexes[end]);\n        }\n        newIndices = new Map();\n        newIndicesNext = new Array(newEnd + 1);\n        for (j = newEnd; j >= start; j--) {\n          item = newItems[j];\n          i = newIndices.get(item);\n          newIndicesNext[j] = i === undefined ? -1 : i;\n          newIndices.set(item, j);\n        }\n        for (i = start; i <= end; i++) {\n          item = items[i];\n          j = newIndices.get(item);\n          if (j !== undefined && j !== -1) {\n            temp[j] = mapped[i];\n            tempdisposers[j] = disposers[i];\n            indexes && (tempIndexes[j] = indexes[i]);\n            j = newIndicesNext[j];\n            newIndices.set(item, j);\n          } else disposers[i]();\n        }\n        for (j = start; j < newLen; j++) {\n          if (j in temp) {\n            mapped[j] = temp[j];\n            disposers[j] = tempdisposers[j];\n            if (indexes) {\n              indexes[j] = tempIndexes[j];\n              indexes[j](j);\n            }\n          } else mapped[j] = createRoot(mapper);\n        }\n        mapped = mapped.slice(0, len = newLen);\n        items = newItems.slice(0);\n      }\n      return mapped;\n    });\n    function mapper(disposer) {\n      disposers[j] = disposer;\n      if (indexes) {\n        const [s, set] = createSignal(j);\n        indexes[j] = set;\n        return mapFn(newItems[j], s);\n      }\n      return mapFn(newItems[j]);\n    }\n  };\n}\nfunction indexArray(list, mapFn, options = {}) {\n  let items = [],\n    mapped = [],\n    disposers = [],\n    signals = [],\n    len = 0,\n    i;\n  onCleanup(() => dispose(disposers));\n  return () => {\n    const newItems = list() || [];\n    newItems[$TRACK];\n    return untrack(() => {\n      if (newItems.length === 0) {\n        if (len !== 0) {\n          dispose(disposers);\n          disposers = [];\n          items = [];\n          mapped = [];\n          len = 0;\n          signals = [];\n        }\n        if (options.fallback) {\n          items = [FALLBACK];\n          mapped[0] = createRoot(disposer => {\n            disposers[0] = disposer;\n            return options.fallback();\n          });\n          len = 1;\n        }\n        return mapped;\n      }\n      if (items[0] === FALLBACK) {\n        disposers[0]();\n        disposers = [];\n        items = [];\n        mapped = [];\n        len = 0;\n      }\n      for (i = 0; i < newItems.length; i++) {\n        if (i < items.length && items[i] !== newItems[i]) {\n          signals[i](() => newItems[i]);\n        } else if (i >= items.length) {\n          mapped[i] = createRoot(mapper);\n        }\n      }\n      for (; i < items.length; i++) {\n        disposers[i]();\n      }\n      len = signals.length = disposers.length = newItems.length;\n      items = newItems.slice(0);\n      return mapped = mapped.slice(0, len);\n    });\n    function mapper(disposer) {\n      disposers[i] = disposer;\n      const [s, set] = createSignal(newItems[i]);\n      signals[i] = set;\n      return mapFn(s, i);\n    }\n  };\n}\n\nlet hydrationEnabled = false;\nfunction enableHydration() {\n  hydrationEnabled = true;\n}\nfunction createComponent(Comp, props) {\n  if (hydrationEnabled) {\n    if (sharedConfig.context) {\n      const c = sharedConfig.context;\n      setHydrateContext(nextHydrateContext());\n      const r = untrack(() => Comp(props || {}));\n      setHydrateContext(c);\n      return r;\n    }\n  }\n  return untrack(() => Comp(props || {}));\n}\nfunction trueFn() {\n  return true;\n}\nconst propTraps = {\n  get(_, property, receiver) {\n    if (property === $PROXY) return receiver;\n    return _.get(property);\n  },\n  has(_, property) {\n    if (property === $PROXY) return true;\n    return _.has(property);\n  },\n  set: trueFn,\n  deleteProperty: trueFn,\n  getOwnPropertyDescriptor(_, property) {\n    return {\n      configurable: true,\n      enumerable: true,\n      get() {\n        return _.get(property);\n      },\n      set: trueFn,\n      deleteProperty: trueFn\n    };\n  },\n  ownKeys(_) {\n    return _.keys();\n  }\n};\nfunction resolveSource(s) {\n  return !(s = typeof s === \"function\" ? s() : s) ? {} : s;\n}\nfunction mergeProps(...sources) {\n  let proxy = false;\n  for (let i = 0; i < sources.length; i++) {\n    const s = sources[i];\n    proxy = proxy || !!s && $PROXY in s;\n    sources[i] = typeof s === \"function\" ? (proxy = true, createMemo(s)) : s;\n  }\n  if (proxy) {\n    return new Proxy({\n      get(property) {\n        for (let i = sources.length - 1; i >= 0; i--) {\n          const v = resolveSource(sources[i])[property];\n          if (v !== undefined) return v;\n        }\n      },\n      has(property) {\n        for (let i = sources.length - 1; i >= 0; i--) {\n          if (property in resolveSource(sources[i])) return true;\n        }\n        return false;\n      },\n      keys() {\n        const keys = [];\n        for (let i = 0; i < sources.length; i++) keys.push(...Object.keys(resolveSource(sources[i])));\n        return [...new Set(keys)];\n      }\n    }, propTraps);\n  }\n  const target = {};\n  for (let i = sources.length - 1; i >= 0; i--) {\n    if (sources[i]) {\n      const descriptors = Object.getOwnPropertyDescriptors(sources[i]);\n      for (const key in descriptors) {\n        if (key in target) continue;\n        Object.defineProperty(target, key, {\n          enumerable: true,\n          get() {\n            for (let i = sources.length - 1; i >= 0; i--) {\n              const v = (sources[i] || {})[key];\n              if (v !== undefined) return v;\n            }\n          }\n        });\n      }\n    }\n  }\n  return target;\n}\nfunction splitProps(props, ...keys) {\n  const blocked = new Set(keys.flat());\n  if ($PROXY in props) {\n    const res = keys.map(k => {\n      return new Proxy({\n        get(property) {\n          return k.includes(property) ? props[property] : undefined;\n        },\n        has(property) {\n          return k.includes(property) && property in props;\n        },\n        keys() {\n          return k.filter(property => property in props);\n        }\n      }, propTraps);\n    });\n    res.push(new Proxy({\n      get(property) {\n        return blocked.has(property) ? undefined : props[property];\n      },\n      has(property) {\n        return blocked.has(property) ? false : property in props;\n      },\n      keys() {\n        return Object.keys(props).filter(k => !blocked.has(k));\n      }\n    }, propTraps));\n    return res;\n  }\n  const descriptors = Object.getOwnPropertyDescriptors(props);\n  keys.push(Object.keys(descriptors).filter(k => !blocked.has(k)));\n  return keys.map(k => {\n    const clone = {};\n    for (let i = 0; i < k.length; i++) {\n      const key = k[i];\n      if (!(key in props)) continue;\n      Object.defineProperty(clone, key, descriptors[key] ? descriptors[key] : {\n        get() {\n          return props[key];\n        },\n        set() {\n          return true;\n        },\n        enumerable: true\n      });\n    }\n    return clone;\n  });\n}\nfunction lazy(fn) {\n  let comp;\n  let p;\n  const wrap = props => {\n    const ctx = sharedConfig.context;\n    if (ctx) {\n      const [s, set] = createSignal();\n      (p || (p = fn())).then(mod => {\n        setHydrateContext(ctx);\n        set(() => mod.default);\n        setHydrateContext();\n      });\n      comp = s;\n    } else if (!comp) {\n      const [s] = createResource(() => (p || (p = fn())).then(mod => mod.default));\n      comp = s;\n    }\n    let Comp;\n    return createMemo(() => (Comp = comp()) && untrack(() => {\n      if (false) ;\n      if (!ctx) return Comp(props);\n      const c = sharedConfig.context;\n      setHydrateContext(ctx);\n      const r = Comp(props);\n      setHydrateContext(c);\n      return r;\n    }));\n  };\n  wrap.preload = () => p || ((p = fn()).then(mod => comp = () => mod.default), p);\n  return wrap;\n}\nlet counter = 0;\nfunction createUniqueId() {\n  const ctx = sharedConfig.context;\n  return ctx ? `${ctx.id}${ctx.count++}` : `cl-${counter++}`;\n}\n\nconst narrowedError = name => `Stale read from <${name}>.`;\nfunction For(props) {\n  const fallback = \"fallback\" in props && {\n    fallback: () => props.fallback\n  };\n  return createMemo(mapArray(() => props.each, props.children, fallback || undefined));\n}\nfunction Index(props) {\n  const fallback = \"fallback\" in props && {\n    fallback: () => props.fallback\n  };\n  return createMemo(indexArray(() => props.each, props.children, fallback || undefined));\n}\nfunction Show(props) {\n  const keyed = props.keyed;\n  const condition = createMemo(() => props.when, undefined, {\n    equals: (a, b) => keyed ? a === b : !a === !b\n  });\n  return createMemo(() => {\n    const c = condition();\n    if (c) {\n      const child = props.children;\n      const fn = typeof child === \"function\" && child.length > 0;\n      return fn ? untrack(() => child(keyed ? c : () => {\n        if (!untrack(condition)) throw narrowedError(\"Show\");\n        return props.when;\n      })) : child;\n    }\n    return props.fallback;\n  }, undefined, undefined);\n}\nfunction Switch(props) {\n  let keyed = false;\n  const equals = (a, b) => a[0] === b[0] && (keyed ? a[1] === b[1] : !a[1] === !b[1]) && a[2] === b[2];\n  const conditions = children(() => props.children),\n    evalConditions = createMemo(() => {\n      let conds = conditions();\n      if (!Array.isArray(conds)) conds = [conds];\n      for (let i = 0; i < conds.length; i++) {\n        const c = conds[i].when;\n        if (c) {\n          keyed = !!conds[i].keyed;\n          return [i, c, conds[i]];\n        }\n      }\n      return [-1];\n    }, undefined, {\n      equals\n    });\n  return createMemo(() => {\n    const [index, when, cond] = evalConditions();\n    if (index < 0) return props.fallback;\n    const c = cond.children;\n    const fn = typeof c === \"function\" && c.length > 0;\n    return fn ? untrack(() => c(keyed ? when : () => {\n      if (untrack(evalConditions)[0] !== index) throw narrowedError(\"Match\");\n      return cond.when;\n    })) : c;\n  }, undefined, undefined);\n}\nfunction Match(props) {\n  return props;\n}\nlet Errors;\nfunction resetErrorBoundaries() {\n  Errors && [...Errors].forEach(fn => fn());\n}\nfunction ErrorBoundary(props) {\n  let err;\n  let v;\n  if (sharedConfig.context && sharedConfig.load && (v = sharedConfig.load(sharedConfig.context.id + sharedConfig.context.count))) err = v[0];\n  const [errored, setErrored] = createSignal(err, undefined);\n  Errors || (Errors = new Set());\n  Errors.add(setErrored);\n  onCleanup(() => Errors.delete(setErrored));\n  return createMemo(() => {\n    let e;\n    if (e = errored()) {\n      const f = props.fallback;\n      return typeof f === \"function\" && f.length ? untrack(() => f(e, () => setErrored())) : f;\n    }\n    return catchError(() => props.children, setErrored);\n  }, undefined, undefined);\n}\n\nconst suspenseListEquals = (a, b) => a.showContent === b.showContent && a.showFallback === b.showFallback;\nconst SuspenseListContext = createContext();\nfunction SuspenseList(props) {\n  let [wrapper, setWrapper] = createSignal(() => ({\n      inFallback: false\n    })),\n    show;\n  const listContext = useContext(SuspenseListContext);\n  const [registry, setRegistry] = createSignal([]);\n  if (listContext) {\n    show = listContext.register(createMemo(() => wrapper()().inFallback));\n  }\n  const resolved = createMemo(prev => {\n    const reveal = props.revealOrder,\n      tail = props.tail,\n      {\n        showContent = true,\n        showFallback = true\n      } = show ? show() : {},\n      reg = registry(),\n      reverse = reveal === \"backwards\";\n    if (reveal === \"together\") {\n      const all = reg.every(inFallback => !inFallback());\n      const res = reg.map(() => ({\n        showContent: all && showContent,\n        showFallback\n      }));\n      res.inFallback = !all;\n      return res;\n    }\n    let stop = false;\n    let inFallback = prev.inFallback;\n    const res = [];\n    for (let i = 0, len = reg.length; i < len; i++) {\n      const n = reverse ? len - i - 1 : i,\n        s = reg[n]();\n      if (!stop && !s) {\n        res[n] = {\n          showContent,\n          showFallback\n        };\n      } else {\n        const next = !stop;\n        if (next) inFallback = true;\n        res[n] = {\n          showContent: next,\n          showFallback: !tail || next && tail === \"collapsed\" ? showFallback : false\n        };\n        stop = true;\n      }\n    }\n    if (!stop) inFallback = false;\n    res.inFallback = inFallback;\n    return res;\n  }, {\n    inFallback: false\n  });\n  setWrapper(() => resolved);\n  return createComponent(SuspenseListContext.Provider, {\n    value: {\n      register: inFallback => {\n        let index;\n        setRegistry(registry => {\n          index = registry.length;\n          return [...registry, inFallback];\n        });\n        return createMemo(() => resolved()[index], undefined, {\n          equals: suspenseListEquals\n        });\n      }\n    },\n    get children() {\n      return props.children;\n    }\n  });\n}\nfunction Suspense(props) {\n  let counter = 0,\n    show,\n    ctx,\n    p,\n    flicker,\n    error;\n  const [inFallback, setFallback] = createSignal(false),\n    SuspenseContext = getSuspenseContext(),\n    store = {\n      increment: () => {\n        if (++counter === 1) setFallback(true);\n      },\n      decrement: () => {\n        if (--counter === 0) setFallback(false);\n      },\n      inFallback,\n      effects: [],\n      resolved: false\n    },\n    owner = getOwner();\n  if (sharedConfig.context && sharedConfig.load) {\n    const key = sharedConfig.context.id + sharedConfig.context.count;\n    let ref = sharedConfig.load(key);\n    if (ref && (p = ref[0]) && p !== \"$$f\") {\n      if (typeof p !== \"object\" || !(\"then\" in p)) p = Promise.resolve(p);\n      const [s, set] = createSignal(undefined, {\n        equals: false\n      });\n      flicker = s;\n      p.then(err => {\n        if (err || sharedConfig.done) {\n          err && (error = err);\n          return set();\n        }\n        sharedConfig.gather(key);\n        setHydrateContext(ctx);\n        set();\n        setHydrateContext();\n      });\n    }\n  }\n  const listContext = useContext(SuspenseListContext);\n  if (listContext) show = listContext.register(store.inFallback);\n  let dispose;\n  onCleanup(() => dispose && dispose());\n  return createComponent(SuspenseContext.Provider, {\n    value: store,\n    get children() {\n      return createMemo(() => {\n        if (error) throw error;\n        ctx = sharedConfig.context;\n        if (flicker) {\n          flicker();\n          return flicker = undefined;\n        }\n        if (ctx && p === \"$$f\") setHydrateContext();\n        const rendered = createMemo(() => props.children);\n        return createMemo(prev => {\n          const inFallback = store.inFallback(),\n            {\n              showContent = true,\n              showFallback = true\n            } = show ? show() : {};\n          if ((!inFallback || p && p !== \"$$f\") && showContent) {\n            store.resolved = true;\n            dispose && dispose();\n            dispose = ctx = p = undefined;\n            resumeEffects(store.effects);\n            return rendered();\n          }\n          if (!showFallback) return;\n          if (dispose) return prev;\n          return createRoot(disposer => {\n            dispose = disposer;\n            if (ctx) {\n              setHydrateContext({\n                id: ctx.id + \"f\",\n                count: 0\n              });\n              ctx = undefined;\n            }\n            return props.fallback;\n          }, owner);\n        });\n      });\n    }\n  });\n}\n\nconst DEV = undefined;\n\nexport { $DEVCOMP, $PROXY, $TRACK, DEV, ErrorBoundary, For, Index, Match, Show, Suspense, SuspenseList, Switch, batch, cancelCallback, catchError, children, createComponent, createComputed, createContext, createDeferred, createEffect, createMemo, createReaction, createRenderEffect, createResource, createRoot, createSelector, createSignal, createUniqueId, enableExternalSource, enableHydration, enableScheduling, equalFn, from, getListener, getOwner, indexArray, lazy, mapArray, mergeProps, observable, on, onCleanup, onError, onMount, requestCallback, resetErrorBoundaries, runWithOwner, sharedConfig, splitProps, startTransition, untrack, useContext, useTransition };\n","exports.interopDefault = function (a) {\n  return a && a.__esModule ? a : {default: a};\n};\n\nexports.defineInteropFlag = function (a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n};\n\nexports.exportAll = function (source, dest) {\n  Object.keys(source).forEach(function (key) {\n    if (key === 'default' || key === '__esModule' || dest.hasOwnProperty(key)) {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function () {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n};\n\nexports.export = function (dest, destName, get) {\n  Object.defineProperty(dest, destName, {\n    enumerable: true,\n    get: get,\n  });\n};\n","import { Component } from \"solid-js\";\nimport { TableComponent } from \"./table\";\nimport { Animations, TableController, View, tableUIDescriptor } from \"./table_controller\";\nimport { AnimationManager } from \"ui/animation/animation_manager\";\n\nexport function createTable() {\n  const tableUI = tableUIDescriptor.create({\n    view: View.TopDownBookCentered,\n    lookDx: 0,\n    lookDy: 0,\n  });\n  const animations = new AnimationManager<Animations>(); \n  const controller = new TableController(tableUI, animations);\n\n  function Component(props: {\n    Book: Component,\n    Hand: Component,\n    Deck: Component,\n    SpreadOverlay: Component,\n    StatusOverlay: Component,\n  }) {\n    return (\n      <TableComponent\n          Book={props.Book}\n          Hand={props.Hand}\n          Deck={props.Deck}\n          SpreadOverlay={props.SpreadOverlay}\n          StatusOverlay={props.StatusOverlay}\n          view={tableUI.view}\n          lookDx={tableUI.lookDx}\n          lookDy={tableUI.lookDy}\n          animations={animations}\n      />\n    );\n  }\n\n  return {\n    Component,\n    controller,\n  };\n}","import { Component, createSignal } from \"solid-js\";\nimport styles from './table.module.scss';\nimport { Animations, View } from \"./table_controller\";\nimport { AnimationManager } from \"ui/animation/animation_manager\";\n\nexport function TableComponent(props: {\n  Book: Component,\n  Hand: Component,\n  Deck: Component,\n  SpreadOverlay: Component,\n  StatusOverlay: Component,\n  view: View,\n  lookDx: number,\n  lookDy: number,\n  animations: AnimationManager<Animations>,\n}) {\n  const [tableRef, setTableRef] = createSignal<HTMLDivElement>();\n  return (\n    <div class={styles.container}>\n      <div\n          classList={{\n            [styles.room]: true,\n          }}\n          style={props.view === View.Tilted ? {\n            transform: `translate(${props.lookDx * -20}vmin, ${-props.lookDy*20}vmin) rotateX(${-props.lookDy/2}rad)`\n          } : undefined}\n      >\n        <div\n            classList={{\n              [styles.table]: true,\n              [styles.tilted]: props.view === View.Tilted,\n              [styles.topDown]: props.view === View.TopDown,\n              [styles.topDownBookCentered]: props.view === View.TopDownBookCentered,\n            }}\n            onTransitionEnd={props.animations.createTransitionEndEventListener(\n              tableRef,\n              () => props.view\n            )}\n            ref={setTableRef}>\n          <div class={styles.book}>\n            <props.Book/>\n          </div>\n          <div class={styles['spread-overlay']}>\n            <props.SpreadOverlay/>\n          </div>\n          <div class={styles.deck}>\n            <props.Deck/>\n          </div>\n          <div class={styles.hand}>\n            <props.Hand/>\n          </div>\n        </div>\n      </div>\n      <div class={styles['status-overlay']}>\n        <props.StatusOverlay/>\n      </div>\n    </div>\n  );\n}\n","@use 'components/constants.module.scss';\n\n@value tableWidth: 200;\n$tableWidth: calc(tableWidth * 1vmin);\n@value tableHeight: 200;\n$tableHeight: calc(tableHeight * 1vmin);\n\n@value bookWidth: pageWidth;\n$bookWidth: constants.$pageWidth;\n@value bookHeight: pageHeight;\n$bookHeight: constants.$pageHeight;\n@value bookTop: 10;\n$bookTop: calc(bookTop * 1vmin);\n\n$handSlotTop: 20vmin;\n@value handSlotTop: 20;\n$handSlotWidth: 80vmin;\n@value handSlotWidth: 80;\n$handSlotHeight: constants.$cardHeight;\n@value handSlotHeight: cardHeight;\n\n@value deckTop: 10;\n$deckTop: calc(deckTop * 1vmin);\n\n@value overlayZ: 30;\n$overlayZ: calc(overlayZ * 1vmin); \n\n$tableColor: #763F13;\n$tableColorDark: #221100;\n\n.container {\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n}\n\n.room {\n  position: absolute;\n  perspective: 80vmin;\n  perspective-origin: 50% 50%;\n  width: 100%;\n  height: 100%;\n  transform-style: preserve-3d;\n  //transition-property: transform;\n  //transition-timing-function: ease-in-out;\n  //transition-duration: 100ms;\n}\n\n.room * {\n  transform-style: preserve-3d;\n}\n\n.table {\n  background: $tableColor;\n  position: absolute;\n  width: $tableWidth;\n  height: $tableHeight;\n  transform-origin: calc($tableWidth/2) $tableHeight;\n  transition: transform 1s ease-in-out;\n  bottom: 0;\n  left: calc((100vw - $tableWidth)/2);\n}\n\n.table.topDown {\n  background: linear-gradient($tableColorDark, $tableColor);\n  transform:\n      rotateX(20deg)\n      translate(0, calc($tableHeight - $bookHeight - $bookTop - $handSlotTop))\n      //translateZ(calc(-1 * $tableWidth))\n      ;\n}\n\n.table.topDownBookCentered {\n  background: linear-gradient($tableColorDark, $tableColor);\n  transform:\n      rotateX(0deg)\n      translate(calc(-1 * ($bookWidth / 2)), calc($tableHeight - $bookHeight - $bookTop - $handSlotTop))\n      translateZ(-10vmin)\n      ;\n}\n\n.table.tilted {\n  background: linear-gradient($tableColorDark, $tableColor);\n  transform:\n      rotateX(constants.$tableTiltAngle)\n      translate(0, calc($tableHeight - $bookHeight - $bookTop - $handSlotTop * 2))\n      translateZ(30vmin)\n      ;\n}\n\n.book {\n  position: absolute;\n  top: $bookTop;\n  left: 50%;\n  width: $bookWidth;\n  height: $bookHeight;\n  background-color: brown;\n}\n\n.hand {\n  position: absolute;\n  display: flex;\n  top: calc($bookTop + $bookHeight + $handSlotTop);\n  left: calc((100% - $handSlotWidth) / 2);\n  width: $handSlotWidth;\n  height: $handSlotHeight;\n  pointer-events: all;\n}\n\n.deck {\n  position: absolute;\n  top: calc($bookTop + $bookHeight + $deckTop);\n  left: calc(50% - $handSlotWidth/2 - 10vmin);\n  width: constants.$cardWidth;\n  height: constants.$cardHeight;\n}\n\n.spread-overlay {\n  position: absolute;\n  top: calc($bookTop + $bookHeight);\n  left: calc($tableWidth/2 - $bookWidth/2);\n  width: calc($bookWidth);\n  height: constants.$cardHeight;\n  transform: translateZ(calc($overlayZ)) rotateX(constants.$tableTiltCorrectionAngle);\n  transform-origin: top;\n  pointer-events: all;\n}\n\n.drag-overlay, .status-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\n","import { AnimationManager } from \"ui/animation/animation_manager\";\nimport { LiteralTypeDescriptor, numberDescriptor } from \"model/descriptor/literals\";\nimport { activeRecordDescriptor } from \"model/descriptor/record\";\nimport styles from './table.module.scss';\nimport { batch } from \"solid-js\";\n\nconst bookTop = parseInt(styles.bookTop);\nconst bookWidth = parseInt(styles.bookWidth);\nconst bookHeight = parseInt(styles.bookHeight);\nconst tableWidth = parseInt(styles.tableWidth);\nconst deckTop = parseInt(styles.deckTop);\nconst handSlotTop = parseInt(styles.handSlotTop);\nconst handSlotWidth = parseInt(styles.handSlotWidth);\nconst cardWidth = parseInt(styles.cardWidth);\nconst cardHeight = parseInt(styles.cardHeight);\nconst overlayZ = parseInt(styles.overlayZ);\n\nexport const enum View {\n  TopDown = 0,\n  TopDownBookCentered = 1,\n  Tilted = 2,\n};\n\nexport type Animations = View;\n\nconst viewDescriptor = new LiteralTypeDescriptor<View>();\n\nexport const tableUIDescriptor = activeRecordDescriptor({\n  view: viewDescriptor,\n  lookDx: numberDescriptor,\n  lookDy: numberDescriptor,\n});\n\nexport type TableUI = typeof tableUIDescriptor.aMutable;\nexport type TableUIState = typeof tableUIDescriptor.aState;\n\nexport class TableController {\n\n  constructor(\n    private readonly tableUI: TableUI,\n    private readonly animations: AnimationManager<Animations>,\n  ) {\n  }\n\n  async setView(view: View) {\n    if (this.tableUI.view !== view) {\n      this.tableUI.view = view;\n      return this.animations.waitForAnimation(view);\n    }\n  }\n\n  async look(dx: number, dy: number) {\n    batch(() => {\n      this.tableUI.lookDx = dx;\n      this.tableUI.lookDy = dy;\n    });\n  }\n\n  getPlayerCardSlotTablePosition(slotIndex: number): [number, number, number] {\n    // TODO make number of slots based on game instead of hard coded\n    const x = (tableWidth - handSlotWidth)/2\n        + (slotIndex + .5) * handSlotWidth/6 - cardWidth/2;\n    const y = bookTop + bookHeight + handSlotTop;\n    return [x, y, 0];\n  }\n\n  getBookCardSlotTablePosition(slotIndex: number): [number, number, number] {\n    const x = (tableWidth - bookWidth)/2\n        + (slotIndex + .5) * bookWidth/3 - cardWidth/2;\n    const y = bookTop + bookHeight + cardHeight/2;\n    return [x, y, overlayZ];\n  }\n\n  getPlayerDeckTablePosition(): [number, number, number] {\n    const x = (tableWidth - handSlotWidth)/2 - 10;\n    const y = bookTop + bookHeight + deckTop;\n\n    return [x, y, 0];\n  }\n}\n","import { Component } from \"solid-js\";\nimport { TypeDescriptor } from \"./types\";\n\nexport class LiteralTypeDescriptor<LiteralType> implements TypeDescriptor<LiteralType, LiteralType> {\n\n  constructor() { }\n\n  aState!: LiteralType;\n\n  aMutable!: LiteralType;\n\n  create(s: LiteralType): LiteralType {\n    return s;\n  }\n\n  snapshot(m: LiteralType): LiteralType {\n    return m;\n  }\n\n  freeze(s: LiteralType): LiteralType {\n    return s;\n  }\n}\n\n\nexport const numberDescriptor = new LiteralTypeDescriptor<number>();\n\nexport const stringDescriptor = new LiteralTypeDescriptor<string>();\n\nexport const booleanDescriptor = new LiteralTypeDescriptor<boolean>();\n\nexport const componentDescriptor = new LiteralTypeDescriptor<Component>();\n","import { createSignal, Signal } from \"solid-js\";\nimport { TypeDescriptor, TypeDescriptors } from \"./types\";\n\ntype Mutable = {\n  __aMutable: true,\n};\n\ntype State = {\n  __aMutable?: never,\n};\n\n\ntype RecordState<\n  Attributes extends TypeDescriptors,\n> = { [K in keyof Attributes]: Attributes[K]['aState'] } & State;\n\ntype RecordMutable<\n  Attributes extends TypeDescriptors,\n> = { [K in keyof Attributes]: Attributes[K]['aMutable'] } & Mutable;\n\n\ntype RecordStateWithNoMutables<\n  Attributes extends TypeDescriptors,\n> = { [K in keyof Attributes]: Attributes[K]['aState'] & State };\n\n\nclass ValueRecordTypeDescriptor<AttributeTypeDescriptors extends TypeDescriptors>\n  implements TypeDescriptor<RecordState<AttributeTypeDescriptors>, RecordMutable<AttributeTypeDescriptors>> {\n  constructor(private readonly attributeTypes: AttributeTypeDescriptors) { }\n\n  aState!: Readonly<RecordState<AttributeTypeDescriptors>>;\n\n  aMutable!: Readonly<RecordMutable<AttributeTypeDescriptors>>;\n\n  create(s: RecordStateWithNoMutables<AttributeTypeDescriptors>): RecordMutable<AttributeTypeDescriptors> {\n    const mutable: RecordMutable<AttributeTypeDescriptors> = {} as any;\n    for (let key in this.attributeTypes) {\n      const attributeType = this.attributeTypes[key];\n      const value = s[key];\n      const valueMutable = attributeType.create(value);\n      mutable[key] = valueMutable;\n    }\n    return mutable;\n  }\n\n  snapshot(m: RecordMutable<AttributeTypeDescriptors>): RecordState<AttributeTypeDescriptors> {\n    const snapshot: RecordState<AttributeTypeDescriptors> = {} as any;\n    for (let key in this.attributeTypes) {\n      const attributeType = this.attributeTypes[key];\n      const value = m[key];\n      const valueMutable = attributeType.snapshot(value);\n      snapshot[key] = valueMutable;\n    }\n    return snapshot;\n  }\n\n  freeze(s: RecordState<AttributeTypeDescriptors>): RecordState<AttributeTypeDescriptors> {\n    const snapshot: RecordState<AttributeTypeDescriptors> = {} as any;\n    for (let key in this.attributeTypes) {\n      const attributeType = this.attributeTypes[key];\n      const value = s[key];\n      const valueMutable = attributeType.freeze(value);\n      snapshot[key] = valueMutable;\n    }\n    return Object.freeze(snapshot);    \n  }\n\n}\n\nexport function valueRecordDescriptor<AttributeTypeDescriptors extends TypeDescriptors>(\n  attributeTypes: AttributeTypeDescriptors,\n) {\n  return new ValueRecordTypeDescriptor(attributeTypes);\n}\n\ntype ActiveRecordTarget<\n  AttributeTypeDescriptors extends TypeDescriptors\n> = { [K in keyof AttributeTypeDescriptors]: Signal<AttributeTypeDescriptors[K]['aMutable']> };\n\nclass ActiveRecordProxyHandler<AttributeTypeDescriptors extends TypeDescriptors>\n  implements ProxyHandler<ActiveRecordTarget<AttributeTypeDescriptors>> {\n  constructor() {\n\n  }\n\n  get(target: ActiveRecordTarget<AttributeTypeDescriptors>, p: string) {\n    return target[p]?.[0]?.();\n  }\n\n  set(target: ActiveRecordTarget<AttributeTypeDescriptors>, p: string, newValue: any): boolean {\n    const signal = target[p]?.[1];\n    signal?.(newValue);\n    return signal != null;\n  }\n}\n\nclass ActiveRecordTypeDescriptor<AttributeTypeDescriptors extends TypeDescriptors>\n  implements TypeDescriptor<RecordState<AttributeTypeDescriptors>, RecordMutable<AttributeTypeDescriptors>> {\n  constructor(private readonly attributeTypes: AttributeTypeDescriptors) { }\n\n  aState!: Readonly<RecordState<AttributeTypeDescriptors>>;\n\n  aMutable!: RecordMutable<AttributeTypeDescriptors>;\n\n  create(s: RecordState<AttributeTypeDescriptors>): RecordMutable<AttributeTypeDescriptors> {\n\n    const target: ActiveRecordTarget<AttributeTypeDescriptors> = {} as any;\n    for (let key in this.attributeTypes) {\n      const attributeType = this.attributeTypes[key];\n      const value = s[key];\n      const valueMutable = attributeType.create(value);\n      target[key] = createSignal(valueMutable);\n    }\n    return new Proxy(target, new ActiveRecordProxyHandler()) as RecordMutable<AttributeTypeDescriptors>;\n  }\n\n  snapshot(m: RecordMutable<AttributeTypeDescriptors>): RecordState<AttributeTypeDescriptors> {\n    const snapshot: RecordState<AttributeTypeDescriptors> = {} as any;\n    for (let key in this.attributeTypes) {\n      const attributeType = this.attributeTypes[key];\n      const value = m[key];\n      const valueMutable = attributeType.snapshot(value);\n      snapshot[key] = valueMutable;\n    }\n    return snapshot;\n  }\n\n  freeze(s: RecordState<AttributeTypeDescriptors>): RecordState<AttributeTypeDescriptors> {\n    const snapshot: RecordState<AttributeTypeDescriptors> = {} as any;\n    for (let key in this.attributeTypes) {\n      const attributeType = this.attributeTypes[key];\n      const value = s[key];\n      const valueMutable = attributeType.snapshot(value);\n      snapshot[key] = valueMutable;\n    }\n    return Object.freeze(snapshot);    \n  }\n}\n\nexport function activeRecordDescriptor<AttributeTypeDescriptors extends TypeDescriptors>(\n  attributeTypes: AttributeTypeDescriptors,\n) {\n  return new ActiveRecordTypeDescriptor(attributeTypes);\n}","import { Accessor } from \"solid-js\";\nimport { delay } from \"../../base/delay\";\nimport { FlattenedPromise, createFlattenedPromise } from \"../../base/flattened_promise\";\n\nexport class AnimationCanceledError extends Error {\n\n}\n\nexport class AnimationManager<T> {\n  private animations: Map<T, FlattenedPromise<void>> = new Map();\n\n  constructor() {\n\n  }\n\n  waitForAnimation(t: T, timeoutMillis: number = 700): Promise<void> {\n    this.maybeCancelAnimation(t);\n    const animation = createFlattenedPromise<void>();\n    this.animations.set(t, animation);\n    return Promise.race([animation.promise, delay(timeoutMillis)]);\n  }\n\n  maybeCancelAnimation(t: T) {\n    const flattenedPromise = this.animations.get(t);\n    if (flattenedPromise) {\n      flattenedPromise.reject(new AnimationCanceledError());\n      this.animations.delete(t);\n    }\n  }\n\n  maybeCompleteAnimation(t: T) {\n    const flattenedPromise = this.animations.get(t);\n    if (flattenedPromise) {\n      flattenedPromise.resolve();\n      this.animations.delete(t);\n    }\n  }\n\n  createAnimationEndEventListener(\n      ref: Accessor<EventTarget | undefined>,\n      animationIdAndName: Accessor<[T, string]>,\n  ) {\n    return (e: AnimationEvent) => {\n      const [id, name] = animationIdAndName();\n      if (e.target != null && ref() === e.target && e.animationName === name) {\n        this.maybeCompleteAnimation(id);\n      }\n    };\n  }\n\n  createTransitionEndEventListener(\n    ref: Accessor<EventTarget | undefined>,\n    animationId: Accessor<T>,\n    ) {\n    return (e: TransitionEvent) => {\n      if (e.target != null && ref() === e.target) {\n        this.maybeCompleteAnimation(animationId());\n      }\n    };\n  }\n}\n","import { createFlattenedPromise } from \"./flattened_promise\";\n\nexport function delay(milliseconds: number): Promise<void> {\n  const { promise, resolve } = createFlattenedPromise<void>();\n  setTimeout(resolve, milliseconds);\n  return promise;\n}","export type FlattenedPromise<T> = {\n  promise: Promise<T>;\n  reject: (e: unknown) => void;\n  resolve: (t: T) => void;\n}\n\nexport function createFlattenedPromise<T>(): FlattenedPromise<T> {\n  let _resolve: (t: T) => void;\n  let _reject: (e: unknown) => void;\n  const promise = new Promise<T>((resolve, reject) => {\n    _resolve = resolve;\n    _reject = reject;\n  });\n  return {\n    promise,\n    resolve: (t: T) => _resolve(t),\n    reject: (e: unknown) => _reject(e), \n  };\n}","import { Book, BookSpread } from \"model/domain\";\nimport { BookComponent, PagePair } from \"./book\";\nimport { Animations, BookController, bookUIDescriptor } from \"./book_controller\";\nimport { AnimationManager } from \"ui/animation/animation_manager\";\nimport { ParentProps } from \"solid-js\";\nimport { ChrononomiconCoverComponent } from \"./cover/chrononomicon\";\nimport { PageComponentManager, PageSide } from \"components/page/page_controller\";\n\nexport function createBook({\n  pageComponentManager,\n  book,\n}: {\n  pageComponentManager: PageComponentManager,\n  book: Book,\n}) {\n  function renderPagePair(spread: BookSpread | undefined): PagePair | undefined {\n    if (spread == null) {\n      return;\n    }\n    return [\n      <pageComponentManager.FactoryComponent model={spread} side={PageSide.Left}/>,\n      <pageComponentManager.FactoryComponent model={spread} side={PageSide.Right}/>\n    ];\n  }\n  \n  const animations = new AnimationManager<Animations>();\n  const bookUI = bookUIDescriptor.create({\n    previousSpread: undefined,\n    turnLeftToRight: true,\n    turnPastMidway: false,\n  });\n  const controller = new BookController(\n    book,\n    bookUI,\n    animations,\n    pageComponentManager,\n  );\n\n  const Component = (props: ParentProps) => {\n    return (\n      <BookComponent\n          animations={animations}\n          previousPages={renderPagePair(bookUI.previousSpread)}\n          currentPages={renderPagePair(book.spread)}\n          turnLeftToRight={bookUI.turnLeftToRight}\n          turnPastMidway={bookUI.turnPastMidway}\n          Cover={ChrononomiconCoverComponent}>\n        {props.children}\n      </BookComponent>\n    );\n  };\n\n  return {\n    Component,\n    controller,\n  };\n}\n\n","import { Component, JSX, JSXElement, ParentProps, createMemo, createSignal } from 'solid-js';\nimport styles from './book.module.scss'\nimport { AnimationManager } from 'ui/animation/animation_manager';\nimport { Animations } from './book_controller';\n\nexport type PagePair = [JSXElement, JSXElement];\n\nfunction PageComponent(props: ParentProps<{ flipped: boolean }>) {\n  return (\n    <div classList={{\n      [styles.page]: true,\n      [styles.flipped]: props.flipped,\n    }}>\n      {props.children}\n    </div>\n  );\n}\n\nfunction BookHalfComponent(props: {topPage?: JSX.Element, bottomPage?: JSX.Element, flipped: boolean}) {\n  return (\n    <div class={styles['book-half']}>\n      <div class={styles['book-half-front']}/>\n      <div class={styles['book-half-right']}/>\n      <div class={styles['book-half-left']}/>\n      <div class={styles['book-half-top']}>\n        <PageComponent flipped={props.flipped}>\n          {props.topPage}\n        </PageComponent>\n      </div>\n      <div class={styles['book-half-bottom']}>\n        <PageComponent  flipped={props.flipped}>\n          {props.bottomPage}\n        </PageComponent>\n      </div>\n    </div>\n  )\n}\n\nexport function BookComponent(props: ParentProps<{\n  animations: AnimationManager<Animations>,\n  previousPages: PagePair | undefined,\n  currentPages: PagePair | undefined,\n  turnLeftToRight: boolean,\n  turnPastMidway: boolean,\n  Cover: Component,\n}>) {\n  const [spineRef, setSpineRef] = createSignal<HTMLDivElement>();\n  const rightPages = createMemo(() => {\n    return props.previousPages && props.turnLeftToRight\n        ? props.previousPages\n        : props.currentPages;\n  });\n  const leftPages = createMemo(() => {\n    return props.previousPages && !props.turnLeftToRight\n        ? props.previousPages\n        : props.currentPages;\n  });\n  const [pageTurnRef, setPageTurnRef] = createSignal<HTMLDivElement>();\n  const onTurnAnimationEnd = props.animations.createAnimationEndEventListener(\n    pageTurnRef,\n    () => props.turnLeftToRight\n        ? props.turnPastMidway\n            ? ['turn', styles.ltrdown]\n            : ['midway', styles.ltrup]\n        : props.turnPastMidway\n            ? ['turn', styles.rtldown]\n            : ['midway', styles.rtlup]\n  );\n\n  return (\n    <div class={styles.container}>\n      <div class={styles.book}>\n        {/* Right half */}\n        <BookHalfComponent topPage={rightPages()?.[1]} flipped={false}/>\n        {/* turning page */}\n        {props.previousPages && props.currentPages && (\n          <div classList={{\n            [styles['turn-page']]: true,\n          }}>\n            <div\n                ref={setPageTurnRef}\n                classList={{\n                  [styles['turn-page-rotate']]: true,\n                  [styles.ltr]: props.turnLeftToRight,\n                  [styles.rtl]: !props.turnLeftToRight,\n                  [styles.down]: props.turnPastMidway,\n                  [styles.up]: !props.turnPastMidway,\n                }}\n                onAnimationEnd={onTurnAnimationEnd}\n            >\n              <div classList={{\n                [styles['turn-page-flip']]: true,\n                [styles.ltr]: props.turnLeftToRight,\n                [styles.rtl]: !props.turnLeftToRight,\n                [styles.down]: props.turnPastMidway,\n                [styles.up]: !props.turnPastMidway,\n              }}>\n                <PageComponent\n                    flipped={props.turnLeftToRight && !props.turnPastMidway\n                      || !props.turnLeftToRight && props.turnPastMidway}>\n                  {props.turnLeftToRight && !props.turnPastMidway\n                      || !props.turnLeftToRight && props.turnPastMidway\n                      ? rightPages()?.[0]\n                      : leftPages()?.[1]\n                  }\n                </PageComponent>\n              </div>\n            </div>\n          </div>\n        )}\n        <div\n            classList={{\n              [styles.spine]: true,\n              [styles.open]: props.currentPages != null,\n            }}\n            onTransitionEnd={props.animations.createTransitionEndEventListener(\n              spineRef,\n              () => 'open',\n            )}\n            ref={setSpineRef}>\n          {/* Left half */}\n          <BookHalfComponent\n              topPage={<props.Cover/>}\n              bottomPage={leftPages()?.[0]}\n              flipped={true}/>\n        </div>\n        {/* spread overlay (monsters etc...)*/}\n        {props.children && (\n          <div class={styles.spread}>\n            {props.children}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","@use 'components/constants.module.scss';\n\n$bookDepth: 10vmin;\n$pageGap: .5vmin;\n$pageColor1: grey;\n$pageColor2: whitesmoke;\n$pageColorSpine: gainsboro;\n$pageTurnAnimationDuration: 500ms;\n\n.container {\n  //display: flex;\n  position: absolute;\n  // align-items: center;\n  // justify-content: center;\n  width: 100%;\n  height: 100%;\n}\n\n.book {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n\n.spread {\n  width: 200%;\n  margin-left: -100%;\n  height: 100%; \n  transform: translateZ($bookDepth);\n}\n\n.page {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(to right, $pageColorSpine, $pageColor2 5%);\n}\n\n.page.flipped {\n  background: linear-gradient(to left, $pageColorSpine, $pageColor2 5%);\n}\n\n.spine {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  transform-origin: left;\n  transform: translateZ($bookDepth) rotateY(0deg);\n}\n\n.spine.open {\n  transform: translateZ($bookDepth) rotateY(-180deg);\n  transition: $pageTurnAnimationDuration;\n  transition-timing-function: ease-in;\n}\n\n.spine.open .book-half-bottom {\n  transform: scaleZ(-1) scaleX(-1);\n}\n\n.book-half {\n  position: absolute;\n  width: constants.$pageWidth;\n  height: constants.$pageHeight;\n}\n\n.book-half-bottom {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n\n.book-half-top {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  transform: translateZ($bookDepth);\n}\n\n.book-half-front {\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  height: $bookDepth;\n  background:\n    linear-gradient(to right, $pageColorSpine, transparent 10%),\n    repeating-linear-gradient(to bottom, $pageColor1, $pageColor2 $pageGap)\n    ;\n  transform: rotateX(-90deg);\n  transform-origin: bottom;\n}\n\n.spine .book-half-front {\n  background:\n      linear-gradient(to right, $pageColorSpine, transparent 10%),\n      repeating-linear-gradient(to top, $pageColor1, $pageColor2 $pageGap)\n      ;\n}\n\n.book-half-left {\n  position: absolute;\n  left: 0;\n  width: $bookDepth;\n  height: 100%;\n  background: repeating-linear-gradient(to right, $pageColor1, $pageColor2 $pageGap);\n  transform: rotateY(-90deg);\n  transform-origin: left;\n}\n\n.book-half-right {\n  position: absolute;\n  right: 0;\n  width: $bookDepth;\n  height: 100%;\n  background: repeating-linear-gradient(to left, $pageColor1, $pageColor2 $pageGap);\n  transform: rotateY(90deg);\n  transform-origin: right;\n}\n\n.turn-page {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  transform: translateZ(calc($bookDepth * 1.01));\n}\n\n.turn-page-flip {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n\n.turn-page-flip.rtl.down, .turn-page-flip.ltr.up {\n  transform-origin: center;\n  transform: scaleX(-1);\n}\n\n.turn-page-rotate {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  transform-origin: left;\n  animation-duration: calc($pageTurnAnimationDuration/2);\n  animation-fill-mode: forwards;\n}\n\n.turn-page-rotate.ltr.up {\n  animation-name: ltrup;\n  animation-timing-function: ease-in;\n}\n\n@keyframes ltrup {\n  from {\n    transform: rotateY(-180deg) matrix3d(\n      1, 0, 0, 0,\n      0, 1, 0, 0,\n      0, 0,-1, 0,\n      0, 0, 0, 1\n    );\n  }\n  to {\n    transform: rotateY(-90deg) matrix3d(\n      1, 0, 0, 0,\n      0, 1, 0, 0,\n      0, 0,-1, 0,\n      0, 0, 0, 1\n    );\n  }\n}\n\n.turn-page-rotate.ltr.down {\n  animation-name: ltrdown;\n  animation-timing-function: ease-out;  \n}\n\n@keyframes ltrdown {\n  from {\n    transform: rotateY(-90deg);\n  }\n  to {\n    transform: rotateY(0deg);\n  }\n}\n\n.turn-page-rotate.rtl.up {\n  animation-name: rtlup;\n  animation-timing-function: ease-in;  \n}\n\n@keyframes rtlup {\n  from {\n    transform: rotateY(0deg);\n  }\n  to {\n    transform: rotateY(-90deg);\n  }\n}\n\n.turn-page-rotate.rtl.down {\n  animation-name: rtldown;\n  animation-timing-function: ease-out;\n}\n\n@keyframes rtldown {\n  from {\n    transform: rotateY(-90deg) matrix3d(\n      1, 0, 0, 0,\n      0, 1, 0, 0,\n      0, 0,-1, 0,\n      0, 0, 0, 1\n    );\n  }\n  to {\n    transform: rotateY(-180deg) matrix3d(\n      1, 0, 0, 0,\n      0, 1, 0, 0,\n      0, 0,-1, 0,\n      0, 0, 0, 1\n    );\n  }\n}\n","import { delay } from \"base/delay\";\nimport { PageComponentManager } from \"components/page/page_controller\";\nimport { booleanDescriptor } from \"model/descriptor/literals\";\nimport { optionalDescriptor } from \"model/descriptor/option\";\nimport { activeRecordDescriptor } from \"model/descriptor/record\";\nimport { Book, BookSpread, bookSpreadDescriptor } from \"model/domain\";\nimport { batch } from \"solid-js\";\nimport { AnimationManager } from \"ui/animation/animation_manager\";\n\nexport type Animations = 'open' | 'turn' | 'close' | 'midway';\n\nexport const bookUIDescriptor = activeRecordDescriptor({\n  previousSpread: optionalDescriptor(bookSpreadDescriptor),\n  turnLeftToRight: booleanDescriptor,\n  turnPastMidway: booleanDescriptor,\n});\n\nexport type BookUI = typeof bookUIDescriptor.aMutable;\nexport type BookUIState = typeof bookUIDescriptor.aState;\n\nexport class BookController {\n  constructor(\n    private readonly book: Book,\n    private readonly bookUI: BookUI,\n    private animations: AnimationManager<Animations>,\n    private pageComponentManager:  PageComponentManager,\n  ) { }\n\n  async showSpread(spread: BookSpread | undefined, turnLeftToRight: boolean = false) {\n    if (spread != this.book.spread) {\n      const opening = this.book.spread == null;\n      const previousSpread = this.book.spread;\n      if (previousSpread != null) {\n        await this.pageComponentManager.lookupController(previousSpread)?.popdown();\n      }\n      batch(() => {\n        this.bookUI.previousSpread = this.book.spread;\n        this.bookUI.turnLeftToRight = turnLeftToRight;\n        this.bookUI.turnPastMidway = false;\n        this.book.spread = spread;\n      });\n      if (opening) {\n        await this.animations.waitForAnimation('open');\n      } else {\n        await this.animations.waitForAnimation('midway');\n        this.bookUI.turnPastMidway = true;\n        await this.animations.waitForAnimation('turn');\n        this.bookUI.previousSpread = undefined;\n      }\n      // ensure everything is mounted before popping up\n      await delay(0);\n      await batch(async () => {\n        if (spread != null) {\n          await this.pageComponentManager.lookupController(spread)?.popup();\n        }\n      });\n    }\n  }\n}\n","import { TypeDescriptor } from \"./types\";\n\ntype OptionalState<MandatoryTypeDescriptor extends TypeDescriptor> =\n  MandatoryTypeDescriptor['aState'] | undefined;\n\ntype OptionalMutable<MandatoryTypeDescriptor extends TypeDescriptor> =\n  MandatoryTypeDescriptor['aMutable'] | undefined;\n\nclass OptionalTypeDescriptor<MandatoryTypeDescriptor extends TypeDescriptor>\n  implements TypeDescriptor<OptionalState<MandatoryTypeDescriptor>, OptionalMutable<MandatoryTypeDescriptor>> {\n  constructor(private readonly mandatoryTypeDescriptor: MandatoryTypeDescriptor) { }\n\n  aState!: MandatoryTypeDescriptor['aState'] | undefined;\n\n  aMutable!: MandatoryTypeDescriptor['aMutable'] | undefined;\n\n  create(s: OptionalState<MandatoryTypeDescriptor>): OptionalMutable<MandatoryTypeDescriptor> {\n    return s != null ? this.mandatoryTypeDescriptor.create(s) : undefined;\n  }\n\n  snapshot(m: OptionalMutable<MandatoryTypeDescriptor>): OptionalState<MandatoryTypeDescriptor> {\n    return m != null ? this.mandatoryTypeDescriptor.snapshot(m) : undefined;\n  }\n\n  freeze(s: OptionalState<MandatoryTypeDescriptor>): OptionalState<MandatoryTypeDescriptor> {\n    return s != null ? this.mandatoryTypeDescriptor.freeze(s) : undefined;\n  }\n}\n\nexport function optionalDescriptor<MandatoryTypeDescriptor extends TypeDescriptor>(\n  mandatoryTypeDescriptor: MandatoryTypeDescriptor,\n) {\n  return new OptionalTypeDescriptor(mandatoryTypeDescriptor);\n}\n","import { listDescriptor } from \"./descriptor/list\";\nimport { LiteralTypeDescriptor, numberDescriptor } from \"./descriptor/literals\";\nimport { optionalDescriptor } from \"./descriptor/option\";\nimport { activeRecordDescriptor } from \"./descriptor/record\";\nimport { discriminatingUnionDescriptor } from \"./descriptor/union\";\n\nexport const enum SymbolType {\n  // force resource\n  Force = 1,\n  // finesse resource\n  Finesse,\n  // mind resource\n  Mind,\n  // magic resource (fey?)\n  Magic,\n  // light/perception\n  Perception,\n  // take pysical damage/heal\n  Damage,\n  // get older/younger\n  Age,\n  // draw a card/put a card back\n  Draw,\n  // heal\n  Healing,\n  // poison\n  Poison,\n  // gain a card\n  GainCards,\n  // lose played card(s)\n  LoseCards,\n  // gain max health\n  GainMaxHealth,\n  // lose max health\n  LoseMaxHealth,\n  // double card effects\n  DoubleCard,\n  // duplicate cards\n  Duplicate,\n}\n\nexport const enum EffectDirection {\n  Up = 1,\n  Down = 2,\n  Omni = 3,\n}\n\nexport type SimpleEffect = {\n  readonly symbol: Exclude<SymbolType, SymbolType.GainCards>,\n  readonly direction: EffectDirection,\n};\n\nexport type GainCardEffect = {\n  readonly symbol: SymbolType.GainCards,\n  readonly direction: EffectDirection,\n  readonly cards: readonly CardDefinition[];\n};\n\nexport type Effect = SimpleEffect | GainCardEffect;\n\nexport const enum CardBackgroundType {\n  Crosshatched = 1,\n  Clear,\n  Door,\n  ForestPath,\n  DarkenedForestPath,\n  Passageway,\n}\n\nexport const enum CardForegroundType {\n  Rat = 1,\n  Troll,\n  Snail,\n  Rooster,\n  Trap,\n  Fountain,\n  MagicTree,\n  Mushroom,\n  Shrine,\n  Treasure,\n  Dummy,\n}\n\nexport const enum CardFaceType {\n  Resource = 1,\n  ResourceBack,\n  Choice,\n  ChoiceBack,\n}\n\nexport const enum ChoiceType {\n  NextTurn = 1,\n  NextPage,\n  NextChapter,\n}\n\nexport type ChoiceNextTurn = {\n  readonly type: ChoiceType.NextTurn,\n};\n\nexport const enum EncounterType {\n  Battle = 1,\n  Event,\n};\n\nexport const enum MonsterType {\n  BigRat = 1,\n  Snail,\n  Troll,\n  Rooster,\n  Dummy,\n};\n\nexport const enum EventType {\n  Fountain = 1,\n  MagicTree,\n  Mushroom,\n  Shrine,\n  Treasure,\n  Shop,\n}\n\nexport type EncounterBattleDefinition = {\n  readonly type: EncounterType.Battle,\n  readonly monster: MonsterType,\n};\n\nexport type EncounterEventDefinition = {\n  readonly type: EncounterType.Event,\n  readonly event: EventType,\n};\n\nexport type EncounterDefinition = EncounterBattleDefinition | EncounterEventDefinition;\n\nexport type ChoiceNextPage = {\n  readonly type: ChoiceType.NextPage,\n  readonly encounter: EncounterDefinition | undefined,\n};\n\nexport type ChoiceNextChapter = {\n  readonly type: ChoiceType.NextChapter,\n  readonly encounter: EncounterDefinition | undefined,\n  readonly targetChapterIndex: number,\n};\n\nexport type Choice = ChoiceNextTurn | ChoiceNextPage | ChoiceNextChapter;\n\n\ntype CardFaceCommon = {\n  readonly name: string,\n  readonly description: string | undefined,\n  readonly background: CardBackgroundType,\n  readonly foreground: CardForegroundType | undefined,\n  readonly cost: readonly Effect[],\n  readonly symbol: SymbolType | undefined,\n};\n\nexport type CardFrontResource = CardFaceCommon & {\n  readonly type: CardFaceType.Resource,\n  readonly benefit: readonly Effect[],\n};\n\nexport type CardBackResource = CardFaceCommon & {\n  readonly type: CardFaceType.ResourceBack,\n};\n\nexport type CardFrontChoice = CardFaceCommon & {\n  readonly type: CardFaceType.Choice,\n  readonly benefit: readonly Effect[],\n  readonly choice: Choice,\n};\n\nexport type CardBackChoice = CardFaceCommon & {\n  readonly type: CardFaceType.ChoiceBack,\n};\n\nexport type CardFace = \n    | CardFrontChoice\n    | CardBackChoice\n    | CardFrontResource\n    | CardBackResource;\n\nexport const enum RecycleTarget {\n  Destroy = 1,\n  Draw,\n  Discard,\n}\n\nexport type CardDefinition = {\n  readonly recycleTarget: RecycleTarget,\n  readonly recyclePosition: number | undefined,\n  readonly faces: readonly CardFace[],\n};\n\nexport const cardDescriptor = activeRecordDescriptor({\n  faces: new LiteralTypeDescriptor<readonly CardFace[]>(),\n  recycleTarget: new LiteralTypeDescriptor<RecycleTarget>(),\n  recyclePosition: optionalDescriptor(numberDescriptor),\n  visibleFaceIndex: numberDescriptor,\n});\n\nexport const cardSlotDescriptor = activeRecordDescriptor({\n  targetCard: optionalDescriptor(cardDescriptor),\n  playedCards: listDescriptor(cardDescriptor),\n});\n\n// a \"spread\" is two pages viewed together\nexport const enum BookSpreadType {\n  TableOfContents = 1,\n  Room,\n  Death,\n}\n\nexport const bookSpreadTableOfContentsDescriptor = activeRecordDescriptor({\n  type: new LiteralTypeDescriptor<BookSpreadType.TableOfContents>(),\n  unlockedChapters: numberDescriptor,\n});\n\nexport const bookSpreadDeathDescriptor = activeRecordDescriptor({\n  type: new LiteralTypeDescriptor<BookSpreadType.Death>(),\n});\n\nexport const deckDescriptor = listDescriptor(cardDescriptor);\n\nexport const entityDescriptor = activeRecordDescriptor({\n  health: numberDescriptor,\n  maxHealth: numberDescriptor,\n  deck: deckDescriptor,\n  age: numberDescriptor,\n});\n\nexport const encounterBattleDescriptor = activeRecordDescriptor({\n  type: new LiteralTypeDescriptor<EncounterType.Battle>(),\n  monster: entityDescriptor,\n  monsterType: new LiteralTypeDescriptor<MonsterType>(),\n});\n\nexport const encounterEventDescriptor = activeRecordDescriptor({\n  type: new LiteralTypeDescriptor<EncounterType.Event>(),\n  eventType: new LiteralTypeDescriptor<EventType>(),\n  deck: deckDescriptor,\n});\n\nexport const encounterDescriptor = discriminatingUnionDescriptor(\n  {\n    [EncounterType.Battle]: encounterBattleDescriptor,\n    [EncounterType.Event]: encounterEventDescriptor,\n  },\n  s => s.type,\n  m => m.type,  \n);\n\nexport const bookSpreadRoomDescriptor = activeRecordDescriptor({\n  type: new LiteralTypeDescriptor<BookSpreadType.Room>(),\n  encounter: optionalDescriptor(encounterDescriptor),  \n});\n\nexport const bookSpreadDescriptor = discriminatingUnionDescriptor(\n  {\n    [BookSpreadType.TableOfContents]: bookSpreadTableOfContentsDescriptor,\n    [BookSpreadType.Room]: bookSpreadRoomDescriptor,\n    [BookSpreadType.Death]: bookSpreadDeathDescriptor,\n  },\n  s => s.type,\n  m => m.type,\n);\n\nexport const enum ChapterType {\n  Prelude = 1,\n  Forest,\n  Ruins,\n  Tower,\n}\n\nexport const chapterDescriptor = activeRecordDescriptor({\n  type: new LiteralTypeDescriptor<ChapterType>(),\n  deck: deckDescriptor,\n  pagesRemaining: numberDescriptor,\n  finalCard: cardDescriptor,\n});\n\nexport const bookDescriptor = activeRecordDescriptor({\n  // undefined == closed\n  spread: optionalDescriptor(bookSpreadDescriptor),\n  chapter: chapterDescriptor,\n  cardSlots: listDescriptor(cardSlotDescriptor),\n});\n\nexport const gameDescriptor = activeRecordDescriptor({\n  book: bookDescriptor,\n  playerCharacter: optionalDescriptor(entityDescriptor),\n  playerHand: listDescriptor(cardSlotDescriptor),\n});\n\nexport type Card = typeof cardDescriptor.aMutable;\nexport type CardState = typeof cardDescriptor.aState;\nexport type CardSlot = typeof cardSlotDescriptor.aMutable;\nexport type CardSlotState = typeof cardSlotDescriptor.aState;\nexport type BookSpreadTableOfContents = typeof bookSpreadTableOfContentsDescriptor.aMutable;\nexport type BookSpreadTableOfContentsState = typeof bookSpreadTableOfContentsDescriptor.aState;\nexport type BookSpreadRoom = typeof bookSpreadRoomDescriptor.aMutable;\nexport type BookSpreadRoomState = typeof bookSpreadRoomDescriptor.aState;\nexport type BookSpreadDeath = typeof bookSpreadDeathDescriptor.aMutable;\nexport type BookSpreadDeathState = typeof bookSpreadDeathDescriptor.aState;\nexport type BookSpread = typeof bookSpreadDescriptor.aMutable;\nexport type BookSpreadState = typeof bookSpreadDescriptor.aState;\nexport type EncounterBattle = typeof encounterBattleDescriptor.aMutable;\nexport type EncounterBattleState = typeof encounterBattleDescriptor.aState;\nexport type EncounterEvent = typeof encounterEventDescriptor.aMutable;\nexport type EncounterEventState = typeof encounterEventDescriptor.aState;\nexport type Encounter = typeof encounterDescriptor.aMutable;\nexport type EncounterState = typeof encounterDescriptor.aState;\nexport type Book = typeof bookDescriptor.aMutable;\nexport type BookState = typeof bookDescriptor.aState;\nexport type Deck = typeof deckDescriptor.aMutable;\nexport type DeckState = typeof deckDescriptor.aState;\nexport type Entity = typeof entityDescriptor.aMutable;\nexport type EntityState = typeof entityDescriptor.aState;\nexport type Game = typeof gameDescriptor.aMutable;\nexport type GameState = typeof gameDescriptor.aState;\n","import { TypeDescriptor } from \"./types\";\n\ntype ListState<\n  ElementTypeDescriptor extends TypeDescriptor,\n> = readonly ElementTypeDescriptor['aState'][];\n\ntype ListMutable<\n  ElementTypeDescriptor extends TypeDescriptor,\n> = readonly ElementTypeDescriptor['aMutable'][];\n\n\nclass ListTypeDescriptor<ElementTypeDescriptor extends TypeDescriptor>\n  implements TypeDescriptor<ListState<ElementTypeDescriptor>, ListMutable<ElementTypeDescriptor>> {\n\n  constructor(private readonly elementTypeDescriptor: ElementTypeDescriptor) { }\n\n  aState!: ListState<ElementTypeDescriptor>;\n\n  aMutable!: ListMutable<ElementTypeDescriptor>;\n\n  create(s: ListState<ElementTypeDescriptor>): ListMutable<ElementTypeDescriptor> {\n    return s.map(v => this.elementTypeDescriptor.create(v));\n  }\n\n  snapshot(m: ListMutable<ElementTypeDescriptor>): ListState<ElementTypeDescriptor> {\n    return m.map(v => this.elementTypeDescriptor.snapshot(v));\n  }\n\n  freeze(s: ListState<ElementTypeDescriptor>): ListState<ElementTypeDescriptor> {\n    return Object.freeze(s.map(v => this.elementTypeDescriptor.freeze(v)));\n  }\n}\n\nexport function listDescriptor<ElementTypeDescriptor extends TypeDescriptor,>(elementTypeDescriptor: ElementTypeDescriptor) {\n  return new ListTypeDescriptor(elementTypeDescriptor);\n}","import { TypeDescriptor } from \"./types\";\n\ntype Types = { [k: string]: TypeDescriptor };\n\ntype OneStateOf<C extends Types> = C[keyof C]['aState'];\ntype OneMutableOf<C extends Types> = C[keyof C]['aMutable'];\n\nclass DiscriminatingUnionTypeDescriptor<C extends Types> implements TypeDescriptor<OneStateOf<C>, OneMutableOf<C>> {\n  constructor(\n    private readonly cases: C,\n    private readonly discriminatorState: (s: OneStateOf<C>) => keyof C,\n    private readonly discriminatorMutable: (m: OneMutableOf<C>) => keyof C,\n  ) {\n  }\n\n  aState!: OneStateOf<C>;\n\n  aMutable!: OneMutableOf<C>;\n\n  create(s: OneStateOf<C>): OneMutableOf<C> {\n    const type = this.discriminatorState(s);\n    return this.cases[type].create(s);\n  }\n\n  snapshot(m: OneMutableOf<C>): OneStateOf<C> {\n    const type = this.discriminatorMutable(m);\n    return this.cases[type].snapshot(m);\n  }\n\n  freeze(s: OneStateOf<C>): OneMutableOf<C> {\n    const type = this.discriminatorState(s);\n    return this.cases[type].freeze(s);\n  }\n}\n\nexport function discriminatingUnionDescriptor<C extends Types>(\n  cases: C,\n  discriminatorState: (s: OneStateOf<C>) => keyof C,\n  discriminatorMutable: (m: OneMutableOf<C>) => keyof C,\n) {\n  return new DiscriminatingUnionTypeDescriptor(cases, discriminatorState, discriminatorMutable);\n}\n","import styles from './chrononomicon.module.scss';\n\nexport function ChrononomiconCoverComponent() {\n  return (\n    <div class={styles.container}>\n      <h1>Chrononomicon</h1>\n    </div>\n  );\n}",".container {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background-color: #123;\n  color: white;\n  text-align: center;\n}","import { ComponentManager } from \"components/component_manager\";\nimport { BookSpread } from \"model/domain\";\n\nexport const enum PageSide {\n  Left = 1,\n  Right,\n}\n\nexport interface PageController {\n\n  popup(): Promise<void>;\n\n  popdown(): Promise<void>;\n}\n\n\nexport class EmptyPageController implements PageController {\n  async popup() {\n\n  }\n\n  async popdown() {\n\n  }\n}\n\nexport type PageComponentManager = ComponentManager<BookSpread, PageController, { side: PageSide }>;\n","import { Card, CardSlot, Game } from \"model/domain\";\nimport { CardSlotComponent as CardSlotComponentImpl } from \"./card_slot\";\nimport { CardSlotsComponent } from \"./card_slots\";\nimport { Accessor, Component, For } from \"solid-js\";\nimport { ComponentManager } from \"components/component_manager\";\nimport { CardSlotController, cardSlotUIDescriptor } from \"./card_slot_controller\";\nimport { InteractionManager } from \"rules/interaction_manager\";\n\nexport function createCardSlots(\n  CardSlotComponent: Component<{ model: CardSlot }>,\n) {\n  const Component = (props : {\n    model: readonly CardSlot[],\n  }) => {\n    return (\n      <CardSlotsComponent\n          CardSlotComponent={CardSlotComponent}\n          cardSlots={props.model}/>\n    );\n  };\n  return {\n    Component,\n  };\n}\n\nexport function createCardSlotManager(\n    CardComponent: Component<{ model: Card }>,\n    interactionManager: Accessor<InteractionManager>,\n    game: Game,\n) {\n  function createCardSlot(cardSlot: CardSlot) {\n    const cardSlotUI = cardSlotUIDescriptor.create({\n      targetCardHidden: false,\n      forceUnrotate: false,\n    });\n    const controller = new CardSlotController(cardSlotUI);\n    function internalOnDragStart(x: number, y: number) {\n      interactionManager().startDrag(cardSlot, x, y);\n    } \n    function internalOnDrop() {\n      interactionManager().drop(cardSlot);\n    }\n    function internalOnClick() {\n      interactionManager().click(cardSlot);\n    }\n    \n    function Component() {\n      return (\n          <CardSlotComponentImpl\n              targetCard={cardSlot.targetCard\n                  && !cardSlotUI.targetCardHidden\n                  && <CardComponent\n                      model={cardSlot.targetCard}\n                  />\n              }\n              targetInteraction={interactionManager().allowedInteraction(cardSlot)}\n              onDragStart={internalOnDragStart}\n              onDrop={internalOnDrop}\n              onClick={internalOnClick}\n              bordered={game.playerHand.indexOf(cardSlot) >= 0}\n              used={cardSlot.targetCard == null && cardSlot.playedCards.length > 0}\n              forceUnrotate={cardSlotUI.forceUnrotate}\n          >\n            <For each={cardSlot.playedCards}>\n              {card => {\n                return <CardComponent model={card}/>\n              }}\n            </For>\n          </CardSlotComponentImpl>\n      );\n    }\n    return {\n      controller,\n      Component,\n    };\n  };\n  return new ComponentManager(createCardSlot);\n}\n","import { Interaction } from 'rules/interaction_manager';\nimport styles from './card_slot.module.scss';\nimport { For, JSX, ParentProps, children } from \"solid-js\";\n\nconst interactionStyles: Record<Interaction, string> = Object.freeze({\n  [Interaction.None]: styles.none,\n  [Interaction.Drag]: styles.draggable,\n  [Interaction.Activate]: styles.clickable,\n  [Interaction.Disabled]: styles.immovable,\n  [Interaction.NoDrop]: styles['no-drop'],\n  [Interaction.Drop]: styles.drop,\n  [Interaction.Dragging]: styles.dragging,\n  [Interaction.LongPress]: styles['long-press'],\n});\n\nexport function CardSlotComponent(props: ParentProps<{\n  targetCard: JSX.Element,\n  targetInteraction: Interaction,\n  bordered: boolean,\n  onDragStart: (x: number, y: number) => void,\n  onDrop: () => void,\n  onClick: () => void,\n  used: boolean,\n  forceUnrotate: boolean,\n}>) {\n  return (\n    <div\n        class={styles.container}\n        onPointerUp={props.onDrop}>\n      <div\n          classList={{ \n            [styles['target-card']]: true,\n            [interactionStyles[props.targetInteraction]]: true,\n            [styles.bordered]: props.bordered\n          }}\n          onPointerDown={e => props.onDragStart(e.pageX, e.pageY)}\n          onClick={props.onClick}>\n        {props.targetCard}\n      </div>\n      <div classList={{\n        [styles['played-cards']]: true,\n        [styles.used]: props.used,\n        [styles.unrotate]: props.forceUnrotate,\n      }}>\n        <For each={children(() => props.children).toArray()}>\n          {child => (\n            <div\n                classList={{\n                  [styles['played-card']]: true,\n                  [styles.used]: props.used,\n                }}\n            >{child}</div>\n          )}\n        </For>\n      </div>\n    </div>\n  );\n}\n","@use '../constants.module.scss';\n\n$usedAnimationDuration: 400ms;\n\n.container {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-items: start;\n  height: calc(constants.$cardHeight * 2.5);\n  gap: 2%;\n}\n\n.target-card {\n  width: constants.$cardWidth;\n  height: constants.$cardHeight;\n}\n\n.target-card.bordered {\n  border: .1vw solid #422;\n  border-radius: constants.$cardBorderRadius;\n}\n\n.target-card.none {\n  cursor: default;\n}\n\n.target-card.draggable {\n  cursor: grab;\n}\n\n.target-card.dragging {\n  cursor: grabbing;\n}\n\n.target-card.clickable {\n  cursor: pointer;\n}\n\n.target-card.immovable {\n  cursor: not-allowed;\n}\n\n.target-card.no-drop {\n  cursor: no-drop;\n}\n\n.target-card.drop {\n  cursor: pointer;\n}\n\n.target-card.long-press {\n  cursor: pointer;\n}\n\n.target-card.long-pressing {\n  cursor: grabbing;\n}\n\n.played-cards {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-items: start;\n  transform-origin: calc(constants.$cardWidth/2) calc(constants.$cardHeight/2);\n  transition: transform $usedAnimationDuration ease-in-out;\n}\n\n.played-cards.used {\n  transform: translateY(calc(constants.$cardHeight/-1)) rotateZ(90deg);\n}\n\n.played-cards.used.unrotate {\n  transform: translateY(calc(constants.$cardHeight/-1));\n}\n\n.played-card {\n  margin-bottom: calc(-.75 * constants.$cardHeight);\n  transition: margin-bottom $usedAnimationDuration ease-in-out;\n}\n\n.played-card.used {\n  margin-bottom: calc(-1 * constants.$cardHeight);\n}\n\n@for $i from 1 through 3 {\n  .played-card:nth-child(#{$i}) {\n    transform: translateZ(calc(#{$i}vw * 0.2));\n  }\n}\n\n\n","import { UnreachableError } from \"base/unreachable_error\";\nimport { CardController } from \"components/card/card_controller\";\nimport { ControllerManger } from \"components/component_manager\";\nimport { Card, CardFaceType, CardSlot, Game } from \"model/domain\";\nimport { batch } from \"solid-js\";\nimport { cardFace } from \"./cards\";\nimport { GameManager } from \"./game_manager\";\nimport { CardSlotController } from \"components/card_slot/card_slot_controller\";\nimport { delay } from \"base/delay\";\nimport { activeRecordDescriptor } from \"model/descriptor/record\";\nimport { LiteralTypeDescriptor, booleanDescriptor } from \"model/descriptor/literals\";\n\nexport const enum Interaction {\n  None = 1,\n  Activate,\n  Drag,\n  Dragging,\n  Drop,\n  NoDrop,\n  LongPress,\n  Disabled,\n}\n\ntype DragState = [Card, CardSlot] | undefined;\ntype MousePosition = [number, number] | undefined;\ntype LongPress = CardSlot | undefined;\n\nconst interactionUI = activeRecordDescriptor({\n  dragging: booleanDescriptor,\n  dragged: new LiteralTypeDescriptor<DragState>(),\n  mousePosition: new LiteralTypeDescriptor<MousePosition>(),\n  longPress: new LiteralTypeDescriptor<LongPress>(),\n});\n\ntype InteractionUI = typeof interactionUI.aMutable;\n\nexport class InteractionManager {\n  private ui: InteractionUI = interactionUI.create({\n    dragged: undefined,\n    dragging: false,\n    longPress: undefined,\n    mousePosition: undefined,\n  });\n  private lastAnimation: Promise<void> = Promise.resolve();\n\n  constructor(\n      private game: Game,\n      private gameManager: GameManager,\n      private cardManager: ControllerManger<Card, CardController>,\n      private cardSlotManager: ControllerManger<CardSlot, CardSlotController>,\n  ) {\n  }\n\n  get dragging() {\n    return this.ui.dragging;\n  }\n\n  set dragging(dragging: boolean) {\n    this.ui.dragging = dragging;\n  }\n\n  get lastMousePosition() {\n    return this.ui.mousePosition;\n  }\n\n  set lastMousePosition(mousePosition: MousePosition) {\n    this.ui.mousePosition = mousePosition;\n  }\n\n  get draggedCard() {\n    return this.ui.dragged?.[0];\n  }\n\n  allowedInteraction(\n    targetCardSlot: CardSlot | undefined,\n  ): Interaction {\n    const dragged = this.ui.dragged;\n    const targetCard = targetCardSlot?.targetCard;\n    if (dragged != null && targetCardSlot != null) {\n      const [_, draggedCardSlot] = dragged;\n      if (targetCardSlot == draggedCardSlot) {\n        return Interaction.Dragging;\n      }\n      if (targetCard != null && targetCardSlot.playedCards.length < 3) {\n        // can drop \n        return Interaction.Drop;\n      }\n      return Interaction.NoDrop;\n    }\n    if (targetCard == null) {\n      return Interaction.None;\n    }\n\n    const targetFace = cardFace(\n      targetCard,\n      !!this.cardManager.lookupController(targetCard)?.isPeeking()\n    );\n\n    if (this.game.book.cardSlots.indexOf(targetCardSlot!) >= 0 ) {\n      return Interaction.Activate;\n    }\n    \n    switch (targetFace.type) {\n      case CardFaceType.Choice:\n        return Interaction.Activate;\n      case CardFaceType.ChoiceBack:\n        return Interaction.Activate;\n      case CardFaceType.Resource:\n        return Interaction.Drag;\n      case CardFaceType.ResourceBack:\n        return Interaction.LongPress;\n      default:\n        throw new UnreachableError(targetFace);\n    }\n  }\n\n  click(cardSlot: CardSlot) {\n    return this.politelyAnimate(async () => {\n      return this.gameManager.chooseTargetCard(cardSlot);\n    });\n  }\n\n  startDrag(cardSlot: CardSlot, x: number, y: number) {\n    return this.politelyAnimate(async () => {\n      const interaction = this.allowedInteraction(cardSlot);\n      const targetCard = cardSlot.targetCard;\n      if (targetCard != null) {\n        const cardController = this.cardManager.lookupController(targetCard);\n        if (interaction === Interaction.Drag) {\n          batch(() => {\n            this.cardSlotManager.lookupController(cardSlot)?.setTargetCardHidden(true);\n            this.ui.dragged = [targetCard, cardSlot];\n            this.ui.mousePosition = [x, y];\n            this.ui.dragging = true;\n            cardController?.setWarning(true);\n          });  \n        } else if (interaction === Interaction.LongPress) {\n          if (this.ui.longPress == null) {\n            await cardController?.flipTemporarily(true);\n            this.ui.longPress = cardSlot;\n          }\n        }\n      }  \n    });\n  }\n\n  clearDrag() {\n    this.ui.dragging = false;\n    return this.politelyAnimate(async () => {\n      const dragged = this.ui.dragged;\n      if (dragged) {\n        const [draggedCard, draggedCardSlot] = dragged;\n        batch(() => {\n          draggedCardSlot.targetCard = draggedCard;\n          this.cardSlotManager.lookupController(draggedCardSlot)?.setTargetCardHidden(false);\n          this.cardManager.lookupController(draggedCard)?.setWarning(false);\n          this.ui.dragged = undefined;\n        });  \n      }\n      const longPress = this.ui.longPress;\n      if (longPress) {\n        const cardSlot = longPress;\n        this.ui.longPress = undefined;\n        if (cardSlot.targetCard) {\n          const cardController = this.cardManager.lookupController(cardSlot.targetCard);\n          await cardController?.flipTemporarily(false);\n        }            \n      }  \n    });\n  }\n\n  drop(targetCardSlot: CardSlot) {\n    return this.politelyAnimate(async () => {\n      const dragged = this.ui.dragged;\n      if (dragged) {\n        const [draggedCard, draggedCardSlot] = dragged;\n        const interaction = this.allowedInteraction(targetCardSlot);\n        if (draggedCardSlot != targetCardSlot && interaction == Interaction.Drop) {\n          // apply effects of dragged card\n          await this.gameManager.applyCardEffects(draggedCardSlot);\n\n          batch(() => {\n            targetCardSlot.playedCards = [...targetCardSlot.playedCards, draggedCard];\n            draggedCardSlot.targetCard = undefined;\n            this.ui.dragged = undefined;\n          });\n\n          await this.gameManager.normalizeBoard();\n        } else {\n          batch(() =>{\n            draggedCardSlot.targetCard = draggedCard;\n            this.ui.dragged = undefined;\n          });\n        }\n        this.cardSlotManager.lookupController(draggedCardSlot)?.setTargetCardHidden(false);\n        this.cardManager.lookupController(draggedCard)?.setWarning(false);\n      }\n    });\n  }\n\n  private politelyAnimate(action: () => Promise<void>): Promise<void> {\n    this.lastAnimation = this.lastAnimation\n        // prevent errors from breaking this permanently\n        .catch(e => console.warn(e))\n        .then(action)\n        // add a delay to ensure a render happens between state changes\n        .then(() => delay(0));\n    return this.lastAnimation;\n  }\n}\n\n","export class UnreachableError extends Error {\n  constructor(readonly value: never) {\n    super();\n  }\n}\n","import { Card, CardFace, CardFaceType, CardSlot, Effect, Game } from \"model/domain\";\nimport { allCardSlots } from \"./games\";\nimport { UnreachableError } from \"base/unreachable_error\";\nimport { ControllerManger } from \"components/component_manager\";\nimport { CardController } from \"components/card/card_controller\";\nimport { arrayRandomize } from \"base/arrays\";\n\nexport function cardFace(card: Card, peeking: boolean) {\n  const faces = card.faces; \n  return faces[(card.visibleFaceIndex + (peeking ? 1 : 0))%faces.length];\n}\n\nexport type EffectUsage = {\n  effect: Effect,\n  used: boolean,\n};\n\nexport type EffectUsages = {\n  cost: readonly EffectUsage[],\n  benefit: readonly EffectUsage[],\n};\n\nexport function calculateCardEffects(face: CardFace): {\n  cost: readonly Effect[],\n  benefit: readonly Effect[],\n} {\n  switch (face.type) {\n    case CardFaceType.Resource:\n      return {\n        cost: face.cost,\n        benefit: face.benefit,\n      };\n    case CardFaceType.Choice:\n      return {\n        cost: face.cost,\n        benefit: face.benefit,\n      };\n    case CardFaceType.ResourceBack:\n      return {\n        cost: face.cost,\n        benefit: [],\n      };\n    case CardFaceType.ChoiceBack:\n      return {\n        cost: face.cost,\n        benefit: [],\n      };\n    default: \n      throw new UnreachableError(face);\n  }\n}\n\nexport function cardSlotForCard(game: Game, card: Card) {\n  const cardSlots = allCardSlots(game);\n  return cardSlots.find(cardSlot => {\n    return cardSlot.targetCard === card\n        || cardSlot.playedCards.some(c => c === card);\n  });\n}\n\nexport function calculateCardEffectUsages(game: Game, card: Card, cardControllerManger: ControllerManger<Card, CardController> | undefined): EffectUsages {\n\n  const face = cardFace(card, !!cardControllerManger?.lookupController(card)?.isPeeking());\n  // find the slot\n  const cardSlot = cardSlotForCard(game, card);\n  const targetCard = cardSlot?.targetCard;\n\n  // if the card isn't in a slot return the values are unused\n  if (cardSlot == null || targetCard == null) {\n    const {\n      cost,\n      benefit\n    } = calculateCardEffects(face);\n  \n    return {\n      cost: cost.map(effect => ({\n        effect,\n        used: cardSlot != null,\n      })),\n      benefit: benefit.map(effect => ({\n        effect,\n        used: cardSlot != null,\n      })),\n    };\n  }\n\n  if (card === targetCard) {\n    // it's the target card\n    return calculateTargetCardEffectUsages(face, cardSlot, cardControllerManger);\n  } else {\n    // it's a played card\n    const targetFace = cardFace(targetCard, !!cardControllerManger?.lookupController(targetCard)?.isPeeking());\n    const { cost: targetCardCost } = calculateCardEffects(targetFace);\n    const remainingCosts = targetCardCost.reduce((acc, effect) => {\n      const count = acc.get(effect) || 0;\n      acc.set(effect, count + 1);\n      return acc;\n    }, new Map<Effect, number>);\n    // iterate through until we find our card\n    for(const playedCard of cardSlot.playedCards) {\n      const playedFace = cardFace(playedCard, false);\n      const { cost: playedCardCost, benefit: playedCardBenefit } = calculateCardEffects(playedFace);\n      const playedCardBenefitUsages = playedCardBenefit.map(effect => {\n        const remainingCost = remainingCosts.get(effect) || 0;\n        remainingCosts.set(effect, remainingCost - 1);\n        return {\n          effect,\n          used: remainingCost > 0,\n        };\n      });\n\n      if (playedCard === card) {\n        const playedCardCostUsages = playedCardCost.map(effect => ({\n          effect,\n          used: true,\n        }));\n        return {\n          cost: playedCardCostUsages,\n          benefit: playedCardBenefitUsages,\n        }\n      }\n    }\n  }\n  // should never happen\n  return {\n    cost: [],\n    benefit: [],\n  };\n}\n\nexport function calculateTargetCardEffectUsages(\n    targetCardFace: CardFace,\n    cardSlot: CardSlot,\n    cardControllerManger: ControllerManger<Card, CardController> | undefined,\n): EffectUsages {\n  const playedCardEffectTotals = calculatePlayedCardEffectTotals(\n      cardSlot, cardControllerManger\n  );\n  const { cost, benefit } = calculateCardEffects(targetCardFace);\n  const costUsages = cost.map<EffectUsage>(effect => {\n    const total = playedCardEffectTotals.get(effect) || 0;\n    playedCardEffectTotals.set(effect, total - 1);\n    return {\n      effect,\n      used: total > 0,\n    };\n  }) || [];\n  const benefitUsages = benefit.map(effect => ({\n    effect,\n    used: false,\n  }));\n  return {\n    cost: costUsages,\n    benefit: benefitUsages,\n  };\n}\n\nfunction calculatePlayedCardEffectTotals(cardSlot: CardSlot, cardControllerManger: ControllerManger<Card, CardController> | undefined): Map<Effect, number> {\n  return cardSlot.playedCards.reduce((acc, card) => {\n    const face = cardFace(card, !!cardControllerManger?.lookupController(card)?.isPeeking());\n    if (face.type === CardFaceType.Resource) {\n      return face.benefit.reduce((acc, effect) => {\n        const count = acc.get(effect) || 0;\n        acc.set(effect, count+1);\n        return acc;\n      }, acc);\n    }\n    return acc;\n  }, new Map<Effect, number>());\n}\n\nexport function sortCardsByRecycling(cards: readonly Card[]): readonly Card[] {\n  const randomizedCards = arrayRandomize(cards);\n  return [...randomizedCards].sort((c1, c2) => {\n    // reverse, decks are drawn from the back\n    return (c2.recyclePosition || 9) - (c1.recyclePosition || 9);\n  });\n}","import { BookSpreadType, CardSlot, Deck, EncounterBattle, EncounterEvent, EncounterType, Game } from \"model/domain\";\n\nexport function allCardSlots(game: Game): readonly CardSlot[] {\n  return [...game.playerHand, ...pageCardSlots(game)]\n}\n\nexport function pageCardSlots(game: Game): readonly CardSlot[] {\n  return game.book.cardSlots;\n}\n\nexport type DeckHolder = [() => Deck, (deck: Deck) => void];\n\nexport function pageDeck(game: Game): [() => Deck, (deck: Deck) => void, boolean] {\n  const spread = game.book.spread;\n  if (spread?.type === BookSpreadType.Room) {\n    const encounter = spread.encounter;\n    if (encounter?.type === EncounterType.Battle) {\n      const monster = encounter.monster;\n      return [\n        () => monster.deck,\n        deck => monster.deck = deck,\n        true,\n      ];\n    }\n    if (encounter?.type === EncounterType.Event) {\n      return [\n        () => encounter.deck,\n        deck => encounter.deck = deck,\n        true,\n      ];\n    }\n  }\n  // return the chapter deck\n  return [\n    () => game.book.chapter.deck,\n    deck => game.book.chapter.deck = deck,\n    false,\n  ];\n}\n\nexport function playerDeck(game: Game): DeckHolder | undefined {\n  const playerCharacter = game.playerCharacter;\n  return playerCharacter && [\n    () => playerCharacter.deck,\n    deck => playerCharacter.deck = deck,\n  ];\n}\n\nexport function gameEncounterBattle(game: Game): EncounterBattle | undefined {\n  const spread = game.book.spread;\n  if (spread?.type === BookSpreadType.Room) {\n    if (spread.encounter?.type === EncounterType.Battle) {\n      return spread.encounter;\n    }\n  }\n  return\n}\n\nexport function gameEncounterEvent(game: Game): EncounterEvent | undefined {\n  const spread = game.book.spread;\n  if (spread?.type === BookSpreadType.Room) {\n    if (spread.encounter?.type === EncounterType.Event) {\n      return spread.encounter;\n    }\n  }\n  return\n}\n","export function arrayRandomize<T>(a: readonly T[]): readonly T[] {\n  const mutable = [...a];\n  for (let i=0; i<mutable.length; i++) {\n    const [v] = mutable.splice(i, 1);\n    mutable.splice(Math.floor(Math.random() * mutable.length), 0, v);\n  }\n  return mutable;\n}","import { Component, For } from 'solid-js';\nimport styles from './card_slots.module.scss';\nimport { CardSlot } from 'model/domain';\n\nexport function CardSlotsComponent(props: {\n  cardSlots: readonly CardSlot[],\n  CardSlotComponent: Component<{ model: CardSlot }>,\n}) {\n  return (\n    <div class={styles.container}>\n      <For each={props.cardSlots}>\n        {cardSlot => (\n          <props.CardSlotComponent model={cardSlot}/>\n        )}\n      </For>\n    </div>\n  );\n}\n",".container {\n  display: flex;\n  justify-content: stretch;\n  width: 100%;\n  height: 100%;\n}","import { Component } from \"solid-js\"\n\nexport type ComponentAndController<ComponentProps, Controller> = {\n  controller: Controller,\n  Component: Component<ComponentProps>,\n};\n\nexport interface ControllerManger<Model extends object, Controller> {\n  lookupController(model: Model): Controller | undefined;\n}\n\nexport class ComponentManager<Model extends object, Controller, ComponentProps = {}>\n    implements ControllerManger<Model, Controller>{\n  private cache = new WeakMap<Model, ComponentAndController<ComponentProps, Controller>>();\n\n  readonly FactoryComponent = (props: { model: Model } & ComponentProps) => {\n    const Component = this.lookupOrCreateComponent(props.model);\n    return <Component {...props}/>;\n  };\n\n  constructor(\n    private readonly factory: (model: Model) => ComponentAndController<ComponentProps, Controller>\n  ) {}\n\n  private lookupOrCreate(model: Model): ComponentAndController<ComponentProps, Controller> {\n    let result = this.cache.get(model);\n    if (result == null) {\n      result = this.factory(model);\n      this.cache.set(model, result);\n    }\n    return result;\n  }\n\n  lookupOrCreateComponent(model: Model): Component<ComponentProps> {\n    return this.lookupOrCreate(model).Component;\n  }\n\n  lookupController(model: Model): Controller | undefined {\n    return this.cache.get(model)?.controller;\n  }\n}","import { booleanDescriptor } from \"model/descriptor/literals\";\nimport { activeRecordDescriptor } from \"model/descriptor/record\";\n\nexport const cardSlotUIDescriptor = activeRecordDescriptor({\n  targetCardHidden: booleanDescriptor,\n  forceUnrotate: booleanDescriptor,\n});\n\nexport type CardSlotUI = typeof cardSlotUIDescriptor.aMutable;\nexport type CardSlotUIState = typeof cardSlotUIDescriptor.aState;\n\nexport class CardSlotController {\n  constructor(private readonly cardSlotUI: CardSlotUI) {\n  }\n\n  setTargetCardHidden(hidden: boolean) {\n    this.cardSlotUI.targetCardHidden = hidden;\n  }\n\n  setForceUnrotate(forceUnrotate: boolean) {\n    this.cardSlotUI.forceUnrotate = forceUnrotate;\n  }\n}","import { Card, Game } from \"model/domain\";\nimport { Animations, CardController, FlipState, cardUIDescriptor } from \"./card_controller\";\nimport { AnimationManager } from \"ui/animation/animation_manager\";\nimport { CardComponent } from \"./card\";\nimport { CardFaceComponent } from \"./face/card_face\";\nimport { ComponentManager } from \"components/component_manager\";\nimport { createMemo } from \"solid-js\";\nimport { calculateCardEffectUsages, cardFace } from \"rules/cards\";\n\nexport function createCardManager(game: Game) {\n  function createCard(card: Card) {\n    const animations = new AnimationManager<Animations>();\n    const cardUI = cardUIDescriptor.create({\n      flipState: FlipState.Flat,\n      peeking: false,\n      warning: false,\n      offset: undefined,\n      elevated: false,\n    });\n\n    function Component() {\n\n      const usage = createMemo(() => {\n        return calculateCardEffectUsages(game, card, cardManager);\n      });\n  \n      return (\n        <CardComponent\n            flipState={cardUI.flipState}\n            elevated={\n                cardUI.peeking\n                    || cardUI.flipState === FlipState.FlippingUpToVertical\n                    || cardUI.elevated\n            }\n            animations={animations}\n            offset={cardUI.offset}>\n          <CardFaceComponent\n              face={cardFace(card, cardUI.peeking)}\n              cost={usage().cost}\n              benefit={usage().benefit}\n              warning={cardUI.warning}\n              choice={game.book.cardSlots.some(cardSlot => cardSlot.targetCard === card)}\n              recyclePosition={card.recyclePosition}\n          />\n        </CardComponent>\n      );\n    }\n  \n    const controller = new CardController(card, cardUI, animations);\n  \n    return {\n      Component,\n      controller,\n    };\n  };\n  const cardManager = new ComponentManager(createCard);\n  return cardManager;\n}\n","import { AnimationManager } from \"ui/animation/animation_manager\";\nimport { LiteralTypeDescriptor, booleanDescriptor } from \"model/descriptor/literals\";\nimport { activeRecordDescriptor } from \"model/descriptor/record\";\nimport { Card} from \"model/domain\";\nimport { optionalDescriptor } from \"model/descriptor/option\";\nimport { delay } from \"base/delay\";\n\nexport const enum FlipState {\n  Flat = 1,\n  FlippingUpToVertical,\n  FlippingDownFromVertical,\n}\n\nexport const Offset = -1;\n\nexport type Animations = FlipState | typeof Offset;\n\nexport const enum Easing {\n  Instant = 1,\n  Gentle,\n  Violent,\n}\n\nexport const cardUIDescriptor = activeRecordDescriptor({\n  flipState: new LiteralTypeDescriptor<FlipState>(),\n  peeking: booleanDescriptor,\n  warning: booleanDescriptor,\n  offset: optionalDescriptor(\n      new LiteralTypeDescriptor<{\n        dx: string,\n        dy: string,\n        dz: string,\n        easing: Easing,\n        additionalTransform?: string,\n      }>(),\n  ),\n  elevated: booleanDescriptor,\n});\n\nexport type CardUI = typeof cardUIDescriptor.aMutable;\nexport type CardUIState = typeof cardUIDescriptor.aState;\n\nexport class CardController {\n  constructor(\n    private readonly card: Card,\n    private readonly cardUI: CardUI,\n    private readonly animations: AnimationManager<Animations>,\n  ) {}\n\n  async flip(): Promise<void> {\n    await this.internalFlip(() => {\n      this.card.visibleFaceIndex = (this.card.visibleFaceIndex + 1) % this.card.faces.length;\n    })\n  }\n\n  async flipTemporarily(peeking: boolean): Promise<void> {\n    await this.internalFlip(() => {\n      this.cardUI.peeking = peeking;\n    });\n  }\n  \n  async flipUpToVertical(): Promise<void> {\n    this.cardUI.flipState = FlipState.FlippingUpToVertical;\n    await this.animations.waitForAnimation(FlipState.FlippingUpToVertical);\n  }\n\n  async flipDownFromVertical(): Promise<void> {\n    this.cardUI.flipState = FlipState.FlippingDownFromVertical;\n    await this.animations.waitForAnimation(FlipState.FlippingDownFromVertical);\n    this.cardUI.flipState = FlipState.Flat;\n  }\n\n  async moveTo(dx: string, dy: string, dz: string, easing: Easing) {\n    this.cardUI.offset = {\n      dx, dy, dz, easing,\n    };\n    await this.animations.waitForAnimation(Offset);\n    this.cardUI.offset = undefined;\n  }\n\n  async moveFrom(dx: string, dy: string, dz: string, easing: Easing, additionalTransform?: string) {\n    this.cardUI.offset = {\n      dx, dy, dz, easing: Easing.Instant, additionalTransform,\n    };\n    await delay(0);\n    this.cardUI.offset = {\n      dx: '0', dy: '0', dz: '0', easing: easing,\n    };\n    await this.animations.waitForAnimation(Offset);\n    this.cardUI.offset = undefined;\n  }\n\n  setElevated(elevated: boolean) {\n    this.cardUI.elevated = elevated;\n  }\n\n  setWarning(warning: boolean) {\n    this.cardUI.warning = warning;\n  }\n\n  isPeeking() {\n    return this.cardUI.peeking;\n  }\n\n  private async internalFlip(doFlip: () => void) {\n    await this.flipUpToVertical();\n    doFlip();\n    await this.flipDownFromVertical();\n  }\n}\n","import { Animations, Easing, FlipState, Offset } from \"./card_controller\";\nimport styles from './card.module.scss';\nimport { ParentProps, createSignal } from \"solid-js\";\nimport { AnimationManager } from \"ui/animation/animation_manager\";\n\nexport type CardProps = ParentProps<{\n  flipState: FlipState,\n  elevated: boolean,\n  animations: AnimationManager<Animations>,\n  offset: { dx: string, dy: string, dz: string, easing: Easing, additionalTransform?: string } | undefined,\n}>;\n\nexport function CardComponent(props: CardProps) {\n  const [cardRef, setCardRef] = createSignal<HTMLDivElement>();\n  const [cardRotateRef, setCardRotateRef] = createSignal<HTMLDivElement>();\n  return (\n    <div\n        classList={{\n          [styles.card]: true,\n          [styles.elevated]: props.elevated,\n        }}\n    >\n      <div \n          classList={{\n            [styles.translate]: true,\n            [styles.instant]: props.offset?.easing === Easing.Instant,\n            [styles.gentle]: props.offset?.easing === Easing.Gentle,\n            [styles.violent]: props.offset?.easing === Easing.Violent,\n          }}\n          style={props.offset && {\n            transform: \n                `translate3d(${props.offset.dx}, ${props.offset.dy}, ${props.offset.dz}) ${props.offset.additionalTransform ?? ''}`\n          }}\n          onTransitionEnd={props.animations.createTransitionEndEventListener(\n            cardRef,\n            () => Offset,\n          )}\n          ref={setCardRef}\n      >\n        <div\n            classList={{\n                [styles.rotate]: true,\n                [styles.flat]: props.flipState === FlipState.Flat,\n                [styles.flippingUpToVertical]: props.flipState === FlipState.FlippingUpToVertical,\n                [styles.flippingDownFromVertical]: props.flipState === FlipState.FlippingDownFromVertical,\n            }}\n            onTransitionEnd={props.animations.createTransitionEndEventListener(\n              cardRotateRef,\n              () => props.flipState,\n            )}\n            ref={setCardRotateRef}\n        >\n          <div classList={{\n              [styles.scale]: true,\n              [styles.flat]: props.flipState === FlipState.Flat,\n              [styles.flippingUpToVertical]: props.flipState === FlipState.FlippingUpToVertical,\n              [styles.flippingDownFromVertical]: props.flipState === FlipState.FlippingDownFromVertical,\n          }}>\n            {props.children}\n          </div>\n        </div>                \n      </div>\n    </div>\n  );\n}\n","@use 'components/constants.module.scss';\n\n$flipAnimationDuration: 200ms;\n$transitionAnimationDuration: 500ms;\n$transitionAnimationViolentDuration: 200ms;\n\n.card {\n  width: constants.$cardWidth;\n  height: constants.$cardHeight;\n  transform-origin: center;\n  transform: translateZ(0);\n  transition: transform $flipAnimationDuration ease-in-out;\n}\n\n.card.elevated {\n  transform: translateZ(calc(constants.$cardWidth/2));\n}\n\n.rotate {\n  transform: rotateY(0);\n  transition: none;\n}\n\n.translate {\n  transition-property: transform;\n  transition-timing-function: ease-out;\n  transition-duration: $transitionAnimationViolentDuration;\n  transform-origin: top left;\n}\n\n.translate.instant {\n  transition-property: none;\n  transition-duration: unset;\n}\n\n.translate.gentle {\n  transition-duration: $transitionAnimationDuration;\n  transition-timing-function: ease-in-out;\n}\n\n.translate.violent {\n  transition-timing-function: ease-in;\n}\n\n.rotate.flippingUpToVertical {\n  transform: rotateY(90deg);\n  transition: transform calc($flipAnimationDuration/2) ease-in;\n  transition-delay: $flipAnimationDuration;\n}\n\n.rotate.flippingDownFromVertical {\n  transform: rotateY(180deg);\n  transition: transform calc($flipAnimationDuration/2) ease-out;\n}\n\n.scale {\n  transition: none;\n}\n\n.scale.flat, .scale.flippingUpToVertical {\n  transform: scaleX(1);\n}\n\n.scale.flippingDownFromVertical {\n  transform: scaleX(-1);\n}\n\n.scale * {\n  transform-style: flat;\n}\n","import { CardBackgroundType, CardFace, CardFaceType, CardForegroundType, SymbolType } from \"model/domain\";\nimport styles from './card_face.module.scss';\nimport { EffectUsage } from \"rules/cards\";\nimport { EffectStripComponent } from \"components/effect/effect_strip\";\nimport { CardFaceDescriptionComponent } from \"./card_face_description\";\nimport { CardFaceNameComponent } from \"./card_face_name\";\nimport { SymbolComponent } from \"components/symbol/symbol\";\n\n\ntype CardFaceProps = {\n  face: CardFace\n  warning: boolean,\n  choice: boolean,\n  recyclePosition: number | undefined,\n};\n\nexport function CardFaceComponent(props: CardFaceProps & {\n  cost: readonly EffectUsage[],\n  benefit: readonly EffectUsage[],\n}) {\n  return (\n      <div classList={{\n        [styles.container]: true,\n        [styles.choice]: props.choice,\n        // backgrounds\n        [styles.background]: true,\n        [styles.clear]: props.face.background === CardBackgroundType.Clear,\n        [styles.crosshatched]: props.face.background === CardBackgroundType.Crosshatched,\n        [styles.door]: props.face.background === CardBackgroundType.Door,\n        [styles.passageway]: props.face.background === CardBackgroundType.Passageway,\n        [styles.forest]: props.face.background === CardBackgroundType.ForestPath,\n        [styles.darkened]: props.face.background === CardBackgroundType.DarkenedForestPath,\n        [styles.finesse]: props.face.symbol === SymbolType.Finesse,\n        [styles.force]: props.face.symbol === SymbolType.Force,\n        [styles.mind]: props.face.symbol === SymbolType.Mind,\n      }}>\n        {props.face.symbol != null && (\n            <div class={styles.symbol}>\n              <SymbolComponent\n                  type={props.face.symbol}\n                  fill=\"transparent\"\n                  stroke=\"white\"\n                  />\n            </div>\n        )}\n        <div classList={{\n          [styles['card-face']]: true,\n          // foregrounds\n          [styles.foreground]: props.face.foreground != null,\n          [styles.rat]: props.face.foreground === CardForegroundType.Rat,\n          [styles.trap]: props.face.foreground === CardForegroundType.Trap,\n          [styles.fountain]: props.face.foreground === CardForegroundType.Fountain,\n          [styles.tree]: props.face.foreground === CardForegroundType.MagicTree,\n          [styles.snail]: props.face.foreground === CardForegroundType.Snail,\n          [styles.troll]: props.face.foreground === CardForegroundType.Troll,\n          [styles.rooster]: props.face.foreground === CardForegroundType.Rooster,\n          [styles.mushroom]: props.face.foreground === CardForegroundType.Mushroom,\n        }}>\n          {props.face.type === CardFaceType.ChoiceBack\n              || props.face.type === CardFaceType.ResourceBack\n              ? <FlipArrow/>\n              : <EffectStripComponent usages={props.benefit} warnUnused={false}/>} \n          <CardFaceDescriptionComponent>\n            <CardFaceNameComponent name={props.face.name}/>\n          </CardFaceDescriptionComponent>\n          <EffectStripComponent usages={props.cost} warnUnused={props.warning}/>\n          {props.face.type === CardFaceType.Resource && props.recyclePosition != null && (\n            <div class={styles['recycle-position']}>\n              {props.recyclePosition}\n            </div>\n          )}\n        </div>\n      </div>\n  );\n}\n\nfunction FlipArrow() {\n  return (\n    <div class={styles.flip}>\n      <svg viewBox=\"0 0 200 100\">\n        <g>\n          <path d=\"M 10 70 A 120 120 0 0 1 180 70\"/>\n          <path d=\"M 180 50 L 180 70 L 160 70\"/>\n        </g>\n      </svg>\n    </div>\n  );\n}","@use 'components/constants.module.scss';\n\n$borderColor: #222;\n\n.container {\n  position: absolute;\n  width: constants.$cardWidth;\n  height: constants.$cardHeight;\n  border-radius: constants.$cardBorderRadius;\n  border-width: .2vh;\n  border-style: solid;\n  border-color: $borderColor;\n  box-sizing: border-box;\n  overflow: hidden;\n}\n\n.container.background.clear {\n  background-color: #444;\n}\n\n.container.background.clear.mind {\n  background-color: #335;\n}\n\n.container.background.clear.force {\n  background-color: #441;\n}\n\n.container.background.clear.finesse {\n  background-color: #242;\n}\n\n.container.background.door {\n  background-color: #533;\n}\n\n.container.background.crosshatched {\n  background-color: #112;\n}\n\n.container.background.passageway {\n  background-color: #353;\n}\n\n.container.background.forest {\n  background-color: #353;\n}\n\n.container.background.darkened {\n  background-color: #131;\n}\n\n.container.choice {\n  animation-name: choiceBorderFlash;\n  animation-duration: 1s;\n  animation-timing-function: ease-in-out;\n  animation-iteration-count: infinite;\n  animation-direction: alternate;\n}\n\n@keyframes choiceBorderFlash {\n  from {\n    border-color: #C88;\n  }\n\n  to {\n    border-color: #AAF;\n  }\n}\n\n.symbol {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 1vmin;\n  box-sizing: border-box;\n  opacity: .3;\n  stroke-width: .4vmin;\n}\n\n.card-face {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  color: white;\n  text-shadow: black 0 0 .5vmin;\n  padding: .5vmin 0;\n  box-sizing: border-box;\n}\n\n.card-face.foreground::before {\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  filter: grayscale(1);\n  opacity: .5;\n  position: absolute;\n  text-align: center;\n  vertical-align: middle;\n  font-size: calc(constants.$cardWidth/2);\n  line-height: constants.$cardHeight;\n}\n\n.card-face.foreground.rat::before {\n  content: '';\n}\n\n.card-face.foreground.trap::before {\n  content: '';\n}\n\n.card-face.foreground.fountain::before {\n  content: '';\n}\n\n.card-face.foreground.tree::before {\n  content: '';\n}\n\n.card-face.foreground.rooster::before {\n  content: '';\n}\n\n.card-face.foreground.troll::before {\n  content: '';\n}\n\n.card-face.foreground.snail::before {\n  content: '';\n}\n\n.card-face.foreground.mushroom::before {\n  content: '';\n}\n\n.flip {\n  width: 100%;\n  fill: none; \n  stroke: #fff;\n  stroke-width: 1vmin;\n  height: 2vmin;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.recycle-position {\n  position: absolute;\n  right: .5vmin;\n  bottom: 0;\n  box-sizing: border-box;\n  font-size: 1.5vmin;\n}","import styles from './effect_strip.module.scss';\nimport { For } from \"solid-js\";\nimport { EffectComponent } from \"./effect\";\nimport { EffectUsage } from \"rules/cards\";\n\nexport function EffectStripComponent(props: {\n  usages?: readonly EffectUsage[],\n  warnUnused: boolean,\n}) {\n  return (\n    <div class={styles.container}>\n      <For each={props.usages}>\n        {usage => (\n            <EffectComponent\n                effect={usage.effect}\n                used={usage.used}\n                warning={props.warnUnused}/>\n        )}\n      </For>\n    </div>\n  );\n}",".container {\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-evenly;\n  height: 2vmin;\n}","import { Effect, EffectDirection, SymbolType } from \"model/domain\";\nimport styles from './effect.module.scss';\nimport {\n  SymbolComponent,\n} from \"components/symbol/symbol\";\n\nconst resourceColors: Record<SymbolType, string> = {\n  [SymbolType.Force]: styles.fillForce,\n  [SymbolType.Finesse]: styles.fillFinesse,\n  [SymbolType.Mind]: styles.fillMind,\n  [SymbolType.Magic]: styles.fill,\n  [SymbolType.Damage]: styles.fillDamage,\n  [SymbolType.Age]: styles.fill,\n  [SymbolType.Perception]: styles.fill,\n  [SymbolType.Draw]: styles.fill,\n  [SymbolType.Poison]: styles.fill,\n  [SymbolType.Healing]: styles.fill,\n  [SymbolType.GainCards]: styles.fill,\n  [SymbolType.LoseCards]: styles.fill,\n  [SymbolType.GainMaxHealth]: styles.fill,\n  [SymbolType.LoseMaxHealth]: styles.fill,\n  [SymbolType.DoubleCard]: styles.fill,\n  [SymbolType.Duplicate]: styles.fill,\n};\n\nexport function EffectComponent(props: {\n  effect: Effect,\n  used: boolean,\n  warning: boolean,\n}) {\n  return (\n    <div classList={{\n      [styles.container]: true,\n      [styles.down]: props.effect.direction === EffectDirection.Down,\n      [styles.unused]: !props.used,\n      [styles.warning]: props.warning,\n    }}>\n      <SymbolComponent\n          type={props.effect.symbol}\n          fill={props.used ? styles.fill : resourceColors[props.effect.symbol]}\n          stroke={styles.stroke}/>\n    </div>\n  );\n}\n","@value stroke: #FFF;\n@value fill: transparent;\n@value fillForce: #AA3;\n@value fillFinesse: #4A4;\n@value fillDamage: #A44;\n@value fillMind: #55A;\n\n.container {\n  font-size: 2vmin;\n  text-align: center;\n  vertical-align: middle;\n  overflow: hidden;\n  width: 2vmin;\n  height: 2vmin;\n  opacity: 1;\n  stroke-width: .4vmin;\n}\n\n.container.down {\n  transform: scaleY(-1);\n  transform-origin: center;\n}\n\n.container.unused.warning {\n  animation-name: warningAnimation;\n  animation-duration: 500ms;\n  animation-timing-function: ease-in-out;\n  animation-iteration-count: infinite;\n  animation-direction: alternate;\n}\n\n@keyframes warningAnimation {\n  from {\n    opacity: 1;\n  }\n\n  to {\n    opacity: .5;\n  }\n}\n","import { SymbolType } from \"model/domain\";\nimport { SymbolDamageSVGComponent } from \"./damage.svg\";\nimport { SymbolFinesseSVGComponent } from \"./finesse.svg\";\nimport { SymbolForceSVGComponent } from \"./force.svg\";\nimport { SymbolMindSVGComponent } from \"./mind.svg\";\nimport { SymbolSVGComponent, SymbolProps } from \"./symbol.svg\";\nimport { Dynamic } from \"solid-js/web\";\nimport { Component } from \"solid-js\";\n\nexport function SymbolForceComponent(props: SymbolProps) {\n  return (\n    <SymbolSVGComponent fill={props.fill} stroke={props.stroke}>\n      <SymbolForceSVGComponent/>\n    </SymbolSVGComponent>\n  );\n}\n\nexport function SymbolFinesseComponent(props: SymbolProps) {\n  return (\n    <SymbolSVGComponent fill={props.fill} stroke={props.stroke}>\n      <SymbolFinesseSVGComponent/>\n    </SymbolSVGComponent>\n  )\n}\n\nexport function SymbolMindComponent(props: SymbolProps) {\n  return (\n    <SymbolSVGComponent fill={props.fill} stroke={props.stroke}>\n      <SymbolMindSVGComponent/>\n    </SymbolSVGComponent>\n  )\n}\n\nexport function SymbolDamageComponent(props: SymbolProps) {\n  return (\n    <SymbolSVGComponent fill={props.fill} stroke={props.stroke}>\n      <SymbolDamageSVGComponent/>\n    </SymbolSVGComponent>\n  )\n}\n\nconst symbolComponents: Record<SymbolType, Component<SymbolProps> | undefined> = {\n  [SymbolType.Force]: SymbolForceComponent,\n  [SymbolType.Finesse]: SymbolFinesseComponent,\n  [SymbolType.Mind]: SymbolMindComponent,\n  [SymbolType.Magic]: () => <>{'R'}</>,\n  [SymbolType.Damage]: SymbolDamageComponent,\n  [SymbolType.Age]: () => <>{''}</>,\n  [SymbolType.Perception]: () => <>{''}</>,\n  [SymbolType.Draw]: () => <>{'G'}</>,\n  [SymbolType.Poison]: () => <>{''}</>,\n  [SymbolType.Healing]: () => <>{''}</>,\n  [SymbolType.GainCards]: undefined,\n  [SymbolType.LoseCards]: undefined,\n  [SymbolType.GainMaxHealth]: () => <>{'+'}</>,\n  [SymbolType.LoseMaxHealth]: () => <>{'-'}</>,\n  [SymbolType.DoubleCard]: undefined,\n  [SymbolType.Duplicate]: undefined,\n};\n\n\nexport function SymbolComponent(props: SymbolProps & {\n  type: SymbolType,\n}) {\n  return (\n    <Dynamic\n        component={symbolComponents[props.type]}\n        {...props}\n        />\n  )\n}","export function SymbolDamageSVGComponent() {\n  return (\n      <g>\n        <path\n            d=\"M 50 10 L 90 50 L 90 90 L 10 90 L 10 50 z\"/>\n        <path\n            d=\"M 50 80 L 50 30\"/>\n        <path\n            d=\"M 40 70 L 60 70\"/>\n\n      </g>\n  );\n}\n","import styles from'./finesse.svg.module.scss';\n\nexport function SymbolFinesseSVGComponent() {\n  return (\n      <rect class={styles.rect}/>\n    );\n}\n","$rectWidth: 60%;\n$rectHeight: 60%;\n\n.rect {\n  width: $rectWidth;\n  height: $rectHeight;\n  x: calc((100% - $rectWidth)/2);\n  y: calc((100% - $rectHeight)/2);\n  transform: rotate(45deg);\n  transform-origin: center;\n}\n","import styles from'./force.svg.module.scss';\n\nexport function SymbolForceSVGComponent() {\n  return (\n      <rect class={styles.rect}/>\n    );\n}\n","@use './symbol.module.scss';\n\n$rectWidth: 70%;\n$rectHeight: 70%;\n\n.rect {\n  width: $rectWidth;\n  height: $rectHeight;\n  x: calc((100% - $rectWidth)/2);\n  y: calc((100% - $rectHeight)/2);\n  rx: 10%;\n  ry: 10%;\n  // transform: rotate(45deg);\n  transform-origin: center;\n}\n","import styles from'./mind.svg.module.scss';\n\nexport function SymbolMindSVGComponent() {\n  return (\n      <circle class={styles.circle}/>\n    );\n}\n",".circle {\n  r: 35%;\n  cx: 50%;\n  cy: 50%;\n}\n","import { ParentProps } from \"solid-js\";\n\nimport styles from './symbol.module.scss';\n\nexport type SymbolProps = {\n  fill: string,\n  stroke: string,\n};\n\nexport function SymbolSVGComponent(props: ParentProps<SymbolProps>) {\n  return (\n    <svg\n        viewBox=\"0 0 100 100\"\n        class={styles.svg}\n        style={{\n          fill: props.fill,\n          stroke: props.stroke,\n        }}>\n      {props.children}\n    </svg>\n  );\n}","$symbolWidth: 100%;\n$symbolHeight: 100%;\n\n.svg {\n  width: $symbolWidth;\n  height: $symbolHeight;\n}\n","import { ParentProps } from \"solid-js\";\nimport styles from './card_face_description.module.scss';\n\nexport function CardFaceDescriptionComponent(props: ParentProps) {\n  return (\n    <div class={styles.container}>\n      {props.children}\n    </div>\n  );\n}",".container {\n  flex: 1;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n}\n\n","import styles from './card_face_name.module.scss';\n\nexport function CardFaceNameComponent(props: {\n  name: string,\n}) {\n  return (<div class={styles.container}>{props.name}</div>);\n}","@use 'components/constants.module.scss';\n\n.container {\n  font-size: calc(constants.$cardHeight/7);\n  text-align: center;\n  vertical-align: middle;\n  font-weight: bold;\n  text-transform: capitalize;\n}\n","import { BookSpread, BookSpreadType, Game } from \"model/domain\";\nimport { ComponentManager } from \"components/component_manager\";\nimport { NavigationTarget } from \"components/navigation_target\";\nimport { createToCPage } from \"./toc/create\";\nimport { UnreachableError } from \"base/unreachable_error\";\nimport { PageComponentManager, PageController, PageSide } from \"./page_controller\";\nimport { createRoomPage } from \"./room/create\";\nimport { createDeathPage } from \"./death/create\";\n\nexport function createPageManager(\n    navigation: (to: NavigationTarget) => void,\n    game: Game,\n): PageComponentManager {\n  function createPage(spread: BookSpread) {\n    switch (spread.type) {\n      case BookSpreadType.TableOfContents:\n        return createToCPage(spread, navigation);\n      case BookSpreadType.Room:\n        return createRoomPage(spread, game);\n      case BookSpreadType.Death:\n        return createDeathPage(spread, navigation);\n      default:\n        throw new UnreachableError(spread);\n    }\n  }\n  return new ComponentManager<BookSpread, PageController, { side: PageSide }>(\n    createPage\n  );\n}\n","import { BookSpreadTableOfContents } from \"model/domain\";\nimport { EmptyPageController, PageSide } from \"../page_controller\";\nimport { NavigationTarget } from \"components/navigation_target\";\nimport { ToCPageComponent } from \"./toc_page\";\n\nexport function createToCPage(\n    spread: BookSpreadTableOfContents,\n    navigation: (to: NavigationTarget) => void,\n) {\n  const controller = new EmptyPageController();\n  function Component(props: { side: PageSide }) {\n    return (\n        <ToCPageComponent\n            navigation={navigation}\n            side={props.side}\n            spread={spread}/>\n    );\n  }\n  return {\n    controller,\n    Component,\n  };\n}","import { BookSpreadTableOfContents } from \"model/domain\";\nimport { PageProps } from \"../page\";\nimport { PageSide } from \"../page_controller\";\nimport { Component } from \"solid-js\";\nimport { PageBlankComponent } from \"../blank/page_blank\";\nimport { Dynamic } from \"solid-js/web\";\nimport styles from './page_toc.module.scss';\nimport { NavigationTargetType } from \"components/navigation_target\";\n\ntype PageToCProps = PageProps<BookSpreadTableOfContents>;\n\nfunction ToCEntryComponent(props: PageToCProps & {\n  targetChapter: number,\n  name: string,\n}) {\n  return (\n    <li classList={{\n      [styles.disabled]: props.spread.unlockedChapters < props.targetChapter\n    }}>\n      <a href=\"#\" onClick={() => props.navigation({\n        type: NavigationTargetType.Chapter,\n        chapterIndex: props.targetChapter,\n      })}>{props.name}</a>\n    </li>\n  );\n}\n\nfunction ToCPageRightComponent(props: PageToCProps) {\n  return (\n    <div class={styles.toc}>\n      <h2>\n        Table of Contents\n      </h2>\n      <ol>\n        <ToCEntryComponent targetChapter={0} name=\"Prologue\" {...props}/>\n        <ToCEntryComponent targetChapter={1} name=\"The Road\" {...props}/>\n        <ToCEntryComponent targetChapter={2} name=\"The Ruins\" {...props}/>\n        <ToCEntryComponent targetChapter={3} name=\"The Tower\" {...props}/>\n      </ol>\n    </div >  \n  );\n}\n\nconst sideComponents: { [K in PageSide]: Component<PageToCProps>} = {\n  [PageSide.Left]:PageBlankComponent,\n  [PageSide.Right]: function (props: PageToCProps) {\n    return <ToCPageRightComponent\n        side={props.side}\n        spread={props.spread}\n        navigation={props.navigation}/>\n  },\n}\n\n\nexport function ToCPageComponent(props: PageToCProps) {\n  return (\n    <Dynamic\n      component={sideComponents[props.side]}\n      side={props.side}\n      spread={props.spread}\n      navigation={props.navigation}\n    />\n  );\n}\n\n/*\n      <p>\n        Once upon a time there was a poor, old man who heard of a great and terrible book.\n      </p>\n      <p>\n        It was said just reading this book could make you rich, young, and powerful.\n      </p>\n      <p>\n        It could also kill you.\n      </p>\n      <p>\n        (turn page?)\n      </p>\n*/\n","export function PageBlankComponent() {\n  return null;\n}",".toc {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  padding: 2vmin 4vmin;\n  box-sizing: border-box;\n  font-size: 4vmin;\n  pointer-events: all;\n}\n\nh2 {\n  text-align: center;\n  width: 100%;\n}\n\n.toc a {\n  text-decoration: none;\n  color: inherit;\n}\n\n.toc a:hover::after {\n  content: '';\n  padding-left: 1vmin;\n}\n\n.toc ol {\n  list-style-type: none;\n  padding-left: 0;\n}\n\n.toc li.disabled {\n  pointer-events: none;\n  color: #AAA;\n}\n\n\n","export const enum NavigationTargetType {\n  ToC = 1,\n  Chapter,\n  Death\n}\n\ntype NavigationTargetToC = {\n  type: NavigationTargetType.ToC,\n};\n\ntype NavigationTargetChapter = {\n  type: NavigationTargetType.Chapter,\n  chapterIndex: number,\n};\n\ntype NavigationTargetDeath = {\n  type: NavigationTargetType.Death,\n};\n\nexport type NavigationTarget =\n    | NavigationTargetToC\n    | NavigationTargetChapter\n    | NavigationTargetDeath;","import { BookSpreadRoom, ChapterType, Game } from \"model/domain\";\nimport { RoomPageController, RoomPageUI } from \"./room_page_controller\";\nimport { RoomPageComponent } from \"./room_page\";\nimport { PageSide } from \"../page_controller\";\nimport { createRigidScenery } from \"components/scenery/rigid/create\";\n\nimport constants from '../../constants.module.scss';\nimport { exists } from \"base/exists\";\nimport { createUnicodeScenery } from \"components/scenery/unicode/create\";\nimport { UnreachableError } from \"base/unreachable_error\";\n\nconst pageWidth = parseInt(constants.pageWidth);\nconst pageHeight = parseInt(constants.pageHeight);\n\nfunction getEmojis(chapterType: ChapterType) {\n  switch (chapterType) {\n    case ChapterType.Prelude:\n      return ['', '', ''];\n    case ChapterType.Forest:\n      return [''];\n    case ChapterType.Ruins:\n      return ['', '', ''];\n    case ChapterType.Tower:\n      return ['x'];\n    default:\n      throw new UnreachableError(chapterType);\n  }\n}\n\nfunction createScenery(spread: BookSpreadRoom, game: Game) {\n  const cx = pageWidth;\n  const cy = pageHeight;\n  const r = spread.encounter != null ? pageWidth : 0; \n\n  const trees = Math.floor(Math.random() * 20) + 20;\n\n  const emojis = getEmojis(game.book.chapter.type);\n\n  // TODO make this into a factory\n  return new Array(trees).fill(0).map(() => {\n    const fontSize = Math.random() * pageHeight/8 + pageHeight/16;\n    const emoji = emojis[Math.floor(Math.random() * emojis.length)];\n    const {\n      Component,\n      controller,\n    } = createRigidScenery(\n        createUnicodeScenery(emoji, fontSize),\n        Math.random() > .5,\n    );\n    const [width, height] = controller.dimensions;\n    const x = Math.random() * (pageWidth * 2 - width);\n    const y = Math.random() * (pageHeight * .8 - height);\n    const dx = x - cx;\n    const dy = y - cy;\n    if (dx * dx + dy * dy < r * r) {\n      return;\n    }\n    const popupDelayMillis = (pageHeight - y) * 30;\n    return {\n      Component,\n      controller,\n      popupDelayMillis,\n      x,\n      y,\n    };\n  }).filter(exists);\n}\n\nexport function createRoomPage(\n  spread: BookSpreadRoom,\n  game: Game,\n) {\n  const scenery = createScenery(spread, game);\n  const ui: RoomPageUI = {\n    scenery,\n  };\n  const controller = new RoomPageController(ui);\n  function Component(props: { side: PageSide }) {\n    return (\n        <RoomPageComponent scenery={ui.scenery} side={props.side}/>\n    );\n  }\n  return {\n    controller,\n    Component,\n  };\n}","import { PageController } from \"../page_controller\";\nimport { SceneryController } from \"components/scenery/scenery_controller\";\nimport { delay } from \"base/delay\";\nimport { maxBy, minBy } from 'base/max_by';\nimport { Component } from \"solid-js\";\n\nexport type Scenery = {\n  Component: Component<{ x: string }>,\n  controller: SceneryController,\n  x: number,\n  y: number,\n  popupDelayMillis: number,\n}\n\nexport type RoomPageUI = {\n  scenery: readonly Scenery[];\n};\n\nexport class RoomPageController implements PageController {\n  constructor(private readonly ui: RoomPageUI) {\n\n  }\n\n\n  async popup(): Promise<void> {\n    const minPopupDelay = minBy(this.ui.scenery, s => s.popupDelayMillis) || 0;\n    await Promise.all(\n        this.ui.scenery.map(async scenery => {\n          await delay(scenery.popupDelayMillis - minPopupDelay);\n          await scenery.controller.popup();\n        }),\n    );\n  }\n\n  async popdown(): Promise<void> {\n    const maxPopupDelay = maxBy(this.ui.scenery, s => s.popupDelayMillis) || 0;\n    await Promise.all(\n        this.ui.scenery.map(async scenery => {\n          await delay(maxPopupDelay - scenery.popupDelayMillis);\n          await scenery.controller.popdown();\n        }),\n    );\n  }\n}","export function maxBy<T>(a: readonly T[], f: (t: T) => number) {\n  const v = a.reduce<[T, number] | undefined>((acc, t) => {\n    const v = f(t);\n    if (acc == null || v > acc[1]) {\n      return [t, v];\n    }\n    return acc;\n  }, undefined);\n\n  return v?.[1];\n}\n\nexport function minBy<T>(a: readonly T[], f: (t: T) => number) {\n  const v = a.reduce<[T, number] | undefined>((acc, t) => {\n    const v = f(t);\n    if (acc == null || v < acc[1]) {\n      return [t, v];\n    }\n    return acc;\n  }, undefined);\n\n  return v?.[1];\n}","import styles from './room_page.module.scss';\nimport { For } from \"solid-js\";\nimport { PageSide } from \"../page_controller\";\nimport { Scenery } from \"./room_page_controller\";\nimport constants from '../../constants.module.scss';\n\nconst pageWidth = parseInt(constants.pageWidth);\n\nexport function RoomPageComponent(props: {\n  scenery: readonly Scenery[],\n  side: PageSide,\n}) {\n  return (\n    <div classList={{\n      [styles.room]: true,\n    }}>\n      <For each={props.scenery}>\n        {scenery => (\n          <div\n              class={styles.scenery}\n              style={{\n                top: `${scenery.y}vmin`,\n                transform: `translateZ(${scenery.y/1000}vmin)`,\n              }}>\n            <scenery.Component\n                x={`${scenery.x - (props.side === PageSide.Left ? 0 : pageWidth)}vmin`}\n            />\n          </div>\n        )}\n      </For>\n    </div>\n  );\n}\n",".room {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n\n.scenery {\n  position: absolute;\n  width: 100%;\n}\n","@value cardWidth: 9;\n$cardWidth: calc(cardWidth * 1vmin);\n@value cardHeight: 12;\n$cardHeight: calc(cardHeight * 1vmin);\n$cardBorderRadius: calc($cardWidth * .1);\n\n@value pageWidth: 50;\n$pageWidth: calc(pageWidth * 1vmin);\n@value pageHeight: 70;\n$pageHeight: calc(pageHeight * 1vmin);\n\n$tableTiltAngle: 60deg;\n$tableTiltCorrectionAngle: -80deg;\n$popupDuration: 200ms;\n$popupTimingFunction: cubic-bezier(.47,1.64,.41,.8);\n$popdownDuration: 150ms;\n$popdownTimingFunction: ease-in;\n","import { AnimationManager } from \"ui/animation/animation_manager\";\nimport { Animations, RigidSceneryController, rigidSceneryUI } from \"./rigid_scenery_controller\";\nimport { RigidSceneryComponent } from \"./rigid_scenery\";\nimport { ComponentAndController } from \"components/component_manager\";\nimport { SceneryController } from \"../scenery_controller\";\n\nexport function createRigidScenery(\n    proxied: ComponentAndController<{}, SceneryController>,\n    flipX: boolean,\n) {\n  const ui = rigidSceneryUI.create({\n    up: false,\n  });\n  const animations = new AnimationManager<Animations>;\n  const controller = new RigidSceneryController(animations, ui, proxied.controller);\n  function Component(props: { x: string }) {\n    return (\n        <RigidSceneryComponent\n            animations={animations}\n            up={ui.up}\n            x={props.x}\n            flipX={flipX}>\n          <proxied.Component/>\n        </RigidSceneryComponent>\n    );\n  }\n  return {\n    controller,\n    Component,\n  }\n}","import { AnimationManager } from \"ui/animation/animation_manager\";\nimport { SceneryController } from \"../scenery_controller\";\nimport { activeRecordDescriptor } from \"model/descriptor/record\";\nimport { booleanDescriptor } from \"model/descriptor/literals\";\n\nexport const enum Animations {\n  Popped = 1,\n};\n\nexport const rigidSceneryUI = activeRecordDescriptor({\n  up: booleanDescriptor,\n});\n\nexport type RigidSceneryUI = typeof rigidSceneryUI.aMutable;\n\nexport class RigidSceneryController implements SceneryController {\n  constructor(\n    private readonly animations: AnimationManager<Animations>,\n    private readonly ui: RigidSceneryUI,\n    private readonly controller: SceneryController,\n  ) {\n\n  }\n\n  async popup(): Promise<void> {\n    if (!this.ui.up) {\n      this.ui.up = true;\n      await this.animations.waitForAnimation(Animations.Popped);\n    }\n  }\n\n  async popdown(): Promise<void> {\n    if (this.ui.up) {\n      this.ui.up = false;\n      await this.animations.waitForAnimation(Animations.Popped);  \n    }\n  }\n\n  get dimensions(): readonly [number, number] {\n    return this.controller.dimensions;\n  }\n}","import { ParentProps, createSignal } from \"solid-js\";\nimport styles from './rigid_scenery.module.scss';\nimport { AnimationManager } from \"ui/animation/animation_manager\";\nimport { Animations } from \"./rigid_scenery_controller\";\n\nexport function RigidSceneryComponent(props: ParentProps<{\n  up: boolean,\n  animations: AnimationManager<Animations>,\n  x: string,\n  flipX: boolean,\n}>) {\n  const [ref, setRef] = createSignal<HTMLDivElement>();\n  return (\n    <div\n        ref={setRef}\n        classList={{\n          [styles.scenery]: true,\n          [styles.down]: !props.up,\n          [styles.up]: props.up,\n        }}\n        onTransitionEnd={props.animations.createTransitionEndEventListener(ref, () => Animations.Popped)}>\n      <div\n          style={{\n            'margin-left': props.x,\n          }}\n      >\n        <div \n            classList={{\n            [styles.flip]: props.flipX,\n        }}>\n          {props.children}\n        </div>\n      </div>\n    </div>\n  )\n}","@use 'components/constants.module.scss';\n\n.scenery {\n  width: 100%;\n  transform-origin: bottom;\n  transform: rotateX(0);\n  transition-property: transform;\n  overflow: hidden;\n}\n\n.scenery.up {\n  transform: rotateX(constants.$tableTiltCorrectionAngle);\n  transition-duration: constants.$popupDuration;\n  transition-timing-function: constants.$popupTimingFunction;\n}\n\n.scenery.down {\n  transform: rotateX(0);\n  transition-duration: constants.$popdownDuration;\n  transition-timing-function: constants.$popdownTimingFunction;\n}\n\n.flip {\n  display: inline-block;\n  transform: scaleX(-1);\n  transform-origin: center;\n}","export function exists<T>(t: T | undefined): t is T {\n  return t != null;\n}","import { UnicodeSceneryComponent } from \"./unicode_scenery\";\nimport { UnicodeSceneryController } from \"./unicode_scenery_controller\";\n\nexport function createUnicodeScenery(unicode: string, fontSizeVmin: number) {\n  const controller = new UnicodeSceneryController([fontSizeVmin, fontSizeVmin]);\n  function Component() {\n    return <UnicodeSceneryComponent\n        fontSize={`${fontSizeVmin}vmin`}\n        unicode={unicode}/>\n  }\n  return {\n    Component,\n    controller,\n  };\n}","export function UnicodeSceneryComponent(props: {\n  unicode: string,\n  fontSize: string,\n}) {\n  return (\n    <div style={{ 'font-size': props.fontSize }}>\n      {props.unicode}\n    </div>\n  );\n}","import { SceneryController } from \"../scenery_controller\";\n\nexport class UnicodeSceneryController implements SceneryController {\n  constructor(readonly dimensions: readonly [number, number]) {}\n\n  async popup(): Promise<void> {\n    \n  }\n\n  async popdown(): Promise<void> {\n    \n  }\n}\n","import { BookSpreadDeath } from \"model/domain\";\nimport { EmptyPageController, PageSide } from \"../page_controller\";\nimport { NavigationTarget } from \"components/navigation_target\";\nimport { DeathPageComponent } from \"./death_page\";\n\nexport function createDeathPage(\n  spread: BookSpreadDeath,\n  navigation: (to: NavigationTarget) => void,\n) {\n  const controller = new EmptyPageController();\n  function Component(props: { side: PageSide }) {\n    return (\n      <DeathPageComponent\n          side={props.side}\n          navigation={navigation}\n          spread={spread}\n          />\n    );\n  }\n  return {\n    controller,\n    Component,\n  };\n}\n","import { Dynamic } from \"solid-js/web\";\nimport { PageProps } from \"../page\";\nimport { BookSpreadDeath } from \"model/domain\";\nimport { NavigationTarget, NavigationTargetType } from \"components/navigation_target\";\nimport { PageSide } from \"../page_controller\";\nimport { Component } from \"solid-js\";\nimport styles from './death_page.module.scss';\n\nfunction DeathPageLeftComponent() {\n  // TODO death image\n  return null;\n}\n\nfunction DeathPageRightComponent(props: {\n  navigation: (to: NavigationTarget) => void,\n}) {\n  return (\n    <div\n        class={styles.container}\n        onClick={() => props.navigation({\n          type: NavigationTargetType.ToC,\n        })}>\n      <h2>You have fallen.</h2>\n    </div>\n  );\n}\n\nconst sideComponents: { [K in PageSide]: Component<PageProps<BookSpreadDeath>>} = {\n  [PageSide.Left]: function () {\n    return <DeathPageLeftComponent/>\n  },\n  [PageSide.Right]: function (props: PageProps<BookSpreadDeath>) {\n    return <DeathPageRightComponent navigation={props.navigation}/>\n  },\n}\n\nexport function DeathPageComponent(props: PageProps<BookSpreadDeath>) {\n  return (\n    <Dynamic\n      component={sideComponents[props.side]}\n      side={props.side}\n      spread={props.spread}\n      navigation={props.navigation}\n    />\n  );\n\n}\n",".container {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n  pointer-events: all;\n}","import { gameDescriptor } from \"model/domain\";\nimport { chapter } from './chapters/ruins/chapter';\n\nexport const initialGame = gameDescriptor.create({\n  book: {\n    spread: undefined,\n    chapter,\n    cardSlots: new Array(3).fill(0).map(() => ({\n      targetCard: undefined,\n      playedCards: [],\n    })),\n  },\n  playerCharacter: undefined,\n  playerHand: new Array(6).fill(0).map(() => ({\n    targetCard: undefined,\n    playedCards: [],\n  })),\n});\n","import { ChapterType, chapterDescriptor } from \"model/domain\";\nimport { cards, finalCard } from \"./cards\";\n\nexport const chapter = chapterDescriptor.freeze({\n  type: ChapterType.Ruins,\n  deck: [\n    ...cards,\n  ],\n  finalCard,\n  pagesRemaining: 10,\n});","import { DamageDown, DamageUp, Finesse, Perception } from \"data/effects\";\nimport { cardFrontShrine } from \"data/events/shrine/cards\";\nimport {\n  CardBackgroundType,\n  CardFaceType,\n  RecycleTarget,\n  ChoiceType,\n  EncounterType,\n  MonsterType,\n  EventType,\n  CardState,\n  CardForegroundType,\n  CardBackChoice,\n  CardFrontChoice,\n  CardDefinition,\n  cardDescriptor,\n} from \"model/domain\";\n\nconst cardBackJammedDoor: CardBackChoice = {\n  name: 'jammed door',\n  description: 'Grudgingly, the door opens.',\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.Door,\n  foreground: undefined,\n  symbol: undefined,\n  cost: [DamageUp],\n};\nconst cardBackLockedDoor: CardBackChoice = {\n  name: 'locked door',\n  description: 'You manage to pick the crude lock.',\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.Door,\n  foreground: undefined,\n  symbol: undefined,\n  cost: [Finesse],\n};\nconst cardBackDarkDoorway: CardBackChoice = {\n  name: 'dark doorway',\n  description: 'Light floods the passageway.',\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.Door,\n  foreground: undefined,\n  symbol: undefined,\n  cost: [Perception],\n};\nconst cardBackDoor: CardBackChoice = {\n  name: 'door',\n  description: undefined,\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.Door,\n  foreground: undefined,\n  symbol: undefined,\n  cost: [],\n};\nconst cardFrontEmpty: CardFrontChoice = {\n  name: 'empty passage',\n  description: 'A crumbling walkway.',\n  type: CardFaceType.Choice,\n  background: CardBackgroundType.Passageway,\n  foreground: undefined,\n  symbol: undefined,\n  choice: {\n    type: ChoiceType.NextPage,\n    encounter: undefined,\n  },\n  cost: [],\n  benefit: [],\n};\nconst cardFrontRat: CardFrontChoice = {\n  name: 'rodent of unusual size',\n  description: 'The creature hisses at you belligerently.',\n  type: CardFaceType.Choice,\n  background: CardBackgroundType.Passageway,\n  foreground: CardForegroundType.Rat,\n  symbol: undefined,\n  choice: {\n    type: ChoiceType.NextPage,\n    encounter: {\n      type: EncounterType.Battle,\n      monster: MonsterType.BigRat,\n    },\n  },\n  cost: [],\n  benefit: [],\n};\nconst cardFrontTrapped: CardFrontChoice = {\n  name: 'trapped hallway',\n  description: 'An arrow flies out of a hidden recess.',\n  type: CardFaceType.Choice,\n  background: CardBackgroundType.Passageway,\n  foreground: CardForegroundType.Trap,\n  symbol: undefined,\n  choice: {\n    type: ChoiceType.NextPage,\n    encounter: undefined,\n  },\n  cost: [DamageDown],\n  benefit: [],\n};\nconst cardFrontFountain: CardFrontChoice = {\n  name: 'fountain',\n  description: 'You are drawn to the sound of bubbling water. A pristine fountain stands amongst the ruins.',\n  type: CardFaceType.Choice,\n  background: CardBackgroundType.Passageway,\n  foreground: CardForegroundType.Fountain,\n  symbol: undefined,\n  choice: {\n    type: ChoiceType.NextPage,\n    encounter: {\n      type: EncounterType.Event,\n      event: EventType.Fountain,\n    },\n  },\n  cost: [],\n  benefit: [],\n};\nconst cardFrontTreasure: CardFrontChoice = {\n  name: 'treasure',\n  description: 'The glint of gold.',\n  type: CardFaceType.Choice,\n  background: CardBackgroundType.Passageway,\n  foreground: CardForegroundType.Treasure,\n  symbol: undefined,\n  choice: {\n    type: ChoiceType.NextPage,\n    encounter: {\n      type: EncounterType.Event,\n      event: EventType.Treasure,\n    },\n  },\n  cost: [],\n  benefit: [],\n};\n\n\nexport const cards = [\n  cardBackDoor,\n  cardBackJammedDoor,\n  cardBackDarkDoorway,\n  cardBackLockedDoor,\n].flatMap(back => {\n  return [\n    cardFrontEmpty,\n    cardFrontRat,\n    cardFrontTrapped,\n    cardFrontTreasure,\n  ].map<CardDefinition>(front => {\n    return {\n      recycleTarget: RecycleTarget.Draw,\n      recyclePosition: undefined,\n      faces: [back, front],\n    };\n  });\n}).concat([{\n  faces: [cardBackJammedDoor, cardFrontFountain],\n  recycleTarget: RecycleTarget.Discard,\n  recyclePosition: undefined,\n}, {\n  faces: [cardBackDarkDoorway, cardFrontFountain],\n  recycleTarget: RecycleTarget.Discard,\n  recyclePosition: undefined,\n}, {\n  faces: [cardBackDarkDoorway, cardFrontTreasure],\n  recycleTarget: RecycleTarget.Discard,\n  recyclePosition: undefined,\n}, {\n  faces: [cardBackLockedDoor, cardFrontTreasure],\n  recycleTarget: RecycleTarget.Discard,\n  recyclePosition: undefined,\n}, {\n  faces: [cardBackDoor, cardFrontTreasure],\n  recycleTarget: RecycleTarget.Discard,\n  recyclePosition: undefined,\n}, {\n  faces: [cardBackLockedDoor, cardFrontShrine],\n  recycleTarget: RecycleTarget.Discard,\n  recyclePosition: undefined,\n}]).map<CardState>(definition => ({\n  ...definition,\n  visibleFaceIndex: 0,\n}));\n\nconst cardBackFinal: CardBackChoice = {\n  name: 'crumbling bridge',\n  description: 'With some trepidation you cross the bridge.',\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.Door,\n  foreground: undefined,\n  symbol: undefined,\n  cost: [],\n};\n\nconst cardFrontFinal: CardFrontChoice = {\n  name: 'lion',\n  description: 'A lion lies guarding the castle gate. It slowly gets up and pads toward you.',\n  type: CardFaceType.Choice,\n  background: CardBackgroundType.Passageway,\n  foreground: undefined,\n  symbol: undefined,\n  choice: {\n    type: ChoiceType.NextChapter,\n    encounter: {\n      type: EncounterType.Battle,\n      // TODO something better\n      monster: MonsterType.BigRat,\n    },\n    targetChapterIndex: 2,\n  },\n  cost: [],\n  benefit: [],\n};\n\nexport const finalCard = cardDescriptor.freeze({\n  faces: [cardBackFinal, cardFrontFinal],\n  recycleTarget: RecycleTarget.Discard,\n  recyclePosition: undefined,\n  visibleFaceIndex: 0,\n});","import { Effect, EffectDirection, SymbolType } from \"model/domain\";\n\nexport const Force: Effect = {\n  direction: EffectDirection.Omni,\n  symbol: SymbolType.Force,\n};\n\nexport const Finesse: Effect = {\n  direction: EffectDirection.Omni,\n  symbol: SymbolType.Finesse,\n};\n\nexport const Mind: Effect = {\n  direction: EffectDirection.Omni,\n  symbol: SymbolType.Mind,\n};\n\nexport const Magic: Effect = {\n  direction: EffectDirection.Omni,\n  symbol: SymbolType.Magic,\n};\n\nexport const Perception: Effect = {\n  direction: EffectDirection.Omni,\n  symbol: SymbolType.Perception,\n};\n\nexport const DamageUp: Effect = {\n  direction: EffectDirection.Up,\n  symbol: SymbolType.Damage,\n};\n\nexport const DamageDown: Effect = {\n  direction: EffectDirection.Down,\n  symbol: SymbolType.Damage,\n};\n\nexport const AgeUp: Effect = {\n  direction: EffectDirection.Up,\n  symbol: SymbolType.Age,\n};\n\nexport const AgeDown: Effect = {\n  direction: EffectDirection.Down,\n  symbol: SymbolType.Age,\n};\n\nexport const Healing: Effect = {\n  direction: EffectDirection.Omni,\n  symbol: SymbolType.Healing,\n};\n\nexport const PoisonUp: Effect = {\n  direction: EffectDirection.Up,\n  symbol: SymbolType.Poison,\n};\n\nexport const PoisonDown: Effect = {\n  direction: EffectDirection.Down,\n  symbol: SymbolType.Poison,\n};\n\nexport const GainMaxHealth: Effect = {\n  direction: EffectDirection.Omni,\n  symbol: SymbolType.GainMaxHealth,\n};\n\nexport const LoseMaxHealth: Effect = {\n  direction: EffectDirection.Omni,\n  symbol: SymbolType.LoseMaxHealth,\n};\n\nexport const LoseCards: Effect = {\n  direction: EffectDirection.Omni,\n  symbol: SymbolType.LoseCards,\n};\n\nexport const DoubleCard: Effect = {\n  direction: EffectDirection.Omni,\n  symbol: SymbolType.DoubleCard,\n};","import { \n  DoubleCard,\n  Finesse,\n  Force, \n  LoseCards,\n  Mind,\n} from \"data/effects\";\nimport {\n  CardBackChoice,\n  CardBackgroundType,\n  CardDefinition,\n  CardFaceType,\n  CardForegroundType,\n  CardFrontChoice,\n  ChoiceType,\n  EncounterType,\n  EventType,\n  RecycleTarget,\n  cardDescriptor,\n} from \"model/domain\";\n\nconst cardBackShrineOfferFinesse: CardBackChoice = {\n  name: 'offer',\n  description: 'The offering is of interest.',\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: CardForegroundType.Shrine,\n  symbol: undefined,\n  cost: [Finesse],\n};\nconst cardBackShrineOfferForce: CardBackChoice = {\n  name: 'offer',\n  description: 'The offering is of interest.',\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: CardForegroundType.Shrine,\n  symbol: undefined,\n  cost: [Force],\n};\nconst cardBackShrineOfferMind: CardBackChoice = {\n  name: 'offer',\n  description: 'The offering is of interest.',\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: CardForegroundType.Shrine,\n  symbol: undefined,\n  cost: [Mind],\n};\n\nexport const cardFrontShrineSacrifice: CardFrontChoice = {\n  name: 'sacrifice',\n  description: 'You forget something important.',\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextTurn,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: CardForegroundType.Shrine,\n  symbol: undefined,\n  cost: [LoseCards],\n  benefit: [],\n};\nexport const cardFrontShrineEmpower: CardFrontChoice = {\n  name: 'empower',\n  description: 'Forbidden knowledge briefly fills your mind.',\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextTurn,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: CardForegroundType.Shrine,\n  symbol: undefined,\n  cost: [DoubleCard],\n  benefit: [],\n};\n\nexport const cards = [\n  cardBackShrineOfferFinesse, \n  cardBackShrineOfferForce,\n  cardBackShrineOfferMind,\n].flatMap(cardBack => {\n  return [\n    cardFrontShrineSacrifice,\n    cardFrontShrineEmpower,\n  ].map<CardDefinition>(cardFace => {\n    return {\n      faces: [cardBack, cardFace],\n      recycleTarget: RecycleTarget.Discard,\n      recyclePosition: undefined,\n    };\n  });\n}).map(definition => {\n  return cardDescriptor.freeze({\n    ...definition,\n    visibleFaceIndex: 0,\n  });\n});\n\nconst cardBackShrineIgnore: CardBackChoice = {\n  name: 'avoid',\n  description: undefined,\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: CardForegroundType.Shrine,\n  symbol: undefined,\n  cost: [],\n};\nexport const cardFrontShrineIgnore: CardFrontChoice = {\n  name: 'avoid',\n  description: 'Discretion is the better part of valour.',\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextTurn,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: CardForegroundType.Shrine,\n  symbol: undefined,\n  cost: [],\n  benefit: [],\n};\n\nexport const cardIgnore = cardDescriptor.freeze({\n  faces: [cardBackShrineIgnore, cardFrontShrineIgnore],\n  recycleTarget: RecycleTarget.Discard,\n  recyclePosition: undefined,\n  visibleFaceIndex: 0,\n});\n\nexport const cardFrontShrine: CardFrontChoice = {\n  name: 'shrine',\n  description: 'You come across a shrine to a forgotten god.',\n  type: CardFaceType.Choice,\n  background: CardBackgroundType.ForestPath,\n  foreground: CardForegroundType.Shrine,\n  symbol: undefined,\n  choice: {\n    type: ChoiceType.NextPage,\n    encounter: {\n      type: EncounterType.Event,\n      event: EventType.Shrine,\n    },\n  },\n  cost: [],\n  benefit: [],\n};","import { InteractionManager } from \"rules/interaction_manager\";\nimport { DragOverlay } from \"./drag_overlay\";\nimport { DragOverlayController } from \"./drag_overlay_controller\";\nimport { Component, ParentProps } from \"solid-js\";\nimport { Card } from \"model/domain\";\n\nexport function createDragOverlay(\n  interactionManager: InteractionManager,\n  CardComponent: Component<{ model: Card }>,\n) {\n  const controller = new DragOverlayController();\n  function Card() {\n    return (\n      <>\n        {\n          interactionManager.draggedCard\n              && <CardComponent model={interactionManager.draggedCard}/>            \n        }\n      </>\n    );\n  }\n  function onDragCancel() {\n    interactionManager.clearDrag();\n  }\n\n  function Component(props: ParentProps) {\n    return (\n        <DragOverlay\n            cx={interactionManager.lastMousePosition?.[0]}\n            cy={interactionManager.lastMousePosition?.[1]}\n            Card={Card}\n            dragging={interactionManager.dragging}\n            onDragCancel={onDragCancel}\n        >\n          {props.children}\n        </DragOverlay>\n    );\n  }\n\n  return {\n    controller, \n    Component,\n  };\n}","import { Component, ParentProps } from 'solid-js';\nimport styles from './drag_overlay.module.scss';\n\nexport function DragOverlay(props: ParentProps<{\n  cx: number | undefined,\n  cy: number | undefined,\n  Card: Component,\n  dragging: boolean,\n  onDragCancel: () => void,\n}>) {\n  return (\n    <div\n        classList={{\n          [styles.drag]: true,\n          [styles.dragging]: props.dragging\n        }}\n        onPointerUp={props.onDragCancel}\n    >\n      {props.children}\n      <div\n          class={styles['scale-up']}\n          style={\n            props.cx != null && props.cy != null\n                ? {\n                  transform: `translate(${props.cx}px, ${props.cy}px)`\n                }\n                : undefined\n          }>\n        <props.Card/> \n      </div>\n    </div>\n  )\n}\n","@use 'components/constants.module.scss';\n\n.drag {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n}\n\n.drag.dragging {\n  cursor: grabbing;\n}\n\n.scale-up { \n  width: constants.$cardWidth;\n  height: constants.$cardHeight;\n  margin-left: calc(constants.$cardWidth/-2);\n  margin-top: calc(constants.$cardHeight/-2);\n  transform: scale(1);\n}","export class DragOverlayController {\n  \n}\n","import { CardController, Easing } from \"components/card/card_controller\";\nimport { ControllerManger } from \"components/component_manager\";\nimport {\n  BookSpreadType,\n  Card,\n  CardFaceType,\n  CardSlot,\n  ChoiceType,\n  EffectDirection,\n  EncounterBattle,\n  EncounterDefinition,\n  EncounterEvent,\n  EncounterType,\n  Entity,\n  Game,\n  RecycleTarget,\n  SymbolType,\n  bookSpreadRoomDescriptor,\n  cardDescriptor,\n  chapterDescriptor,\n  entityDescriptor,\n} from \"model/domain\";\nimport {\n  EffectUsage,\n  calculateCardEffectUsages,\n  calculateTargetCardEffectUsages,\n  cardFace,\n  cardSlotForCard,\n  sortCardsByRecycling,\n} from \"./cards\";\nimport {\n  DeckHolder,\n  allCardSlots,\n  gameEncounterBattle,\n  gameEncounterEvent,\n  pageCardSlots,\n  pageDeck,\n  playerDeck,\n} from \"./games\";\nimport { batch } from \"solid-js\";\nimport { delay } from \"base/delay\";\nimport { BookController } from \"components/book/book_controller\";\nimport { defaultPlayerCharacter } from \"data/player/initial\";\nimport { UnreachableError } from \"base/unreachable_error\";\nimport { hydrateEncounter } from \"./encounters\";\nimport { EntityController } from \"components/entity/entity_controller\";\nimport { TableController } from \"components/table/table_controller\";\nimport { CardSlotController } from \"components/card_slot/card_slot_controller\";\nimport { NavigationTarget, NavigationTargetType } from \"components/navigation_target\";\nimport { chapter as chapterPrelude } from \"data/chapters/prelude/chapter\";\nimport { chapter as chapterForest } from 'data/chapters/forest/chapter';\nimport { chapter as chapterRuins } from \"data/chapters/ruins/chapter\";\nimport { chapter as chapterStore } from \"data/chapters/store/chapter\";\nimport { arrayRandomize } from \"base/arrays\";\nimport { Speaker } from \"ui/speaker/speaker\";\nimport { exists } from \"base/exists\";\n\nexport class GameManager {\n  constructor(\n    private readonly speaker: Speaker,\n    private readonly game: Game,\n    private readonly navigation: (to: NavigationTarget) => Promise<void>,\n    private readonly tableController: TableController,\n    private readonly bookController: BookController,\n    private readonly cardControllerManager: ControllerManger<Card, CardController>,\n    private readonly cardSlotControllerManager: ControllerManger<CardSlot, CardSlotController>,\n    private readonly battleEncounterControllerManager: ControllerManger<EncounterBattle, EntityController>, \n    private readonly eventEncounterControllerManager: ControllerManger<EncounterEvent, EntityController>, \n  ) {\n    \n  }\n\n  async chooseTargetCard(cardSlot: CardSlot) {\n    const targetCard = cardSlot.targetCard;\n    if (targetCard == null || this.game.playerHand.indexOf(cardSlot) >= 0) {\n      return;\n    }\n\n    const originalFace = cardFace(targetCard, false);\n    const cardController = this.cardControllerManager.lookupController(targetCard);\n    if (\n        originalFace.type === CardFaceType.ChoiceBack\n            || originalFace.type === CardFaceType.Choice\n    ) {\n      cardController?.setElevated(true);\n      cardSlot.playedCards.forEach(\n          card => this.cardControllerManager.lookupController(card)?.setElevated(true),\n      );\n    }\n    if (originalFace.type === CardFaceType.ChoiceBack) {\n      await cardController?.flip();\n\n      await delay(500);\n      // TODO apply effects\n    }\n\n    const face = cardFace(targetCard, false);\n\n    if (face.type === CardFaceType.Choice) {\n      if (face.description) {\n        this.speaker.say(face.description)\n      }\n  \n      const battle = gameEncounterBattle(this.game);\n      if (battle != null) {\n        await this.battleEncounterControllerManager.lookupController(battle)?.perform(face);\n      }\n      await this.applyCardEffects(cardSlot);\n  \n      const choice = face.choice;\n      switch (choice.type) {\n        case ChoiceType.NextChapter:\n          this.createChapter(choice.targetChapterIndex);\n          return this.nextPage(choice.encounter, cardSlot);\n        case ChoiceType.NextPage:\n          return this.nextPage(choice.encounter, cardSlot);\n        case ChoiceType.NextTurn:\n          // TODO\n          const {\n            playerDead,\n            finishEndTurn,\n          } = await this.endTurn(cardSlot);\n          await finishEndTurn();\n          if (!playerDead) {\n            return this.startTurn();\n          }\n          break;\n        default:\n          throw new UnreachableError(choice);\n      }\n    } else if (face.type === CardFaceType.Resource || face.type === CardFaceType.ResourceBack) {\n      await this.returnCardToDeck(targetCard, cardSlot, playerDeck(this.game) as any, undefined, false, true);\n      return this.nextPage(undefined, cardSlot);\n    }\n  }\n\n  async applyCardEffects(cardSlot: CardSlot) {\n    const targetCard = cardSlot.targetCard;\n    const playerCharacter = this.game.playerCharacter;\n    if (targetCard == null || playerCharacter == null) {\n      return;\n    }\n    const targetFace = cardFace(targetCard, false);\n    const cardUsages = calculateTargetCardEffectUsages(targetFace, cardSlot, undefined);\n    await this.applyUsages(targetCard, cardUsages.cost, EffectDirection.Down, playerCharacter);\n    // is there a monster, and is the slot in the monsters hand?\n    const battle = gameEncounterBattle(this.game);\n    if (battle == null || this.game.playerHand.indexOf(cardSlot) >= 0) {\n      return;\n    }\n    await this.applyUsages(targetCard, cardUsages.benefit, EffectDirection.Up, battle.monster);\n    // also apply the cards\n    for (const playedCard of cardSlot.playedCards) {\n      const playedCardUsages = calculateCardEffectUsages(this.game, playedCard, undefined);\n      await this.applyUsages(playedCard, playedCardUsages.benefit, EffectDirection.Up, battle.monster);\n    }\n  }\n\n  private async applyUsages(\n      card: Card,\n      usages: readonly EffectUsage[],\n      direction: EffectDirection.Up | EffectDirection.Down,\n      to: Entity,\n  ) {\n    const cardSlot = cardSlotForCard(this.game, card);\n    const playerCharacter = this.game.playerCharacter;\n    if (playerCharacter == null) {\n      return;\n    }\n    const face = cardFace(card, false);\n    await Promise.all([\n      (async () => {\n        if (face.description\n            && usages.some(\n                ({ used, effect: { direction: effectDirection } }) => (\n                    !used && (effectDirection & direction) \n                        || used && !(effectDirection & direction)\n                )\n            )\n        ) {\n          await this.speaker.say(face.description);\n        }  \n      })(),\n      (async () => {\n        const cardController = this.cardControllerManager.lookupController(card);\n        for(const usage of usages) {\n          if (!usage.used) {\n            // direction can be used as a bitwise flag\n            if (usage.effect.direction & direction) {\n              switch (usage.effect.symbol) {\n                case SymbolType.GainCards:\n                  const newCards = sortCardsByRecycling(usage.effect.cards.map(definition => {\n                    return cardDescriptor.create({\n                      ...definition,\n                      visibleFaceIndex: 0,\n                    })\n                  }));\n                  to.deck = [...newCards, ...to.deck];\n                  break;\n                case SymbolType.LoseCards:\n                  // set all played cards in the slot to destroy\n                  if (cardSlot != null) {\n                    cardSlot.playedCards.forEach(playedCard =>\n                      playedCard.recycleTarget = RecycleTarget.Destroy\n                    );\n                  }\n                  break;\n                case SymbolType.Damage:\n                case SymbolType.Poison:\n                  // give previous time to move back\n                  await delay(300);\n                  await cardController?.moveTo(\n                      '0',\n                      direction === EffectDirection.Down ? '20vmin' : '-20vmin',\n                      '1vmin',\n                      Easing.Violent,\n                  );\n                  to.health--;\n                  break;\n                case SymbolType.Healing:\n                  if (to.health < to.maxHealth) {\n                    await delay(300);\n                    await cardController?.moveTo(\n                        '0',\n                        direction === EffectDirection.Down ? '20vmin' : '-20vmin',\n                        '1vmin',\n                        Easing.Gentle,\n                    );\n                    to.health = to.health + 1;  \n                  }\n                  break;\n                case SymbolType.Finesse:\n                case SymbolType.Force:\n                case SymbolType.Mind:\n                case SymbolType.Magic:\n                case SymbolType.Perception:\n                  // attack the cards\n                  if (to !== playerCharacter) {\n                    return;\n                  }\n                  const cardSlots = this.game.playerHand;\n                  // find the best card to remove\n                  const cardAndCardSlot = cardSlots.reduce<[Card, CardSlot] | undefined>(\n                    (acc, cardSlot) => {\n                      const targetCard = cardSlot.targetCard;\n                      if (targetCard != null && targetCard !== card) {\n                        const playedCard = cardSlot.playedCards\n                            .find(card => cardFace(card, false).symbol === usage.effect.symbol);\n                        const card = playedCard\n                            || (cardFace(targetCard, false).symbol === usage.effect.symbol\n                                ? targetCard\n                                : undefined\n                            );\n                        return card != null ? [card, cardSlot] : acc;\n                      }\n                      return acc;\n                    },\n                    undefined,\n                  );\n                  if (cardAndCardSlot) {\n                    const [card, cardSlot] = cardAndCardSlot;\n                    await delay(300);\n                    // TODO aim for the card\n                    await cardController?.moveTo(\n                        '0',\n                        direction === EffectDirection.Down ? '20vmin' : '-20vmin',\n                        '1vmin',\n                        Easing.Violent,\n                    );\n                    await this.returnCardToDeck(\n                        card,\n                        cardSlot,\n                        [\n                          () => playerCharacter.deck,\n                          deck => playerCharacter.deck = deck,\n                        ],\n                        undefined,\n                        true,\n                    );\n                  }\n                  break;\n                case SymbolType.Age:\n                  await cardController?.moveTo(\n                      '0',\n                      direction === EffectDirection.Down ? '20vmin' : '-20vmin',\n                      '1vmin',\n                      Easing.Gentle,\n                  );\n                  to.age -= 2;\n                  break;\n                case SymbolType.GainMaxHealth:\n                  await cardController?.moveTo(\n                      '0',\n                      direction === EffectDirection.Down ? '20vmin' : '-20vmin',\n                      '1vmin',\n                      Easing.Gentle,\n                  );\n                  to.maxHealth++;                  \n                  break;\n                case SymbolType.LoseMaxHealth:\n                  await cardController?.moveTo(\n                      '0',\n                      direction === EffectDirection.Down ? '20vmin' : '-20vmin',\n                      '1vmin',\n                      Easing.Violent,\n                  );\n                  to.maxHealth--;\n                  if (to.health > to.maxHealth) {\n                    to.health = to.maxHealth;\n                  }\n                  break;\n                case SymbolType.Draw:\n                  // TODO\n                  break;\n                case SymbolType.DoubleCard:\n                  if (cardSlot != null && cardSlot.playedCards.length > 0) {\n                    const upgradeCard = cardSlot.playedCards[Math.floor(Math.random() * cardSlot.playedCards.length)];\n                    upgradeCard.faces = upgradeCard.faces.map(face => ({\n                      ...face,\n                      cost: face.cost.flatMap(c => [c, c]),\n                      benefit: face.type === CardFaceType.Resource\n                          ? face.benefit.flatMap(b => [b, b])\n                          : []\n                    }));\n                  }\n                  break;\n                case SymbolType.Duplicate:\n                  if (cardSlot != null) {\n                    to.deck = [\n                      ...cardSlot.playedCards.map(playedCard => cardDescriptor.create(\n                        cardDescriptor.snapshot(playedCard)\n                      )),\n                      ...to.deck,\n                    ];\n                  }\n                  break;\n                default:\n                  throw new UnreachableError(usage.effect);\n              }\n            }\n          }\n        }\n      })(),\n    ]);\n    await this.normalizeBoard();\n  }\n\n  async maybeCreatePlayer() {\n    if (this.game.playerCharacter == null) {\n      this.game.playerCharacter = entityDescriptor.create(defaultPlayerCharacter);\n      this.game.playerCharacter.deck = arrayRandomize(this.game.playerCharacter.deck);\n    }\n  }\n\n  async createChapter(chapterIndex: number) {\n    const chapters = [chapterPrelude, chapterStore, chapterForest, chapterRuins];\n    batch(() => {\n      this.game.book.chapter = chapterDescriptor.create(chapters[chapterIndex % chapters.length]);\n      this.game.book.chapter.deck = arrayRandomize(this.game.book.chapter.deck);\n    });\n  }\n\n  async nextPage(\n      encounter: EncounterDefinition | undefined,\n      selectedCardSlot: CardSlot | undefined,\n  ) {\n    const { finishEndTurn, playerDead } = await this.endTurn(selectedCardSlot);\n    if (this.game.playerCharacter) {\n      this.game.playerCharacter.age++;\n    }\n    if (playerDead) {\n      return finishEndTurn();\n    }\n    this.game.book.chapter.pagesRemaining--;\n    const spread = bookSpreadRoomDescriptor.create({\n      type: BookSpreadType.Room,\n      encounter: encounter && hydrateEncounter(encounter),\n    });\n    await this.bookController.showSpread(spread);\n    await finishEndTurn();\n    const battleEncounter = gameEncounterBattle(this.game);\n    const eventEncounter = gameEncounterEvent(this.game);\n    if (battleEncounter != null) {\n      await this.battleEncounterControllerManager\n          .lookupController(battleEncounter)\n          ?.appear();\n    }\n    if (eventEncounter != null) {\n      await this.eventEncounterControllerManager\n          .lookupController(eventEncounter)\n          ?.appear();\n    }\n    \n    await this.startTurn();\n  }\n\n  async normalizeBoard() {\n    const cardSlots = allCardSlots(this.game);\n    const flippableCardSlots = cardSlots\n        .filter(cardSlot => this.isAutoFlippable(cardSlot));\n    // find a phrase to say\n    const description = flippableCardSlots.map(cardSlot => {\n      const targetCard = cardSlot.targetCard;\n      if (targetCard == null || targetCard.visibleFaceIndex > 0) {\n        return;\n      }\n      const targetFace = cardFace(targetCard, false);\n      return targetFace.description;\n    }).filter(exists)[0];\n    if (description != null) {\n      this.speaker.say(description);\n    }\n    // flip any paid for cards\n    await Promise.all(flippableCardSlots.map(async cardSlot => {\n      const targetCard = cardSlot.targetCard;\n      if (targetCard == null) {\n        return;\n      }\n      const controller = this.cardControllerManager.lookupController(targetCard);\n      if (controller == null) {\n        return;\n      }\n      return controller.flip();\n    }));\n  }\n\n  private async startTurn(draw = this.game.playerHand.length) {\n    const cardSlots = pageCardSlots(this.game);\n    const [pageDeckGetter, pageDeckSetter, encounterDeck] = pageDeck(this.game);\n    if (this.game.book.chapter.pagesRemaining < 0 && !encounterDeck) {\n      // create the end boss\n      const card = this.game.book.chapter.finalCard;\n      cardSlots[Math.floor(cardSlots.length/2)].targetCard = card;\n    } else {\n      await Promise.all(cardSlots.map(async cardSlot => {\n        const deck = pageDeckGetter();\n        if (deck.length > 0) {\n          const card = deck[deck.length - 1];\n          if (card != null) {\n            cardSlot.targetCard = card;\n            pageDeckSetter(deck.slice(0, -1));\n            const cardController = this.cardControllerManager.lookupController(card);\n            // it's no rendered yet, so this should put it at 90 degrees\n            cardController?.flipUpToVertical();\n            // force a render\n            await delay(0);\n            // animate\n            await cardController?.flipDownFromVertical();\n          }\n        }\n      }));  \n    }\n    const playerHand = this.game.playerHand;\n    if (playerHand != null) {\n      const availableSlots = playerHand.filter(\n        slot => slot.targetCard == null && slot.playedCards.length === 0,\n      );\n      const availableDraw = Math.min(draw, availableSlots.length);\n      const playerCharacter = this.game.playerCharacter;\n      if (availableDraw > 0 && playerCharacter != null) {\n        // NOTE: be careful not to remove above check because -0 == 0\n        // in the below slice operations\n        const drawnCards = playerCharacter.deck.slice(-availableDraw);\n        const deckPosition = this.tableController.getPlayerDeckTablePosition();\n        await batch(async () => {\n          await Promise.all(\n              drawnCards.reverse().map(async (card, i) => {\n                const cardSlot = availableSlots[i];\n                const slotIndex = playerHand.indexOf(cardSlot);\n                const cardPosition = this.tableController.getPlayerCardSlotTablePosition(slotIndex);\n                await this.cardControllerManager.lookupController(card)?.moveTo(\n                    ...(cardPosition\n                        .map((v, i) => v - deckPosition[i])\n                        .map(v => `${v}vmin`) as [string, string, string]),\n                    Easing.Gentle,\n                );\n                cardSlot.targetCard = card;\n              }),\n          );\n        });    \n        playerCharacter.deck = playerCharacter.deck.slice(0, -availableDraw);\n      }\n    }\n    // a delay (can be zero) is necessary so free cards render in their\n    // face down state before auto-flipping\n    await delay(300);\n    await this.normalizeBoard();\n  }\n\n  private async endTurn(\n      playedCardSlot: CardSlot | undefined,\n  ): Promise<{\n    playerDead: boolean,\n    finishEndTurn: () => Promise<void>\n  }> {\n    // if we're in battle and the monster is dead, clear the battle\n    const battle = gameEncounterBattle(this.game);\n    let monsterDead = battle != null && battle.monster.health <= 0;\n    if (monsterDead && battle) {\n      await this.battleEncounterControllerManager\n          .lookupController(battle)?.die();\n    }\n    const event = gameEncounterEvent(this.game);\n    if (event != null) {\n      await this.eventEncounterControllerManager\n          .lookupController(event)?.disappear();\n    }\n    // place all loose cards back in the deck\n    const pageDeckHolder: DeckHolder = pageDeck(this.game) as any;\n    const playerDeckHolder = playerDeck(this.game);\n\n    const processCardSlot = async (cardSlot: CardSlot) => {\n      const inPlayerHand = this.game.playerHand.indexOf(cardSlot) >= 0;\n      const targetCard = cardSlot.targetCard;\n      if (\n          targetCard != null\n              && inPlayerHand\n              && targetCard.visibleFaceIndex > 0\n              || playerDeckHolder == null\n      ) {\n        return [];\n      }\n      const cardSlotController = this.cardSlotControllerManager.lookupController(cardSlot);\n      cardSlotController?.setForceUnrotate(true);\n      const playedCards = cardSlot.playedCards;\n      if (targetCard != null) {\n        // TODO parallelise this promise\n        await this.returnCardToDeck(\n            targetCard,\n            cardSlot,\n            inPlayerHand ? playerDeckHolder : pageDeckHolder,\n            undefined,\n            // unused cards go to the back of the deck\n            inPlayerHand,\n        );\n        cardSlot.targetCard = undefined;\n      }\n      if (playerDeckHolder != null) {\n        await Promise.all(playedCards.map(async card => {\n          // TODO player discard deck\n          return this.returnCardToDeck(card, cardSlot, playerDeckHolder);\n        }));\n        cardSlot.playedCards = [];\n      }\n      cardSlotController?.setForceUnrotate(false);\n      return;\n    }\n\n    const playerCharacter = this.game.playerCharacter;\n    const playerDead = playerCharacter == null || playerCharacter.health <= 0;\n\n    const cardSlots = allCardSlots(this.game)\n        .filter(cardSlot => playerDead || cardSlot !== playedCardSlot);\n    await batch<Promise<void>>(async () => {\n      await Promise.all(cardSlots.flatMap(processCardSlot));\n    });\n    if (monsterDead) {\n      const spread = this.game.book.spread;\n      if (spread?.type === BookSpreadType.Room) {\n        spread.encounter = undefined;\n      }\n    }\n    if (this.game.book.spread?.type === BookSpreadType.Room\n          && this.game.book.spread.encounter?.type === EncounterType.Event\n    ) {\n      this.game.book.spread.encounter = undefined;  \n    }\n    if (playerDead) {\n      await this.playerDeath();\n    }\n    return {\n      playerDead,\n      finishEndTurn: async () => {\n        if (playedCardSlot != null) {\n          await processCardSlot(playedCardSlot);\n        }\n      },\n    };\n  }\n\n  private isAutoFlippable(cardSlot: CardSlot): boolean {\n    const targetCard = cardSlot.targetCard;\n    if (targetCard == null) {\n      return false;\n    }\n    const targetFace = cardFace(targetCard, false);\n    const paymentFace = targetCard.faces[0];\n    const isFlipped = targetCard.visibleFaceIndex > 0;\n    const isInPlayerHand = this.game.playerHand.indexOf(cardSlot) >= 0;\n    const isFullyUsed = calculateTargetCardEffectUsages(\n      paymentFace,\n        cardSlot,\n        this.cardControllerManager\n    ).cost.every(c => c.used);\n    // don't flip back visible choices\n    return !isFullyUsed && isFlipped && targetFace.type !== CardFaceType.Choice\n        // don't flip up treasure resources\n        || isFullyUsed && !isFlipped && (isInPlayerHand || targetFace.type !== CardFaceType.ResourceBack);\n  }\n\n  private async returnCardToDeck(\n    card: Card,\n    cardSlot: CardSlot,\n    drawDeck: DeckHolder,\n    discardDeck?: DeckHolder,\n    endOfDeck?: boolean,\n    forceAnimateReturnToDeck?: boolean,\n  ) {\n    const cardController = this.cardControllerManager.lookupController(card);\n    const inPlayerHand = this.game.playerHand.indexOf(cardSlot) >= 0; \n    cardController?.setElevated(false);\n    const recycleTarget = card.recycleTarget;\n    const targetDeck = card.recycleTarget === RecycleTarget.Destroy \n        ? undefined\n        : recycleTarget === RecycleTarget.Discard\n            ? discardDeck\n            : drawDeck;\n\n    const animateReturnToDeck = (inPlayerHand || card !== cardSlot.targetCard || forceAnimateReturnToDeck)\n        && targetDeck != null;\n    if (animateReturnToDeck) {\n      if (card.visibleFaceIndex > 0) {\n        await cardController?.flip();\n      }\n    } else {\n      await cardController?.flipUpToVertical();\n      card.visibleFaceIndex = 0;\n    }\n\n    if (targetDeck != null) {  \n      const [getDeck, setDeck] = targetDeck;\n      const deck = getDeck();\n      const deckLength = deck.length;\n      const index = endOfDeck\n          ? 0\n          : card.recyclePosition \n              ? Math.min(deckLength - card.recyclePosition - 1, deckLength)\n              : Math.floor(Math.random() * deckLength);\n      setDeck([...deck.slice(0, index), card, ...deck.slice(index)]);\n    }\n    if (cardSlot.targetCard === card) {\n      cardSlot.targetCard = undefined;\n    } else {\n      cardSlot.playedCards = cardSlot.playedCards.filter(c => c !== card);\n    }\n\n    if (animateReturnToDeck) {\n      // TODO factor in other decks\n      const deckPosition = this.tableController.getPlayerDeckTablePosition();\n      const playerSlotIndex = this.game.playerHand.indexOf(cardSlot);\n      const bookSlotIndex = this.game.book.cardSlots.indexOf(cardSlot);\n      // TODO factor in whether it's a played or target card\n      const cardPosition = playerSlotIndex >= 0\n          ? this.tableController.getPlayerCardSlotTablePosition(playerSlotIndex)\n          : this.tableController.getBookCardSlotTablePosition(bookSlotIndex);\n      await cardController?.moveFrom(\n          ...(cardPosition\n              .map((v, i) =>  v - deckPosition[i])\n              .map(v => `${v}vmin`) as [string, string, string]),\n          Easing.Gentle,\n          playerSlotIndex < 0 ? 'rotateX(-90deg)' : undefined\n      );\n    }\n  }\n\n  private async playerDeath(): Promise<void> {\n    // die\n    await this.navigation({\n      type: NavigationTargetType.Death,\n    })\n    // clean up \n    this.game.playerCharacter = undefined;\n    allCardSlots(this.game).forEach(c => {\n      c.targetCard = undefined;\n      c.playedCards = [];\n    });\n  }\n}\n\n\n","import { entityDescriptor } from \"model/domain\";\nimport { cardForceRandom } from \"data/items/force\";\nimport { cardFinesseLazy } from \"data/items/finesse\";\nimport { cardDodge } from \"../items/dodge\";\nimport { cardKick } from \"data/items/kick\";\nimport { cardMindLazy } from \"data/items/mind\";\n\nexport const defaultPlayerCharacter = entityDescriptor.freeze({\n  deck: [\n    cardForceRandom,\n    cardDodge,\n    cardMindLazy,\n    cardFinesseLazy,\n    cardKick,\n  ],\n  health: 3,\n  maxHealth: 3,\n  age: 20,\n});","import { Force } from \"data/effects\";\nimport {\n  CardBackResource,\n  CardBackgroundType,\n  CardDefinition,\n  CardFaceType,\n  CardFrontResource,\n  RecycleTarget,\n  SymbolType,\n  cardDescriptor,\n} from \"model/domain\";\n\nconst cardBackForceEager: CardBackResource = {\n  name: 'warriors strength',\n  description: undefined,\n  type: CardFaceType.ResourceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: undefined,\n  symbol: undefined,\n  cost: [],\n};\nconst cardFrontForceEager: CardFrontResource = {\n  name: 'warriors strength',\n  description: 'Your martial training means strength is always available.',\n  type: CardFaceType.Resource,\n  background: CardBackgroundType.Clear,\n  foreground: undefined,\n  symbol: SymbolType.Force,\n  cost: [],\n  benefit: [Force],\n};\nexport const cardDefinitionForce1: CardDefinition = {\n  recycleTarget: RecycleTarget.Draw,\n  recyclePosition: 1,\n  faces: [cardBackForceEager, cardFrontForceEager],\n};\nexport const cardDefinitionForce3: CardDefinition = {\n  recycleTarget: RecycleTarget.Draw,\n  recyclePosition: 3,\n  faces: [cardBackForceEager, cardFrontForceEager],\n};\nexport const cardDefinitionForce5: CardDefinition = {\n  recycleTarget: RecycleTarget.Draw,\n  recyclePosition: 5,\n  faces: [cardBackForceEager, cardFrontForceEager],\n};\nexport const cardDefinitionForce7: CardDefinition = {\n  recycleTarget: RecycleTarget.Draw,\n  recyclePosition: 7,\n  faces: [cardBackForceEager, cardFrontForceEager],\n};\n\nexport const cardForceEager = cardDescriptor.freeze({\n  ...cardDefinitionForce1,\n  visibleFaceIndex: 0,\n});\n\nconst cardBackForceRandom: CardBackResource = {\n  name: 'innate strength',\n  description: undefined,\n  type: CardFaceType.ResourceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: undefined,\n  symbol: undefined,\n  cost: [],\n};\nconst cardFrontForceRandom: CardFrontResource = {\n  name: 'innate strength',\n  description: 'You draw on your natural strength.',\n  type: CardFaceType.Resource,\n  background: CardBackgroundType.Clear,\n  foreground: undefined,\n  symbol: SymbolType.Force,\n  cost: [],\n  benefit: [Force],\n};\nexport const cardDefinitionForceRandom: CardDefinition = {\n  recycleTarget: RecycleTarget.Draw,\n  recyclePosition: 5,\n  faces: [cardBackForceRandom, cardFrontForceRandom],\n};\n\nexport const cardForceRandom = cardDescriptor.freeze({\n  ...cardDefinitionForceRandom,\n  visibleFaceIndex: 0,\n});\n\nconst cardBackForceLazy: CardBackResource = {\n  name: 'lethargic strength',\n  description: undefined,\n  type: CardFaceType.ResourceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: undefined,\n  symbol: undefined,\n  cost: [],\n};\nconst cardFrontForceLazy: CardFrontResource = {\n  name: 'lethargic strength',\n  description: 'Yawn! If I must.',\n  type: CardFaceType.Resource,\n  background: CardBackgroundType.Clear,\n  foreground: undefined,\n  symbol: SymbolType.Force,\n  cost: [],\n  benefit: [Force],\n};\nexport const cardDefinitionForceLazy: CardDefinition = {\n  recycleTarget: RecycleTarget.Draw,\n  recyclePosition: 9,\n  faces: [cardBackForceLazy, cardFrontForceLazy],\n};\n\nexport const cardForceLazy = cardDescriptor.freeze({\n  ...cardDefinitionForceLazy,\n  visibleFaceIndex: 0,\n});\n\n\nconst cardBackForceLazy2x: CardBackResource = {\n  name: 'dig deep',\n  description: undefined,\n  type: CardFaceType.ResourceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: undefined,\n  symbol: undefined,\n  cost: [],\n};\nconst cardFrontForceLazy2x: CardFrontResource = {\n  name: 'dig deep',\n  description: 'You give it everything you\\'ve got.',\n  type: CardFaceType.Resource,\n  background: CardBackgroundType.Clear,\n  foreground: undefined,\n  symbol: SymbolType.Force,\n  cost: [],\n  benefit: [Force, Force],\n};\nexport const cardDefinitionForceLazy2x: CardDefinition = {\n  recycleTarget: RecycleTarget.Draw,\n  recyclePosition: 7,\n  faces: [cardBackForceLazy2x, cardFrontForceLazy2x],\n};\n\nexport const cardForceLazy2x = cardDescriptor.freeze({\n  ...cardDefinitionForceLazy2x,\n  visibleFaceIndex: 0,\n});\n","import { Finesse, Force } from \"data/effects\";\nimport {\n  CardBackResource,\n  CardBackgroundType,\n  CardDefinition,\n  CardFaceType,\n  CardFrontResource,\n  RecycleTarget,\n  SymbolType,\n  cardDescriptor,\n} from \"model/domain\";\n\nconst cardBackFinesseLazy: CardBackResource = {\n  name: 'agility',\n  type: CardFaceType.ResourceBack,\n  description: undefined,\n  background: CardBackgroundType.Crosshatched,\n  foreground: undefined,\n  symbol: undefined,\n  cost: [],\n};\nconst cardFrontFinesseLazy: CardFrontResource = {\n  name: 'agility',\n  description: 'You move with agility.',\n  type: CardFaceType.Resource,\n  background: CardBackgroundType.Clear,\n  foreground: undefined,\n  symbol: SymbolType.Finesse,\n  cost: [],\n  benefit: [Finesse],\n};\nexport const cardDefinitionFinesseLazy: CardDefinition = {\n  recycleTarget: RecycleTarget.Draw,\n  recyclePosition: 5,\n  faces: [cardBackFinesseLazy, cardFrontFinesseLazy],\n};\n\nexport const cardFinesseLazy = cardDescriptor.freeze({\n  ...cardDefinitionFinesseLazy,\n  visibleFaceIndex: 0,\n});\n\nconst cardBackFinesseEager: CardBackResource = {\n  name: 'fast hands',\n  type: CardFaceType.ResourceBack,\n  description: undefined,\n  background: CardBackgroundType.Crosshatched,\n  foreground: undefined,\n  symbol: undefined,\n  cost: [],\n};\nconst cardFrontFinesseEager: CardFrontResource = {\n  name: 'fast hands',\n  description: 'Your hands are a blur.',\n  type: CardFaceType.Resource,\n  background: CardBackgroundType.Clear,\n  foreground: undefined,\n  symbol: SymbolType.Finesse,\n  cost: [],\n  benefit: [Finesse],\n};\nexport const cardDefinitionFinesseEager: CardDefinition = {\n  recycleTarget: RecycleTarget.Draw,\n  recyclePosition: 1,\n  faces: [cardBackFinesseEager, cardFrontFinesseEager],\n};\n\nexport const cardFinesseEager = cardDescriptor.freeze({\n  ...cardDefinitionFinesseEager,\n  visibleFaceIndex: 0,\n});\n\nconst cardBackFinesseMartialTraining: CardBackResource = {\n  name: 'martial training',\n  type: CardFaceType.ResourceBack,\n  description: undefined,\n  background: CardBackgroundType.Crosshatched,\n  foreground: undefined,\n  symbol: undefined,\n  cost: [Force],\n};\nconst cardFrontFinesseMartialTraining: CardFrontResource = {\n  name: 'martial training',\n  description: 'You remember your training.',\n  type: CardFaceType.Resource,\n  background: CardBackgroundType.Clear,\n  foreground: undefined,\n  symbol: SymbolType.Finesse,\n  cost: [],\n  benefit: [Finesse, Force],\n};\nexport const cardDefinitionFinesseMartialTraining: CardDefinition = {\n  recycleTarget: RecycleTarget.Draw,\n  recyclePosition: 3,\n  faces: [cardBackFinesseMartialTraining, cardFrontFinesseMartialTraining],\n};\n","import { DamageDown, Finesse } from \"data/effects\";\nimport { CardBackResource, CardBackgroundType, CardDefinition, CardFaceType, CardFrontResource, RecycleTarget, SymbolType, cardDescriptor } from \"model/domain\";\n\nconst cardBackDodge: CardBackResource = {\n  name: 'dodge',\n  description: 'You crouch in readiness.',\n  type: CardFaceType.ResourceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: undefined,\n  symbol: undefined,\n  cost: [Finesse],\n};\nconst cardFrontDodge: CardFrontResource = {\n  name: 'dodge',\n  description: 'Cat like, you jump out of the way.',\n  type: CardFaceType.Resource,\n  background: CardBackgroundType.Clear,\n  foreground: undefined,\n  symbol: SymbolType.Finesse,\n  cost: [],\n  benefit: [DamageDown],\n};\nexport const cardDefinitionDodge: CardDefinition = {\n  recycleTarget: RecycleTarget.Draw,\n  recyclePosition: 5,\n  faces: [cardBackDodge, cardFrontDodge],\n};\nexport const cardDodge = cardDescriptor.freeze({\n  ...cardDefinitionDodge,\n  visibleFaceIndex: 0,\n});\n","import { DamageUp, Force } from \"data/effects\";\nimport { CardBackResource, CardBackgroundType, CardDefinition, CardFaceType, CardFrontResource, RecycleTarget, SymbolType, cardDescriptor } from \"model/domain\";\n\nconst cardBackKick: CardBackResource = {\n  name: 'kick',\n  description: 'You prepare to strike.',\n  type: CardFaceType.ResourceBack,\n  background: CardBackgroundType.Crosshatched,\n  symbol: undefined,\n  foreground: undefined,\n  cost: [Force],\n};\nconst cardFrontKick: CardFrontResource = {\n  name: 'kick',\n  description: 'You deliver a swift kick.',\n  type: CardFaceType.Resource,\n  background: CardBackgroundType.Clear,\n  foreground: undefined,\n  symbol: SymbolType.Force,\n  cost: [],\n  benefit: [DamageUp],\n};\nexport const cardDefinitionKick: CardDefinition = {\n  recycleTarget: RecycleTarget.Draw,\n  recyclePosition: 4,\n  faces: [cardBackKick, cardFrontKick],\n};\nexport const cardKick = cardDescriptor.freeze({\n  ...cardDefinitionKick,\n  visibleFaceIndex: 0,\n});\n","import { Mind } from \"data/effects\";\nimport {\n  CardBackResource,\n  CardBackgroundType,\n  CardDefinition,\n  CardFaceType,\n  CardFrontResource,\n  RecycleTarget,\n  SymbolType,\n  cardDescriptor,\n} from \"model/domain\";\n\nconst cardBackMindLazy: CardBackResource = {\n  name: 'innate intelligence',\n  description: undefined,\n  type: CardFaceType.ResourceBack,\n  background: CardBackgroundType.Crosshatched,\n  symbol: undefined,\n  foreground: undefined,\n  cost: [],\n};\nconst cardFrontMindLazy: CardFrontResource = {\n  name: 'innate intelligence',\n  description: 'You draw on everything you\\'ve learned.',\n  type: CardFaceType.Resource,\n  background: CardBackgroundType.Clear,\n  foreground: undefined,\n  symbol: SymbolType.Mind,\n  cost: [],\n  benefit: [Mind],\n};\nexport const cardDefinitionMindLazy: CardDefinition = {\n  recycleTarget: RecycleTarget.Draw,\n  recyclePosition: 9,\n  faces: [cardBackMindLazy, cardFrontMindLazy],\n};\n\nexport const cardMindLazy = cardDescriptor.freeze({\n  ...cardDefinitionMindLazy,\n  visibleFaceIndex: 0,\n});\n\nconst cardBackMindEager: CardBackResource = {\n  name: 'quick thinking',\n  description: undefined,\n  type: CardFaceType.ResourceBack,\n  background: CardBackgroundType.Crosshatched,\n  symbol: undefined,\n  foreground: undefined,\n  cost: [],\n};\nconst cardFrontMindEager: CardFrontResource = {\n  name: 'quick thinking',\n  description: 'Suddenly the solution is clear.',\n  type: CardFaceType.Resource,\n  background: CardBackgroundType.Clear,\n  foreground: undefined,\n  symbol: SymbolType.Mind,\n  cost: [],\n  benefit: [Mind],\n};\nexport const cardDefinitionMindEager: CardDefinition = {\n  recycleTarget: RecycleTarget.Draw,\n  recyclePosition: 1,\n  faces: [cardBackMindEager, cardFrontMindEager],\n};\n\nexport const cardMindEager = cardDescriptor.freeze({\n  ...cardDefinitionMindLazy,\n  visibleFaceIndex: 0,\n});\n","import { arrayRandomize } from \"base/arrays\";\nimport { UnreachableError } from \"base/unreachable_error\";\nimport { defaultRat } from \"data/monsters/rat/initial\";\nimport { defaultTroll } from \"data/monsters/troll/initial\";\nimport { cards as fountainCards, cardIgnore as fountainIgnore } from \"data/events/fountain/cards\";\nimport { cards as magicTreeCards } from 'data/events/magic_tree/cards';\nimport { cards as mushroomCards, cardIgnore as mushroomIgnore } from 'data/events/mushroom/cards';\nimport { cards as shrineCards, cardIgnore as shrineIgnore } from 'data/events/shrine/cards';\nimport { cards as itemCards, ignoreCards } from 'data/items/cards';\nimport { EncounterDefinition, EncounterState, EncounterType, EntityState, EventType, MonsterType } from \"model/domain\";\nimport { defaultSnail } from \"data/monsters/snail/initial\";\nimport { defaultRooster } from \"data/monsters/rooster/initial\";\nimport { defaultDummy } from \"data/monsters/dummy/initial\";\n\nfunction hydrateMonster(monster: MonsterType): EntityState {\n  switch (monster) {\n    case MonsterType.BigRat:\n      return defaultRat;\n    case MonsterType.Troll:\n      return defaultTroll;\n    case MonsterType.Snail:\n      return defaultSnail;\n    case MonsterType.Rooster:\n      return defaultRooster;\n    case MonsterType.Dummy:\n      return defaultDummy;\n    default:\n      throw new UnreachableError(monster);\n  }\n}\n\nexport function hydrateEncounter(encounter: EncounterDefinition): EncounterState {\n  switch (encounter.type) {\n    case EncounterType.Battle:\n      const monster = hydrateMonster(encounter.monster);\n      const deck = arrayRandomize(monster.deck);\n      return {\n        type: encounter.type,\n        monsterType: encounter.monster,\n        monster: {\n          ...monster,\n          deck,\n        },\n      };\n    case EncounterType.Event:\n      switch (encounter.event) {\n        case EventType.Fountain:\n          return {\n            type: EncounterType.Event,\n            eventType: encounter.event,\n            deck: arrayRandomize(fountainCards).slice(0, 2).concat([fountainIgnore]),\n          };\n        case EventType.MagicTree:\n          return {\n            type: EncounterType.Event,\n            eventType: encounter.event,\n            deck: arrayRandomize(magicTreeCards).slice(0, 3),\n          };\n        case EventType.Mushroom:\n          return {\n            type: EncounterType.Event,\n            eventType: encounter.event,\n            deck: arrayRandomize(mushroomCards).slice(0, 2).concat([mushroomIgnore]),\n          };\n        case EventType.Shrine:\n          return {\n            type: EncounterType.Event,\n            eventType: encounter.event,\n            deck: arrayRandomize(shrineCards).slice(0, 2).concat([shrineIgnore]),\n          };\n        case EventType.Treasure:\n          return {\n            type: EncounterType.Event,\n            eventType: encounter.event,\n            deck: arrayRandomize(itemCards).slice(0, 2)\n                .concat(ignoreCards[Math.floor(Math.random() * ignoreCards.length)]),\n          };\n        case EventType.Shop:\n          return {\n            type: EncounterType.Event,\n            eventType: encounter.event,\n            deck: arrayRandomize(itemCards).slice(0, 3),\n          };\n        default:\n          throw new UnreachableError(encounter.event);\n      }\n    default:\n      throw new UnreachableError(encounter);\n  }\n}\n","import { entityDescriptor } from \"model/domain\";\nimport { cards } from \"./cards\";\n\nexport const defaultRat = entityDescriptor.freeze({\n  deck: cards,\n  health: 2,\n  maxHealth: 2,\n  age: 2,\n});","import { DamageDown, DamageUp, Finesse, Force, Mind } from \"data/effects\";\nimport { CardBackChoice, CardBackgroundType, CardDefinition, CardFaceType, CardForegroundType, CardFrontChoice, ChoiceType, RecycleTarget, SymbolType, cardDescriptor } from \"model/domain\";\n\nconst cardBackRatBeligerence: CardBackChoice = {\n  name: 'cornered',\n  description: undefined,\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: CardForegroundType.Rat,\n  symbol: undefined,\n  cost: [],\n};\nconst cardBackRatFurtiveMovement: CardBackChoice = {\n  name: 'rodent cunning',\n  description: 'You predict where the rat is going and intercept.',\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: CardForegroundType.Rat,\n  symbol: undefined,\n  cost: [Mind],\n};\nconst cardBackRatScurrying: CardBackChoice = {\n  name: 'scurrying',\n  description: 'The rat is fast, but you are faster.',\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: CardForegroundType.Rat,\n  symbol: undefined,\n  cost: [Finesse],\n};\n\nexport const cardFrontRatBite: CardFrontChoice = {\n  name: 'bite',\n  description: 'The rat bares its teeth.',\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextTurn,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: CardForegroundType.Rat,\n  symbol: SymbolType.Finesse,\n  cost: [DamageDown],\n  benefit: [],\n};\nexport const cardFrontRatScreech: CardFrontChoice = {\n  name: 'screech',\n  description: 'It makes a terrifying noise.',\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextTurn,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: CardForegroundType.Rat,\n  symbol: SymbolType.Finesse,\n  cost: [Force, Finesse, Mind],\n  benefit: [],\n};\nexport const cardFrontRatCower: CardFrontChoice = {\n  name: 'cower',\n  description: 'The rat backs away in fear.',\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextTurn,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: CardForegroundType.Rat,\n  symbol: SymbolType.Finesse,\n  cost: [DamageUp],\n  benefit: [],\n};\n\nexport const cards = [\n  cardBackRatBeligerence, \n  cardBackRatFurtiveMovement, \n  cardBackRatScurrying,\n].flatMap(cardBack => {\n  return [\n    cardFrontRatBite,\n    cardFrontRatScreech,\n    cardFrontRatCower,\n  ].map<CardDefinition>(cardFace => {\n    return {\n      faces: [cardBack, cardFace],\n      recycleTarget: RecycleTarget.Draw,\n      recyclePosition: undefined,\n    };\n  });\n}).map(definition => {\n  return cardDescriptor.freeze({\n    ...definition,\n    visibleFaceIndex: 0,\n  });\n})\n","import { entityDescriptor } from \"model/domain\";\nimport { cards } from \"./cards\";\n\nexport const defaultTroll = entityDescriptor.freeze({\n  deck: cards,\n  health: 4,\n  maxHealth: 4,\n  age: 34,\n});","import { DamageDown, DamageUp, Force, Healing, Mind } from \"data/effects\";\nimport { CardBackChoice, CardBackgroundType, CardDefinition, CardFaceType, CardForegroundType, CardFrontChoice, ChoiceType, RecycleTarget, SymbolType, cardDescriptor } from \"model/domain\";\n\nconst cardBackTrollAggression: CardBackChoice = {\n  name: 'aggression',\n  description: undefined,\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: CardForegroundType.Troll,\n  symbol: undefined,\n  cost: [],\n};\nconst cardBackTrollSurprise: CardBackChoice = {\n  name: 'trolling',\n  description: 'The troll unwittingly telegraphs its next move.',\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: CardForegroundType.Troll,\n  symbol: undefined,\n  cost: [Mind],\n};\nconst cardBackTrollRetaliation: CardBackChoice = {\n  name: 'retaliation',\n  description: 'The blow enrages the troll.',\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: CardForegroundType.Troll,\n  symbol: undefined,\n  cost: [DamageUp],\n};\n\nexport const cardFrontTrollSmash: CardFrontChoice = {\n  name: 'smash',\n  description: 'The troll slams you with a tree branch.',\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextTurn,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: CardForegroundType.Troll,\n  symbol: SymbolType.Force,\n  cost: [DamageDown, DamageDown],\n  benefit: [],\n};\nexport const cardFrontTrollOdour: CardFrontChoice = {\n  name: 'trollish odour',\n  description: 'That thing reeks.',\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextTurn,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: CardForegroundType.Troll,\n  symbol: SymbolType.Force,\n  cost: [Force, Force, Mind],\n  benefit: [],\n};\nexport const cardFrontTrollRegeneration: CardFrontChoice = {\n  name: 'regenerate',\n  description: 'The trolls wounds heal before your eyes!',\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextTurn,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: CardForegroundType.Troll,\n  symbol: SymbolType.Force,\n  cost: [DamageUp],\n  benefit: [Healing],\n};\n\nexport const cards = [\n  cardBackTrollRetaliation, \n  cardBackTrollSurprise, \n  cardBackTrollAggression,\n].flatMap(cardBack => {\n  return [\n    cardFrontTrollSmash,\n    cardFrontTrollOdour,\n    cardFrontTrollRegeneration,\n  ].map<CardDefinition>(cardFace => {\n    return {\n      faces: [cardBack, cardFace],\n      recycleTarget: RecycleTarget.Draw,\n      recyclePosition: undefined,\n    };\n  });\n}).map(definition => {\n  return cardDescriptor.freeze({\n    ...definition,\n    visibleFaceIndex: 0,\n  });\n})\n","import {\n  AgeDown,\n  Healing,\n  Magic,\n  Mind,\n  PoisonDown,\n} from \"data/effects\";\nimport {\n  CardBackChoice,\n  CardBackgroundType,\n  CardDefinition,\n  CardFaceType,\n  CardForegroundType,\n  CardFrontChoice,\n  ChoiceType,\n  RecycleTarget,\n  cardDescriptor,\n} from \"model/domain\";\n\nconst cardBackFountainDrink: CardBackChoice = {\n  name: 'drink',\n  description: 'You recall something important.',\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: CardForegroundType.Fountain,\n  symbol: undefined,\n  cost: [Mind],\n};\nconst cardBackFountainDrink2: CardBackChoice = {\n  name: 'drink',\n  description: 'The magic enchoes in the fountain.',\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: CardForegroundType.Fountain,\n  symbol: undefined,\n  cost: [Magic],\n};\n\nexport const cardFrontFountainWater: CardFrontChoice = {\n  name: 'water',\n  description: 'There\\'s nothing special about this fountain.',\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextTurn,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: CardForegroundType.Fountain,\n  symbol: undefined,\n  cost: [],\n  benefit: [],\n};\nexport const cardFrontFountainPoison: CardFrontChoice = {\n  name: 'poison',\n  description: 'The murky water tastes incredibly foul.',\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextTurn,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: CardForegroundType.Fountain,\n  symbol: undefined,\n  cost: [PoisonDown],\n  benefit: [],\n};\nexport const cardFrontFountainHealing: CardFrontChoice = {\n  name: 'healing',\n  description: 'You feel restored.',\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextTurn,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: CardForegroundType.Fountain,\n  symbol: undefined,\n  cost: [Healing],\n  benefit: [],\n};\nexport const cardFrontFountainYouth: CardFrontChoice = {\n  name: 'youth',\n  description: 'The water slakes a thirst you, up until this moment, were totally unaware of .',\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextTurn,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: CardForegroundType.Fountain,\n  symbol: undefined,\n  cost: [AgeDown],\n  benefit: [],\n};\n\nexport const cards = [\n  cardBackFountainDrink, \n  cardBackFountainDrink2,\n].flatMap(cardBack => {\n  return [\n    cardFrontFountainWater,\n    cardFrontFountainPoison,\n    cardFrontFountainHealing,\n    cardFrontFountainYouth,\n  ].map<CardDefinition>(cardFace => {\n    return {\n      faces: [cardBack, cardFace],\n      recycleTarget: RecycleTarget.Discard,\n      recyclePosition: undefined,\n    };\n  });\n}).map(definition => {\n  return cardDescriptor.freeze({\n    ...definition,\n    visibleFaceIndex: 0,\n  });\n});\n\nconst cardBackFountainIgnore: CardBackChoice = {\n  name: 'ignore',\n  description: undefined,\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: CardForegroundType.Fountain,\n  symbol: undefined,\n  cost: [],\n};\nexport const cardFrontFountainIgnore: CardFrontChoice = {\n  name: 'ignore',\n  description: 'Best left alone.',\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextTurn,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: CardForegroundType.Fountain,\n  symbol: undefined,\n  cost: [],\n  benefit: [],\n};\n\nexport const cardIgnore = cardDescriptor.freeze({\n  faces: [cardBackFountainIgnore, cardFrontFountainIgnore],\n  recycleTarget: RecycleTarget.Discard,\n  recyclePosition: undefined,\n  visibleFaceIndex: 0,\n});\n","import { \n  AgeDown,\n  Finesse,\n  Force, \n  GainMaxHealth, \n  Healing,\n} from \"data/effects\";\nimport {\n  CardBackChoice,\n  CardBackgroundType,\n  CardDefinition,\n  CardFaceType,\n  CardForegroundType,\n  CardFrontChoice,\n  ChoiceType,\n  RecycleTarget,\n  cardDescriptor,\n} from \"model/domain\";\n\nconst cardBackMagicTreePickFruit: CardBackChoice = {\n  name: 'pick fruit',\n  description: 'You climb the tree and dislodge a juicy piece of fruit.',\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: CardForegroundType.MagicTree,\n  symbol: undefined,\n  cost: [Finesse],\n};\nconst cardBackMagicTreeShakeTree: CardBackChoice = {\n  name: 'shake tree',\n  description: 'You shake the tree until something falls down.',\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: CardForegroundType.MagicTree,\n  symbol: undefined,\n  cost: [Force],\n};\nconst cardBackMagicTreeGatherFruit: CardBackChoice = {\n  name: 'gather fruit',\n  description: 'You espy unspoiled fruit resting upon the ground.',\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: CardForegroundType.MagicTree,\n  symbol: undefined,\n  cost: [],\n};\n\nexport const cardFrontMagicTreeGoldenApple: CardFrontChoice = {\n  name: 'golden apple',\n  description: 'The flavour is strange, yet somehow familiar. You feel the burden of the years lift.',\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextTurn,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: CardForegroundType.MagicTree,\n  symbol: undefined,\n  cost: [AgeDown, AgeDown, AgeDown],\n  benefit: [],\n};\nexport const cardFrontMagicTreeGreenApple: CardFrontChoice = {\n  name: 'granny smith apple',\n  description: 'Surprisingly disappointing.',\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextTurn,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: CardForegroundType.MagicTree,\n  symbol: undefined,\n  cost: [Healing],\n  benefit: [],\n};\nexport const cardFrontMagicTreeRedApple: CardFrontChoice = {\n  name: 'red delicious apple',\n  description: 'You feel satisfied.',\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextTurn,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: CardForegroundType.Fountain,\n  symbol: undefined,\n  cost: [GainMaxHealth, Healing],\n  benefit: [],\n};\n\nexport const cards = [\n  cardBackMagicTreeShakeTree, \n  cardBackMagicTreeGatherFruit,\n  cardBackMagicTreePickFruit,\n].flatMap(cardBack => {\n  return [\n    cardFrontMagicTreeGoldenApple,\n    cardFrontMagicTreeGreenApple,\n    cardFrontMagicTreeRedApple,\n  ].map<CardDefinition>(cardFace => {\n    return {\n      faces: [cardBack, cardFace],\n      recycleTarget: RecycleTarget.Discard,\n      recyclePosition: undefined,\n    };\n  });\n}).map(definition => {\n  return cardDescriptor.freeze({\n    ...definition,\n    visibleFaceIndex: 0,\n  });\n});\n","import { entityDescriptor } from \"model/domain\";\nimport { cards } from \"./cards\";\n\nexport const defaultSnail = entityDescriptor.freeze({\n  deck: cards,\n  health: 1,\n  maxHealth: 1,\n  age: 1,\n});","import { DamageDown, DamageUp } from \"data/effects\";\nimport { CardBackChoice, CardBackgroundType, CardDefinition, CardFaceType, CardForegroundType, CardFrontChoice, ChoiceType, RecycleTarget, SymbolType, cardDescriptor } from \"model/domain\";\n\nconst cardBackSnailExtend: CardBackChoice = {\n  name: 'extend',\n  description: undefined,\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: CardForegroundType.Snail,\n  symbol: undefined,\n  cost: [],\n};\nconst cardBackSnailRetract: CardBackChoice = {\n  name: 'retract',\n  description: 'You knock the snail over.',\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: CardForegroundType.Snail,\n  symbol: undefined,\n  cost: [DamageUp],\n};\n\nexport const cardFrontSnailBite: CardFrontChoice = {\n  name: 'bite',\n  description: 'The snail nips at you.',\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextTurn,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: CardForegroundType.Snail,\n  symbol: SymbolType.Force,\n  cost: [DamageDown],\n  benefit: [],\n};\nexport const cardFrontSnailHide: CardFrontChoice = {\n  name: 'hide',\n  description: 'The snail retreats within its shell.',\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextTurn,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: CardForegroundType.Rat,\n  symbol: SymbolType.Force,\n  cost: [DamageUp, DamageUp],\n  benefit: [],\n};\n\nexport const cards = [\n  cardBackSnailExtend, \n  cardBackSnailRetract, \n].flatMap(cardBack => {\n  return [\n    cardFrontSnailBite,\n    cardFrontSnailHide,\n  ].map<CardDefinition>(cardFace => {\n    return {\n      faces: [cardBack, cardFace],\n      recycleTarget: RecycleTarget.Draw,\n      recyclePosition: undefined,\n    };\n  });\n}).map(definition => {\n  return cardDescriptor.freeze({\n    ...definition,\n    visibleFaceIndex: 0,\n  });\n})\n","import {\n  AgeDown,\n  AgeUp,\n  Finesse,\n  Force,\n  GainMaxHealth,\n  Magic,\n  Mind,\n  Perception,\n  PoisonDown,\n} from \"data/effects\";\nimport {\n  CardBackChoice,\n  CardBackgroundType,\n  CardDefinition,\n  CardFaceType,\n  CardForegroundType,\n  CardFrontChoice,\n  ChoiceType,\n  EffectDirection,\n  RecycleTarget,\n  SymbolType,\n  cardDescriptor,\n} from \"model/domain\";\n\nconst cardBackMushroomBlue: CardBackChoice = {\n  name: 'blue mushroom',\n  description: 'You divine the effect of the mushroom.',\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: CardForegroundType.Mushroom,\n  symbol: undefined,\n  cost: [Magic],\n};\nconst cardBackMushroomRed: CardBackChoice = {\n  name: 'red mushroom',\n  description: 'You gently inspect the mushroom.',\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: CardForegroundType.Mushroom,\n  symbol: undefined,\n  cost: [Mind, Finesse],\n};\nconst cardBackMushroomFamiliar: CardBackChoice = {\n  name: 'familiar mushroom',\n  description: 'You recognise one of the mushrooms.',\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: CardForegroundType.Mushroom,\n  symbol: undefined,\n  cost: [],\n};\n\nexport const cardFrontMushroomBenign: CardFrontChoice = {\n  name: 'benign mushroom',\n  description: 'The mushroom has no effect.',\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextTurn,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: CardForegroundType.Mushroom,\n  symbol: undefined,\n  cost: [],\n  benefit: [],\n};\nexport const cardFrontMushroomForce: CardFrontChoice = {\n  name: 'strength fungus',\n  description: 'You feel strong.',\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextTurn,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: CardForegroundType.Mushroom,\n  symbol: undefined,\n  cost: [{\n    symbol: SymbolType.GainCards,\n    direction: EffectDirection.Omni,\n    cards: [{\n      faces: [{\n        name: 'fungal strength',\n        description: 'Your fungal strength bursts forth!',\n        type: CardFaceType.ResourceBack,\n        background: CardBackgroundType.Crosshatched,\n        foreground: CardForegroundType.Mushroom,\n        symbol: SymbolType.Perception,\n        cost: [Finesse],\n      }, {\n        name: 'fungal strength',\n        description: 'I like to think of myself as a fun guy.',\n        type: CardFaceType.Resource,\n        background: CardBackgroundType.Clear,\n        foreground: CardForegroundType.Mushroom,\n        symbol: SymbolType.Perception,\n        cost: [],\n        benefit:[Force, Force, Force]\n      }],\n      recycleTarget: RecycleTarget.Draw,\n      recyclePosition: 5,\n    }],\n  }],\n  benefit: [],\n};\nexport const cardFrontMushroomPoison: CardFrontChoice = {\n  name: 'poison mushroom',\n  description: 'You feel sick.',\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextTurn,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: CardForegroundType.Mushroom,\n  symbol: undefined,\n  cost: [\n    PoisonDown,\n    {\n      symbol: SymbolType.GainCards,\n      direction: EffectDirection.Omni,\n      cards: [{\n        faces: [{\n          name: 'fungal immunity',\n          description: undefined,\n          type: CardFaceType.ResourceBack,\n          background: CardBackgroundType.Crosshatched,\n          foreground: CardForegroundType.Mushroom,\n          symbol: undefined,\n          cost: [],\n        }, {\n          name: 'fungal immunity',\n          description: '.',\n          type: CardFaceType.Resource,\n          background: CardBackgroundType.Clear,\n          foreground: CardForegroundType.Mushroom,\n          symbol: undefined,\n          cost: [],\n          benefit:[PoisonDown]\n        }],\n        recycleTarget: RecycleTarget.Draw,\n        recyclePosition: 5,\n      }],\n    },\n  ],\n  benefit: [],\n};\nexport const cardFrontMushroomFinesse: CardFrontChoice = {\n  name: 'finesse fungus',\n  description: 'You feel fast.',\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextTurn,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: CardForegroundType.Mushroom,\n  symbol: undefined,\n  cost: [{\n    symbol: SymbolType.GainCards,\n    direction: EffectDirection.Omni,\n    cards: [{\n      faces: [{\n        name: 'fugue state',\n        description: undefined,\n        type: CardFaceType.ResourceBack,\n        background: CardBackgroundType.Crosshatched,\n        foreground: CardForegroundType.Mushroom,\n        symbol: undefined,\n        cost: [],\n      }, {\n        name: 'fugue state',\n        description: '.',\n        type: CardFaceType.Resource,\n        background: CardBackgroundType.Clear,\n        foreground: CardForegroundType.Mushroom,\n        symbol: undefined,\n        cost: [Force, Mind],\n        benefit:[Finesse, Finesse]\n      }],\n      recycleTarget: RecycleTarget.Draw,\n      recyclePosition: 5,\n    }],\n  }],\n  benefit: [],\n};\nexport const cardFrontMushroomMind: CardFrontChoice = {\n  name: 'special mushroom',\n  description: 'The mushroom opens your third eye.',\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextTurn,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: CardForegroundType.Mushroom,\n  symbol: undefined,\n  cost: [{\n    symbol: SymbolType.GainCards,\n    direction: EffectDirection.Omni,\n    cards: [{\n      faces: [{\n        name: 'third eye',\n        description: undefined,\n        type: CardFaceType.ResourceBack,\n        background: CardBackgroundType.Crosshatched,\n        foreground: CardForegroundType.Mushroom,\n        symbol: SymbolType.Perception,\n        cost: [],\n      }, {\n        name: 'third eye',\n        description: 'You can see everything.',\n        type: CardFaceType.Resource,\n        background: CardBackgroundType.Clear,\n        foreground: CardForegroundType.Mushroom,\n        symbol: SymbolType.Perception,\n        cost: [],\n        benefit:[Perception]\n      }],\n      recycleTarget: RecycleTarget.Draw,\n      recyclePosition: 1,\n    }]\n  }],\n  benefit: [],\n};\nexport const cardFrontMushroomMagic: CardFrontChoice = {\n  name: 'magic mushroom',\n  description: 'You feel absolutely magical.',\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextTurn,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: CardForegroundType.Mushroom,\n  symbol: undefined,\n  cost: [{\n    symbol: SymbolType.GainCards,\n    direction: EffectDirection.Omni,\n    cards: [{\n      faces: [{\n        name: 'spore magic',\n        description: undefined,\n        type: CardFaceType.ResourceBack,\n        background: CardBackgroundType.Crosshatched,\n        foreground: CardForegroundType.Mushroom,\n        symbol: SymbolType.Magic,\n        cost: [],\n      }, {\n        name: 'spore magic',\n        description: 'Magic ish magic yeh.',\n        type: CardFaceType.Resource,\n        background: CardBackgroundType.Clear,\n        foreground: CardForegroundType.Mushroom,\n        symbol: SymbolType.Magic,\n        cost: [],\n        benefit:[Magic]\n      }],\n      recycleTarget: RecycleTarget.Draw,\n      recyclePosition: 4,\n    }]\n  }],\n  benefit: [],\n};\nexport const cardFrontMushroomYouth: CardFrontChoice = {\n  name: 'youth mushroom',\n  description: 'You feel younger.',\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextTurn,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: CardForegroundType.Mushroom,\n  symbol: undefined,\n  cost: [AgeDown, AgeDown],\n  benefit: [],\n};\nexport const cardFrontMushroomMaturity: CardFrontChoice = {\n  name: 'maturity mushroom',\n  description: 'You feel older.',\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextTurn,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: CardForegroundType.Mushroom,\n  symbol: undefined,\n  cost: [AgeUp],\n  benefit: [],\n};\nexport const cardFrontMushroomHealing: CardFrontChoice = {\n  name: 'health mushroom',\n  description: 'You feel alive.',\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextTurn,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: CardForegroundType.Mushroom,\n  symbol: undefined,\n  cost: [GainMaxHealth],\n  benefit: [],\n};\n\nexport const cards = [\n  cardBackMushroomBlue, \n  cardBackMushroomRed,\n  cardBackMushroomFamiliar,\n].flatMap(cardBack => {\n  return [\n    cardFrontMushroomBenign,\n    cardFrontMushroomFinesse,\n    cardFrontMushroomForce,\n    cardFrontMushroomPoison,\n    cardFrontMushroomMagic,\n    cardFrontMushroomMind,\n    cardFrontMushroomYouth,\n    cardFrontMushroomMaturity,\n    cardFrontMushroomHealing,\n  ].map<CardDefinition>(cardFace => {\n    return {\n      faces: [cardBack, cardFace],\n      recycleTarget: RecycleTarget.Discard,\n      recyclePosition: undefined,\n    };\n  });\n}).map(definition => {\n  return cardDescriptor.freeze({\n    ...definition,\n    visibleFaceIndex: 0,\n  });\n});\n\nconst cardBackMushroomIgnore: CardBackChoice = {\n  name: 'ignore',\n  description: undefined,\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: CardForegroundType.Mushroom,\n  symbol: undefined,\n  cost: [],\n};\n\nexport const cardFrontMushroomIgnore: CardFrontChoice = {\n  name: 'ignore',\n  description: 'Best left alone.',\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextTurn,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: CardForegroundType.Mushroom,\n  symbol: undefined,\n  cost: [],\n  benefit: [],\n};\n\nexport const cardIgnore = cardDescriptor.freeze({\n  faces: [cardBackMushroomIgnore, cardFrontMushroomIgnore],\n  recycleTarget: RecycleTarget.Discard,\n  recyclePosition: undefined,\n  visibleFaceIndex: 0,\n});\n","import { CardBackChoice, CardBackgroundType, CardFaceType, CardFrontChoice, ChoiceType, RecycleTarget, cardDescriptor } from \"model/domain\";\nimport { cardDodge } from \"./dodge\";\nimport { cardFinesseLazy } from \"./finesse\";\nimport { cardForceLazy } from \"./force\";\nimport { cardHeadbutt } from \"./headbutt\";\nimport { cardKick } from \"./kick\";\nimport { cardMindEager } from \"./mind\";\nimport { cardBlock, cardDeflect } from \"./shield\";\nimport { cardTorch } from \"./torch\";\nimport { AgeDown, AgeUp, Healing } from \"data/effects\";\n\n\nexport const cards = [\n  cardDodge,\n  cardFinesseLazy,\n  cardForceLazy,\n  cardHeadbutt,\n  cardKick,\n  cardMindEager,\n  cardBlock,\n  cardDeflect,\n  cardTorch,\n];\n\nconst cardBackItemIgnore: CardBackChoice = {\n  name: 'ignore',\n  description: undefined,\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: undefined,\n  symbol: undefined,\n  cost: [],\n};\n\n\nconst cardFrontItemIgnore: CardFrontChoice = {\n  name: 'ignore',\n  description: 'Junk.',\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextTurn,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: undefined,\n  symbol: undefined,\n  cost: [],\n  benefit: [],\n};\n\nconst cardFrontItemIgnoreAgeDown: CardFrontChoice = {\n  name: 'ignore',\n  description: 'You feel unburdened.',\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextTurn,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: undefined,\n  symbol: undefined,\n  cost: [AgeDown],\n  benefit: [],\n};\n\nconst cardFrontItemIgnoreAgeUp: CardFrontChoice = {\n  name: 'ignore',\n  description: 'You feel responsible.',\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextTurn,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: undefined,\n  symbol: undefined,\n  cost: [AgeUp],\n  benefit: [],\n};\n\nconst cardFrontItemIgnoreHealing: CardFrontChoice = {\n  name: 'ignore',\n  description: 'You feel soothed.',\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextTurn,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: undefined,\n  symbol: undefined,\n  cost: [Healing],\n  benefit: [],\n};\n\n\nexport const ignoreCards = [\n  cardFrontItemIgnore,\n  cardFrontItemIgnoreAgeDown,\n  cardFrontItemIgnoreAgeUp,\n  cardFrontItemIgnoreHealing,\n].map(cardFront => (\n    cardDescriptor.freeze({\n      faces: [cardBackItemIgnore, cardFront],\n      recycleTarget: RecycleTarget.Discard,\n      recyclePosition: undefined,\n      visibleFaceIndex: 0,\n    })\n));\n","import { DamageUp, Mind } from \"data/effects\";\nimport { CardBackResource, CardBackgroundType, CardDefinition, CardFaceType, CardFrontResource, RecycleTarget, SymbolType, cardDescriptor } from \"model/domain\";\n\nconst cardBackHeadbutt: CardBackResource = {\n  name: 'headbutt',\n  description: 'The head is really a fifth limb if you think about it.',\n  type: CardFaceType.ResourceBack,\n  background: CardBackgroundType.Crosshatched,\n  symbol: undefined,\n  foreground: undefined,\n  cost: [Mind],\n};\nconst cardFrontHeadbutt: CardFrontResource = {\n  name: 'headbutt',\n  description: 'With a deranged grin, you smash your forehead into the opponent.',\n  type: CardFaceType.Resource,\n  background: CardBackgroundType.Clear,\n  foreground: undefined,\n  symbol: SymbolType.Force,\n  cost: [Mind, Mind],\n  benefit: [DamageUp],\n};\nexport const cardDefinitionHeadbutt: CardDefinition = {\n  recycleTarget: RecycleTarget.Draw,\n  recyclePosition: 9,\n  faces: [cardBackHeadbutt, cardFrontHeadbutt],\n};\nexport const cardHeadbutt = cardDescriptor.freeze({\n  ...cardDefinitionHeadbutt,\n  visibleFaceIndex: 0,\n});\n","import { DamageDown, Force } from \"data/effects\";\nimport { CardBackResource, CardBackgroundType, CardDefinition, CardFaceType, CardFrontResource, RecycleTarget, SymbolType, cardDescriptor } from \"model/domain\";\n\nconst cardBackBlock: CardBackResource = {\n  name: 'block',\n  description: 'You grip your shield tightly.',\n  type: CardFaceType.ResourceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: undefined,\n  symbol: undefined,\n  cost: [Force, Force],\n};\nconst cardFrontBlock: CardFrontResource = {\n  name: 'block',\n  description: 'You raise your shield.',\n  type: CardFaceType.Resource,\n  background: CardBackgroundType.Clear,\n  foreground: undefined,\n  symbol: SymbolType.Force,\n  cost: [],\n  benefit: [DamageDown, DamageDown, Force],\n};\nexport const cardDefinitionBlock: CardDefinition = {\n  recycleTarget: RecycleTarget.Draw,\n  recyclePosition: 5,\n  faces: [cardBackBlock, cardFrontBlock],\n};\nexport const cardBlock = cardDescriptor.freeze({\n  ...cardDefinitionBlock,\n  visibleFaceIndex: 0,\n});\n\nconst cardBackDeflect: CardBackResource = {\n  name: 'deflect',\n  description: 'You adjust your shield, just so.',\n  type: CardFaceType.ResourceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: undefined,\n  symbol: undefined,\n  cost: [Force],\n};\nconst cardFrontDeflect: CardFrontResource = {\n  name: 'deflect',\n  description: 'The blow glances off.',\n  type: CardFaceType.Resource,\n  background: CardBackgroundType.Clear,\n  foreground: undefined,\n  symbol: SymbolType.Force,\n  cost: [],\n  benefit: [DamageDown],\n};\nexport const cardDefinitionDeflect: CardDefinition = {\n  recycleTarget: RecycleTarget.Draw,\n  recyclePosition: 3,\n  faces: [cardBackDeflect, cardFrontDeflect],\n};\nexport const cardDeflect = cardDescriptor.freeze({\n  ...cardDefinitionDeflect,\n  visibleFaceIndex: 0,\n});\n","import { DamageUp, Force, Perception } from \"data/effects\";\nimport { CardBackResource, CardBackgroundType, CardDefinition, CardFaceType, CardFrontResource, RecycleTarget, SymbolType, cardDescriptor } from \"model/domain\";\n\nconst cardBackTorch: CardBackResource = {\n  name: 'torch',\n  description: 'The torch ignites!',\n  type: CardFaceType.ResourceBack,\n  background: CardBackgroundType.Crosshatched,\n  symbol: undefined,\n  foreground: undefined,\n  cost: [Force],\n};\nconst cardFrontTorch: CardFrontResource = {\n  name: 'torch',\n  description: 'You beat back beasts and darkness alike.',\n  type: CardFaceType.Resource,\n  background: CardBackgroundType.Clear,\n  foreground: undefined,\n  symbol: SymbolType.Force,\n  cost: [],\n  benefit: [DamageUp, Perception],\n};\nexport const cardDefinitionTorch: CardDefinition = {\n  recycleTarget: RecycleTarget.Draw,\n  recyclePosition: 5,\n  faces: [cardBackTorch, cardFrontTorch],\n};\nexport const cardTorch = cardDescriptor.freeze({\n  ...cardDefinitionTorch,\n  visibleFaceIndex: 0,\n});\n","import { entityDescriptor } from \"model/domain\";\nimport { cards } from \"../rooster/cards\";\n\nexport const defaultRooster = entityDescriptor.freeze({\n  deck: cards,\n  health: 2,\n  maxHealth: 2,\n  age: 5,\n});","import { DamageDown, DamageUp, Finesse, Force, Mind, Perception } from \"data/effects\";\nimport {\n  CardBackChoice,\n  CardBackgroundType,\n  CardDefinition,\n  CardFaceType,\n  CardForegroundType,\n  CardFrontChoice,\n  ChoiceType,\n  RecycleTarget,\n  SymbolType,\n  cardDescriptor,\n} from \"model/domain\";\n\nconst cardBackRoosterTerritorial: CardBackChoice = {\n  name: 'territorial',\n  description: 'The rooster makes angry clucking noises.',\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: CardForegroundType.Rooster,\n  symbol: undefined,\n  cost: [],\n};\nconst cardBackRoosterIntimidation: CardBackChoice = {\n  name: 'intimidation',\n  description: 'You see through the birds bluster.',\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: CardForegroundType.Rooster,\n  symbol: undefined,\n  cost: [Mind],\n};\n\nexport const cardFrontRoosterClaw: CardFrontChoice = {\n  name: 'claw',\n  description: 'The rooster claws at your eyes.',\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextTurn,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: CardForegroundType.Rooster,\n  symbol: SymbolType.Finesse,\n  cost: [DamageDown, Finesse, Perception],\n  benefit: [],\n};\nexport const cardFrontRoosterCrow: CardFrontChoice = {\n  name: 'crow',\n  description: 'The cock crows.',\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextTurn,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: CardForegroundType.Rooster,\n  symbol: SymbolType.Mind,\n  cost: [Mind, Mind, Mind],\n  benefit: [],\n};\nexport const cardFrontRoosterEvade: CardFrontChoice = {\n  name: 'evade',\n  description: 'In a cloud of feathers, the rooster forces you to give chase.',\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextTurn,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: CardForegroundType.Rooster,\n  symbol: SymbolType.Finesse,\n  cost: [DamageUp, Force],\n  benefit: [],\n};\n\nexport const cards = [\n  cardBackRoosterTerritorial, \n  cardBackRoosterTerritorial, \n  cardBackRoosterIntimidation,\n].flatMap(cardBack => {\n  return [\n    cardFrontRoosterClaw,\n    cardFrontRoosterCrow,\n    cardFrontRoosterEvade,\n  ].map<CardDefinition>(cardFace => {\n    return {\n      faces: [cardBack, cardFace],\n      recycleTarget: RecycleTarget.Draw,\n      recyclePosition: undefined,\n    };\n  });\n}).map(definition => {\n  return cardDescriptor.freeze({\n    ...definition,\n    visibleFaceIndex: 0,\n  });\n})\n","import { entityDescriptor } from \"model/domain\";\nimport { cards } from \"./cards\";\n\nexport const defaultDummy = entityDescriptor.freeze({\n  deck: cards,\n  health: 6,\n  maxHealth: 6,\n  age: 600,\n});","import { DamageUp, Force } from \"data/effects\";\nimport {\n  CardBackChoice,\n  CardBackgroundType,\n  CardDefinition,\n  CardFaceType,\n  CardForegroundType,\n  CardFrontChoice,\n  ChoiceType,\n  RecycleTarget,\n  cardDescriptor,\n} from \"model/domain\";\n\nconst cardBackDummy: CardBackChoice = {\n  name: 'indifference',\n  description: undefined,\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: CardForegroundType.Dummy,\n  symbol: undefined,\n  cost: [],\n};\n\nexport const cardFrontDummyDefend: CardFrontChoice = {\n  name: 'innate hardness',\n  description: undefined,\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextTurn,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: CardForegroundType.Dummy,\n  symbol: undefined,\n  cost: [DamageUp],\n  benefit: [],\n};\nexport const cardFrontDummyHardWork: CardFrontChoice = {\n  name: 'hard work',\n  description: '',\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextTurn,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: CardForegroundType.Dummy,\n  symbol: undefined,\n  cost: [Force, Force, Force],\n  benefit: [],\n};\nexport const cardFrontDummyGiveUp: CardFrontChoice = {\n  name: 'give up',\n  description: '',\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextPage,\n    encounter: undefined,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: CardForegroundType.Dummy,\n  symbol: undefined,\n  cost: [],\n  benefit: [],\n};\n\nexport const cards = [\n  cardBackDummy, \n].flatMap(cardBack => {\n  return [\n    cardFrontDummyDefend,\n    cardFrontDummyHardWork,\n    cardFrontDummyGiveUp,\n  ].map<CardDefinition>(cardFace => {\n    return {\n      faces: [cardBack, cardFace],\n      recycleTarget: RecycleTarget.Draw,\n      recyclePosition: undefined,\n    };\n  });\n}).map(definition => {\n  return cardDescriptor.freeze({\n    ...definition,\n    visibleFaceIndex: 0,\n  });\n})\n","import { ChapterType, chapterDescriptor } from \"model/domain\";\nimport { cards, finalCard } from \"./cards\";\n\nexport const chapter = chapterDescriptor.freeze({\n  type: ChapterType.Forest,\n  deck: [\n    ...cards,\n  ],\n  pagesRemaining: 6,\n  finalCard,\n});","import { Perception, Force, Finesse } from \"data/effects\";\nimport { cardFrontShrine } from \"data/events/shrine/cards\";\nimport {\n  CardBackgroundType,\n  CardFaceType,\n  RecycleTarget,\n  ChoiceType,\n  EncounterType,\n  MonsterType,\n  EventType,\n  CardState,\n  CardForegroundType,\n  CardBackChoice,\n  CardFrontChoice,\n  CardDefinition,\n  cardDescriptor,\n} from \"model/domain\";\n\nconst cardBackDarkenedPath: CardBackChoice = {\n  name: 'shadowed path',\n  description: 'The path reveals itself.',\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.DarkenedForestPath,\n  foreground: undefined,\n  symbol: undefined,\n  cost: [Perception],\n};\nconst cardBackOvergrownPath: CardBackChoice = {\n  name: 'overgrown path',\n  description: 'You clear the branches.',\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.DarkenedForestPath,\n  foreground: undefined,\n  symbol: undefined,\n  cost: [Force],\n};\nconst cardBackPath: CardBackChoice = {\n  name: 'path',\n  description: undefined,\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.ForestPath,\n  foreground: undefined,\n  symbol: undefined,\n  cost: [],\n};\nconst cardFrontPath: CardFrontChoice = {\n  name: 'small clearing',\n  description: 'This way looks safe.',\n  type: CardFaceType.Choice,\n  background: CardBackgroundType.ForestPath,\n  foreground: undefined,\n  symbol: undefined,\n  choice: {\n    type: ChoiceType.NextPage,\n    encounter: undefined,\n  },\n  cost: [],\n  benefit: [],\n};\nconst cardFrontRat: CardFrontChoice = {\n  name: 'a big snail',\n  description: 'The snail inches toward you.',\n  type: CardFaceType.Choice,\n  background: CardBackgroundType.ForestPath,\n  foreground: CardForegroundType.Snail,\n  symbol: undefined,\n  choice: {\n    type: ChoiceType.NextPage,\n    encounter: {\n      type: EncounterType.Battle,\n      monster: MonsterType.Snail,\n    },\n  },\n  cost: [],\n  benefit: [],\n};\nconst cardFrontBrambles: CardFrontChoice = {\n  name: 'thicket',\n  description: 'The thorns entangle you.',\n  type: CardFaceType.Choice,\n  background: CardBackgroundType.ForestPath,\n  foreground: CardForegroundType.Trap,\n  symbol: undefined,\n  choice: {\n    type: ChoiceType.NextPage,\n    encounter: undefined,\n  },\n  cost: [Force, Finesse],\n  benefit: [],\n};\nconst cardFrontMagicTree: CardFrontChoice = {\n  name: 'magic tree',\n  description: 'There\\'s something unusual about this tree.',\n  type: CardFaceType.Choice,\n  background: CardBackgroundType.ForestPath,\n  foreground: CardForegroundType.MagicTree,\n  symbol: undefined,\n  choice: {\n    type: ChoiceType.NextPage,\n    encounter: {\n      type: EncounterType.Event,\n      event: EventType.MagicTree,\n    },\n  },\n  cost: [],\n  benefit: [],\n};\nconst cardFrontMushroom: CardFrontChoice = {\n  name: 'mushroom',\n  description: 'A circle of mushrooms.',\n  type: CardFaceType.Choice,\n  background: CardBackgroundType.ForestPath,\n  foreground: CardForegroundType.Mushroom,\n  symbol: undefined,\n  choice: {\n    type: ChoiceType.NextPage,\n    encounter: {\n      type: EncounterType.Event,\n      event: EventType.Mushroom,\n    },\n  },\n  cost: [],\n  benefit: [],\n};\nconst cardFrontTreasure: CardFrontChoice = {\n  name: 'treasure',\n  description: 'The glint of gold.',\n  type: CardFaceType.Choice,\n  background: CardBackgroundType.Passageway,\n  foreground: CardForegroundType.Treasure,\n  symbol: undefined,\n  choice: {\n    type: ChoiceType.NextPage,\n    encounter: {\n      type: EncounterType.Event,\n      event: EventType.Treasure,\n    },\n  },\n  cost: [],\n  benefit: [],\n};\n\nexport const cards = [\n  cardBackOvergrownPath,\n  cardBackDarkenedPath,\n  cardBackPath,\n].flatMap(back => {\n  return [\n    cardFrontPath,\n    cardFrontRat,\n    cardFrontBrambles,\n  ].map<CardDefinition>(front => {\n    return {\n      recycleTarget: RecycleTarget.Draw,\n      recyclePosition: undefined,\n      faces: [back, front],\n    };\n  });\n}).concat([{\n  faces: [cardBackOvergrownPath, cardFrontMagicTree],\n  recycleTarget: RecycleTarget.Discard,\n  recyclePosition: undefined,\n}, {\n  faces: [cardBackDarkenedPath, cardFrontMagicTree],\n  recycleTarget: RecycleTarget.Discard,\n  recyclePosition: undefined,\n}, {\n  faces: [cardBackOvergrownPath, cardFrontMushroom],\n  recycleTarget: RecycleTarget.Discard,\n  recyclePosition: undefined,\n}, {\n  faces: [cardBackDarkenedPath, cardFrontMushroom],\n  recycleTarget: RecycleTarget.Discard,\n  recyclePosition: undefined,\n}, {\n  faces: [cardBackPath, cardFrontMushroom],\n  recycleTarget: RecycleTarget.Discard,\n  recyclePosition: undefined,\n}, {\n  faces: [cardBackOvergrownPath, cardFrontShrine],\n  recycleTarget: RecycleTarget.Discard,\n  recyclePosition: undefined,\n}, {\n  faces: [cardBackDarkenedPath, cardFrontShrine],\n  recycleTarget: RecycleTarget.Discard,\n  recyclePosition: undefined,\n}, {\n  faces: [cardBackPath, cardFrontTreasure],\n  recycleTarget: RecycleTarget.Discard,\n  recyclePosition: undefined,\n}, {\n  faces: [cardBackPath, cardFrontShrine],\n  recycleTarget: RecycleTarget.Discard,\n  recyclePosition: undefined,\n}]).map<CardState>(definition => ({\n  ...definition,\n  visibleFaceIndex: 0,\n}));\n\nconst cardBackFinal: CardBackChoice = {\n  name: 'cobbled road',\n  description: 'You stumble out of the forest, blinking in the sunlight.',\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.DarkenedForestPath,\n  foreground: undefined,\n  symbol: undefined,\n  cost: [],\n};\n\nconst cardFrontFinal: CardFrontChoice = {\n  name: 'troll',\n  description: 'A vulgar oaf blocks your way. He looks at you, licking his lips obscenely.',\n  type: CardFaceType.Choice,\n  background: CardBackgroundType.ForestPath,\n  foreground: undefined,\n  symbol: undefined,\n  choice: {\n    type: ChoiceType.NextChapter,\n    encounter: {\n      type: EncounterType.Battle,\n      monster: MonsterType.Troll,\n    },\n    targetChapterIndex: 3,\n  },\n  cost: [],\n  benefit: [],\n};\n\nexport const finalCard = cardDescriptor.freeze({\n  faces: [cardBackFinal, cardFrontFinal],\n  recycleTarget: RecycleTarget.Discard,\n  recyclePosition: undefined,\n  visibleFaceIndex: 0,\n});\n\n","import { ChapterType, chapterDescriptor } from \"model/domain\";\nimport { cards, finalCard } from \"./cards\";\n\nexport const chapter = chapterDescriptor.freeze({\n  type: ChapterType.Prelude,\n  deck: [\n    ...cards,\n  ],\n  pagesRemaining: 1,\n  finalCard,\n});\n\n","import { cardDefinitionHeadbutt } from \"data/items/headbutt\";\nimport {\n  cardDefinitionForce1,\n  cardDefinitionForce3,\n  cardDefinitionForce5,\n  cardDefinitionForceLazy2x,\n} from \"data/items/force\";\nimport { cardDefinitionBlock, cardDefinitionDeflect } from \"data/items/shield\";\nimport {\n  cardDefinitionClumsyThrust,\n  cardDefinitionQuckThrust,\n  cardDefinitionRiposte,\n  cardDefinitionSlash,\n} from \"data/items/sword\";\nimport { cardDefinitionTorch } from \"data/items/torch\";\nimport {\n  CardBackChoice,\n  CardBackgroundType,\n  CardDefinition,\n  CardFaceType,\n  CardForegroundType,\n  CardFrontChoice,\n  ChoiceType,\n  EffectDirection,\n  EncounterType,\n  MonsterType,\n  RecycleTarget,\n  SymbolType,\n  cardDescriptor,\n} from \"model/domain\";\nimport { cardDefinitionFinesseEager, cardDefinitionFinesseMartialTraining } from \"data/items/finesse\";\nimport { GainMaxHealth, Healing } from \"data/effects\";\nimport { cardDefinitionDodge } from \"data/items/dodge\";\n\nconst cardBackAttributes: CardBackChoice = {\n  name: 'character select',\n  description: undefined,\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: CardForegroundType.Fountain,\n  symbol: undefined,\n  cost: [],\n};\n\nexport const cardFrontAttributesWarrior: CardFrontChoice = {\n  name: 'sword and shield',\n  description: 'You choose the path of the warrior.',\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextPage,\n    encounter: undefined,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: undefined,\n  symbol: undefined,\n  cost: [{\n    symbol: SymbolType.GainCards,\n    direction: EffectDirection.Down,\n    cards: [\n      cardDefinitionFinesseMartialTraining,\n      cardDefinitionForce1,\n      cardDefinitionForce1,\n      cardDefinitionForce3,\n      cardDefinitionForce5,\n      cardDefinitionForceLazy2x,\n      cardDefinitionHeadbutt,\n      cardDefinitionSlash,\n      cardDefinitionRiposte,\n      cardDefinitionQuckThrust,\n      cardDefinitionClumsyThrust,\n      cardDefinitionTorch,\n      cardDefinitionBlock,\n      cardDefinitionDeflect,\n    ],\n  }, GainMaxHealth, Healing],\n  benefit: [],\n};\nexport const cardFrontAttributesFinesse: CardFrontChoice = {\n  name: 'cloak and dagger',\n  description: 'You choose the path of the thief.',\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextPage,\n    encounter: undefined,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: undefined,\n  symbol: undefined,\n  cost: [{\n    symbol: SymbolType.GainCards,\n    direction: EffectDirection.Down,\n    cards: [\n      cardDefinitionFinesseEager,\n      cardDefinitionFinesseEager,\n      cardDefinitionDodge,\n      cardDefinitionDodge,\n    ],\n  }],\n  benefit: [],\n};\nexport const cardFrontAttributesMind: CardFrontChoice = {\n  name: 'book and staff',\n  description: 'You choose the path of the scholar.',\n  type: CardFaceType.Choice,\n  choice: {\n    type: ChoiceType.NextPage,\n    encounter: undefined,\n  },\n  background: CardBackgroundType.Clear,\n  foreground: undefined,\n  symbol: undefined,\n  cost: [],\n  benefit: [],\n};\n\nexport const cards = [\n  cardBackAttributes, \n].flatMap(cardBack => {\n  return [\n    cardFrontAttributesWarrior,\n    cardFrontAttributesFinesse,\n    cardFrontAttributesMind,\n  ].map<CardDefinition>(cardFace => {\n    return {\n      faces: [cardBack, cardFace],\n      recycleTarget: RecycleTarget.Discard,\n      recyclePosition: undefined,\n    };\n  });\n}).map(definition => {\n  return cardDescriptor.freeze({\n    ...definition,\n    visibleFaceIndex: 0,\n  });\n});\n\nconst cardBackFinal: CardBackChoice = {\n  name: 'training',\n  description: 'A battered tree stump sits in the yard. It bears the scars of many mock battles.',\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: undefined,\n  symbol: undefined,\n  cost: [],\n};\n\nconst cardFrontFinal: CardFrontChoice = {\n  name: 'stump',\n  description: undefined,\n  type: CardFaceType.Choice,\n  background: CardBackgroundType.Clear,\n  foreground: undefined,\n  symbol: undefined,\n  choice: {\n    type: ChoiceType.NextChapter,\n    encounter: {\n      type: EncounterType.Battle,\n      monster: MonsterType.Dummy,\n    },\n    targetChapterIndex: 1,\n  },\n  cost: [],\n  benefit: [],\n};\n\n\nexport const finalCard = cardDescriptor.freeze({\n  faces: [cardBackFinal, cardFrontFinal],\n  recycleTarget: RecycleTarget.Discard,\n  recyclePosition: undefined,\n  visibleFaceIndex: 0,\n});\n","import { DamageDown, DamageUp, Finesse, Force } from \"data/effects\";\nimport {\n  CardBackResource,\n  CardBackgroundType,\n  CardDefinition,\n  CardFaceType,\n  CardFrontResource,\n  RecycleTarget,\n  SymbolType,\n  cardDescriptor,\n} from \"model/domain\";\n\nconst cardBackSlash: CardBackResource = {\n  name: 'slash',\n  description: 'You become aware of the heft of your sword.',\n  type: CardFaceType.ResourceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: undefined,\n  symbol: undefined,\n  cost: [Force, Force],\n};\nconst cardFrontSlash: CardFrontResource = {\n  name: 'slash',\n  description: 'You swing the sturdy blade.',\n  type: CardFaceType.Resource,\n  background: CardBackgroundType.Clear,\n  foreground: undefined,\n  symbol: SymbolType.Force,\n  cost: [],\n  benefit: [DamageUp, DamageUp],\n};\nexport const cardDefinitionSlash: CardDefinition = {\n  recycleTarget: RecycleTarget.Draw,\n  recyclePosition: 5,\n  faces: [cardBackSlash, cardFrontSlash],\n};\nexport const cardSlash = cardDescriptor.freeze({\n  ...cardDefinitionSlash,\n  visibleFaceIndex: 0,\n});\n\nconst cardBackRiposte: CardBackResource = {\n  name: 'riposte',\n  description: 'You prepare a counterattack.',\n  type: CardFaceType.ResourceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: undefined,\n  symbol: undefined,\n  cost: [Force, Finesse],\n};\nconst cardFrontRiposte: CardFrontResource = {\n  name: 'riposte',\n  description: 'Deflecting the blow, you return the favour.',\n  type: CardFaceType.Resource,\n  background: CardBackgroundType.Clear,\n  foreground: undefined,\n  symbol: SymbolType.Finesse,\n  cost: [],\n  benefit: [DamageDown, DamageUp],\n};\nexport const cardDefinitionRiposte: CardDefinition = {\n  recycleTarget: RecycleTarget.Draw,\n  recyclePosition: 5,\n  faces: [cardBackRiposte, cardFrontRiposte],\n};\nexport const cardRiposte = cardDescriptor.freeze({\n  ...cardDefinitionSlash,\n  visibleFaceIndex: 0,\n});\n\nconst cardBackQuickThrust: CardBackResource = {\n  name: 'quick thrust',\n  description: 'You prepare to strike.',\n  type: CardFaceType.ResourceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: undefined,\n  symbol: undefined,\n  cost: [Finesse],\n};\nconst cardFrontQuickThrust: CardFrontResource = {\n  name: 'quick thrust',\n  description: 'Viper-quick, you lash out with your blade.',\n  type: CardFaceType.Resource,\n  background: CardBackgroundType.Clear,\n  foreground: undefined,\n  symbol: SymbolType.Finesse,\n  cost: [],\n  benefit: [DamageUp],\n};\nexport const cardDefinitionQuckThrust: CardDefinition = {\n  recycleTarget: RecycleTarget.Draw,\n  recyclePosition: 4,\n  faces: [cardBackQuickThrust, cardFrontQuickThrust],\n};\nexport const cardQuickThrust = cardDescriptor.freeze({\n  ...cardDefinitionQuckThrust,\n  visibleFaceIndex: 0,\n});\n\nconst cardBackClumsyThrust: CardBackResource = {\n  name: 'inelegant thrust',\n  description: 'Shakily, you ready your blade.',\n  type: CardFaceType.ResourceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: undefined,\n  symbol: undefined,\n  cost: [Force],\n};\nconst cardFrontClumsyThrust: CardFrontResource = {\n  name: 'inelegant thrust',\n  description: 'You desperately lunge with your sword.',\n  type: CardFaceType.Resource,\n  background: CardBackgroundType.Clear,\n  foreground: undefined,\n  symbol: SymbolType.Force,\n  cost: [Finesse],\n  benefit: [DamageUp],\n};\nexport const cardDefinitionClumsyThrust: CardDefinition = {\n  recycleTarget: RecycleTarget.Draw,\n  recyclePosition: 2,\n  faces: [cardBackClumsyThrust, cardFrontClumsyThrust],\n};\nexport const cardClumsyThrust = cardDescriptor.freeze({\n  ...cardDefinitionClumsyThrust,\n  visibleFaceIndex: 0,\n});\n","import { ChapterType, chapterDescriptor } from \"model/domain\";\nimport { cards, finalCard } from \"./cards\";\n\nexport const chapter = chapterDescriptor.freeze({\n  type: ChapterType.Prelude,\n  deck: [\n    ...cards,\n  ],\n  pagesRemaining: 2,\n  finalCard: finalCard,\n});","import {\n  CardBackChoice,\n  CardBackgroundType,\n  CardFaceType,\n  CardForegroundType,\n  CardFrontChoice,\n  ChoiceType,\n  EncounterType,\n  EventType,\n  MonsterType,\n  RecycleTarget,\n  cardDescriptor,\n} from \"model/domain\";\n\nconst cardBackTreasure: CardBackChoice = {\n  name: 'armoury',\n  description: 'You stop in to see the old visier before you head off.',\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.Crosshatched,\n  foreground: undefined,\n  symbol: undefined,\n  cost: [],\n};\n\nconst cardFrontTreasure: CardFrontChoice = {\n  name: 'armoury',\n  description: 'It\\'s dangerous to go alone! Take this.',\n  type: CardFaceType.Choice,\n  background: CardBackgroundType.Passageway,\n  foreground: undefined,\n  symbol: undefined,\n  choice: {\n    type: ChoiceType.NextPage,\n    encounter: {\n      type: EncounterType.Event,\n      event: EventType.Shop,\n    },\n  },\n  cost: [],\n  benefit: [],\n};\n\nexport const treasureCard = cardDescriptor.freeze({\n  faces: [cardBackTreasure, cardFrontTreasure],\n  recycleTarget: RecycleTarget.Discard,\n  recyclePosition: undefined,\n  visibleFaceIndex: 0,\n});\n\nexport const cards = [treasureCard];\n\nconst cardBackFinal: CardBackChoice = {\n  name: 'threshold guardian',\n  description: 'The rooster stands in your way. You know this bird, it will not back down.',\n  type: CardFaceType.ChoiceBack,\n  background: CardBackgroundType.ForestPath,\n  foreground: CardForegroundType.Rooster,\n  symbol: undefined,\n  cost: [],\n};\n\nconst cardFrontFinal: CardFrontChoice = {\n  name: 'rooster',\n  description: 'The rooster eyes you with pure malice.',\n  type: CardFaceType.Choice,\n  background: CardBackgroundType.ForestPath,\n  foreground: CardForegroundType.Rooster,\n  symbol: undefined,\n  choice: {\n    type: ChoiceType.NextChapter,\n    encounter: {\n      type: EncounterType.Battle,\n      monster: MonsterType.Rooster,\n    },\n    targetChapterIndex: 2,\n  },\n  cost: [],\n  benefit: [],\n};\n\n\nexport const finalCard = cardDescriptor.freeze({\n  faces: [cardBackFinal, cardFrontFinal],\n  recycleTarget: RecycleTarget.Discard,\n  recyclePosition: undefined,\n  visibleFaceIndex: 0,\n});\n","import { Card, Deck } from \"model/domain\";\nimport { Accessor, Component, For } from \"solid-js\";\nimport { DeckComponent } from \"./deck\";\nimport { DeckController } from \"./deck_controller\";\n\nexport function createDeck(deck: Accessor<Deck | undefined>, CardComponent: Component<{ model: Card }>) {\n\n  const controller = new DeckController();\n\n  function Component() {\n    return (\n      <DeckComponent>\n        <For each={deck()}>\n          {card => (\n            <CardComponent model={card}/>\n          )}\n        </For>\n      </DeckComponent>\n    );\n  }\n\n  return {\n    Component,\n    controller,\n  }\n}\n","import { For, ParentProps, children } from \"solid-js\";\nimport styles from './deck.module.scss';\n\nexport function DeckComponent(props: ParentProps<{}>) {\n  return (\n    <div class={styles.deck}>\n      <For each={children(() => props.children).toArray()}>\n        {\n          child => (\n            <div class={styles.card}>{child}</div>\n          )\n        }\n      </For>\n    </div>\n  );\n}\n",".deck {\n  width: 100%;\n  height: 100%;\n}\n\n.card {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n\n@for $i from 1 through 30 {\n  .card:nth-child(#{$i}) {\n    transform: translateZ(calc(#{$i}vw * 0.2));\n  }\n}\n","export class DeckController {\n  constructor() {\n    \n  }\n}\n","import { Entity } from \"model/domain\";\nimport { StatusOverlayComponent } from \"./status_overlay\";\nimport { EntityHealthComponent } from \"components/entity/health/entity_health\";\nimport { NarrationComponent } from \"components/narration/narration\";\nimport { RenderingSpeaker } from \"ui/speaker/rendering_speaker\";\nimport { createMemo } from \"solid-js\";\nimport { EntityAgeComponent } from \"components/entity/age/entity_age\";\n\nexport function createStatusOverlay() {\n  return function(props: {\n    playerCharacter: Entity,\n    speaker: RenderingSpeaker,\n  }) {\n    const health = (\n        <EntityHealthComponent\n            health={props.playerCharacter.health}\n            maxHealth={props.playerCharacter.maxHealth}/>\n    );\n    const age = (\n        <EntityAgeComponent age={props.playerCharacter.age}/>\n    );\n    const words = createMemo(() => {\n      return props.speaker.text?.split(' ') || [];\n    });\n    const index = createMemo(() => {\n      const text = props.speaker.text || '';\n      const spoken = text.substring(0, props.speaker.characterIndex);      \n      return Math.min(spoken.length, spoken.split(' ').length);\n    });\n    const narration = (\n        <NarrationComponent\n            words={words()}\n            index={index()}/>\n    );\n    return (\n      <StatusOverlayComponent\n          health={health}\n          age={age}\n          narration={narration}\n      />\n    );\n  };\n}","import { JSXElement } from 'solid-js';\nimport styles from './status_overlay.module.scss';\n\nexport function StatusOverlayComponent(props: {\n  health: JSXElement,\n  age: JSXElement,\n  narration: JSXElement,\n}) {\n  return (\n    <div class={styles.overlay}>\n      <div class={styles['status-bar']}>\n        <div class={styles['health-container']}>\n          {props.health}\n        </div>\n        <div class={styles['age-container']}>\n          {props.age}\n        </div>\n      </div>\n      <div class={styles.narration}>\n        {props.narration}\n      </div>\n    </div>\n  )\n}","@use 'components/constants.module.scss';\n\n$padding: calc(2vmin);\n\n.overlay {\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  justify-content: stretch;\n  width: 100%;\n  height: 100%;\n}\n\n.status-bar {\n  display: flex;\n  flex: 0;\n  flex-direction: row;\n  padding: $padding;\n  box-sizing: border-box;\n}\n\n.health-container {\n  flex: 1;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: start;\n}\n\n.age-container {\n  flex: 0;\n}\n\n.narration {\n  flex: 0;\n  padding: 0 $padding;\n  box-sizing: border-box;\n  text-align: center;\n}\n","import { Index } from \"solid-js\";\nimport styles from './entity_health.module.scss';\n\nexport function EntityHealthComponent(props: {\n  maxHealth: number,\n  health: number,\n  small?: boolean,\n}) {\n  return (\n    <div class={styles.container}>\n      <Index each={new Array(props.maxHealth).fill(0)}>\n        {(_, index) => (\n          <div classList={{\n            [styles.health]: true,\n            [styles.small]: props.small,\n            [styles.filled]: index < props.health,\n          }}/>\n        )}\n      </Index>\n    </div>\n  );\n}\n","$healthBoxLarge: 4vmin;\n$healthBoxSmall: 2vmin;\n\n.container {\n  display: flex;\n  flex-direction: row;\n}\n\n.health {\n  width: $healthBoxLarge;\n  height: $healthBoxLarge;\n  font-size: $healthBoxLarge;\n  text-align: center;\n  color: white;\n}\n\n.health.small {\n  width: $healthBoxSmall;\n  height: $healthBoxSmall;\n  font-size: $healthBoxSmall;\n}\n\n.health::after {\n  content: '';\n}\n\n.health.filled::after {\n  content: '';\n}","import styles from './narration.module.scss';\nimport { For } from \"solid-js\";\n\nexport function NarrationComponent(props: {\n  index: number,\n  words: readonly string[],\n}) {\n  return (\n      <For each={props.words}>\n        {(word, index) => (\n          <span classList={{\n            [styles.word]: true,\n            [styles.visible]: index() < props.index,\n          }}>{word} </span>\n        )}\n      </For>\n  );\n}",".word {\n  opacity: 0;\n  transition-property: opacity;\n  transition-duration: 200ms;\n  transition-timing-function: ease-out;\n  color: #fff;\n  font-size: 4vmin;\n}\n\n.word.visible {\n  opacity: 1;\n}","import styles from './entity_age.module.scss';\n\nexport function EntityAgeComponent(props: {\n  age: number,\n}) {\n  return (\n    <div class={styles.container}>\n      {props.age} years old\n    </div>\n  );\n}\n","\n.container {\n  font-size: 3vmin;\n  color: white;\n  white-space: nowrap;\n}\n\n","import { createMonster } from \"components/entity/create\";\nimport { EncounterBattle } from \"model/domain\";\nimport { EncounterBattleComponent } from \"./encounter_battle\";\nimport { ComponentManager } from \"components/component_manager\";\n\nexport function createEncounterBattleManger() {\n  function createEncounterBattle(encounter: EncounterBattle) {\n    const {\n      controller,\n      Component: MonsterComponent,\n    } = createMonster(encounter.monsterType);\n  \n    function Component() {\n      return (\n        <EncounterBattleComponent model={encounter}>\n          <MonsterComponent/>\n        </EncounterBattleComponent>\n      );\n    }\n  \n    return {\n      Component,\n      // TODO might want a way to animate the health in and out\n      controller,\n    }\n  }\n  \n  const encounterBattleManger = new ComponentManager(createEncounterBattle);\n  return encounterBattleManger;\n  \n}\n\n","import { UnreachableError } from \"base/unreachable_error\";\nimport { MonsterType } from \"model/domain\";\nimport { createRatEntity } from \"./rat/create\";\nimport { createTrollEntity } from \"./troll/create\";\nimport { createSnailEntity } from \"./snail/create\";\nimport { createRoosterEntity } from \"./rooster/create\";\nimport { createDummyEntity } from \"./dummy/create\";\n\nexport function createMonster(monster: MonsterType) {\n  switch(monster) {\n    case MonsterType.BigRat:\n      return createRatEntity();\n    case MonsterType.Troll:\n      return createTrollEntity();\n    case MonsterType.Snail:\n      return createSnailEntity();\n    case MonsterType.Rooster:\n      return createRoosterEntity();\n    case MonsterType.Dummy:\n      return createDummyEntity();\n    default:\n      throw new UnreachableError(monster);\n  }\n}","import {\n  cardFrontRatBite,\n  cardFrontRatCower,\n  cardFrontRatScreech,\n} from \"data/monsters/rat/cards\";\nimport { createRigidEntity } from \"../rigid/create\";\nimport { Animations } from \"../rigid/rigid_entity_controller\";\nimport { createUnicodeEntity } from \"../unicode/create\";\n\nexport function createRatEntity() {\n  return createRigidEntity(\n    new Map([\n      [cardFrontRatBite, Animations.Attack],\n      [cardFrontRatScreech, Animations.Special],\n      [cardFrontRatCower, Animations.Block],\n    ]),\n    createUnicodeEntity(''),\n    undefined,\n    true,\n  );\n}\n","import { AnimationManager } from \"ui/animation/animation_manager\";\nimport { Animations, RigidEntityController, rigidEntityUI } from \"./rigid_entity_controller\";\nimport { CardFace } from \"model/domain\";\nimport { RigidEntityComponent } from \"./rigid_entity\";\nimport { Component } from \"solid-js\";\nimport { EntityController } from \"../entity_controller\";\n\nexport function createRigidEntity(\n  actions: Map<CardFace, Animations>,\n  EntityComponent: Component,\n  entityController: EntityController | undefined,\n  flipX: boolean,\n) {\n  const ui = rigidEntityUI.create({\n    activeAnimation: undefined,\n    hidden: true,\n  });\n  const animations = new AnimationManager<Animations>();\n  const controller = new RigidEntityController(\n    animations,\n    actions,\n    Animations.Special, \n    ui,\n    entityController,\n  );\n  function Component() {\n    return (\n      <RigidEntityComponent\n          animations={animations}\n          hidden={ui.hidden}\n          activeAnimation={ui.activeAnimation}\n          flipX={flipX}>\n        <EntityComponent/>\n      </RigidEntityComponent>\n    );\n  }\n  return {\n    controller,\n    Component,\n  }\n}","import { AnimationManager } from \"ui/animation/animation_manager\";\nimport { EntityController } from \"../entity_controller\";\nimport { CardFace } from \"model/domain\";\nimport { activeRecordDescriptor } from \"model/descriptor/record\";\nimport { LiteralTypeDescriptor, booleanDescriptor } from \"model/descriptor/literals\";\nimport { optionalDescriptor } from \"model/descriptor/option\";\nimport { batch } from \"solid-js\";\n\nexport const enum Animations {\n  Appear = 1,\n  Disappear,\n  Attack,\n  Special,\n  TakeDamage,\n  Die,\n  Block,\n};\n\nexport const rigidEntityUI = activeRecordDescriptor({\n  activeAnimation: optionalDescriptor(new LiteralTypeDescriptor<Animations>()),\n  hidden: booleanDescriptor,\n});\n\nexport type RigidEntityUI = typeof rigidEntityUI.aMutable;\nexport type RigidiEntityUIState = typeof rigidEntityUI.aState;\n\nexport class RigidEntityController implements EntityController {\n  constructor(\n    private readonly animations: AnimationManager<Animations>,\n    private readonly actions: Map<CardFace, Animations>,\n    private readonly fallbackAnimation: Animations | undefined,\n    private readonly rigidEntityUI: RigidEntityUI,\n    private readonly dynamicEntityController: EntityController | undefined,\n  ) {\n\n  }\n\n  async perform(face: CardFace) {\n    const animation = this.actions.get(face) || this.fallbackAnimation;\n    await this.performAnimation(\n      animation,\n      () => this.dynamicEntityController?.perform(face),\n    );\n    this.rigidEntityUI.activeAnimation = undefined;\n  }\n\n  async appear() {\n    await batch(() => {\n      this.rigidEntityUI.hidden = false;\n      return this.performAnimation(\n        Animations.Appear,\n        () => this.dynamicEntityController?.appear(),\n      );  \n    });\n    this.rigidEntityUI.activeAnimation = undefined;\n  }\n\n  async disappear() {\n    await this.performAnimation(\n      Animations.Disappear,\n      () => this.dynamicEntityController?.disappear(),\n    );\n    batch(() =>{\n      this.rigidEntityUI.hidden = true;\n      this.rigidEntityUI.activeAnimation = undefined;  \n    });\n\n  }\n\n  async die() {\n    await this.performAnimation(\n      Animations.Die,\n      () => this.dynamicEntityController?.die(),\n    );\n    batch(() =>{\n      this.rigidEntityUI.hidden = true;\n      this.rigidEntityUI.activeAnimation = undefined;  \n    });\n  }\n\n  private async performAnimation(\n    animation: Animations | undefined,\n    dynamicAnimation: () => Promise<void> | undefined,\n  ) {\n    this.rigidEntityUI.activeAnimation = animation;\n    await Promise.all([\n      animation != null && this.animations.waitForAnimation(animation),\n      dynamicAnimation(),\n    ]);\n  }\n}\n","import { AnimationManager } from 'ui/animation/animation_manager';\nimport styles from './rigid_entity.module.scss';\nimport { Animations } from './rigid_entity_controller';\nimport { ParentProps, createSignal } from 'solid-js';\nimport { UnreachableError } from 'base/unreachable_error';\n\nexport function RigidEntityComponent(props: ParentProps<{\n  animations: AnimationManager<Animations>,\n  activeAnimation: Animations | undefined,\n  hidden: boolean,\n  flipX: boolean,\n}>) {\n  const [ref, setRef] = createSignal<HTMLDivElement>();\n  const animationName = () => {\n    switch (props.activeAnimation) {\n      case Animations.Appear:\n      case Animations.Disappear:\n        return styles.appearAnimation;\n      case Animations.Attack:\n        return styles.attackAnimation;\n      case Animations.Die:\n        return styles.dieAnimation;\n      case Animations.Special:\n        return styles.specialAnimation;\n      case Animations.Block:\n        return styles.blockAnimation;\n      case Animations.TakeDamage:\n      case undefined:\n        return '';\n      default:\n        throw new UnreachableError(props.activeAnimation)\n    }\n  };\n  // TODO this sucks\n  const onAnimationEnd = props.animations.createAnimationEndEventListener(ref, () => [props.activeAnimation!, animationName()]);\n  return (\n    <div\n        classList={{\n          [styles.entity]: true,\n          [styles.hidden]: props.hidden,\n          [styles.idle]: props.activeAnimation == null,\n          [styles.appear]: props.activeAnimation === Animations.Appear\n              || props.activeAnimation === Animations.Disappear,\n          [styles.reverse]: props.activeAnimation === Animations.Disappear,\n          [styles.attack]: props.activeAnimation === Animations.Attack,\n          [styles.die]: props.activeAnimation === Animations.Die,\n          [styles.block]: props.activeAnimation === Animations.Block,\n          [styles.special]: props.activeAnimation == Animations.Special,\n        }}\n        onAnimationEnd={onAnimationEnd}\n        ref={setRef}>\n      <div\n          classList={{\n            [styles.inner]: true,\n            [styles.flipX]: props.flipX,\n          }}>\n        {props.children}\n      </div>\n    </div>\n  );\n}",".entity {\n  transform-origin: center;\n}\n\n.entity.hidden {\n  visibility: hidden;\n}\n\n.inner.flipX {\n  transform: scaleX(-1);\n}\n\n.entity.idle {\n  animation-name: idleAnimation;\n  animation-iteration-count: infinite;\n  animation-duration: 3s;\n  animation-timing-function: ease-in-out;\n  animation-direction: alternate;\n  transform-origin: bottom;\n}\n\n@keyframes idleAnimation {\n  from {\n    transform: scaleY(1);\n  }\n\n  to {\n    transform: scaleY(1.05);\n  }\n}\n\n.entity.appear {\n  animation-name: appearAnimation;\n  animation-fill-mode: both;\n  animation-timing-function: ease-out;\n  animation-duration: 200ms;\n}\n\n.entity.appear.reverse {\n  animation-direction: reverse;\n}\n\n@keyframes appearAnimation {\n  from {\n    transform: translateY(100%);\n  }\n\n  to {\n    transform: translateY(0);\n  }\n}\n\n.entity.attack {\n  animation-name: attackAnimation;\n  animation-timing-function: ease-in;\n  animation-direction: alternate;\n  animation-duration: 150ms;\n  animation-iteration-count: 2;\n}\n\n@keyframes attackAnimation {\n  from {\n    transform: translateX(0);\n  }\n\n  to {\n    transform: translateX(20%);\n  }\n}\n\n.entity.die {\n  animation-name: dieAnimation;\n  animation-fill-mode: forwards;\n  animation-timing-function: ease-in;\n  animation-duration: 800ms;\n}\n\n@keyframes dieAnimation {\n  from {\n    transform: translateY(0);\n  }\n\n  33% {\n    transform: translateY(-10%);\n  }\n\n  66% {\n    transform: translateY(-10%) rotate(180deg);\n  }\n\n  to {\n    transform: translateY(100%) rotate(180deg);\n  }\n}\n\n.entity.block {\n  animation-name: blockAnimation;\n  animation-direction: alternate;\n  animation-timing-function: ease-out;\n  animation-iteration-count: 2;\n  animation-duration: 300ms;\n}\n\n@keyframes blockAnimation {\n  from {\n    transform: scaleX(1);\n  }\n\n  to {\n    transform: scaleX(.8) rotate(10deg);\n  }\n}\n\n.entity.special {\n  animation-name: specialAnimation;\n  animation-direction: alternate;\n  animation-timing-function: ease-out;\n  animation-iteration-count: 2;\n  animation-duration: 300ms;\n}\n\n@keyframes specialAnimation {\n  from {\n    transform: translateY(0);\n  }\n\n  20% {\n    transform: translateY(0) scaleY(.9);\n  }\n\n  to {\n    transform: translateY(-3vmin) scaleY(1.1);\n  }\n}\n","import { UnicodeEntityComponent } from \"./unicode_entity\";\n\nexport function createUnicodeEntity(unicode: string, fontSize?: string) {\n  return function() {\n    return (\n        <UnicodeEntityComponent\n            unicode={unicode}\n            fontSize={fontSize}\n            />\n    );\n  }\n}\n","import styles from './unicode_entity.module.scss';\n\nexport function UnicodeEntityComponent(props: {\n  unicode: string,\n  fontSize?: string,\n}) {\n  return (\n    <div\n        class={styles.entity}\n        style={props.fontSize && { 'font-size': props.fontSize }}>\n      {props.unicode}\n    </div>\n  );\n}","@use 'components/constants.module.scss';\n\n.entity {\n  font-size: calc(constants.$pageWidth/2);\n}","import { \n  cardFrontTrollOdour,\n  cardFrontTrollRegeneration,\n  cardFrontTrollSmash,\n } from \"data/monsters/troll/cards\";\nimport { createRigidEntity } from \"../rigid/create\";\nimport { Animations } from \"../rigid/rigid_entity_controller\";\nimport { createUnicodeEntity } from \"../unicode/create\";\n\nexport function createTrollEntity() {\n  return createRigidEntity(\n    new Map([\n      [cardFrontTrollSmash, Animations.Attack],\n      [cardFrontTrollOdour, Animations.Special],\n      [cardFrontTrollRegeneration, Animations.Block],\n    ]),\n    createUnicodeEntity(''),\n    undefined,\n    false,\n  );\n}\n","import { \n  cardFrontSnailBite,\n  cardFrontSnailHide,\n} from \"data/monsters/snail/cards\";\nimport { createRigidEntity } from \"../rigid/create\";\nimport { Animations } from \"../rigid/rigid_entity_controller\";\nimport { createUnicodeEntity } from \"../unicode/create\";\n\nexport function createSnailEntity() {\n  return createRigidEntity(\n    new Map([\n      [cardFrontSnailBite, Animations.Attack],\n      [cardFrontSnailHide, Animations.Block],\n    ]),\n    createUnicodeEntity(''),\n    undefined,\n    true,\n  );\n}\n","import { \n  cardFrontRoosterClaw,\n  cardFrontRoosterCrow,\n  cardFrontRoosterEvade,\n} from \"data/monsters/rooster/cards\";\nimport { createRigidEntity } from \"../rigid/create\";\nimport { Animations } from \"../rigid/rigid_entity_controller\";\nimport { createUnicodeEntity } from \"../unicode/create\";\n\nexport function createRoosterEntity() {\n  return createRigidEntity(\n    new Map([\n      [cardFrontRoosterClaw, Animations.Attack],\n      [cardFrontRoosterEvade, Animations.Block],\n      [cardFrontRoosterCrow, Animations.Special],\n    ]),\n    createUnicodeEntity(''),\n    undefined,\n    true,\n  );\n}\n","\nimport { createRigidEntity } from \"../rigid/create\";\nimport { createUnicodeEntity } from \"../unicode/create\";\n\nexport function createDummyEntity() {\n  return createRigidEntity(\n    new Map([]),\n    createUnicodeEntity(''),\n    undefined,\n    false,\n  );\n}\n","import { EncounterBattle } from \"model/domain\";\nimport { ParentProps } from \"solid-js\";\nimport styles from './encounter_battle.module.scss';\nimport { EntityHealthComponent } from \"components/entity/health/entity_health\";\n\nexport function EncounterBattleComponent(props: ParentProps<{ model: EncounterBattle }>) {\n  return (\n    <div class={styles.container}>\n      <EntityHealthComponent\n          health={props.model.monster.health}\n          maxHealth={props.model.monster.maxHealth}\n          />\n      {props.children}\n    </div>\n  )\n}\n","@use 'components/constants.module.scss';\n\n.container {\n  position: absolute;\n  bottom: 15%;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  transform-origin: bottom center;\n  transform: rotateX(constants.$tableTiltCorrectionAngle);\n}","import { EncounterEvent, EventType } from \"model/domain\";\nimport { ComponentManager } from \"components/component_manager\";\nimport { createFountainEntity } from \"components/entity/fountain/create\";\nimport { UnreachableError } from \"base/unreachable_error\";\nimport { EncounterEventComponent } from \"./encounter_event\";\nimport { createMagicTreeEntity } from \"components/entity/magic_tree/create\";\nimport { createMushroomEntity } from \"components/entity/mushroom/create\";\nimport { createShrineEntity } from \"components/entity/shrine/create\";\nimport { createTreasureEntity } from \"components/entity/treasure/create\";\nimport { createShopEntity } from \"components/entity/shop/create\";\n\nfunction createEncounterEntity(encounter: EncounterEvent) {\n  switch (encounter.eventType) {\n    case EventType.Fountain:\n      return createFountainEntity();\n    case EventType.MagicTree:\n      return createMagicTreeEntity();\n    case EventType.Mushroom:\n      return createMushroomEntity();\n    case EventType.Shrine:\n      return createShrineEntity();\n    case EventType.Treasure:\n      return createTreasureEntity();\n    case EventType.Shop:\n      return createShopEntity();\n    default:\n      throw new UnreachableError(encounter.eventType);\n  }\n}\n\nexport function createEncounterEventManger() {\n  function createEncounterEvent(encounter: EncounterEvent) {\n    const { Component: EntityComponent, controller } = createEncounterEntity(encounter);\n    function Component() {\n      return (\n          <EncounterEventComponent>\n            <EntityComponent/>\n          </EncounterEventComponent>\n      );\n    };\n    return {\n      Component,\n      controller,\n    }\n  }\n  const encounterEventManger = new ComponentManager(createEncounterEvent);\n  return encounterEventManger;\n}\n\n","\nimport { createRigidEntity } from \"../rigid/create\";\nimport { createUnicodeEntity } from \"../unicode/create\";\n\nexport function createFountainEntity() {\n  return createRigidEntity(\n    new Map([]),\n    createUnicodeEntity(''),\n    undefined,\n    false,\n  );\n}\n","import { ParentProps } from \"solid-js\";\nimport styles from './encounter_event.module.scss';\n\nexport function EncounterEventComponent(props: ParentProps) {\n  return (\n    <div class={styles.container}>\n      {props.children}\n    </div>\n  )\n}\n","@use 'components/constants.module.scss';\n\n.container {\n  position: absolute;\n  bottom: 15%;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  transform-origin: bottom center;\n  transform: rotateX(constants.$tableTiltCorrectionAngle);\n}","\nimport { createRigidEntity } from \"../rigid/create\";\nimport { createUnicodeEntity } from \"../unicode/create\";\n\nexport function createMagicTreeEntity() {\n  return createRigidEntity(\n    new Map([]),\n    createUnicodeEntity(''),\n    undefined,\n    false,\n  );\n}\n","\nimport { createRigidEntity } from \"../rigid/create\";\nimport { createUnicodeEntity } from \"../unicode/create\";\n\nexport function createMushroomEntity() {\n  return createRigidEntity(\n    new Map([]),\n    createUnicodeEntity(''),\n    undefined,\n    false,\n  );\n}\n","\nimport { createRigidEntity } from \"../rigid/create\";\nimport { createUnicodeEntity } from \"../unicode/create\";\n\nexport function createShrineEntity() {\n  return createRigidEntity(\n    new Map([]),\n    createUnicodeEntity(''),\n    undefined,\n    false,\n  );\n}\n","\nimport { createRigidEntity } from \"../rigid/create\";\nimport { createUnicodeEntity } from \"../unicode/create\";\n\nexport function createTreasureEntity() {\n  return createRigidEntity(\n    new Map([]),\n    createUnicodeEntity(''),\n    undefined,\n    false,\n  );\n}\n","\nimport { createRigidEntity } from \"../rigid/create\";\nimport { createUnicodeEntity } from \"../unicode/create\";\n\nexport function createShopEntity() {\n  return createRigidEntity(\n    new Map([]),\n    createUnicodeEntity(''),\n    undefined,\n    false,\n  );\n}\n","import { ComponentManager } from \"components/component_manager\";\nimport { EntityController } from \"components/entity/entity_controller\";\nimport { Encounter, EncounterBattle, EncounterEvent, EncounterType } from \"model/domain\";\nimport { Component } from \"solid-js\";\nimport { Dynamic } from \"solid-js/web\";\n\ntype EncounterProps<T extends Encounter = Encounter> = {\n  model: T,\n}\n\nexport function createEncounter(\n  battleComponentManager: ComponentManager<EncounterBattle, EntityController>,\n  eventComponentManager: ComponentManager<EncounterEvent, EntityController>,\n) {\n  const encounterComponents: { [K in EncounterType]: Component<EncounterProps>} = {\n    [EncounterType.Battle]: function (props: EncounterProps) {\n      return <battleComponentManager.FactoryComponent\n          model={props.model as EncounterBattle}/>;\n    },\n    [EncounterType.Event]: function (props: EncounterProps) {\n      return <eventComponentManager.FactoryComponent\n          model={props.model as EncounterEvent}/>;\n    },\n  }\n  \n  function Component(props: EncounterProps) {\n    return (\n      <Dynamic\n          component={encounterComponents[props.model.type]}\n          model={props.model}/>\n    )\n  }\n\n  return Component;\n}\n","import { Accessor, Setter, batch, createSignal } from \"solid-js\";\nimport { Speaker } from \"./speaker\";\nimport { delay } from \"base/delay\";\n\nexport interface WordSplitterListener {\n  (characterIndex: number): void;\n}\n\nexport interface WordSplitter {\n  say(text: string, listener: WordSplitterListener): Promise<void>;\n}\n\nexport class RenderingSpeaker implements Speaker {\n  private previousPromise: Promise<void> = Promise.resolve();\n  private characterIndexGetter: Accessor<number>;\n  private characterIndexSetter: Setter<number>;\n  private textGetter: Accessor<string | undefined>;\n  private textSetter: Setter<string | undefined>;\n\n  constructor(\n    private readonly splitter: WordSplitter,\n  ) {\n    const [text, textSetter] = createSignal<string>();\n    this.textGetter = text;\n    this.textSetter = textSetter;\n    const [characterIndex, characterIndexSetter] = createSignal<number>(0);\n    this.characterIndexGetter = characterIndex;\n    this.characterIndexSetter = characterIndexSetter;\n  }\n\n  say(text: string): Promise<void> {\n    this.previousPromise = this.previousPromise.then(async () => {\n      batch(() => {\n        this.textSetter(text);\n        this.characterIndexSetter(0);\n      });\n      await this.splitter.say(text, characterIndex => {\n        this.characterIndexSetter(characterIndex);\n      });\n      await delay(200);\n      this.characterIndexSetter(0);\n      await delay(200);\n    });\n    return this.previousPromise;\n  }\n\n  get characterIndex() {\n    return this.characterIndexGetter();\n  }\n\n  get text() {\n    return this.textGetter();\n  }\n\n}","import { WordSplitter, WordSplitterListener } from \"./rendering_speaker\";\n\nexport class SpeechSynthesisWordSplitter implements WordSplitter {\n  private cachedVoice: SpeechSynthesisVoice | undefined;\n  private cachedUtterances: Map<string, SpeechSynthesisUtterance> = new Map();\n\n  constructor(\n    private readonly speechSynthesis: SpeechSynthesis,\n    private readonly fallback: WordSplitter,\n  ) {\n    speechSynthesis.onvoiceschanged = () => this.cachedVoice = undefined;\n  }\n\n  private get voice() {\n    if (this.cachedVoice == null) {\n      this.cachedVoice = this.calculateVoice();\n    }\n    return this.cachedVoice;\n  }\n\n  private calculateVoice() {\n    const voices = this.speechSynthesis?.getVoices();\n    if (!voices?.length) {\n      return;\n    }\n    const bestVoices = voices.filter(voice => 'EN-GB' === voice.lang.toUpperCase());\n    const bestVoice = bestVoices.find(voice => voice.name.toUpperCase().indexOf(' MALE') >= 0);\n    if (bestVoice != null) {\n      return bestVoice;\n    }\n    if (bestVoices.length > 0) {\n      return bestVoices[0];\n    }\n    const defaultVoice = voices.find(voice => voice.default);\n    if (defaultVoice != null) {\n      return defaultVoice;\n    }\n    return voices[0];\n  }\n  \n\n  async say(text: string, listener: WordSplitterListener): Promise<void> {\n    const utterance = this.calculateUtterance(text);\n    if(utterance) {\n      // unfortunately onend/onboundary do not work correctly\n      this.speechSynthesis.speak(utterance);\n    }\n    await this.fallback.say(text, listener);\n  }\n\n  private calculateUtterance(text: string) {\n    let utterance = this.cachedUtterances.get(text);\n    if (utterance != null) {\n      return utterance;\n    }\n    const voice = this.voice;\n    if (!voice) {\n      return;\n    }\n    utterance = new SpeechSynthesisUtterance(text);\n    utterance.addEventListener('boundary', e => console.log(e));\n    utterance.rate = 1;\n    utterance.pitch = .4;\n    utterance.lang = 'en';\n    utterance.voice = voice;\n    this.cachedUtterances.set(text, utterance);\n    return utterance;\n  }\n}","import { delay } from \"base/delay\";\nimport { WordSplitter, WordSplitterListener } from \"./rendering_speaker\";\n\nexport class DelayWordSplitter implements WordSplitter {\n  async say(text: string, listener: WordSplitterListener) {\n    const words = text.split(' ');\n    let length = -1;\n    for (const word of words) {\n      let ticks = word.length;\n      if (word.endsWith(',')) {\n        ticks++;\n      }\n      if (word.endsWith('.')) {\n        ticks+=3;\n      }\n      length += word.length + 1;\n      listener(length);\n      await delay(ticks * 100);\n    }\n  }\n}","import { Speaker } from \"./speaker\";\n\nexport class PoliteSpeaker implements Speaker {\n  private lastSpoke = new Map<string, number>();\n\n  constructor(private readonly speaker: Speaker) {\n\n  }\n\n  async say(text: string): Promise<void> {\n    const lastSpoke = this.lastSpoke.get(text);\n    const now = Date.now();\n    if (lastSpoke == null || (now - lastSpoke)/300000 > Math.random() + .2) {\n      this.lastSpoke.set(text, now);\n      return this.speaker.say(text);\n    }\n  }\n}"],"names":["_create","require","_tableController","_create1","_create2","_create3","_create4","_initial","_interactionManager","_create5","_gameManager","_create6","_create7","_create8","_games","_solidJs","_domain","_navigationTarget","_unreachableError","_create9","_create10","_renderingSpeaker","_speechSynthesisWordSplitter","_delayWordSplitter","_politeSpeaker","window","onload","backgroundMusic","document","getElementById","pause","wordSplitter","SpeechSynthesisWordSplitter","speechSynthesis","DelayWordSplitter","renderingSpeaker","RenderingSpeaker","speaker","PoliteSpeaker","app","game","initialGame","cardManager","createCardManager","navigation","async","to","type","NavigationTargetType","ToC","tableController","setView","View","TopDown","bookController","showSpread","bookSpreadTableOfContentsDescriptor","create","BookSpreadType","TableOfContents","unlockedChapters","Chapter","paused","volume","play","Tilted","gameManager","maybeCreatePlayer","createChapter","chapterIndex","nextPage","undefined","Death","bookSpreadDeathDescriptor","UnreachableError","pageComponentManager","createPageManager","cardSlotManager","createCardSlotManager","FactoryComponent","interactionManger","Component","CardSlotsComponent","createCardSlots","StatusOverlayComponent","createStatusOverlay","BookImpl","controller","createBook","book","TableComponent","createTable","encounterBattleManager","createEncounterBattleManger","encounterEventManager","createEncounterEventManger","Encounter","createEncounter","GameManager","InteractionManager","addEventListener","e","dragging","lastMousePosition","clientX","clientY","dx","innerWidth","dy","innerHeight","look","Math","pow","PlayerDeck","createDeck","playerCharacter","deck","Hand","_$createComponent","model","playerHand","SpreadOverlay","_$memo","_c$","spread","cardSlots","DragOverlay","createDragOverlay","Book","encounter","createMemo","gameEncounterBattle","gameEncounterEvent","children","StatusOverlay","_c$2","render","Deck","setTimeout","parcelHelpers","export","exports","ErrorBoundary","For","Index","Match","Show","Suspense","SuspenseList","Switch","createComponent","createRenderEffect","getOwner","mergeProps","untrack","Aliases","voidFn","ChildProperties","DOMElements","DelegatedEvents","Dynamic","Hydration","NoHydration","Portal","Properties","SVGElements","SVGNamespace","assign","classList","className","clearDelegatedEvents","delegateEvents","dynamicProperty","escape","getHydrationKey","getNextElement","getNextMarker","getNextMatch","getPropAlias","hydrate","innerHTML","insert","isDev","isServer","renderToStream","renderToString","renderToStringAsync","resolveSSRNode","runHydrationEvents","setAttribute","setAttributeNS","ssr","ssrAttribute","ssrClassList","ssrElement","ssrHydrationKey","ssrSpread","ssrStyle","style","template","use","Set","Object","htmlFor","PropAliases","class","formnovalidate","$","BUTTON","INPUT","ismap","IMG","nomodule","SCRIPT","playsinline","VIDEO","readonly","TEXTAREA","prop","tagName","a","xlink","xml","$$EVENTS","code","element","init","options","disposer","createRoot","dispose","firstChild","owner","textContent","html","isCE","isSVG","node","t","createElement","content","fn","cloneNode","importNode","eventNames","document1","i","l","length","name","has","add","eventHandler","keys","removeEventListener","value","removeAttribute","namespace","removeAttributeNS","handler","delegate","Array","isArray","handlerFn","call","prev","classKeys","prevKeys","len","key","toggleClassKey","classValue","nodeStyle","cssText","v","s","removeProperty","setProperty","props","skipChildren","prevProps","insertExpression","ref","src","defineProperty","get","enumerable","parent","sharedConfig","context","arg","accessor","marker","initial","current","skipRef","assignProp","registry","console","warn","Error","completed","delete","el","nodeName","localName","nextSibling","start","end","count","nodeType","nodeValue","push","events","queued","queueMicrotask","shift","classNames","trim","split","nameLen","toggle","isProp","isChildProp","propAlias","forceProp","slice","toLowerCase","h","includes","replace","_","w","toUpperCase","ns","indexOf","composedPath","target","configurable","done","_$HY","disabled","data","cancelBubble","_$host","parentNode","host","unwrapArray","childNodes","cleaned","remove","multi","toString","createTextNode","cleanChildren","array","currentArray","normalizeIncomingArray","appendNodes","b","bLength","aEnd","bEnd","aStart","bStart","after","map","insertBefore","Map","set","index","sequence","replaceChild","reconcileArrays","Node","appendChild","normalized","unwrap","dynamic","item","String","replacement","inserted","isParent","gatherHydratable","root","templates","querySelectorAll","getAttribute","startsWith","id","throwInBrowser","func","err","error","nodes","needsId","SVG_NAMESPACE","createElementNS","args","enableHydration","globalThis","load","gather","renderId","hydrate$1","useShadow","hydrating","createEffect","user","runWithOwner","mount","body","HTMLHeadElement","clean","setClean","createSignal","cleanup","onCleanup","container","renderRoot","attachShadow","mode","removeChild","p","others","splitProps","cached","component","$DEVCOMP","isSvg","$PROXY","$TRACK","DEV","batch","cancelCallback","catchError","createComputed","createContext","createDeferred","createReaction","createResource","createSelector","createUniqueId","enableExternalSource","enableScheduling","equalFn","from","getListener","indexArray","lazy","mapArray","observable","on","onError","onMount","requestCallback","resetErrorBoundaries","startTransition","useContext","useTransition","taskIdCounter","isCallbackScheduled","isPerformingWork","taskQueue","currentTask","shouldYieldToHost","yieldInterval","deadline","maxYieldInterval","scheduleCallback","scheduledCallback","maxSigned31BitInt","channel","MessageChannel","port","port2","postMessage","port1","onmessage","currentTime","performance","now","hasTimeRemaining","navigator","scheduling","isInputPending","setupScheduler","startTime","timeout","newTask","expirationTime","task","splice","m","n","k","cmp","findIndex","enqueue","flushWork","initialTime","callback","workLoop","setHydrateContext","Symbol","signalOptions","equals","ERROR","runEffects","runQueue","STALE","PENDING","UNOWNED","owned","cleanups","NO_INIT","Owner","Transition","Scheduler","ExternalSourceFactory","Listener","Updates","Effects","ExecCount","transPending","setTransPending","detachedOwner","listener","unowned","updateFn","cleanNode","runUpdates","observers","observerSlots","comparator","readSignal","bind","running","sources","tValue","writeSignal","c","createComputation","updateComputation","runUserEffects","SuspenseContext","lookup","suspense","onInvalidate","tracking","tState","pSource","pFetcher","pOptions","source","fetcher","arguments","pr","initP","loadedUnderTransition","scheduled","resolved","contexts","setValue","storage","initialValue","setError","track","trigger","state","setState","ssrLoadFrom","loadEnd","onHydrated","promises","completeLoad","decrement","clear","read","increment","refetching","then","castError","defineProperties","loading","latest","refetch","mutate","timeoutMs","setDeferred","deferred","subs","val","entries","values","pure","size","deps","prevInput","defer","prevValue","input","result","handleError","o","prevListener","scheduler","Promise","resolve","effects","disposed","queue","res","defaultValue","Provider","createProvider","ctx","memo","resolveChildren","toArray","getSuspenseContext","factory","oldFactory","oldSource","x","runningTransition","this","updates","lookUpstream","sSlot","sourceSlots","isComp","TransitionRunning","markDownstream","time","runComputation","nextValue","tOwned","forEach","updatedAt","ordinary","triggerInTransition","inTransition","runTop","inFallback","ancestors","top","wait","tasks","scheduleQueue","apply","d","completeUpdates","userLength","ignore","pop","obs","reset","cause","runErrors","fns","f","results","subscribe","observer","TypeError","next","unsubscribe","producer","unsub","FALLBACK","list","mapFn","items","mapped","disposers","indexes","j","newItems","newIndices","newIndicesNext","temp","tempdisposers","tempIndexes","newEnd","newLen","fallback","mapper","min","signals","hydrationEnabled","Comp","r","trueFn","propTraps","property","receiver","deleteProperty","getOwnPropertyDescriptor","ownKeys","resolveSource","proxy","Proxy","descriptors","getOwnPropertyDescriptors","blocked","flat","filter","clone","comp","wrap","mod","default","preload","counter","narrowedError","each","keyed","condition","when","child","conditions","evalConditions","conds","cond","Errors","errored","setErrored","suspenseListEquals","showContent","showFallback","SuspenseListContext","show","wrapper","setWrapper","listContext","setRegistry","register","reveal","revealOrder","tail","reg","reverse","all","every","stop","flicker","setFallback","store","rendered","interopDefault","__esModule","defineInteropFlag","exportAll","dest","hasOwnProperty","destName","_table","_animationManager","tableUI","tableUIDescriptor","view","TopDownBookCentered","lookDx","lookDy","animations","AnimationManager","TableController","_tableModuleScss","tableRef","setTableRef","_el$","_tmpl$","_el$2","_el$3","_el$4","_el$5","_el$6","_el$7","_el$8","_$use","_$addEventListener","createTransitionEndEventListener","_$insert","_$effect","_p$","_v$","styles","_v$2","room","_v$3","transform","_v$4","table","tilted","topDown","topDownBookCentered","_v$5","_v$6","_v$7","_v$8","hand","_v$9","_$className","_$classList","_$style","module","_literals","_record","bookTop","parseInt","bookWidth","bookHeight","tableWidth","deckTop","handSlotTop","handSlotWidth","cardWidth","cardHeight","overlayZ","viewDescriptor","LiteralTypeDescriptor","activeRecordDescriptor","numberDescriptor","constructor","waitForAnimation","getPlayerCardSlotTablePosition","slotIndex","getBookCardSlotTablePosition","getPlayerDeckTablePosition","stringDescriptor","booleanDescriptor","componentDescriptor","snapshot","freeze","valueRecordDescriptor","ValueRecordTypeDescriptor","attributeTypes","mutable","attributeType","valueMutable","ActiveRecordProxyHandler","newValue","signal","ActiveRecordTypeDescriptor","AnimationCanceledError","_delay","_flattenedPromise","timeoutMillis","maybeCancelAnimation","animation","createFlattenedPromise","race","promise","delay","flattenedPromise","reject","maybeCompleteAnimation","createAnimationEndEventListener","animationIdAndName","animationName","animationId","milliseconds","_resolve","_reject","_book","_bookController","_chrononomicon","_pageController","renderPagePair","side","PageSide","Left","Right","bookUI","bookUIDescriptor","previousSpread","turnLeftToRight","turnPastMidway","BookComponent","previousPages","currentPages","Cover","ChrononomiconCoverComponent","BookController","_bookModuleScss","PageComponent","_$p","page","flipped","BookHalfComponent","_tmpl$2","topPage","bottomPage","spineRef","setSpineRef","rightPages","leftPages","pageTurnRef","setPageTurnRef","onTurnAnimationEnd","ltrdown","ltrup","rtldown","rtlup","_tmpl$3","_el$9","_el$10","_el$11","_el$12","_el$13","_v$10","_v$11","ltr","rtl","down","up","_v$12","_el$14","spine","open","_option","optionalDescriptor","bookSpreadDescriptor","opening","lookupController","popdown","popup","OptionalTypeDescriptor","mandatoryTypeDescriptor","cardDescriptor","cardSlotDescriptor","deckDescriptor","entityDescriptor","encounterBattleDescriptor","encounterEventDescriptor","encounterDescriptor","bookSpreadRoomDescriptor","chapterDescriptor","bookDescriptor","gameDescriptor","_list","_union","SymbolType","EffectDirection","CardBackgroundType","CardForegroundType","CardFaceType","ChoiceType","EncounterType","MonsterType","EventType","RecycleTarget","Force","Finesse","Mind","Magic","Perception","Damage","Age","Draw","Healing","Poison","GainCards","LoseCards","GainMaxHealth","LoseMaxHealth","DoubleCard","Duplicate","Up","Down","Omni","Crosshatched","Clear","Door","ForestPath","DarkenedForestPath","Passageway","Rat","Troll","Snail","Rooster","Trap","Fountain","MagicTree","Mushroom","Shrine","Treasure","Dummy","Resource","ResourceBack","Choice","ChoiceBack","NextTurn","NextPage","NextChapter","Battle","Event","BigRat","Shop","Destroy","Discard","faces","recycleTarget","recyclePosition","visibleFaceIndex","targetCard","playedCards","listDescriptor","Room","health","maxHealth","age","monster","monsterType","eventType","discriminatingUnionDescriptor","ChapterType","Prelude","Forest","Ruins","Tower","pagesRemaining","finalCard","chapter","ListTypeDescriptor","elementTypeDescriptor","DiscriminatingUnionTypeDescriptor","cases","discriminatorState","discriminatorMutable","_chrononomiconModuleScss","EmptyPageController","_cardSlot","_cardSlots","_componentManager","_cardSlotController","CardSlotComponent","CardComponent","interactionManager","ComponentManager","cardSlot","cardSlotUI","cardSlotUIDescriptor","targetCardHidden","forceUnrotate","internalOnDragStart","y","startDrag","internalOnDrop","drop","internalOnClick","click","CardSlotController","CardSlotComponentImpl","targetInteraction","allowedInteraction","onDragStart","onDrop","onClick","bordered","used","card","_cardSlotModuleScss","interactionStyles","Interaction","None","none","Drag","draggable","Activate","clickable","Disabled","immovable","NoDrop","Drop","Dragging","LongPress","$$pointerdown","pageX","pageY","unrotate","_$delegateEvents","_cards","interactionUI","dragged","mousePosition","longPress","ui","lastAnimation","draggedCard","targetCardSlot","draggedCardSlot","targetFace","cardFace","isPeeking","politelyAnimate","chooseTargetCard","interaction","cardController","setTargetCardHidden","setWarning","flipTemporarily","clearDrag","applyCardEffects","normalizeBoard","action","catch","super","calculateCardEffects","cardSlotForCard","calculateCardEffectUsages","calculateTargetCardEffectUsages","sortCardsByRecycling","_arrays","peeking","face","cost","benefit","allCardSlots","find","some","cardControllerManger","effect","targetCardCost","remainingCosts","reduce","acc","playedCard","playedFace","playedCardCost","playedCardBenefit","playedCardBenefitUsages","remainingCost","targetCardFace","playedCardEffectTotals","calculatePlayedCardEffectTotals","total","cards","arrayRandomize","sort","c1","c2","pageCardSlots","pageDeck","playerDeck","floor","random","_cardSlotsModuleScss","cache","WeakMap","lookupOrCreateComponent","lookupOrCreate","hidden","setForceUnrotate","_cardController","_card","_cardFace","cardUI","cardUIDescriptor","flipState","FlipState","Flat","warning","offset","elevated","usage","FlippingUpToVertical","CardFaceComponent","choice","CardController","Offset","FlippingDownFromVertical","Easing","Instant","Gentle","Violent","internalFlip","dz","easing","additionalTransform","setElevated","doFlip","flipUpToVertical","flipDownFromVertical","_cardModuleScss","cardRef","setCardRef","cardRotateRef","setCardRotateRef","translate","instant","gentle","violent","rotate","flippingUpToVertical","flippingDownFromVertical","scale","_cardFaceModuleScss","_effectStrip","_cardFaceDescription","_cardFaceName","_symbol","symbol","SymbolComponent","fill","stroke","FlipArrow","EffectStripComponent","usages","warnUnused","CardFaceDescriptionComponent","CardFaceNameComponent","_c$3","background","crosshatched","door","passageway","forest","darkened","finesse","force","mind","foreground","rat","trap","fountain","tree","snail","troll","rooster","mushroom","flip","_effectStripModuleScss","_effect","EffectComponent","_effectModuleScss","resourceColors","fillForce","fillFinesse","fillMind","fillDamage","direction","unused","SymbolForceComponent","SymbolFinesseComponent","SymbolMindComponent","SymbolDamageComponent","_damageSvg","_finesseSvg","_forceSvg","_mindSvg","_symbolSvg","SymbolSVGComponent","SymbolForceSVGComponent","SymbolFinesseSVGComponent","SymbolMindSVGComponent","SymbolDamageSVGComponent","symbolComponents","_$mergeProps","_finesseSvgModuleScss","_$setAttribute","rect","_forceSvgModuleScss","_mindSvgModuleScss","circle","_symbolModuleScss","svg","_cardFaceDescriptionModuleScss","_cardFaceNameModuleScss","createToCPage","createRoomPage","createDeathPage","_tocPage","ToCPageComponent","_pageBlank","_pageTocModuleScss","ToCEntryComponent","$$click","targetChapter","ToCPageRightComponent","toc","sideComponents","PageBlankComponent","_roomPageController","_roomPage","_constantsModuleScss","_exists","pageWidth","constants","pageHeight","createScenery","cx","cy","trees","emojis","chapterType","getEmojis","fontSize","emoji","createRigidScenery","createUnicodeScenery","width","height","dimensions","popupDelayMillis","exists","scenery","RoomPageController","RoomPageComponent","_maxBy","minPopupDelay","minBy","maxPopupDelay","maxBy","_roomPageModuleScss","_rigidSceneryController","_rigidScenery","proxied","flipX","rigidSceneryUI","RigidSceneryController","RigidSceneryComponent","Animations","Popped","_rigidSceneryModuleScss","setRef","_unicodeScenery","_unicodeSceneryController","unicode","fontSizeVmin","UnicodeSceneryComponent","UnicodeSceneryController","_deathPage","DeathPageComponent","_deathPageModuleScss","DeathPageLeftComponent","DeathPageRightComponent","_chapter","_effects","cardBackJammedDoor","description","DamageUp","cardBackLockedDoor","cardBackDarkDoorway","cardBackDoor","cardFrontEmpty","cardFrontRat","cardFrontTrapped","DamageDown","cardFrontFountain","event","cardFrontTreasure","flatMap","back","front","concat","cardFrontShrine","definition","cardBackFinal","cardFrontFinal","targetChapterIndex","AgeUp","AgeDown","PoisonUp","PoisonDown","cardFrontShrineSacrifice","cardFrontShrineEmpower","cardFrontShrineIgnore","cardIgnore","cardBackShrineOfferFinesse","cardBackShrineOfferForce","cardBackShrineOfferMind","cardBack","cardBackShrineIgnore","_dragOverlay","_dragOverlayController","Card","onDragCancel","DragOverlayController","_dragOverlayModuleScss","drag","_encounters","_chapter1","_chapter2","_chapter3","cardControllerManager","cardSlotControllerManager","battleEncounterControllerManager","eventEncounterControllerManager","originalFace","say","battle","perform","playerDead","finishEndTurn","endTurn","startTurn","returnCardToDeck","cardUsages","applyUsages","playedCardUsages","effectDirection","newCards","moveTo","cardAndCardSlot","upgradeCard","defaultPlayerCharacter","chapters","chapterPrelude","chapterStore","chapterForest","chapterRuins","selectedCardSlot","hydrateEncounter","battleEncounter","eventEncounter","appear","flippableCardSlots","isAutoFlippable","draw","pageDeckGetter","pageDeckSetter","encounterDeck","availableSlots","slot","availableDraw","drawnCards","deckPosition","cardPosition","playedCardSlot","monsterDead","die","disappear","pageDeckHolder","playerDeckHolder","processCardSlot","inPlayerHand","cardSlotController","playerDeath","paymentFace","isFlipped","isInPlayerHand","isFullyUsed","drawDeck","discardDeck","endOfDeck","forceAnimateReturnToDeck","targetDeck","animateReturnToDeck","getDeck","setDeck","deckLength","playerSlotIndex","bookSlotIndex","moveFrom","_force","_finesse","_dodge","_kick","_mind","cardForceRandom","cardDodge","cardMindLazy","cardFinesseLazy","cardKick","cardDefinitionForce1","cardDefinitionForce3","cardDefinitionForce5","cardDefinitionForce7","cardForceEager","cardDefinitionForceRandom","cardDefinitionForceLazy","cardForceLazy","cardDefinitionForceLazy2x","cardForceLazy2x","cardBackForceEager","cardFrontForceEager","cardBackForceRandom","cardFrontForceRandom","cardBackForceLazy","cardFrontForceLazy","cardBackForceLazy2x","cardFrontForceLazy2x","cardDefinitionFinesseLazy","cardDefinitionFinesseEager","cardFinesseEager","cardDefinitionFinesseMartialTraining","cardBackFinesseLazy","cardFrontFinesseLazy","cardBackFinesseEager","cardFrontFinesseEager","cardBackFinesseMartialTraining","cardFrontFinesseMartialTraining","cardDefinitionDodge","cardBackDodge","cardFrontDodge","cardDefinitionKick","cardBackKick","cardFrontKick","cardDefinitionMindLazy","cardDefinitionMindEager","cardMindEager","cardBackMindLazy","cardFrontMindLazy","cardBackMindEager","cardFrontMindEager","_initial1","_cards1","_cards2","_cards3","_cards4","_initial2","_initial3","_initial4","defaultRat","defaultTroll","defaultSnail","defaultRooster","defaultDummy","hydrateMonster","fountainCards","fountainIgnore","magicTreeCards","mushroomCards","mushroomIgnore","shrineCards","shrineIgnore","itemCards","ignoreCards","cardFrontRatBite","cardFrontRatScreech","cardFrontRatCower","cardBackRatBeligerence","cardBackRatFurtiveMovement","cardBackRatScurrying","cardFrontTrollSmash","cardFrontTrollOdour","cardFrontTrollRegeneration","cardBackTrollAggression","cardBackTrollSurprise","cardBackTrollRetaliation","cardFrontFountainWater","cardFrontFountainPoison","cardFrontFountainHealing","cardFrontFountainYouth","cardFrontFountainIgnore","cardBackFountainDrink","cardBackFountainDrink2","cardBackFountainIgnore","cardFrontMagicTreeGoldenApple","cardFrontMagicTreeGreenApple","cardFrontMagicTreeRedApple","cardBackMagicTreePickFruit","cardBackMagicTreeShakeTree","cardBackMagicTreeGatherFruit","cardFrontSnailBite","cardFrontSnailHide","cardBackSnailExtend","cardBackSnailRetract","cardFrontMushroomBenign","cardFrontMushroomForce","cardFrontMushroomPoison","cardFrontMushroomFinesse","cardFrontMushroomMind","cardFrontMushroomMagic","cardFrontMushroomYouth","cardFrontMushroomMaturity","cardFrontMushroomHealing","cardFrontMushroomIgnore","cardBackMushroomBlue","cardBackMushroomRed","cardBackMushroomFamiliar","cardBackMushroomIgnore","_headbutt","_shield","_torch","cardHeadbutt","cardBlock","cardDeflect","cardTorch","cardBackItemIgnore","cardFront","cardDefinitionHeadbutt","cardBackHeadbutt","cardFrontHeadbutt","cardDefinitionBlock","cardDefinitionDeflect","cardBackBlock","cardFrontBlock","cardBackDeflect","cardFrontDeflect","cardDefinitionTorch","cardBackTorch","cardFrontTorch","cardFrontRoosterClaw","cardFrontRoosterCrow","cardFrontRoosterEvade","cardBackRoosterTerritorial","cardBackRoosterIntimidation","cardFrontDummyDefend","cardFrontDummyHardWork","cardFrontDummyGiveUp","cardBackDummy","cardBackDarkenedPath","cardBackOvergrownPath","cardBackPath","cardFrontPath","cardFrontBrambles","cardFrontMagicTree","cardFrontMushroom","cardFrontAttributesWarrior","cardFrontAttributesFinesse","cardFrontAttributesMind","_sword","cardBackAttributes","cardDefinitionSlash","cardDefinitionRiposte","cardDefinitionQuckThrust","cardDefinitionClumsyThrust","cardSlash","cardRiposte","cardQuickThrust","cardClumsyThrust","cardBackSlash","cardFrontSlash","cardBackRiposte","cardFrontRiposte","cardBackQuickThrust","cardFrontQuickThrust","cardBackClumsyThrust","cardFrontClumsyThrust","treasureCard","cardBackTreasure","_deck","_deckController","DeckComponent","DeckController","_deckModuleScss","_statusOverlay","_entityHealth","_narration","_entityAge","EntityHealthComponent","EntityAgeComponent","words","text","spoken","substring","characterIndex","narration","NarrationComponent","_statusOverlayModuleScss","overlay","_entityHealthModuleScss","small","filled","_narrationModuleScss","word","visible","_entityAgeModuleScss","_encounterBattle","MonsterComponent","createMonster","EncounterBattleComponent","createRatEntity","createTrollEntity","createSnailEntity","createRoosterEntity","createDummyEntity","_rigidEntityController","createRigidEntity","Attack","Special","Block","createUnicodeEntity","_rigidEntity","actions","EntityComponent","entityController","rigidEntityUI","activeAnimation","RigidEntityController","RigidEntityComponent","Appear","Disappear","TakeDamage","Die","fallbackAnimation","dynamicEntityController","performAnimation","dynamicAnimation","_rigidEntityModuleScss","appearAnimation","attackAnimation","dieAnimation","specialAnimation","blockAnimation","onAnimationEnd","entity","idle","attack","block","special","inner","_unicodeEntity","UnicodeEntityComponent","_unicodeEntityModuleScss","_encounterBattleModuleScss","_encounterEvent","createFountainEntity","createMagicTreeEntity","createMushroomEntity","createShrineEntity","createTreasureEntity","createShopEntity","createEncounterEntity","EncounterEventComponent","_encounterEventModuleScss","battleComponentManager","eventComponentManager","encounterComponents","splitter","previousPromise","textSetter","textGetter","characterIndexSetter","characterIndexGetter","cachedUtterances","onvoiceschanged","cachedVoice","voice","calculateVoice","voices","getVoices","bestVoices","lang","bestVoice","defaultVoice","utterance","calculateUtterance","speak","SpeechSynthesisUtterance","log","rate","pitch","ticks","endsWith","lastSpoke","Date"],"version":3,"file":"index.fd5ee49f.js.map"}